function zw(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var Ao=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ww(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qp={exports:{}},Nc={},$p={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oa=Symbol.for("react.element"),Hw=Symbol.for("react.portal"),Gw=Symbol.for("react.fragment"),Xw=Symbol.for("react.strict_mode"),Kw=Symbol.for("react.profiler"),qw=Symbol.for("react.provider"),$w=Symbol.for("react.context"),Yw=Symbol.for("react.forward_ref"),Zw=Symbol.for("react.suspense"),Qw=Symbol.for("react.memo"),Jw=Symbol.for("react.lazy"),W0=Symbol.iterator;function ev(t){return t===null||typeof t!="object"?null:(t=W0&&t[W0]||t["@@iterator"],typeof t=="function"?t:null)}var Yp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zp=Object.assign,Qp={};function io(t,e,n){this.props=t,this.context=e,this.refs=Qp,this.updater=n||Yp}io.prototype.isReactComponent={};io.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};io.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jp(){}Jp.prototype=io.prototype;function Fd(t,e,n){this.props=t,this.context=e,this.refs=Qp,this.updater=n||Yp}var Ud=Fd.prototype=new Jp;Ud.constructor=Fd;Zp(Ud,io.prototype);Ud.isPureReactComponent=!0;var H0=Array.isArray,em=Object.prototype.hasOwnProperty,Vd={current:null},tm={key:!0,ref:!0,__self:!0,__source:!0};function nm(t,e,n){var s,a={},l=null,h=null;if(e!=null)for(s in e.ref!==void 0&&(h=e.ref),e.key!==void 0&&(l=""+e.key),e)em.call(e,s)&&!tm.hasOwnProperty(s)&&(a[s]=e[s]);var g=arguments.length-2;if(g===1)a.children=n;else if(1<g){for(var p=Array(g),m=0;m<g;m++)p[m]=arguments[m+2];a.children=p}if(t&&t.defaultProps)for(s in g=t.defaultProps,g)a[s]===void 0&&(a[s]=g[s]);return{$$typeof:Oa,type:t,key:l,ref:h,props:a,_owner:Vd.current}}function tv(t,e){return{$$typeof:Oa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oa}function nv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var G0=/\/+/g;function bu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nv(""+t.key):e.toString(36)}function Il(t,e,n,s,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var h=!1;if(t===null)h=!0;else switch(l){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case Oa:case Hw:h=!0}}if(h)return h=t,a=a(h),t=s===""?"."+bu(h,0):s,H0(a)?(n="",t!=null&&(n=t.replace(G0,"$&/")+"/"),Il(a,e,n,"",function(m){return m})):a!=null&&(zd(a)&&(a=tv(a,n+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(G0,"$&/")+"/")+t)),e.push(a)),1;if(h=0,s=s===""?".":s+":",H0(t))for(var g=0;g<t.length;g++){l=t[g];var p=s+bu(l,g);h+=Il(l,e,n,p,a)}else if(p=ev(t),typeof p=="function")for(t=p.call(t),g=0;!(l=t.next()).done;)l=l.value,p=s+bu(l,g++),h+=Il(l,e,n,p,a);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return h}function nl(t,e,n){if(t==null)return t;var s=[],a=0;return Il(t,s,"","",function(l){return e.call(n,l,a++)}),s}function rv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},Nl={transition:null},sv={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Nl,ReactCurrentOwner:Vd};function rm(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:nl,forEach:function(t,e,n){nl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nl(t,function(){e++}),e},toArray:function(t){return nl(t,function(e){return e})||[]},only:function(t){if(!zd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=io;ke.Fragment=Gw;ke.Profiler=Kw;ke.PureComponent=Fd;ke.StrictMode=Xw;ke.Suspense=Zw;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sv;ke.act=rm;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Zp({},t.props),a=t.key,l=t.ref,h=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,h=Vd.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var g=t.type.defaultProps;for(p in e)em.call(e,p)&&!tm.hasOwnProperty(p)&&(s[p]=e[p]===void 0&&g!==void 0?g[p]:e[p])}var p=arguments.length-2;if(p===1)s.children=n;else if(1<p){g=Array(p);for(var m=0;m<p;m++)g[m]=arguments[m+2];s.children=g}return{$$typeof:Oa,type:t.type,key:a,ref:l,props:s,_owner:h}};ke.createContext=function(t){return t={$$typeof:$w,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qw,_context:t},t.Consumer=t};ke.createElement=nm;ke.createFactory=function(t){var e=nm.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:Yw,render:t}};ke.isValidElement=zd;ke.lazy=function(t){return{$$typeof:Jw,_payload:{_status:-1,_result:t},_init:rv}};ke.memo=function(t,e){return{$$typeof:Qw,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=Nl.transition;Nl.transition={};try{t()}finally{Nl.transition=e}};ke.unstable_act=rm;ke.useCallback=function(t,e){return rn.current.useCallback(t,e)};ke.useContext=function(t){return rn.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};ke.useEffect=function(t,e){return rn.current.useEffect(t,e)};ke.useId=function(){return rn.current.useId()};ke.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return rn.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};ke.useRef=function(t){return rn.current.useRef(t)};ke.useState=function(t){return rn.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return rn.current.useTransition()};ke.version="18.3.1";$p.exports=ke;var X=$p.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv=X,ov=Symbol.for("react.element"),av=Symbol.for("react.fragment"),lv=Object.prototype.hasOwnProperty,cv=iv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uv={key:!0,ref:!0,__self:!0,__source:!0};function sm(t,e,n){var s,a={},l=null,h=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(h=e.ref);for(s in e)lv.call(e,s)&&!uv.hasOwnProperty(s)&&(a[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)a[s]===void 0&&(a[s]=e[s]);return{$$typeof:ov,type:t,key:l,ref:h,props:a,_owner:cv.current}}Nc.Fragment=av;Nc.jsx=sm;Nc.jsxs=sm;qp.exports=Nc;var w=qp.exports,im={exports:{}},In={},om={exports:{}},am={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,de){var ye=J.length;J.push(de);e:for(;0<ye;){var tt=ye-1>>>1,Pe=J[tt];if(0<a(Pe,de))J[tt]=de,J[ye]=Pe,ye=tt;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var de=J[0],ye=J.pop();if(ye!==de){J[0]=ye;e:for(var tt=0,Pe=J.length,kn=Pe>>>1;tt<kn;){var st=2*(tt+1)-1,ws=J[st],fe=st+1,Fr=J[fe];if(0>a(ws,ye))fe<Pe&&0>a(Fr,ws)?(J[tt]=Fr,J[fe]=ye,tt=fe):(J[tt]=ws,J[st]=ye,tt=st);else if(fe<Pe&&0>a(Fr,ye))J[tt]=Fr,J[fe]=ye,tt=fe;else break e}}return de}function a(J,de){var ye=J.sortIndex-de.sortIndex;return ye!==0?ye:J.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var h=Date,g=h.now();t.unstable_now=function(){return h.now()-g}}var p=[],m=[],v=1,b=null,C=3,T=!1,R=!1,P=!1,M=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(J){for(var de=n(m);de!==null;){if(de.callback===null)s(m);else if(de.startTime<=J)s(m),de.sortIndex=de.expirationTime,e(p,de);else break;de=n(m)}}function j(J){if(P=!1,A(J),!R)if(n(p)!==null)R=!0,Te(U);else{var de=n(m);de!==null&&re(j,de.startTime-J)}}function U(J,de){R=!1,P&&(P=!1,k(V),V=-1),T=!0;var ye=C;try{for(A(de),b=n(p);b!==null&&(!(b.expirationTime>de)||J&&!xe());){var tt=b.callback;if(typeof tt=="function"){b.callback=null,C=b.priorityLevel;var Pe=tt(b.expirationTime<=de);de=t.unstable_now(),typeof Pe=="function"?b.callback=Pe:b===n(p)&&s(p),A(de)}else s(p);b=n(p)}if(b!==null)var kn=!0;else{var st=n(m);st!==null&&re(j,st.startTime-de),kn=!1}return kn}finally{b=null,C=ye,T=!1}}var z=!1,L=null,V=-1,K=5,Z=-1;function xe(){return!(t.unstable_now()-Z<K)}function ue(){if(L!==null){var J=t.unstable_now();Z=J;var de=!0;try{de=L(!0,J)}finally{de?oe():(z=!1,L=null)}}else z=!1}var oe;if(typeof I=="function")oe=function(){I(ue)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,W=se.port2;se.port1.onmessage=ue,oe=function(){W.postMessage(null)}}else oe=function(){M(ue,0)};function Te(J){L=J,z||(z=!0,oe())}function re(J,de){V=M(function(){J(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){R||T||(R=!0,Te(U))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return n(p)},t.unstable_next=function(J){switch(C){case 1:case 2:case 3:var de=3;break;default:de=C}var ye=C;C=de;try{return J()}finally{C=ye}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,de){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ye=C;C=J;try{return de()}finally{C=ye}},t.unstable_scheduleCallback=function(J,de,ye){var tt=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?tt+ye:tt):ye=tt,J){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ye+Pe,J={id:v++,callback:de,priorityLevel:J,startTime:ye,expirationTime:Pe,sortIndex:-1},ye>tt?(J.sortIndex=ye,e(m,J),n(p)===null&&J===n(m)&&(P?(k(V),V=-1):P=!0,re(j,ye-tt))):(J.sortIndex=Pe,e(p,J),R||T||(R=!0,Te(U))),J},t.unstable_shouldYield=xe,t.unstable_wrapCallback=function(J){var de=C;return function(){var ye=C;C=de;try{return J.apply(this,arguments)}finally{C=ye}}}})(am);om.exports=am;var hv=om.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv=X,_n=hv;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lm=new Set,ra={};function $s(t,e){qi(t,e),qi(t+"Capture",e)}function qi(t,e){for(ra[t]=e,t=0;t<e.length;t++)lm.add(e[t])}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ph=Object.prototype.hasOwnProperty,fv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X0={},K0={};function gv(t){return ph.call(K0,t)?!0:ph.call(X0,t)?!1:fv.test(t)?K0[t]=!0:(X0[t]=!0,!1)}function pv(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mv(t,e,n,s){if(e===null||typeof e>"u"||pv(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,s,a,l,h){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=h}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wd=/[\-:]([a-z])/g;function Hd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wd,Hd);Ht[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wd,Hd);Ht[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wd,Hd);Ht[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gd(t,e,n,s){var a=Ht.hasOwnProperty(e)?Ht[e]:null;(a!==null?a.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mv(e,n,a,s)&&(n=null),s||a===null?gv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,s=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Lr=dv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rl=Symbol.for("react.element"),vi=Symbol.for("react.portal"),bi=Symbol.for("react.fragment"),Xd=Symbol.for("react.strict_mode"),mh=Symbol.for("react.profiler"),cm=Symbol.for("react.provider"),um=Symbol.for("react.context"),Kd=Symbol.for("react.forward_ref"),xh=Symbol.for("react.suspense"),yh=Symbol.for("react.suspense_list"),qd=Symbol.for("react.memo"),$r=Symbol.for("react.lazy"),hm=Symbol.for("react.offscreen"),q0=Symbol.iterator;function So(t){return t===null||typeof t!="object"?null:(t=q0&&t[q0]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,Eu;function Do(t){if(Eu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Eu=e&&e[1]||""}return`
`+Eu+t}var Cu=!1;function Au(t,e){if(!t||Cu)return"";Cu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var s=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){s=m}t.call(e.prototype)}else{try{throw Error()}catch(m){s=m}t()}}catch(m){if(m&&s&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),l=s.stack.split(`
`),h=a.length-1,g=l.length-1;1<=h&&0<=g&&a[h]!==l[g];)g--;for(;1<=h&&0<=g;h--,g--)if(a[h]!==l[g]){if(h!==1||g!==1)do if(h--,g--,0>g||a[h]!==l[g]){var p=`
`+a[h].replace(" at new "," at ");return t.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",t.displayName)),p}while(1<=h&&0<=g);break}}}finally{Cu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Do(t):""}function xv(t){switch(t.tag){case 5:return Do(t.type);case 16:return Do("Lazy");case 13:return Do("Suspense");case 19:return Do("SuspenseList");case 0:case 2:case 15:return t=Au(t.type,!1),t;case 11:return t=Au(t.type.render,!1),t;case 1:return t=Au(t.type,!0),t;default:return""}}function wh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bi:return"Fragment";case vi:return"Portal";case mh:return"Profiler";case Xd:return"StrictMode";case xh:return"Suspense";case yh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case um:return(t.displayName||"Context")+".Consumer";case cm:return(t._context.displayName||"Context")+".Provider";case Kd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qd:return e=t.displayName||null,e!==null?e:wh(t.type)||"Memo";case $r:e=t._payload,t=t._init;try{return wh(t(e))}catch{}}return null}function yv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wh(e);case 8:return e===Xd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wv(t){var e=dm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(h){s=""+h,l.call(this,h)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(h){s=""+h},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sl(t){t._valueTracker||(t._valueTracker=wv(t))}function fm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=dm(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Gl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vh(t,e){var n=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $0(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=hs(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gm(t,e){e=e.checked,e!=null&&Gd(t,"checked",e,!1)}function bh(t,e){gm(t,e);var n=hs(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Eh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Eh(t,e.type,hs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Y0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Eh(t,e,n){(e!=="number"||Gl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mo=Array.isArray;function Ui(t,e,n,s){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&s&&(t[n].defaultSelected=!0)}else{for(n=""+hs(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Ch(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Z0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Mo(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hs(n)}}function pm(t,e){var n=hs(e.value),s=hs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function Q0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ah(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var il,xm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(il=il||document.createElement("div"),il.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=il.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function sa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vv=["Webkit","ms","Moz","O"];Object.keys(zo).forEach(function(t){vv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zo[e]=zo[t]})});function ym(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zo.hasOwnProperty(t)&&zo[t]?(""+e).trim():e+"px"}function wm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=ym(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,a):t[n]=a}}var bv=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sh(t,e){if(e){if(bv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function _h(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Th=null;function $d(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ih=null,Vi=null,zi=null;function J0(t){if(t=Ma(t)){if(typeof Ih!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Dc(e),Ih(t.stateNode,t.type,e))}}function vm(t){Vi?zi?zi.push(t):zi=[t]:Vi=t}function bm(){if(Vi){var t=Vi,e=zi;if(zi=Vi=null,J0(t),e)for(t=0;t<e.length;t++)J0(e[t])}}function Em(t,e){return t(e)}function Cm(){}var Su=!1;function Am(t,e,n){if(Su)return t(e,n);Su=!0;try{return Em(t,e,n)}finally{Su=!1,(Vi!==null||zi!==null)&&(Cm(),bm())}}function ia(t,e){var n=t.stateNode;if(n===null)return null;var s=Dc(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Nh=!1;if(kr)try{var _o={};Object.defineProperty(_o,"passive",{get:function(){Nh=!0}}),window.addEventListener("test",_o,_o),window.removeEventListener("test",_o,_o)}catch{Nh=!1}function Ev(t,e,n,s,a,l,h,g,p){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(v){this.onError(v)}}var Wo=!1,Xl=null,Kl=!1,kh=null,Cv={onError:function(t){Wo=!0,Xl=t}};function Av(t,e,n,s,a,l,h,g,p){Wo=!1,Xl=null,Ev.apply(Cv,arguments)}function Sv(t,e,n,s,a,l,h,g,p){if(Av.apply(this,arguments),Wo){if(Wo){var m=Xl;Wo=!1,Xl=null}else throw Error(ee(198));Kl||(Kl=!0,kh=m)}}function Ys(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function e1(t){if(Ys(t)!==t)throw Error(ee(188))}function _v(t){var e=t.alternate;if(!e){if(e=Ys(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,s=e;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return e1(a),t;if(l===s)return e1(a),e;l=l.sibling}throw Error(ee(188))}if(n.return!==s.return)n=a,s=l;else{for(var h=!1,g=a.child;g;){if(g===n){h=!0,n=a,s=l;break}if(g===s){h=!0,s=a,n=l;break}g=g.sibling}if(!h){for(g=l.child;g;){if(g===n){h=!0,n=l,s=a;break}if(g===s){h=!0,s=l,n=a;break}g=g.sibling}if(!h)throw Error(ee(189))}}if(n.alternate!==s)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function _m(t){return t=_v(t),t!==null?Tm(t):null}function Tm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Tm(t);if(e!==null)return e;t=t.sibling}return null}var Im=_n.unstable_scheduleCallback,t1=_n.unstable_cancelCallback,Tv=_n.unstable_shouldYield,Iv=_n.unstable_requestPaint,vt=_n.unstable_now,Nv=_n.unstable_getCurrentPriorityLevel,Yd=_n.unstable_ImmediatePriority,Nm=_n.unstable_UserBlockingPriority,ql=_n.unstable_NormalPriority,kv=_n.unstable_LowPriority,km=_n.unstable_IdlePriority,kc=null,pr=null;function Rv(t){if(pr&&typeof pr.onCommitFiberRoot=="function")try{pr.onCommitFiberRoot(kc,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:Dv,Ov=Math.log,Pv=Math.LN2;function Dv(t){return t>>>=0,t===0?32:31-(Ov(t)/Pv|0)|0}var ol=64,al=4194304;function jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $l(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,a=t.suspendedLanes,l=t.pingedLanes,h=n&268435455;if(h!==0){var g=h&~a;g!==0?s=jo(g):(l&=h,l!==0&&(s=jo(l)))}else h=n&~a,h!==0?s=jo(h):l!==0&&(s=jo(l));if(s===0)return 0;if(e!==0&&e!==s&&!(e&a)&&(a=s&-s,l=e&-e,a>=l||a===16&&(l&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-er(e),a=1<<n,s|=t[n],e&=~a;return s}function Mv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jv(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var h=31-er(l),g=1<<h,p=a[h];p===-1?(!(g&n)||g&s)&&(a[h]=Mv(g,e)):p<=e&&(t.expiredLanes|=g),l&=~g}}function Rh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Rm(){var t=ol;return ol<<=1,!(ol&4194240)&&(ol=64),t}function _u(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=n}function Lv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-er(n),l=1<<a;e[a]=0,s[a]=-1,t[a]=-1,n&=~l}}function Zd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-er(n),a=1<<s;a&e|t[s]&e&&(t[s]|=e),n&=~a}}var Ve=0;function Om(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Pm,Qd,Dm,Mm,jm,Oh=!1,ll=[],rs=null,ss=null,is=null,oa=new Map,aa=new Map,Qr=[],Bv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n1(t,e){switch(t){case"focusin":case"focusout":rs=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":aa.delete(e.pointerId)}}function To(t,e,n,s,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:l,targetContainers:[a]},e!==null&&(e=Ma(e),e!==null&&Qd(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Fv(t,e,n,s,a){switch(e){case"focusin":return rs=To(rs,t,e,n,s,a),!0;case"dragenter":return ss=To(ss,t,e,n,s,a),!0;case"mouseover":return is=To(is,t,e,n,s,a),!0;case"pointerover":var l=a.pointerId;return oa.set(l,To(oa.get(l)||null,t,e,n,s,a)),!0;case"gotpointercapture":return l=a.pointerId,aa.set(l,To(aa.get(l)||null,t,e,n,s,a)),!0}return!1}function Lm(t){var e=js(t.target);if(e!==null){var n=Ys(e);if(n!==null){if(e=n.tag,e===13){if(e=Sm(n),e!==null){t.blockedOn=e,jm(t.priority,function(){Dm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ph(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Th=s,n.target.dispatchEvent(s),Th=null}else return e=Ma(n),e!==null&&Qd(e),t.blockedOn=n,!1;e.shift()}return!0}function r1(t,e,n){kl(t)&&n.delete(e)}function Uv(){Oh=!1,rs!==null&&kl(rs)&&(rs=null),ss!==null&&kl(ss)&&(ss=null),is!==null&&kl(is)&&(is=null),oa.forEach(r1),aa.forEach(r1)}function Io(t,e){t.blockedOn===e&&(t.blockedOn=null,Oh||(Oh=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,Uv)))}function la(t){function e(a){return Io(a,t)}if(0<ll.length){Io(ll[0],t);for(var n=1;n<ll.length;n++){var s=ll[n];s.blockedOn===t&&(s.blockedOn=null)}}for(rs!==null&&Io(rs,t),ss!==null&&Io(ss,t),is!==null&&Io(is,t),oa.forEach(e),aa.forEach(e),n=0;n<Qr.length;n++)s=Qr[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Qr.length&&(n=Qr[0],n.blockedOn===null);)Lm(n),n.blockedOn===null&&Qr.shift()}var Wi=Lr.ReactCurrentBatchConfig,Yl=!0;function Vv(t,e,n,s){var a=Ve,l=Wi.transition;Wi.transition=null;try{Ve=1,Jd(t,e,n,s)}finally{Ve=a,Wi.transition=l}}function zv(t,e,n,s){var a=Ve,l=Wi.transition;Wi.transition=null;try{Ve=4,Jd(t,e,n,s)}finally{Ve=a,Wi.transition=l}}function Jd(t,e,n,s){if(Yl){var a=Ph(t,e,n,s);if(a===null)ju(t,e,s,Zl,n),n1(t,s);else if(Fv(a,t,e,n,s))s.stopPropagation();else if(n1(t,s),e&4&&-1<Bv.indexOf(t)){for(;a!==null;){var l=Ma(a);if(l!==null&&Pm(l),l=Ph(t,e,n,s),l===null&&ju(t,e,s,Zl,n),l===a)break;a=l}a!==null&&s.stopPropagation()}else ju(t,e,s,null,n)}}var Zl=null;function Ph(t,e,n,s){if(Zl=null,t=$d(s),t=js(t),t!==null)if(e=Ys(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zl=t,null}function Bm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nv()){case Yd:return 1;case Nm:return 4;case ql:case kv:return 16;case km:return 536870912;default:return 16}default:return 16}}var ts=null,ef=null,Rl=null;function Fm(){if(Rl)return Rl;var t,e=ef,n=e.length,s,a="value"in ts?ts.value:ts.textContent,l=a.length;for(t=0;t<n&&e[t]===a[t];t++);var h=n-t;for(s=1;s<=h&&e[n-s]===a[l-s];s++);return Rl=a.slice(t,1<s?1-s:void 0)}function Ol(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cl(){return!0}function s1(){return!1}function Nn(t){function e(n,s,a,l,h){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=l,this.target=h,this.currentTarget=null;for(var g in t)t.hasOwnProperty(g)&&(n=t[g],this[g]=n?n(l):l[g]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?cl:s1,this.isPropagationStopped=s1,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cl)},persist:function(){},isPersistent:cl}),e}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tf=Nn(oo),Da=ut({},oo,{view:0,detail:0}),Wv=Nn(Da),Tu,Iu,No,Rc=ut({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==No&&(No&&t.type==="mousemove"?(Tu=t.screenX-No.screenX,Iu=t.screenY-No.screenY):Iu=Tu=0,No=t),Tu)},movementY:function(t){return"movementY"in t?t.movementY:Iu}}),i1=Nn(Rc),Hv=ut({},Rc,{dataTransfer:0}),Gv=Nn(Hv),Xv=ut({},Da,{relatedTarget:0}),Nu=Nn(Xv),Kv=ut({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),qv=Nn(Kv),$v=ut({},oo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yv=Nn($v),Zv=ut({},oo,{data:0}),o1=Nn(Zv),Qv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eb[t])?!!e[t]:!1}function nf(){return tb}var nb=ut({},Da,{key:function(t){if(t.key){var e=Qv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ol(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Jv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nf,charCode:function(t){return t.type==="keypress"?Ol(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ol(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rb=Nn(nb),sb=ut({},Rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a1=Nn(sb),ib=ut({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nf}),ob=Nn(ib),ab=ut({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),lb=Nn(ab),cb=ut({},Rc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ub=Nn(cb),hb=[9,13,27,32],rf=kr&&"CompositionEvent"in window,Ho=null;kr&&"documentMode"in document&&(Ho=document.documentMode);var db=kr&&"TextEvent"in window&&!Ho,Um=kr&&(!rf||Ho&&8<Ho&&11>=Ho),l1=" ",c1=!1;function Vm(t,e){switch(t){case"keyup":return hb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ei=!1;function fb(t,e){switch(t){case"compositionend":return zm(e);case"keypress":return e.which!==32?null:(c1=!0,l1);case"textInput":return t=e.data,t===l1&&c1?null:t;default:return null}}function gb(t,e){if(Ei)return t==="compositionend"||!rf&&Vm(t,e)?(t=Fm(),Rl=ef=ts=null,Ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Um&&e.locale!=="ko"?null:e.data;default:return null}}var pb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pb[t.type]:e==="textarea"}function Wm(t,e,n,s){vm(s),e=Ql(e,"onChange"),0<e.length&&(n=new tf("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Go=null,ca=null;function mb(t){ex(t,0)}function Oc(t){var e=Si(t);if(fm(e))return t}function xb(t,e){if(t==="change")return e}var Hm=!1;if(kr){var ku;if(kr){var Ru="oninput"in document;if(!Ru){var h1=document.createElement("div");h1.setAttribute("oninput","return;"),Ru=typeof h1.oninput=="function"}ku=Ru}else ku=!1;Hm=ku&&(!document.documentMode||9<document.documentMode)}function d1(){Go&&(Go.detachEvent("onpropertychange",Gm),ca=Go=null)}function Gm(t){if(t.propertyName==="value"&&Oc(ca)){var e=[];Wm(e,ca,t,$d(t)),Am(mb,e)}}function yb(t,e,n){t==="focusin"?(d1(),Go=e,ca=n,Go.attachEvent("onpropertychange",Gm)):t==="focusout"&&d1()}function wb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oc(ca)}function vb(t,e){if(t==="click")return Oc(e)}function bb(t,e){if(t==="input"||t==="change")return Oc(e)}function Eb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:Eb;function ua(t,e){if(nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!ph.call(e,a)||!nr(t[a],e[a]))return!1}return!0}function f1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g1(t,e){var n=f1(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=f1(n)}}function Xm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Km(){for(var t=window,e=Gl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gl(t.document)}return e}function sf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Cb(t){var e=Km(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Xm(n.ownerDocument.documentElement,n)){if(s!==null&&sf(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,l=Math.min(s.start,a);s=s.end===void 0?l:Math.min(s.end,a),!t.extend&&l>s&&(a=s,s=l,l=a),a=g1(n,l);var h=g1(n,s);a&&h&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==h.node||t.focusOffset!==h.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),l>s?(t.addRange(e),t.extend(h.node,h.offset)):(e.setEnd(h.node,h.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ab=kr&&"documentMode"in document&&11>=document.documentMode,Ci=null,Dh=null,Xo=null,Mh=!1;function p1(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mh||Ci==null||Ci!==Gl(s)||(s=Ci,"selectionStart"in s&&sf(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Xo&&ua(Xo,s)||(Xo=s,s=Ql(Dh,"onSelect"),0<s.length&&(e=new tf("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Ci)))}function ul(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ai={animationend:ul("Animation","AnimationEnd"),animationiteration:ul("Animation","AnimationIteration"),animationstart:ul("Animation","AnimationStart"),transitionend:ul("Transition","TransitionEnd")},Ou={},qm={};kr&&(qm=document.createElement("div").style,"AnimationEvent"in window||(delete Ai.animationend.animation,delete Ai.animationiteration.animation,delete Ai.animationstart.animation),"TransitionEvent"in window||delete Ai.transitionend.transition);function Pc(t){if(Ou[t])return Ou[t];if(!Ai[t])return t;var e=Ai[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qm)return Ou[t]=e[n];return t}var $m=Pc("animationend"),Ym=Pc("animationiteration"),Zm=Pc("animationstart"),Qm=Pc("transitionend"),Jm=new Map,m1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(t,e){Jm.set(t,e),$s(e,[t])}for(var Pu=0;Pu<m1.length;Pu++){var Du=m1[Pu],Sb=Du.toLowerCase(),_b=Du[0].toUpperCase()+Du.slice(1);ps(Sb,"on"+_b)}ps($m,"onAnimationEnd");ps(Ym,"onAnimationIteration");ps(Zm,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(Qm,"onTransitionEnd");qi("onMouseEnter",["mouseout","mouseover"]);qi("onMouseLeave",["mouseout","mouseover"]);qi("onPointerEnter",["pointerout","pointerover"]);qi("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lo));function x1(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,Sv(s,e,void 0,t),t.currentTarget=null}function ex(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],a=s.event;s=s.listeners;e:{var l=void 0;if(e)for(var h=s.length-1;0<=h;h--){var g=s[h],p=g.instance,m=g.currentTarget;if(g=g.listener,p!==l&&a.isPropagationStopped())break e;x1(a,g,m),l=p}else for(h=0;h<s.length;h++){if(g=s[h],p=g.instance,m=g.currentTarget,g=g.listener,p!==l&&a.isPropagationStopped())break e;x1(a,g,m),l=p}}}if(Kl)throw t=kh,Kl=!1,kh=null,t}function Ze(t,e){var n=e[Uh];n===void 0&&(n=e[Uh]=new Set);var s=t+"__bubble";n.has(s)||(tx(e,t,2,!1),n.add(s))}function Mu(t,e,n){var s=0;e&&(s|=4),tx(n,t,s,e)}var hl="_reactListening"+Math.random().toString(36).slice(2);function ha(t){if(!t[hl]){t[hl]=!0,lm.forEach(function(n){n!=="selectionchange"&&(Tb.has(n)||Mu(n,!1,t),Mu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hl]||(e[hl]=!0,Mu("selectionchange",!1,e))}}function tx(t,e,n,s){switch(Bm(e)){case 1:var a=Vv;break;case 4:a=zv;break;default:a=Jd}n=a.bind(null,e,n,t),a=void 0,!Nh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function ju(t,e,n,s,a){var l=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var h=s.tag;if(h===3||h===4){var g=s.stateNode.containerInfo;if(g===a||g.nodeType===8&&g.parentNode===a)break;if(h===4)for(h=s.return;h!==null;){var p=h.tag;if((p===3||p===4)&&(p=h.stateNode.containerInfo,p===a||p.nodeType===8&&p.parentNode===a))return;h=h.return}for(;g!==null;){if(h=js(g),h===null)return;if(p=h.tag,p===5||p===6){s=l=h;continue e}g=g.parentNode}}s=s.return}Am(function(){var m=l,v=$d(n),b=[];e:{var C=Jm.get(t);if(C!==void 0){var T=tf,R=t;switch(t){case"keypress":if(Ol(n)===0)break e;case"keydown":case"keyup":T=rb;break;case"focusin":R="focus",T=Nu;break;case"focusout":R="blur",T=Nu;break;case"beforeblur":case"afterblur":T=Nu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=i1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Gv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=ob;break;case $m:case Ym:case Zm:T=qv;break;case Qm:T=lb;break;case"scroll":T=Wv;break;case"wheel":T=ub;break;case"copy":case"cut":case"paste":T=Yv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=a1}var P=(e&4)!==0,M=!P&&t==="scroll",k=P?C!==null?C+"Capture":null:C;P=[];for(var I=m,A;I!==null;){A=I;var j=A.stateNode;if(A.tag===5&&j!==null&&(A=j,k!==null&&(j=ia(I,k),j!=null&&P.push(da(I,j,A)))),M)break;I=I.return}0<P.length&&(C=new T(C,R,null,n,v),b.push({event:C,listeners:P}))}}if(!(e&7)){e:{if(C=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",C&&n!==Th&&(R=n.relatedTarget||n.fromElement)&&(js(R)||R[Rr]))break e;if((T||C)&&(C=v.window===v?v:(C=v.ownerDocument)?C.defaultView||C.parentWindow:window,T?(R=n.relatedTarget||n.toElement,T=m,R=R?js(R):null,R!==null&&(M=Ys(R),R!==M||R.tag!==5&&R.tag!==6)&&(R=null)):(T=null,R=m),T!==R)){if(P=i1,j="onMouseLeave",k="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(P=a1,j="onPointerLeave",k="onPointerEnter",I="pointer"),M=T==null?C:Si(T),A=R==null?C:Si(R),C=new P(j,I+"leave",T,n,v),C.target=M,C.relatedTarget=A,j=null,js(v)===m&&(P=new P(k,I+"enter",R,n,v),P.target=A,P.relatedTarget=M,j=P),M=j,T&&R)t:{for(P=T,k=R,I=0,A=P;A;A=ci(A))I++;for(A=0,j=k;j;j=ci(j))A++;for(;0<I-A;)P=ci(P),I--;for(;0<A-I;)k=ci(k),A--;for(;I--;){if(P===k||k!==null&&P===k.alternate)break t;P=ci(P),k=ci(k)}P=null}else P=null;T!==null&&y1(b,C,T,P,!1),R!==null&&M!==null&&y1(b,M,R,P,!0)}}e:{if(C=m?Si(m):window,T=C.nodeName&&C.nodeName.toLowerCase(),T==="select"||T==="input"&&C.type==="file")var U=xb;else if(u1(C))if(Hm)U=bb;else{U=wb;var z=yb}else(T=C.nodeName)&&T.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(U=vb);if(U&&(U=U(t,m))){Wm(b,U,n,v);break e}z&&z(t,C,m),t==="focusout"&&(z=C._wrapperState)&&z.controlled&&C.type==="number"&&Eh(C,"number",C.value)}switch(z=m?Si(m):window,t){case"focusin":(u1(z)||z.contentEditable==="true")&&(Ci=z,Dh=m,Xo=null);break;case"focusout":Xo=Dh=Ci=null;break;case"mousedown":Mh=!0;break;case"contextmenu":case"mouseup":case"dragend":Mh=!1,p1(b,n,v);break;case"selectionchange":if(Ab)break;case"keydown":case"keyup":p1(b,n,v)}var L;if(rf)e:{switch(t){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else Ei?Vm(t,n)&&(V="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(V="onCompositionStart");V&&(Um&&n.locale!=="ko"&&(Ei||V!=="onCompositionStart"?V==="onCompositionEnd"&&Ei&&(L=Fm()):(ts=v,ef="value"in ts?ts.value:ts.textContent,Ei=!0)),z=Ql(m,V),0<z.length&&(V=new o1(V,t,null,n,v),b.push({event:V,listeners:z}),L?V.data=L:(L=zm(n),L!==null&&(V.data=L)))),(L=db?fb(t,n):gb(t,n))&&(m=Ql(m,"onBeforeInput"),0<m.length&&(v=new o1("onBeforeInput","beforeinput",null,n,v),b.push({event:v,listeners:m}),v.data=L))}ex(b,e)})}function da(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ql(t,e){for(var n=e+"Capture",s=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=ia(t,n),l!=null&&s.unshift(da(t,l,a)),l=ia(t,e),l!=null&&s.push(da(t,l,a))),t=t.return}return s}function ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function y1(t,e,n,s,a){for(var l=e._reactName,h=[];n!==null&&n!==s;){var g=n,p=g.alternate,m=g.stateNode;if(p!==null&&p===s)break;g.tag===5&&m!==null&&(g=m,a?(p=ia(n,l),p!=null&&h.unshift(da(n,p,g))):a||(p=ia(n,l),p!=null&&h.push(da(n,p,g)))),n=n.return}h.length!==0&&t.push({event:e,listeners:h})}var Ib=/\r\n?/g,Nb=/\u0000|\uFFFD/g;function w1(t){return(typeof t=="string"?t:""+t).replace(Ib,`
`).replace(Nb,"")}function dl(t,e,n){if(e=w1(e),w1(t)!==e&&n)throw Error(ee(425))}function Jl(){}var jh=null,Lh=null;function Bh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fh=typeof setTimeout=="function"?setTimeout:void 0,kb=typeof clearTimeout=="function"?clearTimeout:void 0,v1=typeof Promise=="function"?Promise:void 0,Rb=typeof queueMicrotask=="function"?queueMicrotask:typeof v1<"u"?function(t){return v1.resolve(null).then(t).catch(Ob)}:Fh;function Ob(t){setTimeout(function(){throw t})}function Lu(t,e){var n=e,s=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){t.removeChild(a),la(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);la(e)}function os(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function b1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ao=Math.random().toString(36).slice(2),gr="__reactFiber$"+ao,fa="__reactProps$"+ao,Rr="__reactContainer$"+ao,Uh="__reactEvents$"+ao,Pb="__reactListeners$"+ao,Db="__reactHandles$"+ao;function js(t){var e=t[gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rr]||n[gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=b1(t);t!==null;){if(n=t[gr])return n;t=b1(t)}return e}t=n,n=t.parentNode}return null}function Ma(t){return t=t[gr]||t[Rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Si(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Dc(t){return t[fa]||null}var Vh=[],_i=-1;function ms(t){return{current:t}}function Je(t){0>_i||(t.current=Vh[_i],Vh[_i]=null,_i--)}function $e(t,e){_i++,Vh[_i]=t.current,t.current=e}var ds={},Qt=ms(ds),gn=ms(!1),Hs=ds;function $i(t,e){var n=t.type.contextTypes;if(!n)return ds;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=e[l];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function pn(t){return t=t.childContextTypes,t!=null}function ec(){Je(gn),Je(Qt)}function E1(t,e,n){if(Qt.current!==ds)throw Error(ee(168));$e(Qt,e),$e(gn,n)}function nx(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in e))throw Error(ee(108,yv(t)||"Unknown",a));return ut({},n,s)}function tc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ds,Hs=Qt.current,$e(Qt,t),$e(gn,gn.current),!0}function C1(t,e,n){var s=t.stateNode;if(!s)throw Error(ee(169));n?(t=nx(t,e,Hs),s.__reactInternalMemoizedMergedChildContext=t,Je(gn),Je(Qt),$e(Qt,t)):Je(gn),$e(gn,n)}var Ar=null,Mc=!1,Bu=!1;function rx(t){Ar===null?Ar=[t]:Ar.push(t)}function Mb(t){Mc=!0,rx(t)}function xs(){if(!Bu&&Ar!==null){Bu=!0;var t=0,e=Ve;try{var n=Ar;for(Ve=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Ar=null,Mc=!1}catch(a){throw Ar!==null&&(Ar=Ar.slice(t+1)),Im(Yd,xs),a}finally{Ve=e,Bu=!1}}return null}var Ti=[],Ii=0,nc=null,rc=0,Ln=[],Bn=0,Gs=null,Sr=1,_r="";function Ns(t,e){Ti[Ii++]=rc,Ti[Ii++]=nc,nc=t,rc=e}function sx(t,e,n){Ln[Bn++]=Sr,Ln[Bn++]=_r,Ln[Bn++]=Gs,Gs=t;var s=Sr;t=_r;var a=32-er(s)-1;s&=~(1<<a),n+=1;var l=32-er(e)+a;if(30<l){var h=a-a%5;l=(s&(1<<h)-1).toString(32),s>>=h,a-=h,Sr=1<<32-er(e)+a|n<<a|s,_r=l+t}else Sr=1<<l|n<<a|s,_r=t}function of(t){t.return!==null&&(Ns(t,1),sx(t,1,0))}function af(t){for(;t===nc;)nc=Ti[--Ii],Ti[Ii]=null,rc=Ti[--Ii],Ti[Ii]=null;for(;t===Gs;)Gs=Ln[--Bn],Ln[Bn]=null,_r=Ln[--Bn],Ln[Bn]=null,Sr=Ln[--Bn],Ln[Bn]=null}var An=null,Cn=null,rt=!1,Jn=null;function ix(t,e){var n=Fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function A1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,An=t,Cn=os(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,An=t,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gs!==null?{id:Sr,overflow:_r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,An=t,Cn=null,!0):!1;default:return!1}}function zh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wh(t){if(rt){var e=Cn;if(e){var n=e;if(!A1(t,e)){if(zh(t))throw Error(ee(418));e=os(n.nextSibling);var s=An;e&&A1(t,e)?ix(s,n):(t.flags=t.flags&-4097|2,rt=!1,An=t)}}else{if(zh(t))throw Error(ee(418));t.flags=t.flags&-4097|2,rt=!1,An=t}}}function S1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;An=t}function fl(t){if(t!==An)return!1;if(!rt)return S1(t),rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bh(t.type,t.memoizedProps)),e&&(e=Cn)){if(zh(t))throw ox(),Error(ee(418));for(;e;)ix(t,e),e=os(e.nextSibling)}if(S1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cn=os(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cn=null}}else Cn=An?os(t.stateNode.nextSibling):null;return!0}function ox(){for(var t=Cn;t;)t=os(t.nextSibling)}function Yi(){Cn=An=null,rt=!1}function lf(t){Jn===null?Jn=[t]:Jn.push(t)}var jb=Lr.ReactCurrentBatchConfig;function ko(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var s=n.stateNode}if(!s)throw Error(ee(147,t));var a=s,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(h){var g=a.refs;h===null?delete g[l]:g[l]=h},e._stringRef=l,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function gl(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _1(t){var e=t._init;return e(t._payload)}function ax(t){function e(k,I){if(t){var A=k.deletions;A===null?(k.deletions=[I],k.flags|=16):A.push(I)}}function n(k,I){if(!t)return null;for(;I!==null;)e(k,I),I=I.sibling;return null}function s(k,I){for(k=new Map;I!==null;)I.key!==null?k.set(I.key,I):k.set(I.index,I),I=I.sibling;return k}function a(k,I){return k=us(k,I),k.index=0,k.sibling=null,k}function l(k,I,A){return k.index=A,t?(A=k.alternate,A!==null?(A=A.index,A<I?(k.flags|=2,I):A):(k.flags|=2,I)):(k.flags|=1048576,I)}function h(k){return t&&k.alternate===null&&(k.flags|=2),k}function g(k,I,A,j){return I===null||I.tag!==6?(I=Gu(A,k.mode,j),I.return=k,I):(I=a(I,A),I.return=k,I)}function p(k,I,A,j){var U=A.type;return U===bi?v(k,I,A.props.children,j,A.key):I!==null&&(I.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===$r&&_1(U)===I.type)?(j=a(I,A.props),j.ref=ko(k,I,A),j.return=k,j):(j=Fl(A.type,A.key,A.props,null,k.mode,j),j.ref=ko(k,I,A),j.return=k,j)}function m(k,I,A,j){return I===null||I.tag!==4||I.stateNode.containerInfo!==A.containerInfo||I.stateNode.implementation!==A.implementation?(I=Xu(A,k.mode,j),I.return=k,I):(I=a(I,A.children||[]),I.return=k,I)}function v(k,I,A,j,U){return I===null||I.tag!==7?(I=zs(A,k.mode,j,U),I.return=k,I):(I=a(I,A),I.return=k,I)}function b(k,I,A){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Gu(""+I,k.mode,A),I.return=k,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case rl:return A=Fl(I.type,I.key,I.props,null,k.mode,A),A.ref=ko(k,null,I),A.return=k,A;case vi:return I=Xu(I,k.mode,A),I.return=k,I;case $r:var j=I._init;return b(k,j(I._payload),A)}if(Mo(I)||So(I))return I=zs(I,k.mode,A,null),I.return=k,I;gl(k,I)}return null}function C(k,I,A,j){var U=I!==null?I.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return U!==null?null:g(k,I,""+A,j);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case rl:return A.key===U?p(k,I,A,j):null;case vi:return A.key===U?m(k,I,A,j):null;case $r:return U=A._init,C(k,I,U(A._payload),j)}if(Mo(A)||So(A))return U!==null?null:v(k,I,A,j,null);gl(k,A)}return null}function T(k,I,A,j,U){if(typeof j=="string"&&j!==""||typeof j=="number")return k=k.get(A)||null,g(I,k,""+j,U);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case rl:return k=k.get(j.key===null?A:j.key)||null,p(I,k,j,U);case vi:return k=k.get(j.key===null?A:j.key)||null,m(I,k,j,U);case $r:var z=j._init;return T(k,I,A,z(j._payload),U)}if(Mo(j)||So(j))return k=k.get(A)||null,v(I,k,j,U,null);gl(I,j)}return null}function R(k,I,A,j){for(var U=null,z=null,L=I,V=I=0,K=null;L!==null&&V<A.length;V++){L.index>V?(K=L,L=null):K=L.sibling;var Z=C(k,L,A[V],j);if(Z===null){L===null&&(L=K);break}t&&L&&Z.alternate===null&&e(k,L),I=l(Z,I,V),z===null?U=Z:z.sibling=Z,z=Z,L=K}if(V===A.length)return n(k,L),rt&&Ns(k,V),U;if(L===null){for(;V<A.length;V++)L=b(k,A[V],j),L!==null&&(I=l(L,I,V),z===null?U=L:z.sibling=L,z=L);return rt&&Ns(k,V),U}for(L=s(k,L);V<A.length;V++)K=T(L,k,V,A[V],j),K!==null&&(t&&K.alternate!==null&&L.delete(K.key===null?V:K.key),I=l(K,I,V),z===null?U=K:z.sibling=K,z=K);return t&&L.forEach(function(xe){return e(k,xe)}),rt&&Ns(k,V),U}function P(k,I,A,j){var U=So(A);if(typeof U!="function")throw Error(ee(150));if(A=U.call(A),A==null)throw Error(ee(151));for(var z=U=null,L=I,V=I=0,K=null,Z=A.next();L!==null&&!Z.done;V++,Z=A.next()){L.index>V?(K=L,L=null):K=L.sibling;var xe=C(k,L,Z.value,j);if(xe===null){L===null&&(L=K);break}t&&L&&xe.alternate===null&&e(k,L),I=l(xe,I,V),z===null?U=xe:z.sibling=xe,z=xe,L=K}if(Z.done)return n(k,L),rt&&Ns(k,V),U;if(L===null){for(;!Z.done;V++,Z=A.next())Z=b(k,Z.value,j),Z!==null&&(I=l(Z,I,V),z===null?U=Z:z.sibling=Z,z=Z);return rt&&Ns(k,V),U}for(L=s(k,L);!Z.done;V++,Z=A.next())Z=T(L,k,V,Z.value,j),Z!==null&&(t&&Z.alternate!==null&&L.delete(Z.key===null?V:Z.key),I=l(Z,I,V),z===null?U=Z:z.sibling=Z,z=Z);return t&&L.forEach(function(ue){return e(k,ue)}),rt&&Ns(k,V),U}function M(k,I,A,j){if(typeof A=="object"&&A!==null&&A.type===bi&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case rl:e:{for(var U=A.key,z=I;z!==null;){if(z.key===U){if(U=A.type,U===bi){if(z.tag===7){n(k,z.sibling),I=a(z,A.props.children),I.return=k,k=I;break e}}else if(z.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===$r&&_1(U)===z.type){n(k,z.sibling),I=a(z,A.props),I.ref=ko(k,z,A),I.return=k,k=I;break e}n(k,z);break}else e(k,z);z=z.sibling}A.type===bi?(I=zs(A.props.children,k.mode,j,A.key),I.return=k,k=I):(j=Fl(A.type,A.key,A.props,null,k.mode,j),j.ref=ko(k,I,A),j.return=k,k=j)}return h(k);case vi:e:{for(z=A.key;I!==null;){if(I.key===z)if(I.tag===4&&I.stateNode.containerInfo===A.containerInfo&&I.stateNode.implementation===A.implementation){n(k,I.sibling),I=a(I,A.children||[]),I.return=k,k=I;break e}else{n(k,I);break}else e(k,I);I=I.sibling}I=Xu(A,k.mode,j),I.return=k,k=I}return h(k);case $r:return z=A._init,M(k,I,z(A._payload),j)}if(Mo(A))return R(k,I,A,j);if(So(A))return P(k,I,A,j);gl(k,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,I!==null&&I.tag===6?(n(k,I.sibling),I=a(I,A),I.return=k,k=I):(n(k,I),I=Gu(A,k.mode,j),I.return=k,k=I),h(k)):n(k,I)}return M}var Zi=ax(!0),lx=ax(!1),sc=ms(null),ic=null,Ni=null,cf=null;function uf(){cf=Ni=ic=null}function hf(t){var e=sc.current;Je(sc),t._currentValue=e}function Hh(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Hi(t,e){ic=t,cf=Ni=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fn=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(cf!==t)if(t={context:t,memoizedValue:e,next:null},Ni===null){if(ic===null)throw Error(ee(308));Ni=t,ic.dependencies={lanes:0,firstContext:t}}else Ni=Ni.next=t;return e}var Ls=null;function df(t){Ls===null?Ls=[t]:Ls.push(t)}function cx(t,e,n,s){var a=e.interleaved;return a===null?(n.next=n,df(e)):(n.next=a.next,a.next=n),e.interleaved=n,Or(t,s)}function Or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yr=!1;function ff(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ux(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function as(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,je&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,Or(t,n)}return a=s.interleaved,a===null?(e.next=e,df(s)):(e.next=a.next,a.next=e),s.interleaved=e,Or(t,n)}function Pl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Zd(t,n)}}function T1(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var h={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=h:l=l.next=h,n=n.next}while(n!==null);l===null?a=l=e:l=l.next=e}else a=l=e;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function oc(t,e,n,s){var a=t.updateQueue;Yr=!1;var l=a.firstBaseUpdate,h=a.lastBaseUpdate,g=a.shared.pending;if(g!==null){a.shared.pending=null;var p=g,m=p.next;p.next=null,h===null?l=m:h.next=m,h=p;var v=t.alternate;v!==null&&(v=v.updateQueue,g=v.lastBaseUpdate,g!==h&&(g===null?v.firstBaseUpdate=m:g.next=m,v.lastBaseUpdate=p))}if(l!==null){var b=a.baseState;h=0,v=m=p=null,g=l;do{var C=g.lane,T=g.eventTime;if((s&C)===C){v!==null&&(v=v.next={eventTime:T,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var R=t,P=g;switch(C=e,T=n,P.tag){case 1:if(R=P.payload,typeof R=="function"){b=R.call(T,b,C);break e}b=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=P.payload,C=typeof R=="function"?R.call(T,b,C):R,C==null)break e;b=ut({},b,C);break e;case 2:Yr=!0}}g.callback!==null&&g.lane!==0&&(t.flags|=64,C=a.effects,C===null?a.effects=[g]:C.push(g))}else T={eventTime:T,lane:C,tag:g.tag,payload:g.payload,callback:g.callback,next:null},v===null?(m=v=T,p=b):v=v.next=T,h|=C;if(g=g.next,g===null){if(g=a.shared.pending,g===null)break;C=g,g=C.next,C.next=null,a.lastBaseUpdate=C,a.shared.pending=null}}while(!0);if(v===null&&(p=b),a.baseState=p,a.firstBaseUpdate=m,a.lastBaseUpdate=v,e=a.shared.interleaved,e!==null){a=e;do h|=a.lane,a=a.next;while(a!==e)}else l===null&&(a.shared.lanes=0);Ks|=h,t.lanes=h,t.memoizedState=b}}function I1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(ee(191,a));a.call(s)}}}var ja={},mr=ms(ja),ga=ms(ja),pa=ms(ja);function Bs(t){if(t===ja)throw Error(ee(174));return t}function gf(t,e){switch($e(pa,e),$e(ga,t),$e(mr,ja),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ah(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ah(e,t)}Je(mr),$e(mr,e)}function Qi(){Je(mr),Je(ga),Je(pa)}function hx(t){Bs(pa.current);var e=Bs(mr.current),n=Ah(e,t.type);e!==n&&($e(ga,t),$e(mr,n))}function pf(t){ga.current===t&&(Je(mr),Je(ga))}var at=ms(0);function ac(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fu=[];function mf(){for(var t=0;t<Fu.length;t++)Fu[t]._workInProgressVersionPrimary=null;Fu.length=0}var Dl=Lr.ReactCurrentDispatcher,Uu=Lr.ReactCurrentBatchConfig,Xs=0,ct=null,It=null,Pt=null,lc=!1,Ko=!1,ma=0,Lb=0;function Kt(){throw Error(ee(321))}function xf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nr(t[n],e[n]))return!1;return!0}function yf(t,e,n,s,a,l){if(Xs=l,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dl.current=t===null||t.memoizedState===null?Vb:zb,t=n(s,a),Ko){l=0;do{if(Ko=!1,ma=0,25<=l)throw Error(ee(301));l+=1,Pt=It=null,e.updateQueue=null,Dl.current=Wb,t=n(s,a)}while(Ko)}if(Dl.current=cc,e=It!==null&&It.next!==null,Xs=0,Pt=It=ct=null,lc=!1,e)throw Error(ee(300));return t}function wf(){var t=ma!==0;return ma=0,t}function fr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?ct.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function zn(){if(It===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=It.next;var e=Pt===null?ct.memoizedState:Pt.next;if(e!==null)Pt=e,It=t;else{if(t===null)throw Error(ee(310));It=t,t={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Pt===null?ct.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function xa(t,e){return typeof e=="function"?e(t):e}function Vu(t){var e=zn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var s=It,a=s.baseQueue,l=n.pending;if(l!==null){if(a!==null){var h=a.next;a.next=l.next,l.next=h}s.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,s=s.baseState;var g=h=null,p=null,m=l;do{var v=m.lane;if((Xs&v)===v)p!==null&&(p=p.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),s=m.hasEagerState?m.eagerState:t(s,m.action);else{var b={lane:v,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};p===null?(g=p=b,h=s):p=p.next=b,ct.lanes|=v,Ks|=v}m=m.next}while(m!==null&&m!==l);p===null?h=s:p.next=g,nr(s,e.memoizedState)||(fn=!0),e.memoizedState=s,e.baseState=h,e.baseQueue=p,n.lastRenderedState=s}if(t=n.interleaved,t!==null){a=t;do l=a.lane,ct.lanes|=l,Ks|=l,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zu(t){var e=zn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var s=n.dispatch,a=n.pending,l=e.memoizedState;if(a!==null){n.pending=null;var h=a=a.next;do l=t(l,h.action),h=h.next;while(h!==a);nr(l,e.memoizedState)||(fn=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,s]}function dx(){}function fx(t,e){var n=ct,s=zn(),a=e(),l=!nr(s.memoizedState,a);if(l&&(s.memoizedState=a,fn=!0),s=s.queue,vf(mx.bind(null,n,s,t),[t]),s.getSnapshot!==e||l||Pt!==null&&Pt.memoizedState.tag&1){if(n.flags|=2048,ya(9,px.bind(null,n,s,a,e),void 0,null),Dt===null)throw Error(ee(349));Xs&30||gx(n,e,a)}return a}function gx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function px(t,e,n,s){e.value=n,e.getSnapshot=s,xx(e)&&yx(t)}function mx(t,e,n){return n(function(){xx(e)&&yx(t)})}function xx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nr(t,n)}catch{return!0}}function yx(t){var e=Or(t,1);e!==null&&tr(e,t,1,-1)}function N1(t){var e=fr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},e.queue=t,t=t.dispatch=Ub.bind(null,ct,t),[e.memoizedState,t]}function ya(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function wx(){return zn().memoizedState}function Ml(t,e,n,s){var a=fr();ct.flags|=t,a.memoizedState=ya(1|e,n,void 0,s===void 0?null:s)}function jc(t,e,n,s){var a=zn();s=s===void 0?null:s;var l=void 0;if(It!==null){var h=It.memoizedState;if(l=h.destroy,s!==null&&xf(s,h.deps)){a.memoizedState=ya(e,n,l,s);return}}ct.flags|=t,a.memoizedState=ya(1|e,n,l,s)}function k1(t,e){return Ml(8390656,8,t,e)}function vf(t,e){return jc(2048,8,t,e)}function vx(t,e){return jc(4,2,t,e)}function bx(t,e){return jc(4,4,t,e)}function Ex(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cx(t,e,n){return n=n!=null?n.concat([t]):null,jc(4,4,Ex.bind(null,e,t),n)}function bf(){}function Ax(t,e){var n=zn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&xf(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Sx(t,e){var n=zn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&xf(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function _x(t,e,n){return Xs&21?(nr(n,e)||(n=Rm(),ct.lanes|=n,Ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fn=!0),t.memoizedState=n)}function Bb(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var s=Uu.transition;Uu.transition={};try{t(!1),e()}finally{Ve=n,Uu.transition=s}}function Tx(){return zn().memoizedState}function Fb(t,e,n){var s=cs(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Ix(t))Nx(e,n);else if(n=cx(t,e,n,s),n!==null){var a=nn();tr(n,t,s,a),kx(n,e,s)}}function Ub(t,e,n){var s=cs(t),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ix(t))Nx(e,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var h=e.lastRenderedState,g=l(h,n);if(a.hasEagerState=!0,a.eagerState=g,nr(g,h)){var p=e.interleaved;p===null?(a.next=a,df(e)):(a.next=p.next,p.next=a),e.interleaved=a;return}}catch{}finally{}n=cx(t,e,a,s),n!==null&&(a=nn(),tr(n,t,s,a),kx(n,e,s))}}function Ix(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function Nx(t,e){Ko=lc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kx(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Zd(t,n)}}var cc={readContext:Vn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},Vb={readContext:Vn,useCallback:function(t,e){return fr().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:k1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ml(4194308,4,Ex.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ml(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ml(4,2,t,e)},useMemo:function(t,e){var n=fr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=fr();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=Fb.bind(null,ct,t),[s.memoizedState,t]},useRef:function(t){var e=fr();return t={current:t},e.memoizedState=t},useState:N1,useDebugValue:bf,useDeferredValue:function(t){return fr().memoizedState=t},useTransition:function(){var t=N1(!1),e=t[0];return t=Bb.bind(null,t[1]),fr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=ct,a=fr();if(rt){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Dt===null)throw Error(ee(349));Xs&30||gx(s,e,n)}a.memoizedState=n;var l={value:n,getSnapshot:e};return a.queue=l,k1(mx.bind(null,s,l,t),[t]),s.flags|=2048,ya(9,px.bind(null,s,l,n,e),void 0,null),n},useId:function(){var t=fr(),e=Dt.identifierPrefix;if(rt){var n=_r,s=Sr;n=(s&~(1<<32-er(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=ma++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Lb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zb={readContext:Vn,useCallback:Ax,useContext:Vn,useEffect:vf,useImperativeHandle:Cx,useInsertionEffect:vx,useLayoutEffect:bx,useMemo:Sx,useReducer:Vu,useRef:wx,useState:function(){return Vu(xa)},useDebugValue:bf,useDeferredValue:function(t){var e=zn();return _x(e,It.memoizedState,t)},useTransition:function(){var t=Vu(xa)[0],e=zn().memoizedState;return[t,e]},useMutableSource:dx,useSyncExternalStore:fx,useId:Tx,unstable_isNewReconciler:!1},Wb={readContext:Vn,useCallback:Ax,useContext:Vn,useEffect:vf,useImperativeHandle:Cx,useInsertionEffect:vx,useLayoutEffect:bx,useMemo:Sx,useReducer:zu,useRef:wx,useState:function(){return zu(xa)},useDebugValue:bf,useDeferredValue:function(t){var e=zn();return It===null?e.memoizedState=t:_x(e,It.memoizedState,t)},useTransition:function(){var t=zu(xa)[0],e=zn().memoizedState;return[t,e]},useMutableSource:dx,useSyncExternalStore:fx,useId:Tx,unstable_isNewReconciler:!1};function $n(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gh(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Lc={isMounted:function(t){return(t=t._reactInternals)?Ys(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=nn(),a=cs(t),l=Tr(s,a);l.payload=e,n!=null&&(l.callback=n),e=as(t,l,a),e!==null&&(tr(e,t,a,s),Pl(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=nn(),a=cs(t),l=Tr(s,a);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=as(t,l,a),e!==null&&(tr(e,t,a,s),Pl(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nn(),s=cs(t),a=Tr(n,s);a.tag=2,e!=null&&(a.callback=e),e=as(t,a,s),e!==null&&(tr(e,t,s,n),Pl(e,t,s))}};function R1(t,e,n,s,a,l,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,l,h):e.prototype&&e.prototype.isPureReactComponent?!ua(n,s)||!ua(a,l):!0}function Rx(t,e,n){var s=!1,a=ds,l=e.contextType;return typeof l=="object"&&l!==null?l=Vn(l):(a=pn(e)?Hs:Qt.current,s=e.contextTypes,l=(s=s!=null)?$i(t,a):ds),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lc,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),e}function O1(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Lc.enqueueReplaceState(e,e.state,null)}function Xh(t,e,n,s){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},ff(t);var l=e.contextType;typeof l=="object"&&l!==null?a.context=Vn(l):(l=pn(e)?Hs:Qt.current,a.context=$i(t,l)),a.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Gh(t,e,l,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Lc.enqueueReplaceState(a,a.state,null),oc(t,n,a,s),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Ji(t,e){try{var n="",s=e;do n+=xv(s),s=s.return;while(s);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:a,digest:null}}function Wu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Hb=typeof WeakMap=="function"?WeakMap:Map;function Ox(t,e,n){n=Tr(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){hc||(hc=!0,rd=s),Kh(t,e)},n}function Px(t,e,n){n=Tr(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var a=e.value;n.payload=function(){return s(a)},n.callback=function(){Kh(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Kh(t,e),typeof s!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var h=e.stack;this.componentDidCatch(e.value,{componentStack:h!==null?h:""})}),n}function P1(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new Hb;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(n)||(a.add(n),t=s3.bind(null,t,e,n),e.then(t,t))}function D1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function M1(t,e,n,s,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Tr(-1,1),e.tag=2,as(n,e,1))),n.lanes|=1),t)}var Gb=Lr.ReactCurrentOwner,fn=!1;function tn(t,e,n,s){e.child=t===null?lx(e,null,n,s):Zi(e,t.child,n,s)}function j1(t,e,n,s,a){n=n.render;var l=e.ref;return Hi(e,a),s=yf(t,e,n,s,l,a),n=wf(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Pr(t,e,a)):(rt&&n&&of(e),e.flags|=1,tn(t,e,s,a),e.child)}function L1(t,e,n,s,a){if(t===null){var l=n.type;return typeof l=="function"&&!Nf(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,Dx(t,e,l,s,a)):(t=Fl(n.type,null,s,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&a)){var h=l.memoizedProps;if(n=n.compare,n=n!==null?n:ua,n(h,s)&&t.ref===e.ref)return Pr(t,e,a)}return e.flags|=1,t=us(l,s),t.ref=e.ref,t.return=e,e.child=t}function Dx(t,e,n,s,a){if(t!==null){var l=t.memoizedProps;if(ua(l,s)&&t.ref===e.ref)if(fn=!1,e.pendingProps=s=l,(t.lanes&a)!==0)t.flags&131072&&(fn=!0);else return e.lanes=t.lanes,Pr(t,e,a)}return qh(t,e,n,s,a)}function Mx(t,e,n){var s=e.pendingProps,a=s.children,l=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Ri,vn),vn|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Ri,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=l!==null?l.baseLanes:n,$e(Ri,vn),vn|=s}else l!==null?(s=l.baseLanes|n,e.memoizedState=null):s=n,$e(Ri,vn),vn|=s;return tn(t,e,a,n),e.child}function jx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qh(t,e,n,s,a){var l=pn(n)?Hs:Qt.current;return l=$i(e,l),Hi(e,a),n=yf(t,e,n,s,l,a),s=wf(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Pr(t,e,a)):(rt&&s&&of(e),e.flags|=1,tn(t,e,n,a),e.child)}function B1(t,e,n,s,a){if(pn(n)){var l=!0;tc(e)}else l=!1;if(Hi(e,a),e.stateNode===null)jl(t,e),Rx(e,n,s),Xh(e,n,s,a),s=!0;else if(t===null){var h=e.stateNode,g=e.memoizedProps;h.props=g;var p=h.context,m=n.contextType;typeof m=="object"&&m!==null?m=Vn(m):(m=pn(n)?Hs:Qt.current,m=$i(e,m));var v=n.getDerivedStateFromProps,b=typeof v=="function"||typeof h.getSnapshotBeforeUpdate=="function";b||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(g!==s||p!==m)&&O1(e,h,s,m),Yr=!1;var C=e.memoizedState;h.state=C,oc(e,s,h,a),p=e.memoizedState,g!==s||C!==p||gn.current||Yr?(typeof v=="function"&&(Gh(e,n,v,s),p=e.memoizedState),(g=Yr||R1(e,n,g,s,C,p,m))?(b||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(e.flags|=4194308)):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=p),h.props=s,h.state=p,h.context=m,s=g):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{h=e.stateNode,ux(t,e),g=e.memoizedProps,m=e.type===e.elementType?g:$n(e.type,g),h.props=m,b=e.pendingProps,C=h.context,p=n.contextType,typeof p=="object"&&p!==null?p=Vn(p):(p=pn(n)?Hs:Qt.current,p=$i(e,p));var T=n.getDerivedStateFromProps;(v=typeof T=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(g!==b||C!==p)&&O1(e,h,s,p),Yr=!1,C=e.memoizedState,h.state=C,oc(e,s,h,a);var R=e.memoizedState;g!==b||C!==R||gn.current||Yr?(typeof T=="function"&&(Gh(e,n,T,s),R=e.memoizedState),(m=Yr||R1(e,n,m,s,C,R,p)||!1)?(v||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(s,R,p),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(s,R,p)),typeof h.componentDidUpdate=="function"&&(e.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof h.componentDidUpdate!="function"||g===t.memoizedProps&&C===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&C===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=R),h.props=s,h.state=R,h.context=p,s=m):(typeof h.componentDidUpdate!="function"||g===t.memoizedProps&&C===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&C===t.memoizedState||(e.flags|=1024),s=!1)}return $h(t,e,n,s,l,a)}function $h(t,e,n,s,a,l){jx(t,e);var h=(e.flags&128)!==0;if(!s&&!h)return a&&C1(e,n,!1),Pr(t,e,l);s=e.stateNode,Gb.current=e;var g=h&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&h?(e.child=Zi(e,t.child,null,l),e.child=Zi(e,null,g,l)):tn(t,e,g,l),e.memoizedState=s.state,a&&C1(e,n,!0),e.child}function Lx(t){var e=t.stateNode;e.pendingContext?E1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&E1(t,e.context,!1),gf(t,e.containerInfo)}function F1(t,e,n,s,a){return Yi(),lf(a),e.flags|=256,tn(t,e,n,s),e.child}var Yh={dehydrated:null,treeContext:null,retryLane:0};function Zh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bx(t,e,n){var s=e.pendingProps,a=at.current,l=!1,h=(e.flags&128)!==0,g;if((g=h)||(g=t!==null&&t.memoizedState===null?!1:(a&2)!==0),g?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),$e(at,a&1),t===null)return Wh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(h=s.children,t=s.fallback,l?(s=e.mode,l=e.child,h={mode:"hidden",children:h},!(s&1)&&l!==null?(l.childLanes=0,l.pendingProps=h):l=Uc(h,s,0,null),t=zs(t,s,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=Zh(n),e.memoizedState=Yh,t):Ef(e,h));if(a=t.memoizedState,a!==null&&(g=a.dehydrated,g!==null))return Xb(t,e,h,s,g,a,n);if(l){l=s.fallback,h=e.mode,a=t.child,g=a.sibling;var p={mode:"hidden",children:s.children};return!(h&1)&&e.child!==a?(s=e.child,s.childLanes=0,s.pendingProps=p,e.deletions=null):(s=us(a,p),s.subtreeFlags=a.subtreeFlags&14680064),g!==null?l=us(g,l):(l=zs(l,h,n,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,s=l,l=e.child,h=t.child.memoizedState,h=h===null?Zh(n):{baseLanes:h.baseLanes|n,cachePool:null,transitions:h.transitions},l.memoizedState=h,l.childLanes=t.childLanes&~n,e.memoizedState=Yh,s}return l=t.child,t=l.sibling,s=us(l,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function Ef(t,e){return e=Uc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pl(t,e,n,s){return s!==null&&lf(s),Zi(e,t.child,null,n),t=Ef(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xb(t,e,n,s,a,l,h){if(n)return e.flags&256?(e.flags&=-257,s=Wu(Error(ee(422))),pl(t,e,h,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=s.fallback,a=e.mode,s=Uc({mode:"visible",children:s.children},a,0,null),l=zs(l,a,h,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,e.mode&1&&Zi(e,t.child,null,h),e.child.memoizedState=Zh(h),e.memoizedState=Yh,l);if(!(e.mode&1))return pl(t,e,h,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var g=s.dgst;return s=g,l=Error(ee(419)),s=Wu(l,s,void 0),pl(t,e,h,s)}if(g=(h&t.childLanes)!==0,fn||g){if(s=Dt,s!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|h)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Or(t,a),tr(s,t,a,-1))}return If(),s=Wu(Error(ee(421))),pl(t,e,h,s)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=i3.bind(null,t),a._reactRetry=e,null):(t=l.treeContext,Cn=os(a.nextSibling),An=e,rt=!0,Jn=null,t!==null&&(Ln[Bn++]=Sr,Ln[Bn++]=_r,Ln[Bn++]=Gs,Sr=t.id,_r=t.overflow,Gs=e),e=Ef(e,s.children),e.flags|=4096,e)}function U1(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Hh(t.return,e,n)}function Hu(t,e,n,s,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=s,l.tail=n,l.tailMode=a)}function Fx(t,e,n){var s=e.pendingProps,a=s.revealOrder,l=s.tail;if(tn(t,e,s.children,n),s=at.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&U1(t,n,e);else if(t.tag===19)U1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if($e(at,s),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&ac(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),Hu(e,!1,a,n,l);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&ac(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}Hu(e,!0,n,null,l);break;case"together":Hu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=us(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=us(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Kb(t,e,n){switch(e.tag){case 3:Lx(e),Yi();break;case 5:hx(e);break;case 1:pn(e.type)&&tc(e);break;case 4:gf(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,a=e.memoizedProps.value;$e(sc,s._currentValue),s._currentValue=a;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?($e(at,at.current&1),e.flags|=128,null):n&e.child.childLanes?Bx(t,e,n):($e(at,at.current&1),t=Pr(t,e,n),t!==null?t.sibling:null);$e(at,at.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return Fx(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),$e(at,at.current),s)break;return null;case 22:case 23:return e.lanes=0,Mx(t,e,n)}return Pr(t,e,n)}var Ux,Qh,Vx,zx;Ux=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qh=function(){};Vx=function(t,e,n,s){var a=t.memoizedProps;if(a!==s){t=e.stateNode,Bs(mr.current);var l=null;switch(n){case"input":a=vh(t,a),s=vh(t,s),l=[];break;case"select":a=ut({},a,{value:void 0}),s=ut({},s,{value:void 0}),l=[];break;case"textarea":a=Ch(t,a),s=Ch(t,s),l=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Jl)}Sh(n,s);var h;n=null;for(m in a)if(!s.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var g=a[m];for(h in g)g.hasOwnProperty(h)&&(n||(n={}),n[h]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(ra.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in s){var p=s[m];if(g=a!=null?a[m]:void 0,s.hasOwnProperty(m)&&p!==g&&(p!=null||g!=null))if(m==="style")if(g){for(h in g)!g.hasOwnProperty(h)||p&&p.hasOwnProperty(h)||(n||(n={}),n[h]="");for(h in p)p.hasOwnProperty(h)&&g[h]!==p[h]&&(n||(n={}),n[h]=p[h])}else n||(l||(l=[]),l.push(m,n)),n=p;else m==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,g=g?g.__html:void 0,p!=null&&g!==p&&(l=l||[]).push(m,p)):m==="children"?typeof p!="string"&&typeof p!="number"||(l=l||[]).push(m,""+p):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(ra.hasOwnProperty(m)?(p!=null&&m==="onScroll"&&Ze("scroll",t),l||g===p||(l=[])):(l=l||[]).push(m,p))}n&&(l=l||[]).push("style",n);var m=l;(e.updateQueue=m)&&(e.flags|=4)}};zx=function(t,e,n,s){n!==s&&(e.flags|=4)};function Ro(t,e){if(!rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function qb(t,e,n){var s=e.pendingProps;switch(af(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(e),null;case 1:return pn(e.type)&&ec(),qt(e),null;case 3:return s=e.stateNode,Qi(),Je(gn),Je(Qt),mf(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(fl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jn!==null&&(od(Jn),Jn=null))),Qh(t,e),qt(e),null;case 5:pf(e);var a=Bs(pa.current);if(n=e.type,t!==null&&e.stateNode!=null)Vx(t,e,n,s,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(ee(166));return qt(e),null}if(t=Bs(mr.current),fl(e)){s=e.stateNode,n=e.type;var l=e.memoizedProps;switch(s[gr]=e,s[fa]=l,t=(e.mode&1)!==0,n){case"dialog":Ze("cancel",s),Ze("close",s);break;case"iframe":case"object":case"embed":Ze("load",s);break;case"video":case"audio":for(a=0;a<Lo.length;a++)Ze(Lo[a],s);break;case"source":Ze("error",s);break;case"img":case"image":case"link":Ze("error",s),Ze("load",s);break;case"details":Ze("toggle",s);break;case"input":$0(s,l),Ze("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},Ze("invalid",s);break;case"textarea":Z0(s,l),Ze("invalid",s)}Sh(n,l),a=null;for(var h in l)if(l.hasOwnProperty(h)){var g=l[h];h==="children"?typeof g=="string"?s.textContent!==g&&(l.suppressHydrationWarning!==!0&&dl(s.textContent,g,t),a=["children",g]):typeof g=="number"&&s.textContent!==""+g&&(l.suppressHydrationWarning!==!0&&dl(s.textContent,g,t),a=["children",""+g]):ra.hasOwnProperty(h)&&g!=null&&h==="onScroll"&&Ze("scroll",s)}switch(n){case"input":sl(s),Y0(s,l,!0);break;case"textarea":sl(s),Q0(s);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(s.onclick=Jl)}s=a,e.updateQueue=s,s!==null&&(e.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=h.createElement(n,{is:s.is}):(t=h.createElement(n),n==="select"&&(h=t,s.multiple?h.multiple=!0:s.size&&(h.size=s.size))):t=h.createElementNS(t,n),t[gr]=e,t[fa]=s,Ux(t,e,!1,!1),e.stateNode=t;e:{switch(h=_h(n,s),n){case"dialog":Ze("cancel",t),Ze("close",t),a=s;break;case"iframe":case"object":case"embed":Ze("load",t),a=s;break;case"video":case"audio":for(a=0;a<Lo.length;a++)Ze(Lo[a],t);a=s;break;case"source":Ze("error",t),a=s;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),a=s;break;case"details":Ze("toggle",t),a=s;break;case"input":$0(t,s),a=vh(t,s),Ze("invalid",t);break;case"option":a=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},a=ut({},s,{value:void 0}),Ze("invalid",t);break;case"textarea":Z0(t,s),a=Ch(t,s),Ze("invalid",t);break;default:a=s}Sh(n,a),g=a;for(l in g)if(g.hasOwnProperty(l)){var p=g[l];l==="style"?wm(t,p):l==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&xm(t,p)):l==="children"?typeof p=="string"?(n!=="textarea"||p!=="")&&sa(t,p):typeof p=="number"&&sa(t,""+p):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ra.hasOwnProperty(l)?p!=null&&l==="onScroll"&&Ze("scroll",t):p!=null&&Gd(t,l,p,h))}switch(n){case"input":sl(t),Y0(t,s,!1);break;case"textarea":sl(t),Q0(t);break;case"option":s.value!=null&&t.setAttribute("value",""+hs(s.value));break;case"select":t.multiple=!!s.multiple,l=s.value,l!=null?Ui(t,!!s.multiple,l,!1):s.defaultValue!=null&&Ui(t,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Jl)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qt(e),null;case 6:if(t&&e.stateNode!=null)zx(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(ee(166));if(n=Bs(pa.current),Bs(mr.current),fl(e)){if(s=e.stateNode,n=e.memoizedProps,s[gr]=e,(l=s.nodeValue!==n)&&(t=An,t!==null))switch(t.tag){case 3:dl(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dl(s.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[gr]=e,e.stateNode=s}return qt(e),null;case 13:if(Je(at),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&Cn!==null&&e.mode&1&&!(e.flags&128))ox(),Yi(),e.flags|=98560,l=!1;else if(l=fl(e),s!==null&&s.dehydrated!==null){if(t===null){if(!l)throw Error(ee(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ee(317));l[gr]=e}else Yi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qt(e),l=!1}else Jn!==null&&(od(Jn),Jn=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||at.current&1?Nt===0&&(Nt=3):If())),e.updateQueue!==null&&(e.flags|=4),qt(e),null);case 4:return Qi(),Qh(t,e),t===null&&ha(e.stateNode.containerInfo),qt(e),null;case 10:return hf(e.type._context),qt(e),null;case 17:return pn(e.type)&&ec(),qt(e),null;case 19:if(Je(at),l=e.memoizedState,l===null)return qt(e),null;if(s=(e.flags&128)!==0,h=l.rendering,h===null)if(s)Ro(l,!1);else{if(Nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(h=ac(t),h!==null){for(e.flags|=128,Ro(l,!1),s=h.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)l=n,t=s,l.flags&=14680066,h=l.alternate,h===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,t=h.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(at,at.current&1|2),e.child}t=t.sibling}l.tail!==null&&vt()>eo&&(e.flags|=128,s=!0,Ro(l,!1),e.lanes=4194304)}else{if(!s)if(t=ac(h),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ro(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!rt)return qt(e),null}else 2*vt()-l.renderingStartTime>eo&&n!==1073741824&&(e.flags|=128,s=!0,Ro(l,!1),e.lanes=4194304);l.isBackwards?(h.sibling=e.child,e.child=h):(n=l.last,n!==null?n.sibling=h:e.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=vt(),e.sibling=null,n=at.current,$e(at,s?n&1|2:n&1),e):(qt(e),null);case 22:case 23:return Tf(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?vn&1073741824&&(qt(e),e.subtreeFlags&6&&(e.flags|=8192)):qt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function $b(t,e){switch(af(e),e.tag){case 1:return pn(e.type)&&ec(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qi(),Je(gn),Je(Qt),mf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pf(e),null;case 13:if(Je(at),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Yi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(at),null;case 4:return Qi(),null;case 10:return hf(e.type._context),null;case 22:case 23:return Tf(),null;case 24:return null;default:return null}}var ml=!1,Yt=!1,Yb=typeof WeakSet=="function"?WeakSet:Set,ce=null;function ki(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){xt(t,e,s)}else n.current=null}function Jh(t,e,n){try{n()}catch(s){xt(t,e,s)}}var V1=!1;function Zb(t,e){if(jh=Yl,t=Km(),sf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var h=0,g=-1,p=-1,m=0,v=0,b=t,C=null;t:for(;;){for(var T;b!==n||a!==0&&b.nodeType!==3||(g=h+a),b!==l||s!==0&&b.nodeType!==3||(p=h+s),b.nodeType===3&&(h+=b.nodeValue.length),(T=b.firstChild)!==null;)C=b,b=T;for(;;){if(b===t)break t;if(C===n&&++m===a&&(g=h),C===l&&++v===s&&(p=h),(T=b.nextSibling)!==null)break;b=C,C=b.parentNode}b=T}n=g===-1||p===-1?null:{start:g,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lh={focusedElem:t,selectionRange:n},Yl=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var P=R.memoizedProps,M=R.memoizedState,k=e.stateNode,I=k.getSnapshotBeforeUpdate(e.elementType===e.type?P:$n(e.type,P),M);k.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(j){xt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return R=V1,V1=!1,R}function qo(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&Jh(e,n,l)}a=a.next}while(a!==s)}}function Bc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function ed(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Wx(t){var e=t.alternate;e!==null&&(t.alternate=null,Wx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gr],delete e[fa],delete e[Uh],delete e[Pb],delete e[Db])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hx(t){return t.tag===5||t.tag===3||t.tag===4}function z1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function td(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jl));else if(s!==4&&(t=t.child,t!==null))for(td(t,e,n),t=t.sibling;t!==null;)td(t,e,n),t=t.sibling}function nd(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(nd(t,e,n),t=t.sibling;t!==null;)nd(t,e,n),t=t.sibling}var Vt=null,Zn=!1;function Kr(t,e,n){for(n=n.child;n!==null;)Gx(t,e,n),n=n.sibling}function Gx(t,e,n){if(pr&&typeof pr.onCommitFiberUnmount=="function")try{pr.onCommitFiberUnmount(kc,n)}catch{}switch(n.tag){case 5:Yt||ki(n,e);case 6:var s=Vt,a=Zn;Vt=null,Kr(t,e,n),Vt=s,Zn=a,Vt!==null&&(Zn?(t=Vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&(Zn?(t=Vt,n=n.stateNode,t.nodeType===8?Lu(t.parentNode,n):t.nodeType===1&&Lu(t,n),la(t)):Lu(Vt,n.stateNode));break;case 4:s=Vt,a=Zn,Vt=n.stateNode.containerInfo,Zn=!0,Kr(t,e,n),Vt=s,Zn=a;break;case 0:case 11:case 14:case 15:if(!Yt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var l=a,h=l.destroy;l=l.tag,h!==void 0&&(l&2||l&4)&&Jh(n,e,h),a=a.next}while(a!==s)}Kr(t,e,n);break;case 1:if(!Yt&&(ki(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(g){xt(n,e,g)}Kr(t,e,n);break;case 21:Kr(t,e,n);break;case 22:n.mode&1?(Yt=(s=Yt)||n.memoizedState!==null,Kr(t,e,n),Yt=s):Kr(t,e,n);break;default:Kr(t,e,n)}}function W1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Yb),e.forEach(function(s){var a=o3.bind(null,t,s);n.has(s)||(n.add(s),s.then(a,a))})}}function Xn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var l=t,h=e,g=h;e:for(;g!==null;){switch(g.tag){case 5:Vt=g.stateNode,Zn=!1;break e;case 3:Vt=g.stateNode.containerInfo,Zn=!0;break e;case 4:Vt=g.stateNode.containerInfo,Zn=!0;break e}g=g.return}if(Vt===null)throw Error(ee(160));Gx(l,h,a),Vt=null,Zn=!1;var p=a.alternate;p!==null&&(p.return=null),a.return=null}catch(m){xt(a,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xx(e,t),e=e.sibling}function Xx(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xn(e,t),dr(t),s&4){try{qo(3,t,t.return),Bc(3,t)}catch(P){xt(t,t.return,P)}try{qo(5,t,t.return)}catch(P){xt(t,t.return,P)}}break;case 1:Xn(e,t),dr(t),s&512&&n!==null&&ki(n,n.return);break;case 5:if(Xn(e,t),dr(t),s&512&&n!==null&&ki(n,n.return),t.flags&32){var a=t.stateNode;try{sa(a,"")}catch(P){xt(t,t.return,P)}}if(s&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,h=n!==null?n.memoizedProps:l,g=t.type,p=t.updateQueue;if(t.updateQueue=null,p!==null)try{g==="input"&&l.type==="radio"&&l.name!=null&&gm(a,l),_h(g,h);var m=_h(g,l);for(h=0;h<p.length;h+=2){var v=p[h],b=p[h+1];v==="style"?wm(a,b):v==="dangerouslySetInnerHTML"?xm(a,b):v==="children"?sa(a,b):Gd(a,v,b,m)}switch(g){case"input":bh(a,l);break;case"textarea":pm(a,l);break;case"select":var C=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var T=l.value;T!=null?Ui(a,!!l.multiple,T,!1):C!==!!l.multiple&&(l.defaultValue!=null?Ui(a,!!l.multiple,l.defaultValue,!0):Ui(a,!!l.multiple,l.multiple?[]:"",!1))}a[fa]=l}catch(P){xt(t,t.return,P)}}break;case 6:if(Xn(e,t),dr(t),s&4){if(t.stateNode===null)throw Error(ee(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(P){xt(t,t.return,P)}}break;case 3:if(Xn(e,t),dr(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{la(e.containerInfo)}catch(P){xt(t,t.return,P)}break;case 4:Xn(e,t),dr(t);break;case 13:Xn(e,t),dr(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Sf=vt())),s&4&&W1(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(m=Yt)||v,Xn(e,t),Yt=m):Xn(e,t),dr(t),s&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!v&&t.mode&1)for(ce=t,v=t.child;v!==null;){for(b=ce=v;ce!==null;){switch(C=ce,T=C.child,C.tag){case 0:case 11:case 14:case 15:qo(4,C,C.return);break;case 1:ki(C,C.return);var R=C.stateNode;if(typeof R.componentWillUnmount=="function"){s=C,n=C.return;try{e=s,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(P){xt(s,n,P)}}break;case 5:ki(C,C.return);break;case 22:if(C.memoizedState!==null){G1(b);continue}}T!==null?(T.return=C,ce=T):G1(b)}v=v.sibling}e:for(v=null,b=t;;){if(b.tag===5){if(v===null){v=b;try{a=b.stateNode,m?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(g=b.stateNode,p=b.memoizedProps.style,h=p!=null&&p.hasOwnProperty("display")?p.display:null,g.style.display=ym("display",h))}catch(P){xt(t,t.return,P)}}}else if(b.tag===6){if(v===null)try{b.stateNode.nodeValue=m?"":b.memoizedProps}catch(P){xt(t,t.return,P)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===t)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;v===b&&(v=null),b=b.return}v===b&&(v=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Xn(e,t),dr(t),s&4&&W1(t);break;case 21:break;default:Xn(e,t),dr(t)}}function dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Hx(n)){var s=n;break e}n=n.return}throw Error(ee(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(sa(a,""),s.flags&=-33);var l=z1(t);nd(t,l,a);break;case 3:case 4:var h=s.stateNode.containerInfo,g=z1(t);td(t,g,h);break;default:throw Error(ee(161))}}catch(p){xt(t,t.return,p)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qb(t,e,n){ce=t,Kx(t)}function Kx(t,e,n){for(var s=(t.mode&1)!==0;ce!==null;){var a=ce,l=a.child;if(a.tag===22&&s){var h=a.memoizedState!==null||ml;if(!h){var g=a.alternate,p=g!==null&&g.memoizedState!==null||Yt;g=ml;var m=Yt;if(ml=h,(Yt=p)&&!m)for(ce=a;ce!==null;)h=ce,p=h.child,h.tag===22&&h.memoizedState!==null?X1(a):p!==null?(p.return=h,ce=p):X1(a);for(;l!==null;)ce=l,Kx(l),l=l.sibling;ce=a,ml=g,Yt=m}H1(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,ce=l):H1(t)}}function H1(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||Bc(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Yt)if(n===null)s.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&I1(e,l,s);break;case 3:var h=e.updateQueue;if(h!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}I1(e,h,n)}break;case 5:var g=e.stateNode;if(n===null&&e.flags&4){n=g;var p=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&n.focus();break;case"img":p.src&&(n.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var v=m.memoizedState;if(v!==null){var b=v.dehydrated;b!==null&&la(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Yt||e.flags&512&&ed(e)}catch(C){xt(e,e.return,C)}}if(e===t){ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,ce=n;break}ce=e.return}}function G1(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ce=n;break}ce=e.return}}function X1(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bc(4,e)}catch(p){xt(e,n,p)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var a=e.return;try{s.componentDidMount()}catch(p){xt(e,a,p)}}var l=e.return;try{ed(e)}catch(p){xt(e,l,p)}break;case 5:var h=e.return;try{ed(e)}catch(p){xt(e,h,p)}}}catch(p){xt(e,e.return,p)}if(e===t){ce=null;break}var g=e.sibling;if(g!==null){g.return=e.return,ce=g;break}ce=e.return}}var Jb=Math.ceil,uc=Lr.ReactCurrentDispatcher,Cf=Lr.ReactCurrentOwner,Un=Lr.ReactCurrentBatchConfig,je=0,Dt=null,Ct=null,Wt=0,vn=0,Ri=ms(0),Nt=0,wa=null,Ks=0,Fc=0,Af=0,$o=null,dn=null,Sf=0,eo=1/0,Er=null,hc=!1,rd=null,ls=null,xl=!1,ns=null,dc=0,Yo=0,sd=null,Ll=-1,Bl=0;function nn(){return je&6?vt():Ll!==-1?Ll:Ll=vt()}function cs(t){return t.mode&1?je&2&&Wt!==0?Wt&-Wt:jb.transition!==null?(Bl===0&&(Bl=Rm()),Bl):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:Bm(t.type)),t):1}function tr(t,e,n,s){if(50<Yo)throw Yo=0,sd=null,Error(ee(185));Pa(t,n,s),(!(je&2)||t!==Dt)&&(t===Dt&&(!(je&2)&&(Fc|=n),Nt===4&&Jr(t,Wt)),mn(t,s),n===1&&je===0&&!(e.mode&1)&&(eo=vt()+500,Mc&&xs()))}function mn(t,e){var n=t.callbackNode;jv(t,e);var s=$l(t,t===Dt?Wt:0);if(s===0)n!==null&&t1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&t1(n),e===1)t.tag===0?Mb(K1.bind(null,t)):rx(K1.bind(null,t)),Rb(function(){!(je&6)&&xs()}),n=null;else{switch(Om(s)){case 1:n=Yd;break;case 4:n=Nm;break;case 16:n=ql;break;case 536870912:n=km;break;default:n=ql}n=t2(n,qx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qx(t,e){if(Ll=-1,Bl=0,je&6)throw Error(ee(327));var n=t.callbackNode;if(Gi()&&t.callbackNode!==n)return null;var s=$l(t,t===Dt?Wt:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=fc(t,s);else{e=s;var a=je;je|=2;var l=Yx();(Dt!==t||Wt!==e)&&(Er=null,eo=vt()+500,Vs(t,e));do try{n3();break}catch(g){$x(t,g)}while(!0);uf(),uc.current=l,je=a,Ct!==null?e=0:(Dt=null,Wt=0,e=Nt)}if(e!==0){if(e===2&&(a=Rh(t),a!==0&&(s=a,e=id(t,a))),e===1)throw n=wa,Vs(t,0),Jr(t,s),mn(t,vt()),n;if(e===6)Jr(t,s);else{if(a=t.current.alternate,!(s&30)&&!e3(a)&&(e=fc(t,s),e===2&&(l=Rh(t),l!==0&&(s=l,e=id(t,l))),e===1))throw n=wa,Vs(t,0),Jr(t,s),mn(t,vt()),n;switch(t.finishedWork=a,t.finishedLanes=s,e){case 0:case 1:throw Error(ee(345));case 2:ks(t,dn,Er);break;case 3:if(Jr(t,s),(s&130023424)===s&&(e=Sf+500-vt(),10<e)){if($l(t,0)!==0)break;if(a=t.suspendedLanes,(a&s)!==s){nn(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Fh(ks.bind(null,t,dn,Er),e);break}ks(t,dn,Er);break;case 4:if(Jr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,a=-1;0<s;){var h=31-er(s);l=1<<h,h=e[h],h>a&&(a=h),s&=~l}if(s=a,s=vt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Jb(s/1960))-s,10<s){t.timeoutHandle=Fh(ks.bind(null,t,dn,Er),s);break}ks(t,dn,Er);break;case 5:ks(t,dn,Er);break;default:throw Error(ee(329))}}}return mn(t,vt()),t.callbackNode===n?qx.bind(null,t):null}function id(t,e){var n=$o;return t.current.memoizedState.isDehydrated&&(Vs(t,e).flags|=256),t=fc(t,e),t!==2&&(e=dn,dn=n,e!==null&&od(e)),t}function od(t){dn===null?dn=t:dn.push.apply(dn,t)}function e3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],l=a.getSnapshot;a=a.value;try{if(!nr(l(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jr(t,e){for(e&=~Af,e&=~Fc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-er(e),s=1<<n;t[n]=-1,e&=~s}}function K1(t){if(je&6)throw Error(ee(327));Gi();var e=$l(t,0);if(!(e&1))return mn(t,vt()),null;var n=fc(t,e);if(t.tag!==0&&n===2){var s=Rh(t);s!==0&&(e=s,n=id(t,s))}if(n===1)throw n=wa,Vs(t,0),Jr(t,e),mn(t,vt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ks(t,dn,Er),mn(t,vt()),null}function _f(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(eo=vt()+500,Mc&&xs())}}function qs(t){ns!==null&&ns.tag===0&&!(je&6)&&Gi();var e=je;je|=1;var n=Un.transition,s=Ve;try{if(Un.transition=null,Ve=1,t)return t()}finally{Ve=s,Un.transition=n,je=e,!(je&6)&&xs()}}function Tf(){vn=Ri.current,Je(Ri)}function Vs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,kb(n)),Ct!==null)for(n=Ct.return;n!==null;){var s=n;switch(af(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ec();break;case 3:Qi(),Je(gn),Je(Qt),mf();break;case 5:pf(s);break;case 4:Qi();break;case 13:Je(at);break;case 19:Je(at);break;case 10:hf(s.type._context);break;case 22:case 23:Tf()}n=n.return}if(Dt=t,Ct=t=us(t.current,null),Wt=vn=e,Nt=0,wa=null,Af=Fc=Ks=0,dn=$o=null,Ls!==null){for(e=0;e<Ls.length;e++)if(n=Ls[e],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,l=n.pending;if(l!==null){var h=l.next;l.next=a,s.next=h}n.pending=s}Ls=null}return t}function $x(t,e){do{var n=Ct;try{if(uf(),Dl.current=cc,lc){for(var s=ct.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}lc=!1}if(Xs=0,Pt=It=ct=null,Ko=!1,ma=0,Cf.current=null,n===null||n.return===null){Nt=1,wa=e,Ct=null;break}e:{var l=t,h=n.return,g=n,p=e;if(e=Wt,g.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var m=p,v=g,b=v.tag;if(!(v.mode&1)&&(b===0||b===11||b===15)){var C=v.alternate;C?(v.updateQueue=C.updateQueue,v.memoizedState=C.memoizedState,v.lanes=C.lanes):(v.updateQueue=null,v.memoizedState=null)}var T=D1(h);if(T!==null){T.flags&=-257,M1(T,h,g,l,e),T.mode&1&&P1(l,m,e),e=T,p=m;var R=e.updateQueue;if(R===null){var P=new Set;P.add(p),e.updateQueue=P}else R.add(p);break e}else{if(!(e&1)){P1(l,m,e),If();break e}p=Error(ee(426))}}else if(rt&&g.mode&1){var M=D1(h);if(M!==null){!(M.flags&65536)&&(M.flags|=256),M1(M,h,g,l,e),lf(Ji(p,g));break e}}l=p=Ji(p,g),Nt!==4&&(Nt=2),$o===null?$o=[l]:$o.push(l),l=h;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var k=Ox(l,p,e);T1(l,k);break e;case 1:g=p;var I=l.type,A=l.stateNode;if(!(l.flags&128)&&(typeof I.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(ls===null||!ls.has(A)))){l.flags|=65536,e&=-e,l.lanes|=e;var j=Px(l,g,e);T1(l,j);break e}}l=l.return}while(l!==null)}Qx(n)}catch(U){e=U,Ct===n&&n!==null&&(Ct=n=n.return);continue}break}while(!0)}function Yx(){var t=uc.current;return uc.current=cc,t===null?cc:t}function If(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Dt===null||!(Ks&268435455)&&!(Fc&268435455)||Jr(Dt,Wt)}function fc(t,e){var n=je;je|=2;var s=Yx();(Dt!==t||Wt!==e)&&(Er=null,Vs(t,e));do try{t3();break}catch(a){$x(t,a)}while(!0);if(uf(),je=n,uc.current=s,Ct!==null)throw Error(ee(261));return Dt=null,Wt=0,Nt}function t3(){for(;Ct!==null;)Zx(Ct)}function n3(){for(;Ct!==null&&!Tv();)Zx(Ct)}function Zx(t){var e=e2(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?Qx(t):Ct=e,Cf.current=null}function Qx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$b(n,e),n!==null){n.flags&=32767,Ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nt=6,Ct=null;return}}else if(n=qb(n,e,vn),n!==null){Ct=n;return}if(e=e.sibling,e!==null){Ct=e;return}Ct=e=t}while(e!==null);Nt===0&&(Nt=5)}function ks(t,e,n){var s=Ve,a=Un.transition;try{Un.transition=null,Ve=1,r3(t,e,n,s)}finally{Un.transition=a,Ve=s}return null}function r3(t,e,n,s){do Gi();while(ns!==null);if(je&6)throw Error(ee(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(Lv(t,l),t===Dt&&(Ct=Dt=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xl||(xl=!0,t2(ql,function(){return Gi(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Un.transition,Un.transition=null;var h=Ve;Ve=1;var g=je;je|=4,Cf.current=null,Zb(t,n),Xx(n,t),Cb(Lh),Yl=!!jh,Lh=jh=null,t.current=n,Qb(n),Iv(),je=g,Ve=h,Un.transition=l}else t.current=n;if(xl&&(xl=!1,ns=t,dc=a),l=t.pendingLanes,l===0&&(ls=null),Rv(n.stateNode),mn(t,vt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(hc)throw hc=!1,t=rd,rd=null,t;return dc&1&&t.tag!==0&&Gi(),l=t.pendingLanes,l&1?t===sd?Yo++:(Yo=0,sd=t):Yo=0,xs(),null}function Gi(){if(ns!==null){var t=Om(dc),e=Un.transition,n=Ve;try{if(Un.transition=null,Ve=16>t?16:t,ns===null)var s=!1;else{if(t=ns,ns=null,dc=0,je&6)throw Error(ee(331));var a=je;for(je|=4,ce=t.current;ce!==null;){var l=ce,h=l.child;if(ce.flags&16){var g=l.deletions;if(g!==null){for(var p=0;p<g.length;p++){var m=g[p];for(ce=m;ce!==null;){var v=ce;switch(v.tag){case 0:case 11:case 15:qo(8,v,l)}var b=v.child;if(b!==null)b.return=v,ce=b;else for(;ce!==null;){v=ce;var C=v.sibling,T=v.return;if(Wx(v),v===m){ce=null;break}if(C!==null){C.return=T,ce=C;break}ce=T}}}var R=l.alternate;if(R!==null){var P=R.child;if(P!==null){R.child=null;do{var M=P.sibling;P.sibling=null,P=M}while(P!==null)}}ce=l}}if(l.subtreeFlags&2064&&h!==null)h.return=l,ce=h;else e:for(;ce!==null;){if(l=ce,l.flags&2048)switch(l.tag){case 0:case 11:case 15:qo(9,l,l.return)}var k=l.sibling;if(k!==null){k.return=l.return,ce=k;break e}ce=l.return}}var I=t.current;for(ce=I;ce!==null;){h=ce;var A=h.child;if(h.subtreeFlags&2064&&A!==null)A.return=h,ce=A;else e:for(h=I;ce!==null;){if(g=ce,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Bc(9,g)}}catch(U){xt(g,g.return,U)}if(g===h){ce=null;break e}var j=g.sibling;if(j!==null){j.return=g.return,ce=j;break e}ce=g.return}}if(je=a,xs(),pr&&typeof pr.onPostCommitFiberRoot=="function")try{pr.onPostCommitFiberRoot(kc,t)}catch{}s=!0}return s}finally{Ve=n,Un.transition=e}}return!1}function q1(t,e,n){e=Ji(n,e),e=Ox(t,e,1),t=as(t,e,1),e=nn(),t!==null&&(Pa(t,1,e),mn(t,e))}function xt(t,e,n){if(t.tag===3)q1(t,t,n);else for(;e!==null;){if(e.tag===3){q1(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ls===null||!ls.has(s))){t=Ji(n,t),t=Px(e,t,1),e=as(e,t,1),t=nn(),e!==null&&(Pa(e,1,t),mn(e,t));break}}e=e.return}}function s3(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=nn(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(Wt&n)===n&&(Nt===4||Nt===3&&(Wt&130023424)===Wt&&500>vt()-Sf?Vs(t,0):Af|=n),mn(t,e)}function Jx(t,e){e===0&&(t.mode&1?(e=al,al<<=1,!(al&130023424)&&(al=4194304)):e=1);var n=nn();t=Or(t,e),t!==null&&(Pa(t,e,n),mn(t,n))}function i3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Jx(t,n)}function o3(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(ee(314))}s!==null&&s.delete(e),Jx(t,n)}var e2;e2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gn.current)fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fn=!1,Kb(t,e,n);fn=!!(t.flags&131072)}else fn=!1,rt&&e.flags&1048576&&sx(e,rc,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;jl(t,e),t=e.pendingProps;var a=$i(e,Qt.current);Hi(e,n),a=yf(null,e,s,t,a,n);var l=wf();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(s)?(l=!0,tc(e)):l=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,ff(e),a.updater=Lc,e.stateNode=a,a._reactInternals=e,Xh(e,s,t,n),e=$h(null,e,s,!0,l,n)):(e.tag=0,rt&&l&&of(e),tn(null,e,a,n),e=e.child),e;case 16:s=e.elementType;e:{switch(jl(t,e),t=e.pendingProps,a=s._init,s=a(s._payload),e.type=s,a=e.tag=l3(s),t=$n(s,t),a){case 0:e=qh(null,e,s,t,n);break e;case 1:e=B1(null,e,s,t,n);break e;case 11:e=j1(null,e,s,t,n);break e;case 14:e=L1(null,e,s,$n(s.type,t),n);break e}throw Error(ee(306,s,""))}return e;case 0:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:$n(s,a),qh(t,e,s,a,n);case 1:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:$n(s,a),B1(t,e,s,a,n);case 3:e:{if(Lx(e),t===null)throw Error(ee(387));s=e.pendingProps,l=e.memoizedState,a=l.element,ux(t,e),oc(e,s,null,n);var h=e.memoizedState;if(s=h.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){a=Ji(Error(ee(423)),e),e=F1(t,e,s,n,a);break e}else if(s!==a){a=Ji(Error(ee(424)),e),e=F1(t,e,s,n,a);break e}else for(Cn=os(e.stateNode.containerInfo.firstChild),An=e,rt=!0,Jn=null,n=lx(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yi(),s===a){e=Pr(t,e,n);break e}tn(t,e,s,n)}e=e.child}return e;case 5:return hx(e),t===null&&Wh(e),s=e.type,a=e.pendingProps,l=t!==null?t.memoizedProps:null,h=a.children,Bh(s,a)?h=null:l!==null&&Bh(s,l)&&(e.flags|=32),jx(t,e),tn(t,e,h,n),e.child;case 6:return t===null&&Wh(e),null;case 13:return Bx(t,e,n);case 4:return gf(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Zi(e,null,s,n):tn(t,e,s,n),e.child;case 11:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:$n(s,a),j1(t,e,s,a,n);case 7:return tn(t,e,e.pendingProps,n),e.child;case 8:return tn(t,e,e.pendingProps.children,n),e.child;case 12:return tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,a=e.pendingProps,l=e.memoizedProps,h=a.value,$e(sc,s._currentValue),s._currentValue=h,l!==null)if(nr(l.value,h)){if(l.children===a.children&&!gn.current){e=Pr(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var g=l.dependencies;if(g!==null){h=l.child;for(var p=g.firstContext;p!==null;){if(p.context===s){if(l.tag===1){p=Tr(-1,n&-n),p.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var v=m.pending;v===null?p.next=p:(p.next=v.next,v.next=p),m.pending=p}}l.lanes|=n,p=l.alternate,p!==null&&(p.lanes|=n),Hh(l.return,n,e),g.lanes|=n;break}p=p.next}}else if(l.tag===10)h=l.type===e.type?null:l.child;else if(l.tag===18){if(h=l.return,h===null)throw Error(ee(341));h.lanes|=n,g=h.alternate,g!==null&&(g.lanes|=n),Hh(h,n,e),h=l.sibling}else h=l.child;if(h!==null)h.return=l;else for(h=l;h!==null;){if(h===e){h=null;break}if(l=h.sibling,l!==null){l.return=h.return,h=l;break}h=h.return}l=h}tn(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,s=e.pendingProps.children,Hi(e,n),a=Vn(a),s=s(a),e.flags|=1,tn(t,e,s,n),e.child;case 14:return s=e.type,a=$n(s,e.pendingProps),a=$n(s.type,a),L1(t,e,s,a,n);case 15:return Dx(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:$n(s,a),jl(t,e),e.tag=1,pn(s)?(t=!0,tc(e)):t=!1,Hi(e,n),Rx(e,s,a),Xh(e,s,a,n),$h(null,e,s,!0,t,n);case 19:return Fx(t,e,n);case 22:return Mx(t,e,n)}throw Error(ee(156,e.tag))};function t2(t,e){return Im(t,e)}function a3(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,e,n,s){return new a3(t,e,n,s)}function Nf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function l3(t){if(typeof t=="function")return Nf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kd)return 11;if(t===qd)return 14}return 2}function us(t,e){var n=t.alternate;return n===null?(n=Fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fl(t,e,n,s,a,l){var h=2;if(s=t,typeof t=="function")Nf(t)&&(h=1);else if(typeof t=="string")h=5;else e:switch(t){case bi:return zs(n.children,a,l,e);case Xd:h=8,a|=8;break;case mh:return t=Fn(12,n,e,a|2),t.elementType=mh,t.lanes=l,t;case xh:return t=Fn(13,n,e,a),t.elementType=xh,t.lanes=l,t;case yh:return t=Fn(19,n,e,a),t.elementType=yh,t.lanes=l,t;case hm:return Uc(n,a,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cm:h=10;break e;case um:h=9;break e;case Kd:h=11;break e;case qd:h=14;break e;case $r:h=16,s=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Fn(h,n,e,a),e.elementType=t,e.type=s,e.lanes=l,e}function zs(t,e,n,s){return t=Fn(7,t,s,e),t.lanes=n,t}function Uc(t,e,n,s){return t=Fn(22,t,s,e),t.elementType=hm,t.lanes=n,t.stateNode={isHidden:!1},t}function Gu(t,e,n){return t=Fn(6,t,null,e),t.lanes=n,t}function Xu(t,e,n){return e=Fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function c3(t,e,n,s,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_u(0),this.expirationTimes=_u(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_u(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function kf(t,e,n,s,a,l,h,g,p){return t=new c3(t,e,n,g,p),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Fn(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ff(l),t}function u3(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vi,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function n2(t){if(!t)return ds;t=t._reactInternals;e:{if(Ys(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(pn(n))return nx(t,n,e)}return e}function r2(t,e,n,s,a,l,h,g,p){return t=kf(n,s,!0,t,a,l,h,g,p),t.context=n2(null),n=t.current,s=nn(),a=cs(n),l=Tr(s,a),l.callback=e??null,as(n,l,a),t.current.lanes=a,Pa(t,a,s),mn(t,s),t}function Vc(t,e,n,s){var a=e.current,l=nn(),h=cs(a);return n=n2(n),e.context===null?e.context=n:e.pendingContext=n,e=Tr(l,h),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=as(a,e,h),t!==null&&(tr(t,a,h,l),Pl(t,a,h)),h}function gc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rf(t,e){$1(t,e),(t=t.alternate)&&$1(t,e)}function h3(){return null}var s2=typeof reportError=="function"?reportError:function(t){console.error(t)};function Of(t){this._internalRoot=t}zc.prototype.render=Of.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Vc(t,e,null,null)};zc.prototype.unmount=Of.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qs(function(){Vc(null,t,null,null)}),e[Rr]=null}};function zc(t){this._internalRoot=t}zc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Mm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qr.length&&e!==0&&e<Qr[n].priority;n++);Qr.splice(n,0,t),n===0&&Lm(t)}};function Pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Y1(){}function d3(t,e,n,s,a){if(a){if(typeof s=="function"){var l=s;s=function(){var m=gc(h);l.call(m)}}var h=r2(e,s,t,0,null,!1,!1,"",Y1);return t._reactRootContainer=h,t[Rr]=h.current,ha(t.nodeType===8?t.parentNode:t),qs(),h}for(;a=t.lastChild;)t.removeChild(a);if(typeof s=="function"){var g=s;s=function(){var m=gc(p);g.call(m)}}var p=kf(t,0,!1,null,null,!1,!1,"",Y1);return t._reactRootContainer=p,t[Rr]=p.current,ha(t.nodeType===8?t.parentNode:t),qs(function(){Vc(e,p,n,s)}),p}function Hc(t,e,n,s,a){var l=n._reactRootContainer;if(l){var h=l;if(typeof a=="function"){var g=a;a=function(){var p=gc(h);g.call(p)}}Vc(e,h,t,a)}else h=d3(n,e,t,a,s);return gc(h)}Pm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jo(e.pendingLanes);n!==0&&(Zd(e,n|1),mn(e,vt()),!(je&6)&&(eo=vt()+500,xs()))}break;case 13:qs(function(){var s=Or(t,1);if(s!==null){var a=nn();tr(s,t,1,a)}}),Rf(t,1)}};Qd=function(t){if(t.tag===13){var e=Or(t,134217728);if(e!==null){var n=nn();tr(e,t,134217728,n)}Rf(t,134217728)}};Dm=function(t){if(t.tag===13){var e=cs(t),n=Or(t,e);if(n!==null){var s=nn();tr(n,t,e,s)}Rf(t,e)}};Mm=function(){return Ve};jm=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};Ih=function(t,e,n){switch(e){case"input":if(bh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var a=Dc(s);if(!a)throw Error(ee(90));fm(s),bh(s,a)}}}break;case"textarea":pm(t,n);break;case"select":e=n.value,e!=null&&Ui(t,!!n.multiple,e,!1)}};Em=_f;Cm=qs;var f3={usingClientEntryPoint:!1,Events:[Ma,Si,Dc,vm,bm,_f]},Oo={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g3={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_m(t),t===null?null:t.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||h3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yl.isDisabled&&yl.supportsFiber)try{kc=yl.inject(g3),pr=yl}catch{}}In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f3;In.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pf(e))throw Error(ee(200));return u3(t,e,null,n)};In.createRoot=function(t,e){if(!Pf(t))throw Error(ee(299));var n=!1,s="",a=s2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=kf(t,1,!1,null,null,n,!1,s,a),t[Rr]=e.current,ha(t.nodeType===8?t.parentNode:t),new Of(e)};In.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=_m(e),t=t===null?null:t.stateNode,t};In.flushSync=function(t){return qs(t)};In.hydrate=function(t,e,n){if(!Wc(e))throw Error(ee(200));return Hc(null,t,e,!0,n)};In.hydrateRoot=function(t,e,n){if(!Pf(t))throw Error(ee(405));var s=n!=null&&n.hydratedSources||null,a=!1,l="",h=s2;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),e=r2(e,null,t,1,n??null,a,!1,l,h),t[Rr]=e.current,ha(t),s)for(t=0;t<s.length;t++)n=s[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new zc(e)};In.render=function(t,e,n){if(!Wc(e))throw Error(ee(200));return Hc(null,t,e,!1,n)};In.unmountComponentAtNode=function(t){if(!Wc(t))throw Error(ee(40));return t._reactRootContainer?(qs(function(){Hc(null,null,t,!1,function(){t._reactRootContainer=null,t[Rr]=null})}),!0):!1};In.unstable_batchedUpdates=_f;In.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Wc(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Hc(t,e,n,!1,s)};In.version="18.3.1-next-f1338f8080-20240426";function i2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i2)}catch(t){console.error(t)}}i2(),im.exports=In;var p3=im.exports,o2,Z1=p3;o2=Z1.createRoot,Z1.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var m3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),pe=(t,e)=>{const n=X.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:h,className:g="",children:p,...m},v)=>X.createElement("svg",{ref:v,...m3,width:a,height:a,stroke:s,strokeWidth:h?Number(l)*24/Number(a):l,className:["lucide",`lucide-${x3(t)}`,g].join(" "),...m},[...e.map(([b,C])=>X.createElement(b,C)),...Array.isArray(p)?p:[p]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=pe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=pe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=pe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=pe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=pe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=pe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=pe("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=pe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=pe("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=pe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=pe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=pe("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6h0",key:"1uc279"}],["path",{d:"M14 6h0a6 6 0 0 1 6 6v3",key:"1j9mnm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=pe("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=pe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=pe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=pe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=pe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=pe("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=pe("ScanBarcode",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=pe("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=pe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=pe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=pe("ShoppingBasket",[["path",{d:"m15 11-1 9",key:"5wnq3a"}],["path",{d:"m19 11-4-7",key:"cnml18"}],["path",{d:"M2 11h20",key:"3eubbj"}],["path",{d:"m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4",key:"yiazzp"}],["path",{d:"M4.5 15.5h15",key:"13mye1"}],["path",{d:"m5 11 4-7",key:"116ra9"}],["path",{d:"m9 11 1 9",key:"1ojof7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=pe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=pe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=pe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=pe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=pe("Vault",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}],["path",{d:"m7.9 7.9 2.7 2.7",key:"hpeyl3"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}],["path",{d:"m13.4 10.6 2.7-2.7",key:"264c1n"}],["circle",{cx:"7.5",cy:"16.5",r:".5",fill:"currentColor",key:"nkw3mc"}],["path",{d:"m7.9 16.1 2.7-2.7",key:"p81g5e"}],["circle",{cx:"16.5",cy:"16.5",r:".5",fill:"currentColor",key:"fubopw"}],["path",{d:"m13.4 13.4 2.7 2.7",key:"abhel3"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=pe("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=pe("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=pe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=pe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Lf=X.createContext({});function Bf(t){const e=X.useRef(null);return e.current===null&&(e.current=t()),e.current}const Gc=X.createContext(null),Ff=X.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class K3 extends X.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function q3({children:t,isPresent:e}){const n=X.useId(),s=X.useRef(null),a=X.useRef({width:0,height:0,top:0,left:0}),{nonce:l}=X.useContext(Ff);return X.useInsertionEffect(()=>{const{width:h,height:g,top:p,left:m}=a.current;if(e||!s.current||!h||!g)return;s.current.dataset.motionPopId=n;const v=document.createElement("style");return l&&(v.nonce=l),document.head.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${g}px !important;
            top: ${p}px !important;
            left: ${m}px !important;
          }
        `),()=>{document.head.removeChild(v)}},[e]),w.jsx(K3,{isPresent:e,childRef:s,sizeRef:a,children:X.cloneElement(t,{ref:s})})}const $3=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:a,presenceAffectsLayout:l,mode:h})=>{const g=Bf(Y3),p=X.useId(),m=X.useCallback(b=>{g.set(b,!0);for(const C of g.values())if(!C)return;s&&s()},[g,s]),v=X.useMemo(()=>({id:p,initial:e,isPresent:n,custom:a,onExitComplete:m,register:b=>(g.set(b,!1),()=>g.delete(b))}),l?[Math.random(),m]:[n,m]);return X.useMemo(()=>{g.forEach((b,C)=>g.set(C,!1))},[n]),X.useEffect(()=>{!n&&!g.size&&s&&s()},[n]),h==="popLayout"&&(t=w.jsx(q3,{isPresent:n,children:t})),w.jsx(Gc.Provider,{value:v,children:t})};function Y3(){return new Map}function m2(t=!0){const e=X.useContext(Gc);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:a}=e,l=X.useId();X.useEffect(()=>{t&&a(l)},[t]);const h=X.useCallback(()=>t&&s&&s(l),[l,s,t]);return!n&&s?[!1,h]:[!0]}const vl=t=>t.key||"";function eg(t){const e=[];return X.Children.forEach(t,n=>{X.isValidElement(n)&&e.push(n)}),e}const Uf=typeof window<"u",x2=Uf?X.useLayoutEffect:X.useEffect,Xc=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:l="sync",propagate:h=!1})=>{const[g,p]=m2(h),m=X.useMemo(()=>eg(t),[t]),v=h&&!g?[]:m.map(vl),b=X.useRef(!0),C=X.useRef(m),T=Bf(()=>new Map),[R,P]=X.useState(m),[M,k]=X.useState(m);x2(()=>{b.current=!1,C.current=m;for(let j=0;j<M.length;j++){const U=vl(M[j]);v.includes(U)?T.delete(U):T.get(U)!==!0&&T.set(U,!1)}},[M,v.length,v.join("-")]);const I=[];if(m!==R){let j=[...m];for(let U=0;U<M.length;U++){const z=M[U],L=vl(z);v.includes(L)||(j.splice(U,0,z),I.push(z))}l==="wait"&&I.length&&(j=I),k(eg(j)),P(m);return}const{forceRender:A}=X.useContext(Lf);return w.jsx(w.Fragment,{children:M.map(j=>{const U=vl(j),z=h&&!g?!1:m===M||v.includes(U),L=()=>{if(T.has(U))T.set(U,!0);else return;let V=!0;T.forEach(K=>{K||(V=!1)}),V&&(A==null||A(),k(C.current),h&&(p==null||p()),s&&s())};return w.jsx($3,{isPresent:z,initial:!b.current||n?void 0:!1,custom:z?void 0:e,presenceAffectsLayout:a,mode:l,onExitComplete:z?void 0:L,children:j},U)})})},Sn=t=>t;let y2=Sn;function Vf(t){let e;return()=>(e===void 0&&(e=t()),e)}const no=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s},Ir=t=>t*1e3,Nr=t=>t/1e3,Z3={useManualTiming:!1};function Q3(t){let e=new Set,n=new Set,s=!1,a=!1;const l=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function g(m){l.has(m)&&(p.schedule(m),t()),m(h)}const p={schedule:(m,v=!1,b=!1)=>{const T=b&&s?e:n;return v&&l.add(m),T.has(m)||T.add(m),m},cancel:m=>{n.delete(m),l.delete(m)},process:m=>{if(h=m,s){a=!0;return}s=!0,[e,n]=[n,e],e.forEach(g),e.clear(),s=!1,a&&(a=!1,p.process(m))}};return p}const bl=["read","resolveKeyframes","update","preRender","render","postRender"],J3=40;function w2(t,e){let n=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,h=bl.reduce((k,I)=>(k[I]=Q3(l),k),{}),{read:g,resolveKeyframes:p,update:m,preRender:v,render:b,postRender:C}=h,T=()=>{const k=performance.now();n=!1,a.delta=s?1e3/60:Math.max(Math.min(k-a.timestamp,J3),1),a.timestamp=k,a.isProcessing=!0,g.process(a),p.process(a),m.process(a),v.process(a),b.process(a),C.process(a),a.isProcessing=!1,n&&e&&(s=!1,t(T))},R=()=>{n=!0,s=!0,a.isProcessing||t(T)};return{schedule:bl.reduce((k,I)=>{const A=h[I];return k[I]=(j,U=!1,z=!1)=>(n||R(),A.schedule(j,U,z)),k},{}),cancel:k=>{for(let I=0;I<bl.length;I++)h[bl[I]].cancel(k)},state:a,steps:h}}const{schedule:et,cancel:fs,state:zt,steps:Ku}=w2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Sn,!0),v2=X.createContext({strict:!1}),tg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ro={};for(const t in tg)ro[t]={isEnabled:e=>tg[t].some(n=>!!e[n])};function eE(t){for(const e in t)ro[e]={...ro[e],...t[e]}}const tE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function mc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||tE.has(t)}let b2=t=>!mc(t);function nE(t){t&&(b2=e=>e.startsWith("on")?!mc(e):t(e))}try{nE(require("@emotion/is-prop-valid").default)}catch{}function rE(t,e,n){const s={};for(const a in t)a==="values"&&typeof t.values=="object"||(b2(a)||n===!0&&mc(a)||!e&&!mc(a)||t.draggable&&a.startsWith("onDrag"))&&(s[a]=t[a]);return s}function sE(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...s)=>t(...s);return new Proxy(n,{get:(s,a)=>a==="create"?t:(e.has(a)||e.set(a,t(a)),e.get(a))})}const Kc=X.createContext({});function ba(t){return typeof t=="string"||Array.isArray(t)}function qc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const zf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Wf=["initial",...zf];function $c(t){return qc(t.animate)||Wf.some(e=>ba(t[e]))}function E2(t){return!!($c(t)||t.variants)}function iE(t,e){if($c(t)){const{initial:n,animate:s}=t;return{initial:n===!1||ba(n)?n:void 0,animate:ba(s)?s:void 0}}return t.inherit!==!1?e:{}}function oE(t){const{initial:e,animate:n}=iE(t,X.useContext(Kc));return X.useMemo(()=>({initial:e,animate:n}),[ng(e),ng(n)])}function ng(t){return Array.isArray(t)?t.join(" "):t}const aE=Symbol.for("motionComponentSymbol");function Pi(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function lE(t,e,n){return X.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):Pi(n)&&(n.current=s))},[e])}const Hf=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),cE="framerAppearId",C2="data-"+Hf(cE),{schedule:Gf}=w2(queueMicrotask,!1),A2=X.createContext({});function uE(t,e,n,s,a){var l,h;const{visualElement:g}=X.useContext(Kc),p=X.useContext(v2),m=X.useContext(Gc),v=X.useContext(Ff).reducedMotion,b=X.useRef(null);s=s||p.renderer,!b.current&&s&&(b.current=s(t,{visualState:e,parent:g,props:n,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:v}));const C=b.current,T=X.useContext(A2);C&&!C.projection&&a&&(C.type==="html"||C.type==="svg")&&hE(b.current,n,a,T);const R=X.useRef(!1);X.useInsertionEffect(()=>{C&&R.current&&C.update(n,m)});const P=n[C2],M=X.useRef(!!P&&!(!((l=window.MotionHandoffIsComplete)===null||l===void 0)&&l.call(window,P))&&((h=window.MotionHasOptimisedAnimation)===null||h===void 0?void 0:h.call(window,P)));return x2(()=>{C&&(R.current=!0,window.MotionIsMounted=!0,C.updateFeatures(),Gf.render(C.render),M.current&&C.animationState&&C.animationState.animateChanges())}),X.useEffect(()=>{C&&(!M.current&&C.animationState&&C.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)===null||k===void 0||k.call(window,P)}),M.current=!1))}),C}function hE(t,e,n,s){const{layoutId:a,layout:l,drag:h,dragConstraints:g,layoutScroll:p,layoutRoot:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:S2(t.parent)),t.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!h||g&&Pi(g),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}function S2(t){if(t)return t.options.allowProjection!==!1?t.projection:S2(t.parent)}function dE({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:a}){var l,h;t&&eE(t);function g(m,v){let b;const C={...X.useContext(Ff),...m,layoutId:fE(m)},{isStatic:T}=C,R=oE(m),P=s(m,T);if(!T&&Uf){gE();const M=pE(C);b=M.MeasureLayout,R.visualElement=uE(a,P,C,e,M.ProjectionNode)}return w.jsxs(Kc.Provider,{value:R,children:[b&&R.visualElement?w.jsx(b,{visualElement:R.visualElement,...C}):null,n(a,m,lE(P,R.visualElement,v),P,T,R.visualElement)]})}g.displayName=`motion.${typeof a=="string"?a:`create(${(h=(l=a.displayName)!==null&&l!==void 0?l:a.name)!==null&&h!==void 0?h:""})`}`;const p=X.forwardRef(g);return p[aE]=a,p}function fE({layoutId:t}){const e=X.useContext(Lf).id;return e&&t!==void 0?e+"-"+t:t}function gE(t,e){X.useContext(v2).strict}function pE(t){const{drag:e,layout:n}=ro;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const mE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Xf(t){return typeof t!="string"||t.includes("-")?!1:!!(mE.indexOf(t)>-1||/[A-Z]/u.test(t))}function rg(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function Kf(t,e,n,s){if(typeof e=="function"){const[a,l]=rg(s);e=e(n!==void 0?n:t.custom,a,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,l]=rg(s);e=e(n!==void 0?n:t.custom,a,l)}return e}const ud=t=>Array.isArray(t),xE=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),yE=t=>ud(t)?t[t.length-1]||0:t,Zt=t=>!!(t&&t.getVelocity);function zl(t){const e=Zt(t)?t.get():t;return xE(e)?e.toValue():e}function wE({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},s,a,l){const h={latestValues:vE(s,a,l,t),renderState:e()};return n&&(h.onMount=g=>n({props:s,current:g,...h}),h.onUpdate=g=>n(g)),h}const _2=t=>(e,n)=>{const s=X.useContext(Kc),a=X.useContext(Gc),l=()=>wE(t,e,s,a);return n?l():Bf(l)};function vE(t,e,n,s){const a={},l=s(t,{});for(const C in l)a[C]=zl(l[C]);let{initial:h,animate:g}=t;const p=$c(t),m=E2(t);e&&m&&!p&&t.inherit!==!1&&(h===void 0&&(h=e.initial),g===void 0&&(g=e.animate));let v=n?n.initial===!1:!1;v=v||h===!1;const b=v?g:h;if(b&&typeof b!="boolean"&&!qc(b)){const C=Array.isArray(b)?b:[b];for(let T=0;T<C.length;T++){const R=Kf(t,C[T]);if(R){const{transitionEnd:P,transition:M,...k}=R;for(const I in k){let A=k[I];if(Array.isArray(A)){const j=v?A.length-1:0;A=A[j]}A!==null&&(a[I]=A)}for(const I in P)a[I]=P[I]}}}return a}const co=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zs=new Set(co),T2=t=>e=>typeof e=="string"&&e.startsWith(t),I2=T2("--"),bE=T2("var(--"),qf=t=>bE(t)?EE.test(t.split("/*")[0].trim()):!1,EE=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,N2=(t,e)=>e&&typeof t=="number"?e.transform(t):t,jr=(t,e,n)=>n>e?e:n<t?t:n,uo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ea={...uo,transform:t=>jr(0,1,t)},El={...uo,default:1},La=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),qr=La("deg"),xr=La("%"),Ee=La("px"),CE=La("vh"),AE=La("vw"),sg={...xr,parse:t=>xr.parse(t)/100,transform:t=>xr.transform(t*100)},SE={borderWidth:Ee,borderTopWidth:Ee,borderRightWidth:Ee,borderBottomWidth:Ee,borderLeftWidth:Ee,borderRadius:Ee,radius:Ee,borderTopLeftRadius:Ee,borderTopRightRadius:Ee,borderBottomRightRadius:Ee,borderBottomLeftRadius:Ee,width:Ee,maxWidth:Ee,height:Ee,maxHeight:Ee,top:Ee,right:Ee,bottom:Ee,left:Ee,padding:Ee,paddingTop:Ee,paddingRight:Ee,paddingBottom:Ee,paddingLeft:Ee,margin:Ee,marginTop:Ee,marginRight:Ee,marginBottom:Ee,marginLeft:Ee,backgroundPositionX:Ee,backgroundPositionY:Ee},_E={rotate:qr,rotateX:qr,rotateY:qr,rotateZ:qr,scale:El,scaleX:El,scaleY:El,scaleZ:El,skew:qr,skewX:qr,skewY:qr,distance:Ee,translateX:Ee,translateY:Ee,translateZ:Ee,x:Ee,y:Ee,z:Ee,perspective:Ee,transformPerspective:Ee,opacity:Ea,originX:sg,originY:sg,originZ:Ee},ig={...uo,transform:Math.round},$f={...SE,..._E,zIndex:ig,size:Ee,fillOpacity:Ea,strokeOpacity:Ea,numOctaves:ig},TE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},IE=co.length;function NE(t,e,n){let s="",a=!0;for(let l=0;l<IE;l++){const h=co[l],g=t[h];if(g===void 0)continue;let p=!0;if(typeof g=="number"?p=g===(h.startsWith("scale")?1:0):p=parseFloat(g)===0,!p||n){const m=N2(g,$f[h]);if(!p){a=!1;const v=TE[h]||h;s+=`${v}(${m}) `}n&&(e[h]=m)}}return s=s.trim(),n?s=n(e,a?"":s):a&&(s="none"),s}function Yf(t,e,n){const{style:s,vars:a,transformOrigin:l}=t;let h=!1,g=!1;for(const p in e){const m=e[p];if(Zs.has(p)){h=!0;continue}else if(I2(p)){a[p]=m;continue}else{const v=N2(m,$f[p]);p.startsWith("origin")?(g=!0,l[p]=v):s[p]=v}}if(e.transform||(h||n?s.transform=NE(e,t.transform,n):s.transform&&(s.transform="none")),g){const{originX:p="50%",originY:m="50%",originZ:v=0}=l;s.transformOrigin=`${p} ${m} ${v}`}}const kE={offset:"stroke-dashoffset",array:"stroke-dasharray"},RE={offset:"strokeDashoffset",array:"strokeDasharray"};function OE(t,e,n=1,s=0,a=!0){t.pathLength=1;const l=a?kE:RE;t[l.offset]=Ee.transform(-s);const h=Ee.transform(e),g=Ee.transform(n);t[l.array]=`${h} ${g}`}function og(t,e,n){return typeof t=="string"?t:Ee.transform(e+n*t)}function PE(t,e,n){const s=og(e,t.x,t.width),a=og(n,t.y,t.height);return`${s} ${a}`}function Zf(t,{attrX:e,attrY:n,attrScale:s,originX:a,originY:l,pathLength:h,pathSpacing:g=1,pathOffset:p=0,...m},v,b){if(Yf(t,m,b),v){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:C,style:T,dimensions:R}=t;C.transform&&(R&&(T.transform=C.transform),delete C.transform),R&&(a!==void 0||l!==void 0||T.transform)&&(T.transformOrigin=PE(R,a!==void 0?a:.5,l!==void 0?l:.5)),e!==void 0&&(C.x=e),n!==void 0&&(C.y=n),s!==void 0&&(C.scale=s),h!==void 0&&OE(C,h,g,p,!1)}const Qf=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),k2=()=>({...Qf(),attrs:{}}),Jf=t=>typeof t=="string"&&t.toLowerCase()==="svg";function R2(t,{style:e,vars:n},s,a){Object.assign(t.style,e,a&&a.getProjectionStyles(s));for(const l in n)t.style.setProperty(l,n[l])}const O2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function P2(t,e,n,s){R2(t,e,void 0,s);for(const a in e.attrs)t.setAttribute(O2.has(a)?a:Hf(a),e.attrs[a])}const xc={};function DE(t){Object.assign(xc,t)}function D2(t,{layout:e,layoutId:n}){return Zs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!xc[t]||t==="opacity")}function e0(t,e,n){var s;const{style:a}=t,l={};for(const h in a)(Zt(a[h])||e.style&&Zt(e.style[h])||D2(h,t)||((s=n==null?void 0:n.getValue(h))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(l[h]=a[h]);return l}function M2(t,e,n){const s=e0(t,e,n);for(const a in t)if(Zt(t[a])||Zt(e[a])){const l=co.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[l]=t[a]}return s}function ME(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const ag=["x","y","width","height","cx","cy","r"],jE={useVisualState:_2({scrapeMotionValuesFromProps:M2,createRenderState:k2,onUpdate:({props:t,prevProps:e,current:n,renderState:s,latestValues:a})=>{if(!n)return;let l=!!t.drag;if(!l){for(const g in a)if(Zs.has(g)){l=!0;break}}if(!l)return;let h=!e;if(e)for(let g=0;g<ag.length;g++){const p=ag[g];t[p]!==e[p]&&(h=!0)}h&&et.read(()=>{ME(n,s),et.render(()=>{Zf(s,a,Jf(n.tagName),t.transformTemplate),P2(n,s)})})}})},LE={useVisualState:_2({scrapeMotionValuesFromProps:e0,createRenderState:Qf})};function j2(t,e,n){for(const s in e)!Zt(e[s])&&!D2(s,n)&&(t[s]=e[s])}function BE({transformTemplate:t},e){return X.useMemo(()=>{const n=Qf();return Yf(n,e,t),Object.assign({},n.vars,n.style)},[e])}function FE(t,e){const n=t.style||{},s={};return j2(s,n,t),Object.assign(s,BE(t,e)),s}function UE(t,e){const n={},s=FE(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}function VE(t,e,n,s){const a=X.useMemo(()=>{const l=k2();return Zf(l,e,Jf(s),t.transformTemplate),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};j2(l,t.style,t),a.style={...l,...a.style}}return a}function zE(t=!1){return(n,s,a,{latestValues:l},h)=>{const p=(Xf(n)?VE:UE)(s,l,h,n),m=rE(s,typeof n=="string",t),v=n!==X.Fragment?{...m,...p,ref:a}:{},{children:b}=s,C=X.useMemo(()=>Zt(b)?b.get():b,[b]);return X.createElement(n,{...v,children:C})}}function WE(t,e){return function(s,{forwardMotionProps:a}={forwardMotionProps:!1}){const h={...Xf(s)?jE:LE,preloadedFeatures:t,useRender:zE(a),createVisualElement:e,Component:s};return dE(h)}}function L2(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}function Yc(t,e,n){const s=t.getProps();return Kf(s,e,n!==void 0?n:s.custom,t)}const HE=Vf(()=>window.ScrollTimeline!==void 0);class GE{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=n}attachTimeline(e,n){const s=this.animations.map(a=>{if(HE()&&a.attachTimeline)return a.attachTimeline(e);if(typeof n=="function")return n(a)});return()=>{s.forEach((a,l)=>{a&&a(),this.animations[l].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class XE extends GE{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function t0(t,e){return t?t[e]||t.default||t:void 0}const hd=2e4;function B2(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<hd;)e+=n,s=t.next(e);return e>=hd?1/0:e}function n0(t){return typeof t=="function"}function lg(t,e){t.timeline=e,t.onfinish=null}const r0=t=>Array.isArray(t)&&typeof t[0]=="number",KE={linearEasing:void 0};function qE(t,e){const n=Vf(t);return()=>{var s;return(s=KE[e])!==null&&s!==void 0?s:n()}}const yc=qE(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),F2=(t,e,n=10)=>{let s="";const a=Math.max(Math.round(e/n),2);for(let l=0;l<a;l++)s+=t(no(0,a-1,l))+", ";return`linear(${s.substring(0,s.length-2)})`};function U2(t){return!!(typeof t=="function"&&yc()||!t||typeof t=="string"&&(t in dd||yc())||r0(t)||Array.isArray(t)&&t.every(U2))}const Bo=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,dd={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bo([0,.65,.55,1]),circOut:Bo([.55,0,1,.45]),backIn:Bo([.31,.01,.66,-.59]),backOut:Bo([.33,1.53,.69,.99])};function V2(t,e){if(t)return typeof t=="function"&&yc()?F2(t,e):r0(t)?Bo(t):Array.isArray(t)?t.map(n=>V2(n,e)||dd.easeOut):dd[t]}const qn={x:!1,y:!1};function z2(){return qn.x||qn.y}function $E(t,e,n){var s;if(t instanceof Element)return[t];if(typeof t=="string"){let a=document;const l=(s=void 0)!==null&&s!==void 0?s:a.querySelectorAll(t);return l?Array.from(l):[]}return Array.from(t)}function W2(t,e){const n=$E(t),s=new AbortController,a={passive:!0,...e,signal:s.signal};return[n,a,()=>s.abort()]}function cg(t){return e=>{e.pointerType==="touch"||z2()||t(e)}}function YE(t,e,n={}){const[s,a,l]=W2(t,n),h=cg(g=>{const{target:p}=g,m=e(g);if(typeof m!="function"||!p)return;const v=cg(b=>{m(b),p.removeEventListener("pointerleave",v)});p.addEventListener("pointerleave",v,a)});return s.forEach(g=>{g.addEventListener("pointerenter",h,a)}),l}const H2=(t,e)=>e?t===e?!0:H2(t,e.parentElement):!1,s0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ZE=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QE(t){return ZE.has(t.tagName)||t.tabIndex!==-1}const Fo=new WeakSet;function ug(t){return e=>{e.key==="Enter"&&t(e)}}function qu(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const JE=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=ug(()=>{if(Fo.has(n))return;qu(n,"down");const a=ug(()=>{qu(n,"up")}),l=()=>qu(n,"cancel");n.addEventListener("keyup",a,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function hg(t){return s0(t)&&!z2()}function eC(t,e,n={}){const[s,a,l]=W2(t,n),h=g=>{const p=g.currentTarget;if(!hg(g)||Fo.has(p))return;Fo.add(p);const m=e(g),v=(T,R)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",C),!(!hg(T)||!Fo.has(p))&&(Fo.delete(p),typeof m=="function"&&m(T,{success:R}))},b=T=>{v(T,n.useGlobalTarget||H2(p,T.target))},C=T=>{v(T,!1)};window.addEventListener("pointerup",b,a),window.addEventListener("pointercancel",C,a)};return s.forEach(g=>{!QE(g)&&g.getAttribute("tabindex")===null&&(g.tabIndex=0),(n.useGlobalTarget?window:g).addEventListener("pointerdown",h,a),g.addEventListener("focus",m=>JE(m,a),a)}),l}function tC(t){return t==="x"||t==="y"?qn[t]?null:(qn[t]=!0,()=>{qn[t]=!1}):qn.x||qn.y?null:(qn.x=qn.y=!0,()=>{qn.x=qn.y=!1})}const G2=new Set(["width","height","top","left","right","bottom",...co]);let Wl;function nC(){Wl=void 0}const yr={now:()=>(Wl===void 0&&yr.set(zt.isProcessing||Z3.useManualTiming?zt.timestamp:performance.now()),Wl),set:t=>{Wl=t,queueMicrotask(nC)}};function i0(t,e){t.indexOf(e)===-1&&t.push(e)}function o0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class a0{constructor(){this.subscriptions=[]}add(e){return i0(this.subscriptions,e),()=>o0(this.subscriptions,e)}notify(e,n,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,n,s);else for(let l=0;l<a;l++){const h=this.subscriptions[l];h&&h(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function X2(t,e){return e?t*(1e3/e):0}const dg=30,rC=t=>!isNaN(parseFloat(t));class sC{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,a=!0)=>{const l=yr.now();this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=yr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=rC(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new a0);const s=this.events[e].add(n);return e==="change"?()=>{s(),et.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=yr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dg)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,dg);return X2(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ca(t,e){return new sC(t,e)}function iC(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ca(n))}function oC(t,e){const n=Yc(t,e);let{transitionEnd:s={},transition:a={},...l}=n||{};l={...l,...s};for(const h in l){const g=yE(l[h]);iC(t,h,g)}}function aC(t){return!!(Zt(t)&&t.add)}function fd(t,e){const n=t.getValue("willChange");if(aC(n))return n.add(e)}function K2(t){return t.props[C2]}const q2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,lC=1e-7,cC=12;function uC(t,e,n,s,a){let l,h,g=0;do h=e+(n-e)/2,l=q2(h,s,a)-t,l>0?n=h:e=h;while(Math.abs(l)>lC&&++g<cC);return h}function Ba(t,e,n,s){if(t===e&&n===s)return Sn;const a=l=>uC(l,0,1,t,n);return l=>l===0||l===1?l:q2(a(l),e,s)}const $2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Y2=t=>e=>1-t(1-e),Z2=Ba(.33,1.53,.69,.99),l0=Y2(Z2),Q2=$2(l0),J2=t=>(t*=2)<1?.5*l0(t):.5*(2-Math.pow(2,-10*(t-1))),c0=t=>1-Math.sin(Math.acos(t)),ey=Y2(c0),ty=$2(c0),ny=t=>/^0[^.\s]+$/u.test(t);function hC(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||ny(t):!0}const Zo=t=>Math.round(t*1e5)/1e5,u0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dC(t){return t==null}const fC=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,h0=(t,e)=>n=>!!(typeof n=="string"&&fC.test(n)&&n.startsWith(t)||e&&!dC(n)&&Object.prototype.hasOwnProperty.call(n,e)),ry=(t,e,n)=>s=>{if(typeof s!="string")return s;const[a,l,h,g]=s.match(u0);return{[t]:parseFloat(a),[e]:parseFloat(l),[n]:parseFloat(h),alpha:g!==void 0?parseFloat(g):1}},gC=t=>jr(0,255,t),$u={...uo,transform:t=>Math.round(gC(t))},Fs={test:h0("rgb","red"),parse:ry("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+$u.transform(t)+", "+$u.transform(e)+", "+$u.transform(n)+", "+Zo(Ea.transform(s))+")"};function pC(t){let e="",n="",s="",a="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),a=t.substring(4,5),e+=e,n+=n,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const gd={test:h0("#"),parse:pC,transform:Fs.transform},Di={test:h0("hsl","hue"),parse:ry("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+xr.transform(Zo(e))+", "+xr.transform(Zo(n))+", "+Zo(Ea.transform(s))+")"},$t={test:t=>Fs.test(t)||gd.test(t)||Di.test(t),parse:t=>Fs.test(t)?Fs.parse(t):Di.test(t)?Di.parse(t):gd.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fs.transform(t):Di.transform(t)},mC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function xC(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(u0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(mC))===null||n===void 0?void 0:n.length)||0)>0}const sy="number",iy="color",yC="var",wC="var(",fg="${}",vC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Aa(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},a=[];let l=0;const g=e.replace(vC,p=>($t.test(p)?(s.color.push(l),a.push(iy),n.push($t.parse(p))):p.startsWith(wC)?(s.var.push(l),a.push(yC),n.push(p)):(s.number.push(l),a.push(sy),n.push(parseFloat(p))),++l,fg)).split(fg);return{values:n,split:g,indexes:s,types:a}}function oy(t){return Aa(t).values}function ay(t){const{split:e,types:n}=Aa(t),s=e.length;return a=>{let l="";for(let h=0;h<s;h++)if(l+=e[h],a[h]!==void 0){const g=n[h];g===sy?l+=Zo(a[h]):g===iy?l+=$t.transform(a[h]):l+=a[h]}return l}}const bC=t=>typeof t=="number"?0:t;function EC(t){const e=oy(t);return ay(t)(e.map(bC))}const gs={test:xC,parse:oy,createTransformer:ay,getAnimatableNone:EC},CC=new Set(["brightness","contrast","saturate","opacity"]);function AC(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(u0)||[];if(!s)return t;const a=n.replace(s,"");let l=CC.has(e)?1:0;return s!==n&&(l*=100),e+"("+l+a+")"}const SC=/\b([a-z-]*)\(.*?\)/gu,pd={...gs,getAnimatableNone:t=>{const e=t.match(SC);return e?e.map(AC).join(" "):t}},_C={...$f,color:$t,backgroundColor:$t,outlineColor:$t,fill:$t,stroke:$t,borderColor:$t,borderTopColor:$t,borderRightColor:$t,borderBottomColor:$t,borderLeftColor:$t,filter:pd,WebkitFilter:pd},d0=t=>_C[t];function ly(t,e){let n=d0(t);return n!==pd&&(n=gs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const TC=new Set(["auto","none","0"]);function IC(t,e,n){let s=0,a;for(;s<t.length&&!a;){const l=t[s];typeof l=="string"&&!TC.has(l)&&Aa(l).values.length&&(a=t[s]),s++}if(a&&n)for(const l of e)t[l]=ly(n,a)}const gg=t=>t===uo||t===Ee,pg=(t,e)=>parseFloat(t.split(", ")[e]),mg=(t,e)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const a=s.match(/^matrix3d\((.+)\)$/u);if(a)return pg(a[1],e);{const l=s.match(/^matrix\((.+)\)$/u);return l?pg(l[1],t):0}},NC=new Set(["x","y","z"]),kC=co.filter(t=>!NC.has(t));function RC(t){const e=[];return kC.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const so={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:mg(4,13),y:mg(5,14)};so.translateX=so.x;so.translateY=so.y;const Ws=new Set;let md=!1,xd=!1;function cy(){if(xd){const t=Array.from(Ws).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const a=RC(s);a.length&&(n.set(s,a),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const a=n.get(s);a&&a.forEach(([l,h])=>{var g;(g=s.getValue(l))===null||g===void 0||g.set(h)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}xd=!1,md=!1,Ws.forEach(t=>t.complete()),Ws.clear()}function uy(){Ws.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(xd=!0)})}function OC(){uy(),cy()}class f0{constructor(e,n,s,a,l,h=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=a,this.element=l,this.isAsync=h}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ws.add(this),md||(md=!0,et.read(uy),et.resolveKeyframes(cy))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:a}=this;for(let l=0;l<e.length;l++)if(e[l]===null)if(l===0){const h=a==null?void 0:a.get(),g=e[e.length-1];if(h!==void 0)e[0]=h;else if(s&&n){const p=s.readValue(n,g);p!=null&&(e[0]=p)}e[0]===void 0&&(e[0]=g),a&&h===void 0&&a.set(e[0])}else e[l]=e[l-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ws.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ws.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const hy=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),PC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function DC(t){const e=PC.exec(t);if(!e)return[,];const[,n,s,a]=e;return[`--${n??s}`,a]}function dy(t,e,n=1){const[s,a]=DC(t);if(!s)return;const l=window.getComputedStyle(e).getPropertyValue(s);if(l){const h=l.trim();return hy(h)?parseFloat(h):h}return qf(a)?dy(a,e,n+1):a}const fy=t=>e=>e.test(t),MC={test:t=>t==="auto",parse:t=>t},gy=[uo,Ee,xr,qr,AE,CE,MC],xg=t=>gy.find(fy(t));class py extends f0{constructor(e,n,s,a,l){super(e,n,s,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let p=0;p<e.length;p++){let m=e[p];if(typeof m=="string"&&(m=m.trim(),qf(m))){const v=dy(m,n.current);v!==void 0&&(e[p]=v),p===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!G2.has(s)||e.length!==2)return;const[a,l]=e,h=xg(a),g=xg(l);if(h!==g)if(gg(h)&&gg(g))for(let p=0;p<e.length;p++){const m=e[p];typeof m=="string"&&(e[p]=parseFloat(m))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let a=0;a<e.length;a++)hC(e[a])&&s.push(a);s.length&&IC(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=so[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&e.getValue(s,a).jump(a,!1)}measureEndState(){var e;const{element:n,name:s,unresolvedKeyframes:a}=this;if(!n||!n.current)return;const l=n.getValue(s);l&&l.jump(this.measuredOrigin,!1);const h=a.length-1,g=a[h];a[h]=so[s](n.measureViewportBox(),window.getComputedStyle(n.current)),g!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=g),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([p,m])=>{n.getValue(p).set(m)}),this.resolveNoneKeyframes()}}const yg=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(gs.test(t)||t==="0")&&!t.startsWith("url("));function jC(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function LC(t,e,n,s){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],h=yg(a,e),g=yg(l,e);return!h||!g?!1:jC(t)||(n==="spring"||n0(n))&&s}const BC=t=>t!==null;function Zc(t,{repeat:e,repeatType:n="loop"},s){const a=t.filter(BC),l=e&&n!=="loop"&&e%2===1?0:a.length-1;return!l||s===void 0?a[l]:s}const FC=40;class my{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:h="loop",...g}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=yr.now(),this.options={autoplay:e,delay:n,type:s,repeat:a,repeatDelay:l,repeatType:h,...g},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>FC?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&OC(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=yr.now(),this.hasAttemptedResolve=!0;const{name:s,type:a,velocity:l,delay:h,onComplete:g,onUpdate:p,isGenerator:m}=this.options;if(!m&&!LC(e,s,a,l))if(h)this.options.duration=0;else{p&&p(Zc(e,this.options,n)),g&&g(),this.resolveFinishedPromise();return}const v=this.initPlayback(e,n);v!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...v},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const lt=(t,e,n)=>t+(e-t)*n;function Yu(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function UC({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let a=0,l=0,h=0;if(!e)a=l=h=n;else{const g=n<.5?n*(1+e):n+e-n*e,p=2*n-g;a=Yu(p,g,t+1/3),l=Yu(p,g,t),h=Yu(p,g,t-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(h*255),alpha:s}}function wc(t,e){return n=>n>0?e:t}const Zu=(t,e,n)=>{const s=t*t,a=n*(e*e-s)+s;return a<0?0:Math.sqrt(a)},VC=[gd,Fs,Di],zC=t=>VC.find(e=>e.test(t));function wg(t){const e=zC(t);if(!e)return!1;let n=e.parse(t);return e===Di&&(n=UC(n)),n}const vg=(t,e)=>{const n=wg(t),s=wg(e);if(!n||!s)return wc(t,e);const a={...n};return l=>(a.red=Zu(n.red,s.red,l),a.green=Zu(n.green,s.green,l),a.blue=Zu(n.blue,s.blue,l),a.alpha=lt(n.alpha,s.alpha,l),Fs.transform(a))},WC=(t,e)=>n=>e(t(n)),Fa=(...t)=>t.reduce(WC),yd=new Set(["none","hidden"]);function HC(t,e){return yd.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function GC(t,e){return n=>lt(t,e,n)}function g0(t){return typeof t=="number"?GC:typeof t=="string"?qf(t)?wc:$t.test(t)?vg:qC:Array.isArray(t)?xy:typeof t=="object"?$t.test(t)?vg:XC:wc}function xy(t,e){const n=[...t],s=n.length,a=t.map((l,h)=>g0(l)(l,e[h]));return l=>{for(let h=0;h<s;h++)n[h]=a[h](l);return n}}function XC(t,e){const n={...t,...e},s={};for(const a in n)t[a]!==void 0&&e[a]!==void 0&&(s[a]=g0(t[a])(t[a],e[a]));return a=>{for(const l in s)n[l]=s[l](a);return n}}function KC(t,e){var n;const s=[],a={color:0,var:0,number:0};for(let l=0;l<e.values.length;l++){const h=e.types[l],g=t.indexes[h][a[h]],p=(n=t.values[g])!==null&&n!==void 0?n:0;s[l]=p,a[h]++}return s}const qC=(t,e)=>{const n=gs.createTransformer(e),s=Aa(t),a=Aa(e);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?yd.has(t)&&!a.values.length||yd.has(e)&&!s.values.length?HC(t,e):Fa(xy(KC(s,a),a.values),n):wc(t,e)};function yy(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?lt(t,e,n):g0(t)(t,e)}const $C=5;function wy(t,e,n){const s=Math.max(e-$C,0);return X2(n-t(s),e-s)}const mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Qu=.001;function YC({duration:t=mt.duration,bounce:e=mt.bounce,velocity:n=mt.velocity,mass:s=mt.mass}){let a,l,h=1-e;h=jr(mt.minDamping,mt.maxDamping,h),t=jr(mt.minDuration,mt.maxDuration,Nr(t)),h<1?(a=m=>{const v=m*h,b=v*t,C=v-n,T=wd(m,h),R=Math.exp(-b);return Qu-C/T*R},l=m=>{const b=m*h*t,C=b*n+n,T=Math.pow(h,2)*Math.pow(m,2)*t,R=Math.exp(-b),P=wd(Math.pow(m,2),h);return(-a(m)+Qu>0?-1:1)*((C-T)*R)/P}):(a=m=>{const v=Math.exp(-m*t),b=(m-n)*t+1;return-Qu+v*b},l=m=>{const v=Math.exp(-m*t),b=(n-m)*(t*t);return v*b});const g=5/t,p=QC(a,l,g);if(t=Ir(t),isNaN(p))return{stiffness:mt.stiffness,damping:mt.damping,duration:t};{const m=Math.pow(p,2)*s;return{stiffness:m,damping:h*2*Math.sqrt(s*m),duration:t}}}const ZC=12;function QC(t,e,n){let s=n;for(let a=1;a<ZC;a++)s=s-t(s)/e(s);return s}function wd(t,e){return t*Math.sqrt(1-e*e)}const JC=["duration","bounce"],eA=["stiffness","damping","mass"];function bg(t,e){return e.some(n=>t[n]!==void 0)}function tA(t){let e={velocity:mt.velocity,stiffness:mt.stiffness,damping:mt.damping,mass:mt.mass,isResolvedFromDuration:!1,...t};if(!bg(t,eA)&&bg(t,JC))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),a=s*s,l=2*jr(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:mt.mass,stiffness:a,damping:l}}else{const n=YC(t);e={...e,...n,mass:mt.mass},e.isResolvedFromDuration=!0}return e}function vy(t=mt.visualDuration,e=mt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:a}=n;const l=n.keyframes[0],h=n.keyframes[n.keyframes.length-1],g={done:!1,value:l},{stiffness:p,damping:m,mass:v,duration:b,velocity:C,isResolvedFromDuration:T}=tA({...n,velocity:-Nr(n.velocity||0)}),R=C||0,P=m/(2*Math.sqrt(p*v)),M=h-l,k=Nr(Math.sqrt(p/v)),I=Math.abs(M)<5;s||(s=I?mt.restSpeed.granular:mt.restSpeed.default),a||(a=I?mt.restDelta.granular:mt.restDelta.default);let A;if(P<1){const U=wd(k,P);A=z=>{const L=Math.exp(-P*k*z);return h-L*((R+P*k*M)/U*Math.sin(U*z)+M*Math.cos(U*z))}}else if(P===1)A=U=>h-Math.exp(-k*U)*(M+(R+k*M)*U);else{const U=k*Math.sqrt(P*P-1);A=z=>{const L=Math.exp(-P*k*z),V=Math.min(U*z,300);return h-L*((R+P*k*M)*Math.sinh(V)+U*M*Math.cosh(V))/U}}const j={calculatedDuration:T&&b||null,next:U=>{const z=A(U);if(T)g.done=U>=b;else{let L=0;P<1&&(L=U===0?Ir(R):wy(A,U,z));const V=Math.abs(L)<=s,K=Math.abs(h-z)<=a;g.done=V&&K}return g.value=g.done?h:z,g},toString:()=>{const U=Math.min(B2(j),hd),z=F2(L=>j.next(U*L).value,U,30);return U+"ms "+z}};return j}function Eg({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:h,min:g,max:p,restDelta:m=.5,restSpeed:v}){const b=t[0],C={done:!1,value:b},T=V=>g!==void 0&&V<g||p!==void 0&&V>p,R=V=>g===void 0?p:p===void 0||Math.abs(g-V)<Math.abs(p-V)?g:p;let P=n*e;const M=b+P,k=h===void 0?M:h(M);k!==M&&(P=k-b);const I=V=>-P*Math.exp(-V/s),A=V=>k+I(V),j=V=>{const K=I(V),Z=A(V);C.done=Math.abs(K)<=m,C.value=C.done?k:Z};let U,z;const L=V=>{T(C.value)&&(U=V,z=vy({keyframes:[C.value,R(C.value)],velocity:wy(A,V,C.value),damping:a,stiffness:l,restDelta:m,restSpeed:v}))};return L(0),{calculatedDuration:null,next:V=>{let K=!1;return!z&&U===void 0&&(K=!0,j(V),L(V)),U!==void 0&&V>=U?z.next(V-U):(!K&&j(V),C)}}}const nA=Ba(.42,0,1,1),rA=Ba(0,0,.58,1),by=Ba(.42,0,.58,1),sA=t=>Array.isArray(t)&&typeof t[0]!="number",iA={linear:Sn,easeIn:nA,easeInOut:by,easeOut:rA,circIn:c0,circInOut:ty,circOut:ey,backIn:l0,backInOut:Q2,backOut:Z2,anticipate:J2},Cg=t=>{if(r0(t)){y2(t.length===4);const[e,n,s,a]=t;return Ba(e,n,s,a)}else if(typeof t=="string")return iA[t];return t};function oA(t,e,n){const s=[],a=n||yy,l=t.length-1;for(let h=0;h<l;h++){let g=a(t[h],t[h+1]);if(e){const p=Array.isArray(e)?e[h]||Sn:e;g=Fa(p,g)}s.push(g)}return s}function aA(t,e,{clamp:n=!0,ease:s,mixer:a}={}){const l=t.length;if(y2(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const h=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const g=oA(e,s,a),p=g.length,m=v=>{if(h&&v<t[0])return e[0];let b=0;if(p>1)for(;b<t.length-2&&!(v<t[b+1]);b++);const C=no(t[b],t[b+1],v);return g[b](C)};return n?v=>m(jr(t[0],t[l-1],v)):m}function lA(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const a=no(0,e,s);t.push(lt(n,1,a))}}function cA(t){const e=[0];return lA(e,t.length-1),e}function uA(t,e){return t.map(n=>n*e)}function hA(t,e){return t.map(()=>e||by).splice(0,t.length-1)}function vc({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const a=sA(s)?s.map(Cg):Cg(s),l={done:!1,value:e[0]},h=uA(n&&n.length===e.length?n:cA(e),t),g=aA(h,e,{ease:Array.isArray(a)?a:hA(e,a)});return{calculatedDuration:t,next:p=>(l.value=g(p),l.done=p>=t,l)}}const dA=t=>{const e=({timestamp:n})=>t(n);return{start:()=>et.update(e,!0),stop:()=>fs(e),now:()=>zt.isProcessing?zt.timestamp:yr.now()}},fA={decay:Eg,inertia:Eg,tween:vc,keyframes:vc,spring:vy},gA=t=>t/100;class p0 extends my{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:p}=this.options;p&&p()};const{name:n,motionValue:s,element:a,keyframes:l}=this.options,h=(a==null?void 0:a.KeyframeResolver)||f0,g=(p,m)=>this.onKeyframesResolved(p,m);this.resolver=new h(l,g,n,s,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l,velocity:h=0}=this.options,g=n0(n)?n:fA[n]||vc;let p,m;g!==vc&&typeof e[0]!="number"&&(p=Fa(gA,yy(e[0],e[1])),e=[0,100]);const v=g({...this.options,keyframes:e});l==="mirror"&&(m=g({...this.options,keyframes:[...e].reverse(),velocity:-h})),v.calculatedDuration===null&&(v.calculatedDuration=B2(v));const{calculatedDuration:b}=v,C=b+a,T=C*(s+1)-a;return{generator:v,mirroredGenerator:m,mapPercentToKeyframes:p,calculatedDuration:b,resolvedDuration:C,totalDuration:T}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:s}=this;if(!s){const{keyframes:V}=this.options;return{done:!0,value:V[V.length-1]}}const{finalKeyframe:a,generator:l,mirroredGenerator:h,mapPercentToKeyframes:g,keyframes:p,calculatedDuration:m,totalDuration:v,resolvedDuration:b}=s;if(this.startTime===null)return l.next(0);const{delay:C,repeat:T,repeatType:R,repeatDelay:P,onUpdate:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-v/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const k=this.currentTime-C*(this.speed>=0?1:-1),I=this.speed>=0?k<0:k>v;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=v);let A=this.currentTime,j=l;if(T){const V=Math.min(this.currentTime,v)/b;let K=Math.floor(V),Z=V%1;!Z&&V>=1&&(Z=1),Z===1&&K--,K=Math.min(K,T+1),!!(K%2)&&(R==="reverse"?(Z=1-Z,P&&(Z-=P/b)):R==="mirror"&&(j=h)),A=jr(0,1,Z)*b}const U=I?{done:!1,value:p[0]}:j.next(A);g&&(U.value=g(U.value));let{done:z}=U;!I&&m!==null&&(z=this.speed>=0?this.currentTime>=v:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return L&&a!==void 0&&(U.value=Zc(p,this.options,a)),M&&M(U.value),L&&this.finish(),U}get duration(){const{resolved:e}=this;return e?Nr(e.calculatedDuration):0}get time(){return Nr(this.currentTime)}set time(e){e=Ir(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Nr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=dA,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),n&&n();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const pA=new Set(["opacity","clipPath","filter","transform"]);function mA(t,e,n,{delay:s=0,duration:a=300,repeat:l=0,repeatType:h="loop",ease:g="easeInOut",times:p}={}){const m={[e]:n};p&&(m.offset=p);const v=V2(g,a);return Array.isArray(v)&&(m.easing=v),t.animate(m,{delay:s,duration:a,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:l+1,direction:h==="reverse"?"alternate":"normal"})}const xA=Vf(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),bc=10,yA=2e4;function wA(t){return n0(t.type)||t.type==="spring"||!U2(t.ease)}function vA(t,e){const n=new p0({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:t[0]};const a=[];let l=0;for(;!s.done&&l<yA;)s=n.sample(l),a.push(s.value),l+=bc;return{times:void 0,keyframes:a,duration:l-bc,ease:"linear"}}const Ey={anticipate:J2,backInOut:Q2,circInOut:ty};function bA(t){return t in Ey}class Ag extends my{constructor(e){super(e);const{name:n,motionValue:s,element:a,keyframes:l}=this.options;this.resolver=new py(l,(h,g)=>this.onKeyframesResolved(h,g),n,s,a),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:s=300,times:a,ease:l,type:h,motionValue:g,name:p,startTime:m}=this.options;if(!g.owner||!g.owner.current)return!1;if(typeof l=="string"&&yc()&&bA(l)&&(l=Ey[l]),wA(this.options)){const{onComplete:b,onUpdate:C,motionValue:T,element:R,...P}=this.options,M=vA(e,P);e=M.keyframes,e.length===1&&(e[1]=e[0]),s=M.duration,a=M.times,l=M.ease,h="keyframes"}const v=mA(g.owner.current,p,e,{...this.options,duration:s,times:a,ease:l});return v.startTime=m??this.calcStartTime(),this.pendingTimeline?(lg(v,this.pendingTimeline),this.pendingTimeline=void 0):v.onfinish=()=>{const{onComplete:b}=this.options;g.set(Zc(e,this.options,n)),b&&b(),this.cancel(),this.resolveFinishedPromise()},{animation:v,duration:s,times:a,type:h,ease:l,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Nr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Nr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=Ir(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Sn;const{animation:s}=n;lg(s,e)}return Sn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:s,duration:a,type:l,ease:h,times:g}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:m,onUpdate:v,onComplete:b,element:C,...T}=this.options,R=new p0({...T,keyframes:s,duration:a,type:l,ease:h,times:g,isGenerator:!0}),P=Ir(this.time);m.setWithVelocity(R.sample(P-bc).value,R.sample(P).value,bc)}const{onStop:p}=this.options;p&&p(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:s,repeatDelay:a,repeatType:l,damping:h,type:g}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:p,transformTemplate:m}=n.owner.getProps();return xA()&&s&&pA.has(s)&&!p&&!m&&!a&&l!=="mirror"&&h!==0&&g!=="inertia"}}const EA={type:"spring",stiffness:500,damping:25,restSpeed:10},CA=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),AA={type:"keyframes",duration:.8},SA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_A=(t,{keyframes:e})=>e.length>2?AA:Zs.has(t)?t.startsWith("scale")?CA(e[1]):EA:SA;function TA({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:a,repeat:l,repeatType:h,repeatDelay:g,from:p,elapsed:m,...v}){return!!Object.keys(v).length}const m0=(t,e,n,s={},a,l)=>h=>{const g=t0(s,t)||{},p=g.delay||s.delay||0;let{elapsed:m=0}=s;m=m-Ir(p);let v={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...g,delay:-m,onUpdate:C=>{e.set(C),g.onUpdate&&g.onUpdate(C)},onComplete:()=>{h(),g.onComplete&&g.onComplete()},name:t,motionValue:e,element:l?void 0:a};TA(g)||(v={...v,..._A(t,v)}),v.duration&&(v.duration=Ir(v.duration)),v.repeatDelay&&(v.repeatDelay=Ir(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let b=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(v.duration=0,v.delay===0&&(b=!0)),b&&!l&&e.get()!==void 0){const C=Zc(v.keyframes,g);if(C!==void 0)return et.update(()=>{v.onUpdate(C),v.onComplete()}),new XE([])}return!l&&Ag.supports(v)?new Ag(v):new p0(v)};function IA({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function Cy(t,e,{delay:n=0,transitionOverride:s,type:a}={}){var l;let{transition:h=t.getDefaultTransition(),transitionEnd:g,...p}=e;s&&(h=s);const m=[],v=a&&t.animationState&&t.animationState.getState()[a];for(const b in p){const C=t.getValue(b,(l=t.latestValues[b])!==null&&l!==void 0?l:null),T=p[b];if(T===void 0||v&&IA(v,b))continue;const R={delay:n,...t0(h||{},b)};let P=!1;if(window.MotionHandoffAnimation){const k=K2(t);if(k){const I=window.MotionHandoffAnimation(k,b,et);I!==null&&(R.startTime=I,P=!0)}}fd(t,b),C.start(m0(b,C,T,t.shouldReduceMotion&&G2.has(b)?{type:!1}:R,t,P));const M=C.animation;M&&m.push(M)}return g&&Promise.all(m).then(()=>{et.update(()=>{g&&oC(t,g)})}),m}function vd(t,e,n={}){var s;const a=Yc(t,e,n.type==="exit"?(s=t.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:l=t.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(l=n.transitionOverride);const h=a?()=>Promise.all(Cy(t,a,n)):()=>Promise.resolve(),g=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:v=0,staggerChildren:b,staggerDirection:C}=l;return NA(t,e,v+m,b,C,n)}:()=>Promise.resolve(),{when:p}=l;if(p){const[m,v]=p==="beforeChildren"?[h,g]:[g,h];return m().then(()=>v())}else return Promise.all([h(),g(n.delay)])}function NA(t,e,n=0,s=0,a=1,l){const h=[],g=(t.variantChildren.size-1)*s,p=a===1?(m=0)=>m*s:(m=0)=>g-m*s;return Array.from(t.variantChildren).sort(kA).forEach((m,v)=>{m.notify("AnimationStart",e),h.push(vd(m,e,{...l,delay:n+p(v)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(h)}function kA(t,e){return t.sortNodePosition(e)}function RA(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const a=e.map(l=>vd(t,l,n));s=Promise.all(a)}else if(typeof e=="string")s=vd(t,e,n);else{const a=typeof e=="function"?Yc(t,e,n.custom):e;s=Promise.all(Cy(t,a,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const OA=Wf.length;function Ay(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Ay(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<OA;n++){const s=Wf[n],a=t.props[s];(ba(a)||a===!1)&&(e[s]=a)}return e}const PA=[...zf].reverse(),DA=zf.length;function MA(t){return e=>Promise.all(e.map(({animation:n,options:s})=>RA(t,n,s)))}function jA(t){let e=MA(t),n=Sg(),s=!0;const a=p=>(m,v)=>{var b;const C=Yc(t,v,p==="exit"?(b=t.presenceContext)===null||b===void 0?void 0:b.custom:void 0);if(C){const{transition:T,transitionEnd:R,...P}=C;m={...m,...P,...R}}return m};function l(p){e=p(t)}function h(p){const{props:m}=t,v=Ay(t.parent)||{},b=[],C=new Set;let T={},R=1/0;for(let M=0;M<DA;M++){const k=PA[M],I=n[k],A=m[k]!==void 0?m[k]:v[k],j=ba(A),U=k===p?I.isActive:null;U===!1&&(R=M);let z=A===v[k]&&A!==m[k]&&j;if(z&&s&&t.manuallyAnimateOnMount&&(z=!1),I.protectedKeys={...T},!I.isActive&&U===null||!A&&!I.prevProp||qc(A)||typeof A=="boolean")continue;const L=LA(I.prevProp,A);let V=L||k===p&&I.isActive&&!z&&j||M>R&&j,K=!1;const Z=Array.isArray(A)?A:[A];let xe=Z.reduce(a(k),{});U===!1&&(xe={});const{prevResolvedValues:ue={}}=I,oe={...ue,...xe},se=re=>{V=!0,C.has(re)&&(K=!0,C.delete(re)),I.needsAnimating[re]=!0;const J=t.getValue(re);J&&(J.liveStyle=!1)};for(const re in oe){const J=xe[re],de=ue[re];if(T.hasOwnProperty(re))continue;let ye=!1;ud(J)&&ud(de)?ye=!L2(J,de):ye=J!==de,ye?J!=null?se(re):C.add(re):J!==void 0&&C.has(re)?se(re):I.protectedKeys[re]=!0}I.prevProp=A,I.prevResolvedValues=xe,I.isActive&&(T={...T,...xe}),s&&t.blockInitialAnimation&&(V=!1),V&&(!(z&&L)||K)&&b.push(...Z.map(re=>({animation:re,options:{type:k}})))}if(C.size){const M={};C.forEach(k=>{const I=t.getBaseTarget(k),A=t.getValue(k);A&&(A.liveStyle=!0),M[k]=I??null}),b.push({animation:M})}let P=!!b.length;return s&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(P=!1),s=!1,P?e(b):Promise.resolve()}function g(p,m){var v;if(n[p].isActive===m)return Promise.resolve();(v=t.variantChildren)===null||v===void 0||v.forEach(C=>{var T;return(T=C.animationState)===null||T===void 0?void 0:T.setActive(p,m)}),n[p].isActive=m;const b=h(p);for(const C in n)n[C].protectedKeys={};return b}return{animateChanges:h,setActive:g,setAnimateFunction:l,getState:()=>n,reset:()=>{n=Sg(),s=!0}}}function LA(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!L2(e,t):!1}function _s(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Sg(){return{animate:_s(!0),whileInView:_s(),whileHover:_s(),whileTap:_s(),whileDrag:_s(),whileFocus:_s(),exit:_s()}}class ys{constructor(e){this.isMounted=!1,this.node=e}update(){}}class BA extends ys{constructor(e){super(e),e.animationState||(e.animationState=jA(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();qc(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let FA=0;class UA extends ys{constructor(){super(...arguments),this.id=FA++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e);n&&!e&&a.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const VA={animation:{Feature:BA},exit:{Feature:UA}};function Sa(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function Ua(t){return{point:{x:t.pageX,y:t.pageY}}}const zA=t=>e=>s0(e)&&t(e,Ua(e));function Qo(t,e,n,s){return Sa(t,e,zA(n),s)}const _g=(t,e)=>Math.abs(t-e);function WA(t,e){const n=_g(t.x,e.x),s=_g(t.y,e.y);return Math.sqrt(n**2+s**2)}class Sy{constructor(e,n,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=eh(this.lastMoveEventInfo,this.history),C=this.startEvent!==null,T=WA(b.offset,{x:0,y:0})>=3;if(!C&&!T)return;const{point:R}=b,{timestamp:P}=zt;this.history.push({...R,timestamp:P});const{onStart:M,onMove:k}=this.handlers;C||(M&&M(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,b)},this.handlePointerMove=(b,C)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=Ju(C,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(b,C)=>{this.end();const{onEnd:T,onSessionEnd:R,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=eh(b.type==="pointercancel"?this.lastMoveEventInfo:Ju(C,this.transformPagePoint),this.history);this.startEvent&&T&&T(b,M),R&&R(b,M)},!s0(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=s,this.contextWindow=a||window;const h=Ua(e),g=Ju(h,this.transformPagePoint),{point:p}=g,{timestamp:m}=zt;this.history=[{...p,timestamp:m}];const{onSessionStart:v}=n;v&&v(e,eh(g,this.history)),this.removeListeners=Fa(Qo(this.contextWindow,"pointermove",this.handlePointerMove),Qo(this.contextWindow,"pointerup",this.handlePointerUp),Qo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fs(this.updatePoint)}}function Ju(t,e){return e?{point:e(t.point)}:t}function Tg(t,e){return{x:t.x-e.x,y:t.y-e.y}}function eh({point:t},e){return{point:t,delta:Tg(t,_y(e)),offset:Tg(t,HA(e)),velocity:GA(e,.1)}}function HA(t){return t[0]}function _y(t){return t[t.length-1]}function GA(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const a=_y(t);for(;n>=0&&(s=t[n],!(a.timestamp-s.timestamp>Ir(e)));)n--;if(!s)return{x:0,y:0};const l=Nr(a.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const h={x:(a.x-s.x)/l,y:(a.y-s.y)/l};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}const Ty=1e-4,XA=1-Ty,KA=1+Ty,Iy=.01,qA=0-Iy,$A=0+Iy;function Tn(t){return t.max-t.min}function YA(t,e,n){return Math.abs(t-e)<=n}function Ig(t,e,n,s=.5){t.origin=s,t.originPoint=lt(e.min,e.max,t.origin),t.scale=Tn(n)/Tn(e),t.translate=lt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=XA&&t.scale<=KA||isNaN(t.scale))&&(t.scale=1),(t.translate>=qA&&t.translate<=$A||isNaN(t.translate))&&(t.translate=0)}function Jo(t,e,n,s){Ig(t.x,e.x,n.x,s?s.originX:void 0),Ig(t.y,e.y,n.y,s?s.originY:void 0)}function Ng(t,e,n){t.min=n.min+e.min,t.max=t.min+Tn(e)}function ZA(t,e,n){Ng(t.x,e.x,n.x),Ng(t.y,e.y,n.y)}function kg(t,e,n){t.min=e.min-n.min,t.max=t.min+Tn(e)}function ea(t,e,n){kg(t.x,e.x,n.x),kg(t.y,e.y,n.y)}function QA(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?lt(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?lt(n,t,s.max):Math.min(t,n)),t}function Rg(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function JA(t,{top:e,left:n,bottom:s,right:a}){return{x:Rg(t.x,n,a),y:Rg(t.y,e,s)}}function Og(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function eS(t,e){return{x:Og(t.x,e.x),y:Og(t.y,e.y)}}function tS(t,e){let n=.5;const s=Tn(t),a=Tn(e);return a>s?n=no(e.min,e.max-s,t.min):s>a&&(n=no(t.min,t.max-a,e.min)),jr(0,1,n)}function nS(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const bd=.35;function rS(t=bd){return t===!1?t=0:t===!0&&(t=bd),{x:Pg(t,"left","right"),y:Pg(t,"top","bottom")}}function Pg(t,e,n){return{min:Dg(t,e),max:Dg(t,n)}}function Dg(t,e){return typeof t=="number"?t:t[e]||0}const Mg=()=>({translate:0,scale:1,origin:0,originPoint:0}),Mi=()=>({x:Mg(),y:Mg()}),jg=()=>({min:0,max:0}),wt=()=>({x:jg(),y:jg()});function jn(t){return[t("x"),t("y")]}function Ny({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function sS({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function iS(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function th(t){return t===void 0||t===1}function Ed({scale:t,scaleX:e,scaleY:n}){return!th(t)||!th(e)||!th(n)}function Rs(t){return Ed(t)||ky(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function ky(t){return Lg(t.x)||Lg(t.y)}function Lg(t){return t&&t!=="0%"}function Ec(t,e,n){const s=t-n,a=e*s;return n+a}function Bg(t,e,n,s,a){return a!==void 0&&(t=Ec(t,a,s)),Ec(t,n,s)+e}function Cd(t,e=0,n=1,s,a){t.min=Bg(t.min,e,n,s,a),t.max=Bg(t.max,e,n,s,a)}function Ry(t,{x:e,y:n}){Cd(t.x,e.translate,e.scale,e.originPoint),Cd(t.y,n.translate,n.scale,n.originPoint)}const Fg=.999999999999,Ug=1.0000000000001;function oS(t,e,n,s=!1){const a=n.length;if(!a)return;e.x=e.y=1;let l,h;for(let g=0;g<a;g++){l=n[g],h=l.projectionDelta;const{visualElement:p}=l.options;p&&p.props.style&&p.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Li(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),h&&(e.x*=h.x.scale,e.y*=h.y.scale,Ry(t,h)),s&&Rs(l.latestValues)&&Li(t,l.latestValues))}e.x<Ug&&e.x>Fg&&(e.x=1),e.y<Ug&&e.y>Fg&&(e.y=1)}function ji(t,e){t.min=t.min+e,t.max=t.max+e}function Vg(t,e,n,s,a=.5){const l=lt(t.min,t.max,a);Cd(t,e,n,l,s)}function Li(t,e){Vg(t.x,e.x,e.scaleX,e.scale,e.originX),Vg(t.y,e.y,e.scaleY,e.scale,e.originY)}function Oy(t,e){return Ny(iS(t.getBoundingClientRect(),e))}function aS(t,e,n){const s=Oy(t,n),{scroll:a}=e;return a&&(ji(s.x,a.offset.x),ji(s.y,a.offset.y)),s}const Py=({current:t})=>t?t.ownerDocument.defaultView:null,lS=new WeakMap;class cS{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=v=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ua(v).point)},l=(v,b)=>{const{drag:C,dragPropagation:T,onDragStart:R}=this.getProps();if(C&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=tC(C),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),jn(M=>{let k=this.getAxisMotionValue(M).get()||0;if(xr.test(k)){const{projection:I}=this.visualElement;if(I&&I.layout){const A=I.layout.layoutBox[M];A&&(k=Tn(A)*(parseFloat(k)/100))}}this.originPoint[M]=k}),R&&et.postRender(()=>R(v,b)),fd(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},h=(v,b)=>{const{dragPropagation:C,dragDirectionLock:T,onDirectionLock:R,onDrag:P}=this.getProps();if(!C&&!this.openDragLock)return;const{offset:M}=b;if(T&&this.currentDirection===null){this.currentDirection=uS(M),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",b.point,M),this.updateAxis("y",b.point,M),this.visualElement.render(),P&&P(v,b)},g=(v,b)=>this.stop(v,b),p=()=>jn(v=>{var b;return this.getAnimationState(v)==="paused"&&((b=this.getAxisMotionValue(v).animation)===null||b===void 0?void 0:b.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new Sy(e,{onSessionStart:a,onStart:l,onMove:h,onSessionEnd:g,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:Py(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&et.postRender(()=>l(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:a}=this.getProps();if(!s||!Cl(e,a,this.currentDirection))return;const l=this.getAxisMotionValue(e);let h=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(h=QA(h,this.constraints[e],this.elastic[e])),l.set(h)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,l=this.constraints;n&&Pi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=JA(a.layoutBox,n):this.constraints=!1,this.elastic=rS(s),l!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&jn(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=nS(a.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Pi(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=aS(s,a.root,this.visualElement.getTransformPagePoint());let h=eS(a.layout.layoutBox,l);if(n){const g=n(sS(h));this.hasMutatedConstraints=!!g,g&&(h=Ny(g))}return h}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:a,dragTransition:l,dragSnapToOrigin:h,onDragTransitionEnd:g}=this.getProps(),p=this.constraints||{},m=jn(v=>{if(!Cl(v,n,this.currentDirection))return;let b=p&&p[v]||{};h&&(b={min:0,max:0});const C=a?200:1e6,T=a?40:1e7,R={type:"inertia",velocity:s?e[v]:0,bounceStiffness:C,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...l,...b};return this.startAxisValueAnimation(v,R)});return Promise.all(m).then(g)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return fd(this.visualElement,e),s.start(m0(e,s,0,n,this.visualElement,!1))}stopAnimation(){jn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){jn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),a=s[n];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){jn(n=>{const{drag:s}=this.getProps();if(!Cl(n,s,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(n);if(a&&a.layout){const{min:h,max:g}=a.layout.layoutBox[n];l.set(e[n]-lt(h,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Pi(n)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};jn(h=>{const g=this.getAxisMotionValue(h);if(g&&this.constraints!==!1){const p=g.get();a[h]=tS({min:p,max:p},this.constraints[h])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),jn(h=>{if(!Cl(h,e,null))return;const g=this.getAxisMotionValue(h),{min:p,max:m}=this.constraints[h];g.set(lt(p,m,a[h]))})}addListeners(){if(!this.visualElement.current)return;lS.set(this.visualElement,this);const e=this.visualElement.current,n=Qo(e,"pointerdown",p=>{const{drag:m,dragListener:v=!0}=this.getProps();m&&v&&this.start(p)}),s=()=>{const{dragConstraints:p}=this.getProps();Pi(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),et.read(s);const h=Sa(window,"resize",()=>this.scalePositionWithinConstraints()),g=a.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m})=>{this.isDragging&&m&&(jn(v=>{const b=this.getAxisMotionValue(v);b&&(this.originPoint[v]+=p[v].translate,b.set(b.get()+p[v].translate))}),this.visualElement.render())});return()=>{h(),n(),l(),g&&g()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:h=bd,dragMomentum:g=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:a,dragConstraints:l,dragElastic:h,dragMomentum:g}}}function Cl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function uS(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class hS extends ys{constructor(e){super(e),this.removeGroupControls=Sn,this.removeListeners=Sn,this.controls=new cS(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Sn}unmount(){this.removeGroupControls(),this.removeListeners()}}const zg=t=>(e,n)=>{t&&et.postRender(()=>t(e,n))};class dS extends ys{constructor(){super(...arguments),this.removePointerDownListener=Sn}onPointerDown(e){this.session=new Sy(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Py(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:zg(e),onStart:zg(n),onMove:s,onEnd:(l,h)=>{delete this.session,a&&et.postRender(()=>a(l,h))}}}mount(){this.removePointerDownListener=Qo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Hl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Wg(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Po={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ee.test(t))t=parseFloat(t);else return t;const n=Wg(t,e.target.x),s=Wg(t,e.target.y);return`${n}% ${s}%`}},fS={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,a=gs.parse(t);if(a.length>5)return s;const l=gs.createTransformer(t),h=typeof a[0]!="number"?1:0,g=n.x.scale*e.x,p=n.y.scale*e.y;a[0+h]/=g,a[1+h]/=p;const m=lt(g,p,.5);return typeof a[2+h]=="number"&&(a[2+h]/=m),typeof a[3+h]=="number"&&(a[3+h]/=m),l(a)}};class gS extends X.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:a}=this.props,{projection:l}=e;DE(pS),l&&(n.group&&n.group.add(l),s&&s.register&&a&&s.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Hl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:a,isPresent:l}=this.props,h=s.projection;return h&&(h.isPresent=l,a||e.layoutDependency!==n||n===void 0?h.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?h.promote():h.relegate()||et.postRender(()=>{const g=h.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Gf.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Dy(t){const[e,n]=m2(),s=X.useContext(Lf);return w.jsx(gS,{...t,layoutGroup:s,switchLayoutGroup:X.useContext(A2),isPresent:e,safeToRemove:n})}const pS={borderRadius:{...Po,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Po,borderTopRightRadius:Po,borderBottomLeftRadius:Po,borderBottomRightRadius:Po,boxShadow:fS};function mS(t,e,n){const s=Zt(t)?t:Ca(t);return s.start(m0("",s,e,n)),s.animation}function xS(t){return t instanceof SVGElement&&t.tagName!=="svg"}const yS=(t,e)=>t.depth-e.depth;class wS{constructor(){this.children=[],this.isDirty=!1}add(e){i0(this.children,e),this.isDirty=!0}remove(e){o0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(yS),this.isDirty=!1,this.children.forEach(e)}}function vS(t,e){const n=yr.now(),s=({timestamp:a})=>{const l=a-n;l>=e&&(fs(s),t(l-e))};return et.read(s,!0),()=>fs(s)}const My=["TopLeft","TopRight","BottomLeft","BottomRight"],bS=My.length,Hg=t=>typeof t=="string"?parseFloat(t):t,Gg=t=>typeof t=="number"||Ee.test(t);function ES(t,e,n,s,a,l){a?(t.opacity=lt(0,n.opacity!==void 0?n.opacity:1,CS(s)),t.opacityExit=lt(e.opacity!==void 0?e.opacity:1,0,AS(s))):l&&(t.opacity=lt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let h=0;h<bS;h++){const g=`border${My[h]}Radius`;let p=Xg(e,g),m=Xg(n,g);if(p===void 0&&m===void 0)continue;p||(p=0),m||(m=0),p===0||m===0||Gg(p)===Gg(m)?(t[g]=Math.max(lt(Hg(p),Hg(m),s),0),(xr.test(m)||xr.test(p))&&(t[g]+="%")):t[g]=m}(e.rotate||n.rotate)&&(t.rotate=lt(e.rotate||0,n.rotate||0,s))}function Xg(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const CS=jy(0,.5,ey),AS=jy(.5,.95,Sn);function jy(t,e,n){return s=>s<t?0:s>e?1:n(no(t,e,s))}function Kg(t,e){t.min=e.min,t.max=e.max}function Mn(t,e){Kg(t.x,e.x),Kg(t.y,e.y)}function qg(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function $g(t,e,n,s,a){return t-=e,t=Ec(t,1/n,s),a!==void 0&&(t=Ec(t,1/a,s)),t}function SS(t,e=0,n=1,s=.5,a,l=t,h=t){if(xr.test(e)&&(e=parseFloat(e),e=lt(h.min,h.max,e/100)-h.min),typeof e!="number")return;let g=lt(l.min,l.max,s);t===l&&(g-=e),t.min=$g(t.min,e,n,g,a),t.max=$g(t.max,e,n,g,a)}function Yg(t,e,[n,s,a],l,h){SS(t,e[n],e[s],e[a],e.scale,l,h)}const _S=["x","scaleX","originX"],TS=["y","scaleY","originY"];function Zg(t,e,n,s){Yg(t.x,e,_S,n?n.x:void 0,s?s.x:void 0),Yg(t.y,e,TS,n?n.y:void 0,s?s.y:void 0)}function Qg(t){return t.translate===0&&t.scale===1}function Ly(t){return Qg(t.x)&&Qg(t.y)}function Jg(t,e){return t.min===e.min&&t.max===e.max}function IS(t,e){return Jg(t.x,e.x)&&Jg(t.y,e.y)}function ep(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function By(t,e){return ep(t.x,e.x)&&ep(t.y,e.y)}function tp(t){return Tn(t.x)/Tn(t.y)}function np(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class NS{constructor(){this.members=[]}add(e){i0(this.members,e),e.scheduleRender()}remove(e){if(o0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(a=>e===a);if(n===0)return!1;let s;for(let a=n;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kS(t,e,n){let s="";const a=t.x.translate/e.x,l=t.y.translate/e.y,h=(n==null?void 0:n.z)||0;if((a||l||h)&&(s=`translate3d(${a}px, ${l}px, ${h}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:m,rotate:v,rotateX:b,rotateY:C,skewX:T,skewY:R}=n;m&&(s=`perspective(${m}px) ${s}`),v&&(s+=`rotate(${v}deg) `),b&&(s+=`rotateX(${b}deg) `),C&&(s+=`rotateY(${C}deg) `),T&&(s+=`skewX(${T}deg) `),R&&(s+=`skewY(${R}deg) `)}const g=t.x.scale*e.x,p=t.y.scale*e.y;return(g!==1||p!==1)&&(s+=`scale(${g}, ${p})`),s||"none"}const Os={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Uo=typeof window<"u"&&window.MotionDebug!==void 0,nh=["","X","Y","Z"],RS={visibility:"hidden"},rp=1e3;let OS=0;function rh(t,e,n,s){const{latestValues:a}=e;a[t]&&(n[t]=a[t],e.setStaticValue(t,0),s&&(s[t]=0))}function Fy(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=K2(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",et,!(a||l))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&Fy(s)}function Uy({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(h={},g=e==null?void 0:e()){this.id=OS++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Uo&&(Os.totalNodes=Os.resolvedTargetDeltas=Os.recalculatedProjection=0),this.nodes.forEach(MS),this.nodes.forEach(US),this.nodes.forEach(VS),this.nodes.forEach(jS),Uo&&window.MotionDebug.record(Os)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new wS)}addEventListener(h,g){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new a0),this.eventHandlers.get(h).add(g)}notifyListeners(h,...g){const p=this.eventHandlers.get(h);p&&p.notify(...g)}hasListeners(h){return this.eventHandlers.has(h)}mount(h,g=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=xS(h),this.instance=h;const{layoutId:p,layout:m,visualElement:v}=this.options;if(v&&!v.current&&v.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),g&&(m||p)&&(this.isLayoutDirty=!0),t){let b;const C=()=>this.root.updateBlockedByResize=!1;t(h,()=>{this.root.updateBlockedByResize=!0,b&&b(),b=vS(C,250),Hl.hasAnimatedSinceResize&&(Hl.hasAnimatedSinceResize=!1,this.nodes.forEach(ip))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&v&&(p||m)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:C,hasRelativeTargetChanged:T,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||v.getDefaultTransition()||XS,{onLayoutAnimationStart:M,onLayoutAnimationComplete:k}=v.getProps(),I=!this.targetLayout||!By(this.targetLayout,R)||T,A=!C&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||C&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(b,A);const j={...t0(P,"layout"),onPlay:M,onComplete:k};(v.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else C||ip(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zS),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Fy(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const b=this.path[v];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:g,layout:p}=this.options;if(g===void 0&&!p)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(sp);return}this.isUpdating||this.nodes.forEach(BS),this.isUpdating=!1,this.nodes.forEach(FS),this.nodes.forEach(PS),this.nodes.forEach(DS),this.clearAllSnapshots();const g=yr.now();zt.delta=jr(0,1e3/60,g-zt.timestamp),zt.timestamp=g,zt.isProcessing=!0,Ku.update.process(zt),Ku.preRender.process(zt),Ku.render.process(zt),zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Gf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(LS),this.sharedNodes.forEach(WS)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let g=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(g=!1),g){const p=s(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:p,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!a)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,g=this.projectionDelta&&!Ly(this.projectionDelta),p=this.getTransformTemplate(),m=p?p(this.latestValues,""):void 0,v=m!==this.prevTransformTemplateValue;h&&(g||Rs(this.latestValues)||v)&&(a(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const g=this.measurePageBox();let p=this.removeElementScroll(g);return h&&(p=this.removeTransform(p)),KS(p),{animationId:this.root.animationId,measuredBox:g,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:g}=this.options;if(!g)return wt();const p=g.measureViewportBox();if(!(((h=this.scroll)===null||h===void 0?void 0:h.wasRoot)||this.path.some(qS))){const{scroll:v}=this.root;v&&(ji(p.x,v.offset.x),ji(p.y,v.offset.y))}return p}removeElementScroll(h){var g;const p=wt();if(Mn(p,h),!((g=this.scroll)===null||g===void 0)&&g.wasRoot)return p;for(let m=0;m<this.path.length;m++){const v=this.path[m],{scroll:b,options:C}=v;v!==this.root&&b&&C.layoutScroll&&(b.wasRoot&&Mn(p,h),ji(p.x,b.offset.x),ji(p.y,b.offset.y))}return p}applyTransform(h,g=!1){const p=wt();Mn(p,h);for(let m=0;m<this.path.length;m++){const v=this.path[m];!g&&v.options.layoutScroll&&v.scroll&&v!==v.root&&Li(p,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),Rs(v.latestValues)&&Li(p,v.latestValues)}return Rs(this.latestValues)&&Li(p,this.latestValues),p}removeTransform(h){const g=wt();Mn(g,h);for(let p=0;p<this.path.length;p++){const m=this.path[p];if(!m.instance||!Rs(m.latestValues))continue;Ed(m.latestValues)&&m.updateSnapshot();const v=wt(),b=m.measurePageBox();Mn(v,b),Zg(g,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,v)}return Rs(this.latestValues)&&Zg(g,this.latestValues),g}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var g;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==p;if(!(h||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((g=this.parent)===null||g===void 0)&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:b,layoutId:C}=this.options;if(!(!this.layout||!(b||C))){if(this.resolvedRelativeTargetAt=zt.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wt(),this.relativeTargetOrigin=wt(),ea(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=wt(),this.targetWithTransforms=wt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ZA(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mn(this.target,this.layout.layoutBox),Ry(this.target,this.targetDelta)):Mn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wt(),this.relativeTargetOrigin=wt(),ea(this.relativeTargetOrigin,this.target,T.target),Mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Uo&&Os.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ed(this.parent.latestValues)||ky(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var h;const g=this.getLead(),p=!!this.resumingFrom||this!==g;let m=!0;if((this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty)&&(m=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===zt.timestamp&&(m=!1),m)return;const{layout:v,layoutId:b}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||b))return;Mn(this.layoutCorrected,this.layout.layoutBox);const C=this.treeScale.x,T=this.treeScale.y;oS(this.layoutCorrected,this.treeScale,this.path,p),g.layout&&!g.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(g.target=g.layout.layoutBox,g.targetWithTransforms=wt());const{target:R}=g;if(!R){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(qg(this.prevProjectionDelta.x,this.projectionDelta.x),qg(this.prevProjectionDelta.y,this.projectionDelta.y)),Jo(this.projectionDelta,this.layoutCorrected,R,this.latestValues),(this.treeScale.x!==C||this.treeScale.y!==T||!np(this.projectionDelta.x,this.prevProjectionDelta.x)||!np(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R)),Uo&&Os.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var g;if((g=this.options.visualElement)===null||g===void 0||g.scheduleRender(),h){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Mi(),this.projectionDelta=Mi(),this.projectionDeltaWithTransform=Mi()}setAnimationOrigin(h,g=!1){const p=this.snapshot,m=p?p.latestValues:{},v={...this.latestValues},b=Mi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const C=wt(),T=p?p.source:void 0,R=this.layout?this.layout.source:void 0,P=T!==R,M=this.getStack(),k=!M||M.members.length<=1,I=!!(P&&!k&&this.options.crossfade===!0&&!this.path.some(GS));this.animationProgress=0;let A;this.mixTargetDelta=j=>{const U=j/1e3;op(b.x,h.x,U),op(b.y,h.y,U),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ea(C,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HS(this.relativeTarget,this.relativeTargetOrigin,C,U),A&&IS(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=wt()),Mn(A,this.relativeTarget)),P&&(this.animationValues=v,ES(v,m,this.latestValues,U,I,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{Hl.hasAnimatedSinceResize=!0,this.currentAnimation=mS(0,rp,{...h,onUpdate:g=>{this.mixTargetDelta(g),h.onUpdate&&h.onUpdate(g)},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(rp),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:g,target:p,layout:m,latestValues:v}=h;if(!(!g||!p||!m)){if(this!==h&&this.layout&&m&&Vy(this.options.animationType,this.layout.layoutBox,m.layoutBox)){p=this.target||wt();const b=Tn(this.layout.layoutBox.x);p.x.min=h.target.x.min,p.x.max=p.x.min+b;const C=Tn(this.layout.layoutBox.y);p.y.min=h.target.y.min,p.y.max=p.y.min+C}Mn(g,p),Li(g,v),Jo(this.projectionDeltaWithTransform,this.layoutCorrected,g,v)}}registerSharedNode(h,g){this.sharedNodes.has(h)||this.sharedNodes.set(h,new NS),this.sharedNodes.get(h).add(g);const m=g.options.initialPromotionConfig;g.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(g):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var h;const{layoutId:g}=this.options;return g?((h=this.getStack())===null||h===void 0?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:g}=this.options;return g?(h=this.getStack())===null||h===void 0?void 0:h.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:g,preserveFollowOpacity:p}={}){const m=this.getStack();m&&m.promote(this,p),h&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let g=!1;const{latestValues:p}=h;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(g=!0),!g)return;const m={};p.z&&rh("z",h,m,this.animationValues);for(let v=0;v<nh.length;v++)rh(`rotate${nh[v]}`,h,m,this.animationValues),rh(`skew${nh[v]}`,h,m,this.animationValues);h.render();for(const v in m)h.setStaticValue(v,m[v]),this.animationValues&&(this.animationValues[v]=m[v]);h.scheduleRender()}getProjectionStyles(h){var g,p;if(!this.instance||this.isSVG)return;if(!this.isVisible)return RS;const m={visibility:""},v=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=zl(h==null?void 0:h.pointerEvents)||"",m.transform=v?v(this.latestValues,""):"none",m;const b=this.getLead();if(!this.projectionDelta||!this.layout||!b.target){const P={};return this.options.layoutId&&(P.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,P.pointerEvents=zl(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!Rs(this.latestValues)&&(P.transform=v?v({},""):"none",this.hasProjected=!1),P}const C=b.animationValues||b.latestValues;this.applyTransformsToTarget(),m.transform=kS(this.projectionDeltaWithTransform,this.treeScale,C),v&&(m.transform=v(C,m.transform));const{x:T,y:R}=this.projectionDelta;m.transformOrigin=`${T.origin*100}% ${R.origin*100}% 0`,b.animationValues?m.opacity=b===this?(p=(g=C.opacity)!==null&&g!==void 0?g:this.latestValues.opacity)!==null&&p!==void 0?p:1:this.preserveOpacity?this.latestValues.opacity:C.opacityExit:m.opacity=b===this?C.opacity!==void 0?C.opacity:"":C.opacityExit!==void 0?C.opacityExit:0;for(const P in xc){if(C[P]===void 0)continue;const{correct:M,applyTo:k}=xc[P],I=m.transform==="none"?C[P]:M(C[P],b);if(k){const A=k.length;for(let j=0;j<A;j++)m[k[j]]=I}else m[P]=I}return this.options.layoutId&&(m.pointerEvents=b===this?zl(h==null?void 0:h.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var g;return(g=h.currentAnimation)===null||g===void 0?void 0:g.stop()}),this.root.nodes.forEach(sp),this.root.sharedNodes.clear()}}}function PS(t){t.updateLayout()}function DS(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=t.layout,{animationType:l}=t.options,h=n.source!==t.layout.source;l==="size"?jn(b=>{const C=h?n.measuredBox[b]:n.layoutBox[b],T=Tn(C);C.min=s[b].min,C.max=C.min+T}):Vy(l,n.layoutBox,s)&&jn(b=>{const C=h?n.measuredBox[b]:n.layoutBox[b],T=Tn(s[b]);C.max=C.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[b].max=t.relativeTarget[b].min+T)});const g=Mi();Jo(g,s,n.layoutBox);const p=Mi();h?Jo(p,t.applyTransform(a,!0),n.measuredBox):Jo(p,s,n.layoutBox);const m=!Ly(g);let v=!1;if(!t.resumeFrom){const b=t.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:C,layout:T}=b;if(C&&T){const R=wt();ea(R,n.layoutBox,C.layoutBox);const P=wt();ea(P,s,T.layoutBox),By(R,P)||(v=!0),b.options.layoutRoot&&(t.relativeTarget=P,t.relativeTargetOrigin=R,t.relativeParent=b)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:p,layoutDelta:g,hasLayoutChanged:m,hasRelativeTargetChanged:v})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function MS(t){Uo&&Os.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jS(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function LS(t){t.clearSnapshot()}function sp(t){t.clearMeasurements()}function BS(t){t.isLayoutDirty=!1}function FS(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ip(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function US(t){t.resolveTargetDelta()}function VS(t){t.calcProjection()}function zS(t){t.resetSkewAndRotation()}function WS(t){t.removeLeadSnapshot()}function op(t,e,n){t.translate=lt(e.translate,0,n),t.scale=lt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ap(t,e,n,s){t.min=lt(e.min,n.min,s),t.max=lt(e.max,n.max,s)}function HS(t,e,n,s){ap(t.x,e.x,n.x,s),ap(t.y,e.y,n.y,s)}function GS(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const XS={duration:.45,ease:[.4,0,.1,1]},lp=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),cp=lp("applewebkit/")&&!lp("chrome/")?Math.round:Sn;function up(t){t.min=cp(t.min),t.max=cp(t.max)}function KS(t){up(t.x),up(t.y)}function Vy(t,e,n){return t==="position"||t==="preserve-aspect"&&!YA(tp(e),tp(n),.2)}function qS(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const $S=Uy({attachResizeListener:(t,e)=>Sa(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sh={current:void 0},zy=Uy({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!sh.current){const t=new $S({});t.mount(window),t.setOptions({layoutScroll:!0}),sh.current=t}return sh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),YS={pan:{Feature:dS},drag:{Feature:hS,ProjectionNode:zy,MeasureLayout:Dy}};function hp(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,l=s[a];l&&et.postRender(()=>l(e,Ua(e)))}class ZS extends ys{mount(){const{current:e}=this.node;e&&(this.unmount=YE(e,n=>(hp(this.node,n,"Start"),s=>hp(this.node,s,"End"))))}unmount(){}}class QS extends ys{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fa(Sa(this.node.current,"focus",()=>this.onFocus()),Sa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function dp(t,e,n){const{props:s}=t;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),l=s[a];l&&et.postRender(()=>l(e,Ua(e)))}class JS extends ys{mount(){const{current:e}=this.node;e&&(this.unmount=eC(e,n=>(dp(this.node,n,"Start"),(s,{success:a})=>dp(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ad=new WeakMap,ih=new WeakMap,e_=t=>{const e=Ad.get(t.target);e&&e(t)},t_=t=>{t.forEach(e_)};function n_({root:t,...e}){const n=t||document;ih.has(n)||ih.set(n,{});const s=ih.get(n),a=JSON.stringify(e);return s[a]||(s[a]=new IntersectionObserver(t_,{root:t,...e})),s[a]}function r_(t,e,n){const s=n_(e);return Ad.set(t,n),s.observe(t),()=>{Ad.delete(t),s.unobserve(t)}}const s_={some:0,all:1};class i_ extends ys{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:a="some",once:l}=e,h={root:n?n.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:s_[a]},g=p=>{const{isIntersecting:m}=p;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:v,onViewportLeave:b}=this.node.getProps(),C=m?v:b;C&&C(p)};return r_(this.node.current,h,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(o_(e,n))&&this.startObserver()}unmount(){}}function o_({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const a_={inView:{Feature:i_},tap:{Feature:JS},focus:{Feature:QS},hover:{Feature:ZS}},l_={layout:{ProjectionNode:zy,MeasureLayout:Dy}},Sd={current:null},Wy={current:!1};function c_(){if(Wy.current=!0,!!Uf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Sd.current=t.matches;t.addListener(e),e()}else Sd.current=!1}const u_=[...gy,$t,gs],h_=t=>u_.find(fy(t)),fp=new WeakMap;function d_(t,e,n){for(const s in e){const a=e[s],l=n[s];if(Zt(a))t.addValue(s,a);else if(Zt(l))t.addValue(s,Ca(a,{owner:t}));else if(l!==a)if(t.hasValue(s)){const h=t.getValue(s);h.liveStyle===!0?h.jump(a):h.hasAnimated||h.set(a)}else{const h=t.getStaticValue(s);t.addValue(s,Ca(h!==void 0?h:a,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const gp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class f_{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:l,visualState:h},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=f0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=yr.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,et.render(this.render,!1,!0))};const{latestValues:p,renderState:m,onUpdate:v}=h;this.onUpdate=v,this.latestValues=p,this.baseTarget={...p},this.initialValues=n.initial?{...p}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=g,this.blockInitialAnimation=!!l,this.isControllingVariants=$c(n),this.isVariantNode=E2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:b,...C}=this.scrapeMotionValuesFromProps(n,{},this);for(const T in C){const R=C[T];p[T]!==void 0&&Zt(R)&&R.set(p[T],!1)}}mount(e){this.current=e,fp.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),Wy.current||c_(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Sd.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){fp.delete(this.current),this.projection&&this.projection.unmount(),fs(this.notifyUpdate),fs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Zs.has(e),a=n.on("change",g=>{this.latestValues[e]=g,this.props.onUpdate&&et.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),l=n.on("renderRequest",this.scheduleRender);let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{a(),l(),h&&h(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ro){const n=ro[e];if(!n)continue;const{isEnabled:s,Feature:a}=n;if(!this.features[e]&&a&&s(this.props)&&(this.features[e]=new a(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<gp.length;s++){const a=gp[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,h=e[l];h&&(this.propEventSubscriptions[a]=this.on(a,h))}this.prevMotionValues=d_(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Ca(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){var s;let a=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return a!=null&&(typeof a=="string"&&(hy(a)||ny(a))?a=parseFloat(a):!h_(a)&&gs.test(n)&&(a=ly(e,n)),this.setBaseTarget(e,Zt(a)?a.get():a)),Zt(a)?a.get():a}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const h=Kf(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);h&&(a=h[e])}if(s&&a!==void 0)return a;const l=this.getBaseTargetFromProps(this.props,e);return l!==void 0&&!Zt(l)?l:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new a0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Hy extends f_{constructor(){super(...arguments),this.KeyframeResolver=py}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function g_(t){return window.getComputedStyle(t)}class p_ extends Hy{constructor(){super(...arguments),this.type="html",this.renderInstance=R2}readValueFromInstance(e,n){if(Zs.has(n)){const s=d0(n);return s&&s.default||0}else{const s=g_(e),a=(I2(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Oy(e,n)}build(e,n,s){Yf(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return e0(e,n,s)}}class m_ extends Hy{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Zs.has(n)){const s=d0(n);return s&&s.default||0}return n=O2.has(n)?n:Hf(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return M2(e,n,s)}build(e,n,s){Zf(e,n,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,s,a){P2(e,n,s,a)}mount(e){this.isSVGTag=Jf(e.tagName),super.mount(e)}}const x_=(t,e)=>Xf(t)?new m_(e):new p_(e,{allowProjection:t!==X.Fragment}),y_=WE({...VA,...a_,...YS,...l_},x_),rr=sE(y_),Xi=t=>{if((JSON.parse(localStorage.getItem("appSettings"))||{clickSound:!0}).clickSound)try{if(t==="click"){const n=new Audio("https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3");n.volume=.6,n.play().catch(s=>{console.warn("Click sound play failed:",s)})}}catch(n){console.error("Audio Error",n)}},w_=({isOpen:t,onClose:e,onOpenRegistration:n,onNavigate:s,onOpenPro:a})=>{const l=[{title:" ",items:[{icon:u2,label:"  / ",color:"#1976d2",action:()=>{e(),n&&n()}}]},{title:" ",items:[{icon:lo,label:"  ",color:"#388e3c",action:()=>e()},{icon:D3,label:"  ",color:"#f57c00",action:()=>e()},{icon:Dr,label:" ",color:"#d32f2f",action:()=>{e(),s("system-data")}}]},{title:"",items:[{icon:Df,label:" ",color:"#616161",action:()=>{e(),s("settings")}},{icon:Ul,label:" pro",color:"#FFD700",isPro:!0,action:()=>{e(),a&&a()}}]},{title:" ",items:[{icon:I3,label:" ",color:"#0288d1"},{icon:f2,label:" ",color:"#fbc02d"},{icon:Mf,label:" ",color:"#7b1fa2"},{icon:Oi,label:" ",color:"#512da8",action:()=>{e(),s("privacy-policy")}},{icon:Dr,label:" ",color:"#c2185b"},{icon:Vl,label:" ",color:"#00796b"}]}];return w.jsx(Xc,{children:t&&w.jsxs(w.Fragment,{children:[w.jsx(rr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-black/50 z-[60] backdrop-blur-sm"}),w.jsxs(rr.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed top-0 right-0 h-full w-[85%] max-w-sm bg-white shadow-2xl z-[70] overflow-y-auto",children:[w.jsxs("div",{className:"bg-[#00695c] text-white p-6 flex items-center justify-between sticky top-0 z-10",children:[w.jsx("h2",{className:"text-xl font-bold",children:" "}),w.jsx("button",{onClick:e,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:w.jsx(Mr,{size:24})})]}),w.jsx("div",{className:"p-4 flex flex-col gap-6 pb-10",children:l.map((h,g)=>w.jsxs("div",{children:[w.jsx("h3",{className:"text-[#00695c] font-bold text-sm mb-3 px-2 border-r-4 border-[#00695c]",children:h.title}),w.jsx("div",{className:"flex flex-col gap-1",children:h.items.map((p,m)=>w.jsxs("button",{onClick:()=>{Xi("click"),p.action&&p.action()},className:`flex items-center gap-3 p-3 hover:bg-gray-50 rounded-xl transition-colors text-right w-full group active:bg-gray-100 ${p.isPro?"animate-pulse":""}`,children:[w.jsx("div",{className:"p-2 rounded-lg bg-gray-50 group-hover:bg-white shadow-sm transition-colors border border-gray-100",style:{color:p.color},children:w.jsx(p.icon,{size:20,strokeWidth:2})}),w.jsx("span",{className:`text-gray-700 font-medium text-sm flex-1 ${p.isPro?"text-yellow-600 font-bold":""}`,children:p.label})]},m))})]},g))})]})]})})},v_=({onOpenRegistration:t,onNavigate:e,currentUser:n,onLogout:s,onOpenPro:a})=>{const[l,h]=X.useState(!1),[g,p]=X.useState(!1),m=()=>{Xi("click"),h(!0)},v=()=>{Xi("click")},b=()=>{Xi("click"),p(!g)},C=()=>{p(!1),s&&s()},T=()=>{p(!1),e("edit-profile")};return w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"bg-[#00695c] text-white h-16 flex items-center justify-between px-4 shadow-lg sticky top-0 z-50 rounded-b-2xl",children:[w.jsx("button",{onClick:m,className:"p-2 hover:bg-[#005c4b] rounded-xl transition-colors active:scale-95",children:w.jsx(R3,{size:28,strokeWidth:2})}),w.jsx("h1",{className:"text-xl font-bold flex-1 text-center mx-2 truncate drop-shadow-md",children:""}),w.jsx("div",{className:"flex items-center gap-2 relative",children:n?w.jsxs("div",{className:"relative",children:[w.jsx("button",{onClick:b,className:"p-1 hover:bg-[#005c4b] rounded-full transition-colors active:scale-95 flex items-center justify-center",children:w.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/4140/4140048.png",alt:"User",className:"w-9 h-9 rounded-full border-2 border-white/50 shadow-sm bg-white"})}),w.jsx(Xc,{children:g&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>p(!1)}),w.jsxs(rr.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute top-12 left-0 w-48 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden z-20",children:[w.jsxs("button",{onClick:T,className:"w-full text-right px-4 py-3 text-sm font-bold text-gray-700 hover:bg-gray-50 flex items-center gap-3 border-b border-gray-100",children:[w.jsx(jf,{size:16,className:"text-[#00695c]"})," "]}),w.jsxs("button",{onClick:C,className:"w-full text-right px-4 py-3 text-sm font-bold text-red-600 hover:bg-red-50 flex items-center gap-3",children:[w.jsx(k3,{size:16})," "]})]})]})})]}):w.jsx("button",{onClick:v,className:"p-2 hover:bg-[#005c4b] rounded-xl transition-colors active:scale-95",children:w.jsx(Mf,{size:24,strokeWidth:2})})})]}),w.jsx(w_,{isOpen:l,onClose:()=>h(!1),onOpenRegistration:t,onNavigate:e,onOpenPro:a})]})},b_=()=>w.jsx("div",{className:"bg-[#00695c] text-white py-3 px-4 text-center text-sm font-medium shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] sticky bottom-0 z-50",children:w.jsx("p",{children:"          "})}),E_=({title:t,icon:e,color:n,onClick:s})=>w.jsxs("button",{onClick:s,className:"group relative w-full aspect-[4/3] rounded-2xl transition-all duration-150 outline-none select-none active:scale-[0.98]",children:[w.jsx("div",{className:"absolute inset-0 rounded-2xl translate-y-1.5",style:{backgroundColor:n,opacity:.3}}),w.jsxs("div",{className:"absolute inset-0 bg-white rounded-2xl border-2 flex flex-col items-center justify-center gap-3 p-3 transition-transform duration-150 group-hover:-translate-y-1 group-active:translate-y-1",style:{borderColor:`${n}40`,boxShadow:`0 4px 12px ${n}15`},children:[w.jsx("div",{className:"p-3 rounded-xl mb-1 transition-transform duration-300 group-hover:scale-110",style:{backgroundColor:`${n}10`},children:w.jsx(e,{size:36,color:n,strokeWidth:2,className:"drop-shadow-sm"})}),w.jsx("span",{className:"text-gray-800 font-bold text-base md:text-lg text-center leading-tight",children:t})]})]}),C_=[{id:1,title:"",icon:h2,color:"#d32f2f"},{id:2,title:"",icon:B3,color:"#1976d2"},{id:3,title:"",icon:M3,color:"#fbc02d"},{id:4,title:"",icon:w3,color:"#f57c00"},{id:5,title:"",icon:W3,color:"#0288d1"},{id:6,title:"",icon:cd,color:"#5d4037"}],A_=[{id:7,title:"",icon:z3,color:"#c2185b"},{id:8,title:" ",icon:U3,color:"#0097a7"},{id:9,title:" ",icon:c2,color:"#616161"},{id:10,title:" ",icon:C3,color:"#7b1fa2"},{id:11,title:" ",icon:b3,color:"#0277bd"},{id:12,title:"",icon:Df,color:"#455a64"},{id:13,title:" ",icon:ld,color:"#e65100"}];function Qc(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n}function S_(t,e,n,s){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(v){try{m(s.next(v))}catch(b){h(b)}}function p(v){try{m(s.throw(v))}catch(b){h(b)}}function m(v){v.done?l(v.value):a(v.value).then(g,p)}m((s=s.apply(t,e||[])).next())})}const __=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class x0 extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class T_ extends x0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class pp extends x0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class mp extends x0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var _d;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(_d||(_d={}));class I_{constructor(e,{headers:n={},customFetch:s,region:a=_d.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=__(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return S_(this,arguments,void 0,function*(n,s={}){var a;let l,h;try{const{headers:g,method:p,body:m,signal:v,timeout:b}=s;let C={},{region:T}=s;T||(T=this.region);const R=new URL(`${this.url}/${n}`);T&&T!=="any"&&(C["x-region"]=T,R.searchParams.set("forceFunctionRegion",T));let P;m&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(C["Content-Type"]="application/octet-stream",P=m):typeof m=="string"?(C["Content-Type"]="text/plain",P=m):typeof FormData<"u"&&m instanceof FormData?P=m:(C["Content-Type"]="application/json",P=JSON.stringify(m)):P=m;let M=v;b&&(h=new AbortController,l=setTimeout(()=>h.abort(),b),v?(M=h.signal,v.addEventListener("abort",()=>h.abort())):M=h.signal);const k=yield this.fetch(R.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},C),this.headers),g),body:P,signal:M}).catch(U=>{throw new T_(U)}),I=k.headers.get("x-relay-error");if(I&&I==="true")throw new pp(k);if(!k.ok)throw new mp(k);let A=((a=k.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),j;return A==="application/json"?j=yield k.json():A==="application/octet-stream"||A==="application/pdf"?j=yield k.blob():A==="text/event-stream"?j=k:A==="multipart/form-data"?j=yield k.formData():j=yield k.text(),{data:j,error:null,response:k}}catch(g){return{data:null,error:g,response:g instanceof mp||g instanceof pp?g.context:void 0}}finally{l&&clearTimeout(l)}})}}var N_=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},k_=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let h=null,g=null,p=null,m=l.status,v=l.statusText;if(l.ok){var b,C;if(n.method!=="HEAD"){var T;const k=await l.text();k===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((T=n.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?g=k:g=JSON.parse(k))}const P=(b=n.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),M=(C=l.headers.get("content-range"))===null||C===void 0?void 0:C.split("/");P&&M&&M.length>1&&(p=parseInt(M[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(g)&&(g.length>1?(h={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,p=null,m=406,v="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var R;const P=await l.text();try{h=JSON.parse(P),Array.isArray(h)&&l.status===404&&(g=[],h=null,m=200,v="OK")}catch{l.status===404&&P===""?(m=204,v="No Content"):h={message:P}}if(h&&n.isMaybeSingle&&(!(h==null||(R=h.details)===null||R===void 0)&&R.includes("0 rows"))&&(h=null,m=200,v="OK"),h&&n.shouldThrowOnError)throw new N_(h)}return{error:h,data:g,count:p,status:m,statusText:v}});return this.shouldThrowOnError||(a=a.catch(l=>{var h;let g="";const p=l==null?void 0:l.cause;if(p){var m,v,b,C;const R=(m=p==null?void 0:p.message)!==null&&m!==void 0?m:"",P=(v=p==null?void 0:p.code)!==null&&v!==void 0?v:"";g=`${(b=l==null?void 0:l.name)!==null&&b!==void 0?b:"FetchError"}: ${l==null?void 0:l.message}`,g+=`

Caused by: ${(C=p==null?void 0:p.name)!==null&&C!==void 0?C:"Error"}: ${R}`,P&&(g+=` (${P})`),p!=null&&p.stack&&(g+=`
${p.stack}`)}else{var T;g=(T=l==null?void 0:l.stack)!==null&&T!==void 0?T:""}return{error:{message:`${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"FetchError"}: ${l==null?void 0:l.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(t,e)}returns(){return this}overrideTypes(){return this}},R_=class extends k_{select(t){let e=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const l=a?`${a}.order`:"order",h=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${h?`${h},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:l="text"}={}){var h;const g=[t?"analyze":null,e?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),p=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${p}"; options=${g};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const xp=new RegExp("[,()]");var xi=class extends R_{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(s=>typeof s=="string"&&xp.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(s=>typeof s=="string"&&xp.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${l}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},O_=class{constructor(t,{headers:e={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=s}select(t,e){const{head:n=!1,count:s}=e??{},a=n?"HEAD":"GET";let l=!1;const h=(t??"*").split("").map(g=>/\s/.test(g)&&!l?"":(g==='"'&&(l=!l),g)).join("");return this.url.searchParams.set("select",h),s&&this.headers.append("Prefer",`count=${s}`),new xi({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var s;const a="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(l.length>0){const h=[...new Set(l)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new xi({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){var l;const h="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const g=t.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(g.length>0){const p=[...new Set(g)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new xi({method:h,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:e}={}){var n;const s="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new xi({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new xi({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},P_=class Gy{constructor(e,{headers:n={},schema:s,fetch:a}={}){this.url=e,this.headers=new Headers(n),this.schemaName=s,this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new O_(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Gy(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:s=!1,get:a=!1,count:l}={}){var h;let g;const p=new URL(`${this.url}/rpc/${e}`);let m;s||a?(g=s?"HEAD":"GET",Object.entries(n).filter(([b,C])=>C!==void 0).map(([b,C])=>[b,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([b,C])=>{p.searchParams.append(b,C)})):(g="POST",m=n);const v=new Headers(this.headers);return l&&v.set("Prefer",`count=${l}`),new xi({method:g,url:p,headers:v,schema:this.schemaName,body:m,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};class D_{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const M_="2.89.0",j_=`realtime-js/${M_}`,Xy="1.0.0",L_="2.0.0",yp=Xy,Td=1e4,B_=1e3,F_=100;var Zr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Zr||(Zr={}));var Tt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Tt||(Tt={}));var Qn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Qn||(Qn={}));var Id;(function(t){t.websocket="websocket"})(Id||(Id={}));var Ds;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ds||(Ds={}));class U_{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,s;const a=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var n,s;const a=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:{},h=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(e,n,s){var a,l;const h=e.topic,g=(a=e.ref)!==null&&a!==void 0?a:"",p=(l=e.join_ref)!==null&&l!==void 0?l:"",m=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},b=Object.keys(v).length===0?"":JSON.stringify(v);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const C=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+g.length+h.length+m.length+b.length,T=new ArrayBuffer(this.HEADER_LENGTH+C);let R=new DataView(T),P=0;R.setUint8(P++,this.KINDS.userBroadcastPush),R.setUint8(P++,p.length),R.setUint8(P++,g.length),R.setUint8(P++,h.length),R.setUint8(P++,m.length),R.setUint8(P++,b.length),R.setUint8(P++,n),Array.from(p,k=>R.setUint8(P++,k.charCodeAt(0))),Array.from(g,k=>R.setUint8(P++,k.charCodeAt(0))),Array.from(h,k=>R.setUint8(P++,k.charCodeAt(0))),Array.from(m,k=>R.setUint8(P++,k.charCodeAt(0))),Array.from(b,k=>R.setUint8(P++,k.charCodeAt(0)));var M=new Uint8Array(T.byteLength+s.byteLength);return M.set(new Uint8Array(T),0),M.set(new Uint8Array(s),T.byteLength),M.buffer}decode(e,n){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return n(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,l,h,g,p]=s;return n({join_ref:a,ref:l,topic:h,event:g,payload:p})}return n({})}_binaryDecode(e){const n=new DataView(e),s=n.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,a)}}_decodeUserBroadcast(e,n,s){const a=n.getUint8(1),l=n.getUint8(2),h=n.getUint8(3),g=n.getUint8(4);let p=this.HEADER_LENGTH+4;const m=s.decode(e.slice(p,p+a));p=p+a;const v=s.decode(e.slice(p,p+l));p=p+l;const b=s.decode(e.slice(p,p+h));p=p+h;const C=e.slice(p,e.byteLength),T=g===this.JSON_ENCODING?JSON.parse(s.decode(C)):C,R={type:this.BROADCAST_EVENT,event:v,payload:T};return h>0&&(R.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:R}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>n.includes(s)))}}class Ky{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var qe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(qe||(qe={}));const wp=(t,e,n={})=>{var s;const a=(s=n.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,h)=>(l[h]=V_(h,t,e,a),l),{}):{}},V_=(t,e,n,s)=>{const a=e.find(g=>g.name===t),l=a==null?void 0:a.type,h=n[t];return l&&!s.includes(l)?qy(l,h):Nd(h)},qy=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return G_(e,n)}switch(t){case qe.bool:return z_(e);case qe.float4:case qe.float8:case qe.int2:case qe.int4:case qe.int8:case qe.numeric:case qe.oid:return W_(e);case qe.json:case qe.jsonb:return H_(e);case qe.timestamp:return X_(e);case qe.abstime:case qe.date:case qe.daterange:case qe.int4range:case qe.int8range:case qe.money:case qe.reltime:case qe.text:case qe.time:case qe.timestamptz:case qe.timetz:case qe.tsrange:case qe.tstzrange:return Nd(e);default:return Nd(e)}},Nd=t=>t,z_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},W_=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},H_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},G_=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let l;const h=t.slice(1,n);try{l=JSON.parse("["+h+"]")}catch{l=h?h.split(","):[]}return l.map(g=>qy(e,g))}return t},X_=t=>typeof t=="string"?t.replace(" ","T"):t,$y=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class oh{constructor(e,n,s={},a=Td){this.channel=e,this.event=n,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var vp;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(vp||(vp={}));class ta{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:h,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ta.syncState(this.state,a,l,h),this.pendingDiffs.forEach(p=>{this.state=ta.syncDiff(this.state,p,l,h)}),this.pendingDiffs=[],g()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:h,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ta.syncDiff(this.state,a,l,h),g())}),this.onJoin((a,l,h)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:h})}),this.onLeave((a,l,h)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,a){const l=this.cloneDeep(e),h=this.transformState(n),g={},p={};return this.map(l,(m,v)=>{h[m]||(p[m]=v)}),this.map(h,(m,v)=>{const b=l[m];if(b){const C=v.map(M=>M.presence_ref),T=b.map(M=>M.presence_ref),R=v.filter(M=>T.indexOf(M.presence_ref)<0),P=b.filter(M=>C.indexOf(M.presence_ref)<0);R.length>0&&(g[m]=R),P.length>0&&(p[m]=P)}else g[m]=v}),this.syncDiff(l,{joins:g,leaves:p},s,a)}static syncDiff(e,n,s,a){const{joins:l,leaves:h}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(g,p)=>{var m;const v=(m=e[g])!==null&&m!==void 0?m:[];if(e[g]=this.cloneDeep(p),v.length>0){const b=e[g].map(T=>T.presence_ref),C=v.filter(T=>b.indexOf(T.presence_ref)<0);e[g].unshift(...C)}s(g,v,p)}),this.map(h,(g,p)=>{let m=e[g];if(!m)return;const v=p.map(b=>b.presence_ref);m=m.filter(b=>v.indexOf(b.presence_ref)<0),e[g]=m,a(g,m,p),m.length===0&&delete e[g]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const a=e[s];return"metas"in a?n[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bp;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(bp||(bp={}));var na;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(na||(na={}));var Cr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Cr||(Cr={}));class Bi{constructor(e,n={config:{}},s){var a,l;if(this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=Tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new oh(this,Qn.join,this.params,this.timeout),this.rejoinTimer=new Ky(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Tt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qn.reply,{},(h,g)=>{this._trigger(this._replyEventName(g),h)}),this.presence=new ta(this),this.broadcastEndpointURL=$y(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Tt.closed){const{config:{broadcast:h,presence:g,private:p}}=this.params,m=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(T=>T.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[na.PRESENCE]&&this.bindings[na.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,b={},C={broadcast:h,presence:Object.assign(Object.assign({},g),{enabled:v}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(Cr.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(Cr.CLOSED)),this.updateJoinPayload(Object.assign({config:C},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:T})=>{var R;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){e==null||e(Cr.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,M=(R=P==null?void 0:P.length)!==null&&R!==void 0?R:0,k=[];for(let I=0;I<M;I++){const A=P[I],{filter:{event:j,schema:U,table:z,filter:L}}=A,V=T&&T[I];if(V&&V.event===j&&Bi.isFilterValueEqual(V.schema,U)&&Bi.isFilterValueEqual(V.table,z)&&Bi.isFilterValueEqual(V.filter,L))k.push(Object.assign(Object.assign({},A),{id:V.id}));else{this.unsubscribe(),this.state=Tt.errored,e==null||e(Cr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(Cr.SUBSCRIBED);return}}).receive("error",T=>{this.state=Tt.errored,e==null||e(Cr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Cr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===Tt.joined&&e===na.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,s)}async httpSend(e,n,s={}){var a;if(n==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(g.status===202)return{success:!0};let p=g.statusText;try{const m=await g.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(e,n={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:h}=e,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:h,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var h,g,p;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(g=(h=this.params)===null||h===void 0?void 0:h.config)===null||g===void 0?void 0:g.broadcast)===null||p===void 0)&&p.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Tt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new oh(this,Qn.leave,{},e),s.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Tt.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),h=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(l),h}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new oh(this,e,n,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>F_){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var a,l;const h=e.toLocaleLowerCase(),{close:g,error:p,leave:m,join:v}=Qn;if(s&&[g,p,m,v].indexOf(h)>=0&&s!==this._joinRef())return;let C=this._onMessage(h,n,s);if(n&&!C)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(T=>{var R,P,M;return((R=T.filter)===null||R===void 0?void 0:R.event)==="*"||((M=(P=T.filter)===null||P===void 0?void 0:P.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===h}).map(T=>T.callback(C,s)):(l=this.bindings[h])===null||l===void 0||l.filter(T=>{var R,P,M,k,I,A;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in T){const j=T.id,U=(R=T.filter)===null||R===void 0?void 0:R.event;return j&&((P=n.ids)===null||P===void 0?void 0:P.includes(j))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((M=n.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const j=(I=(k=T==null?void 0:T.filter)===null||k===void 0?void 0:k.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return j==="*"||j===((A=n==null?void 0:n.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===h}).map(T=>{if(typeof C=="object"&&"ids"in C){const R=C.data,{schema:P,table:M,commit_timestamp:k,type:I,errors:A}=R;C=Object.assign(Object.assign({},{schema:P,table:M,commit_timestamp:k,eventType:I,new:{},old:{},errors:A}),this._getPayloadRecords(R))}T.callback(C,s)})}_isClosed(){return this.state===Tt.closed}_isJoined(){return this.state===Tt.joined}_isJoining(){return this.state===Tt.joining}_isLeaving(){return this.state===Tt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const a=e.toLocaleLowerCase(),l={type:a,filter:n,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Bi.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Qn.close,{},e)}_onError(e){this._on(Qn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Tt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=wp(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=wp(e.columns,e.old_record)),n}}const ah=()=>{},Al={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},K_=[1e3,2e3,5e3,1e4],q_=1e4,$_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Y_{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Td,this.transport=null,this.heartbeatIntervalMs=Al.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ah,this.ref=0,this.reconnectTimer=null,this.vsn=yp,this.logger=ah,this.conn=null,this.sendBuffer=[],this.serializer=new U_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Id.websocket}`,this.httpEndpoint=$y(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=D_.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Zr.connecting:return Ds.Connecting;case Zr.open:return Ds.Open;case Zr.closing:return Ds.Closing;default:return Ds.Closed}}isConnected(){return this.connectionState()===Ds.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new Bi(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:s,payload:a,ref:l}=e,h=()=>{this.encode(e,g=>{var p;(p=this.conn)===null||p===void 0||p.send(g)})};this.log("push",`${n} ${s} (${l})`,a),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(B_,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Al.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:h}=n,g=h?`(${h})`:"",p=l.status||"";this.log("receive",`${p} ${s} ${a} ${g}`.trim(),l),this.channels.filter(m=>m._isMember(s)).forEach(m=>m._trigger(a,l,h)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Zr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Zr.open||this.conn.readyState===Zr.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Qn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${s}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([$_],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,s=!1;if(e)n=e,s=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),n=this.accessTokenValue}else n=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const l={access_token:n,version:j_};n&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(Qn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Ky(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Al.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,a,l,h,g,p,m,v,b,C,T;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Td,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Al.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(h=e==null?void 0:e.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(g=e==null?void 0:e.heartbeatCallback)!==null&&g!==void 0?g:ah,this.vsn=(p=e==null?void 0:e.vsn)!==null&&p!==void 0?p:yp,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:R=>K_[R-1]||q_,this.vsn){case Xy:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:(R,P)=>P(JSON.stringify(R)),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:(R,P)=>P(JSON.parse(R));break;case L_:this.encode=(C=e==null?void 0:e.encode)!==null&&C!==void 0?C:this.serializer.encode.bind(this.serializer),this.decode=(T=e==null?void 0:e.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var _a=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Z_(t,e,n){const s=new URL(e,t);if(n)for(const[a,l]of Object.entries(n))l!==void 0&&s.searchParams.set(a,l);return s.toString()}async function Q_(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function J_(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:s,query:a,body:l,headers:h}){const g=Z_(t.baseUrl,s,a),p=await Q_(t.auth),m=await e(g,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...p,...h},body:l?JSON.stringify(l):void 0}),v=await m.text(),b=(m.headers.get("content-type")||"").includes("application/json"),C=b&&v?JSON.parse(v):v;if(!m.ok){const T=b?C:void 0,R=T==null?void 0:T.error;throw new _a((R==null?void 0:R.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:R==null?void 0:R.type,icebergCode:R==null?void 0:R.code,details:T})}return{status:m.status,headers:m.headers,data:C}}}}function Sl(t){return t.join("")}var e4=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Sl(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Sl(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sl(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Sl(t.namespace)}`}),!0}catch(e){if(e instanceof _a&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof _a&&n.status===409)return;throw n}}};function ui(t){return t.join("")}var t4=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ui(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ui(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ui(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ui(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ui(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ui(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof _a&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof _a&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},n4=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=J_({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new e4(this.client,e),this.tableOps=new t4(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Jc=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function ot(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var r4=class extends Jc{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},kd=class extends Jc{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const y0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),s4=()=>Response,Rd=t=>{if(Array.isArray(t))return t.map(n=>Rd(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const a=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=Rd(s)}),e},i4=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},o4=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Ta(t){"@babel/helpers - typeof";return Ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ta(t)}function a4(t,e){if(Ta(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Ta(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function l4(t){var e=a4(t,"string");return Ta(e)=="symbol"?e:e+""}function c4(t,e,n){return(e=l4(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ep(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function Ce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ep(Object(n),!0).forEach(function(s){c4(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ep(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}const lh=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},u4=async(t,e,n)=>{t instanceof await s4()&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const a=t.status||500,l=(s==null?void 0:s.statusCode)||a+"";e(new r4(lh(s),a,l))}).catch(s=>{e(new kd(lh(s),s))}):e(new kd(lh(t),t))},h4=(t,e,n,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?a:(i4(s)?(a.headers=Ce({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Ce(Ce({},a),n))};async function Va(t,e,n,s,a,l){return new Promise((h,g)=>{t(n,h4(e,s,a,l)).then(p=>{if(!p.ok)throw p;return s!=null&&s.noResolveJson?p:p.json()}).then(p=>h(p)).catch(p=>u4(p,g,s))})}async function Ia(t,e,n,s){return Va(t,"GET",e,n,s)}async function Yn(t,e,n,s,a){return Va(t,"POST",e,s,a,n)}async function Od(t,e,n,s,a){return Va(t,"PUT",e,s,a,n)}async function d4(t,e,n,s){return Va(t,"HEAD",e,Ce(Ce({},n),{},{noResolveJson:!0}),s)}async function w0(t,e,n,s,a){return Va(t,"DELETE",e,s,a,n)}var f4=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(ot(e))return{data:null,error:e};throw e}}};let Yy;Yy=Symbol.toStringTag;var g4=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Yy]="BlobDownloadBuilder",this.promise=null}asStream(){return new f4(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(ot(e))return{data:null,error:e};throw e}}};const p4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var m4=class{constructor(t,e={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=y0(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,s){var a=this;try{let l;const h=Ce(Ce({},Cp),s);let g=Ce(Ce({},a.headers),t==="POST"&&{"x-upsert":String(h.upsert)});const p=h.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",h.cacheControl),p&&l.append("metadata",a.encodeMetadata(p)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.has("cacheControl")||l.append("cacheControl",h.cacheControl),p&&!l.has("metadata")&&l.append("metadata",a.encodeMetadata(p))):(l=n,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType,p&&(g["x-metadata"]=a.toBase64(a.encodeMetadata(p))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!h.duplex&&(h.duplex="half")),s!=null&&s.headers&&(g=Ce(Ce({},g),s.headers));const m=a._removeEmptyFolders(e),v=a._getFinalPath(m),b=await(t=="PUT"?Od:Yn)(a.fetch,`${a.url}/object/${v}`,l,Ce({headers:g},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{data:{path:m,id:b.Id,fullPath:b.Key},error:null}}catch(l){if(a.shouldThrowOnError)throw l;if(ot(l))return{data:null,error:l};throw l}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,s){var a=this;const l=a._removeEmptyFolders(t),h=a._getFinalPath(l),g=new URL(a.url+`/object/upload/sign/${h}`);g.searchParams.set("token",e);try{let p;const m=Ce({upsert:Cp.upsert},s),v=Ce(Ce({},a.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&n instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",n)):typeof FormData<"u"&&n instanceof FormData?(p=n,p.append("cacheControl",m.cacheControl)):(p=n,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType),{data:{path:l,fullPath:(await Od(a.fetch,g.toString(),p,{headers:v})).Key},error:null}}catch(p){if(a.shouldThrowOnError)throw p;if(ot(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(t,e){var n=this;try{let s=n._getFinalPath(t);const a=Ce({},n.headers);e!=null&&e.upsert&&(a["x-upsert"]="true");const l=await Yn(n.fetch,`${n.url}/object/upload/sign/${s}`,{},{headers:a}),h=new URL(n.url+l.url),g=h.searchParams.get("token");if(!g)throw new Jc("No token returned by API");return{data:{signedUrl:h.toString(),path:t,token:g},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ot(s))return{data:null,error:s};throw s}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var s=this;try{return{data:await Yn(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}}async copy(t,e,n){var s=this;try{return{data:{path:(await Yn(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers})).Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}}async createSignedUrl(t,e,n){var s=this;try{let a=s._getFinalPath(t),l=await Yn(s.fetch,`${s.url}/object/sign/${a}`,Ce({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:s.headers});const h=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return l={signedUrl:encodeURI(`${s.url}${l.signedURL}${h}`)},{data:l,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}}async createSignedUrls(t,e,n){var s=this;try{const a=await Yn(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:t},{headers:s.headers}),l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(h=>Ce(Ce({},h),{},{signedUrl:h.signedURL?encodeURI(`${s.url}${h.signedURL}${l}`):null})),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=s?`?${s}`:"",l=this._getFinalPath(t),h=()=>Ia(this.fetch,`${this.url}/${n}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new g4(h,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:Rd(await Ia(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(ot(s))return{data:null,error:s};throw s}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await d4(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(ot(s)&&s instanceof kd){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}}getPublicUrl(t,e){const n=this._getFinalPath(t),s=[],a=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&s.push(a);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});h!==""&&s.push(h);let g=s.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${g}`)}}}async remove(t){var e=this;try{return{data:await w0(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async list(t,e,n){var s=this;try{const a=Ce(Ce(Ce({},p4),e),{},{prefix:t||""});return{data:await Yn(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},n),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}}async listV2(t,e){var n=this;try{const s=Ce({},t);return{data:await Yn(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,s,{headers:n.headers},e),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ot(s))return{data:null,error:s};throw s}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Zy="2.89.0",Qy={"X-Client-Info":`storage-js/${Zy}`};var x4=class{constructor(t,e={},n,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Ce(Ce({},Qy),e),this.fetch=y0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await Ia(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Ia(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Yn(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ot(s))return{data:null,error:s};throw s}}async updateBucket(t,e){var n=this;try{return{data:await Od(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ot(s))return{data:null,error:s};throw s}}async emptyBucket(t){var e=this;try{return{data:await Yn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await w0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},y4=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Ce(Ce({},Qy),e),this.fetch=y0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Yn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const s=n.toString(),a=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return{data:await Ia(e.fetch,a,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await w0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!o4(t))throw new Jc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new n4({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(n,{get(a,l){const h=a[l];return typeof h!="function"?h:async(...g)=>{try{return{data:await h.apply(a,g),error:null}}catch(p){if(s)throw p;return{data:null,error:p}}}}})}};const v0={"X-Client-Info":`storage-js/${Zy}`,"Content-Type":"application/json"};var Jy=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function bn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var ch=class extends Jy{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},w4=class extends Jy{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const b0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),v4=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ap=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),b4=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t.status||500,a=t;if(typeof a.json=="function")a.json().then(l=>{const h=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||s+"";e(new ch(Ap(l),s,h))}).catch(()=>{const l=s+"";e(new ch(a.statusText||`HTTP ${s} error`,s,l))});else{const l=s+"";e(new ch(a.statusText||`HTTP ${s} error`,s,l))}}else e(new w4(Ap(t),t))},E4=(t,e,n,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(v4(s)?(a.headers=Ce({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,Ce(Ce({},a),n)):a};async function C4(t,e,n,s,a,l){return new Promise((h,g)=>{t(n,E4(e,s,a,l)).then(p=>{if(!p.ok)throw p;if(s!=null&&s.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>h(p)).catch(p=>b4(p,g,s))})}async function En(t,e,n,s,a){return C4(t,"POST",e,s,a,n)}var A4=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Ce(Ce({},v0),e),this.fetch=b0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await En(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await En(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(bn(s))return{data:null,error:s};throw s}}async listIndexes(t){var e=this;try{return{data:await En(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await En(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(bn(s))return{data:null,error:s};throw s}}},S4=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Ce(Ce({},v0),e),this.fetch=b0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await En(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await En(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await En(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await En(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await En(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}},_4=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Ce(Ce({},v0),e),this.fetch=b0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await En(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await En(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await En(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await En(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}},T4=class extends _4{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new I4(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},I4=class extends A4{constructor(t,e,n,s){super(t,e,s),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Ce(Ce({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Ce(Ce({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new N4(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},N4=class extends S4{constructor(t,e,n,s,a){super(t,e,a),this.vectorBucketName=n,this.indexName=s}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Ce(Ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Ce(Ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Ce(Ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Ce(Ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Ce(Ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},k4=class extends x4{constructor(t,e={},n,s){super(t,e,n,s)}from(t){return new m4(this.url,this.headers,t,this.fetch)}get vectors(){return new T4(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new y4(this.url+"/iceberg",this.headers,this.fetch)}};const ew="2.89.0",yi=30*1e3,Pd=3,uh=Pd*yi,R4="http://localhost:9999",O4="supabase.auth.token",P4={"X-Client-Info":`gotrue-js/${ew}`},Dd="X-Supabase-Api-Version",tw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},D4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,M4=10*60*1e3;class Na extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function ge(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class j4 extends Na{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function L4(t){return ge(t)&&t.name==="AuthApiError"}class Ms extends Na{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Br extends Na{constructor(e,n,s,a){super(e,s,a),this.name=n,this.status=s}}class yn extends Br{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function B4(t){return ge(t)&&t.name==="AuthSessionMissingError"}class hi extends Br{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _l extends Br{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Tl extends Br{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function F4(t){return ge(t)&&t.name==="AuthImplicitGrantRedirectError"}class Sp extends Br{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class U4 extends Br{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Md extends Br{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function hh(t){return ge(t)&&t.name==="AuthRetryableFetchError"}class _p extends Br{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class jd extends Br{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Cc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Tp=` 	
\r=`.split(""),V4=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Tp.length;e+=1)t[Tp[e].charCodeAt(0)]=-2;for(let e=0;e<Cc.length;e+=1)t[Cc[e].charCodeAt(0)]=e;return t})();function Ip(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Cc[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Cc[s]),e.queuedBits-=6}}function nw(t,e,n){const s=V4[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Np(t){const e=[],n=h=>{e.push(String.fromCodePoint(h))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=h=>{H4(h,s,n)};for(let h=0;h<t.length;h+=1)nw(t.charCodeAt(h),a,l);return e.join("")}function z4(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function W4(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}z4(s,e)}}function H4(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ki(t){const e=[],n={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)nw(t.charCodeAt(a),n,s);return new Uint8Array(e)}function G4(t){const e=[];return W4(t,n=>e.push(n)),new Uint8Array(e)}function Us(t){const e=[],n={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>Ip(a,n,s)),Ip(null,n,s),e.join("")}function X4(t){return Math.round(Date.now()/1e3)+t}function K4(){return Symbol("auth-callback")}const Ut=()=>typeof window<"u"&&typeof document<"u",Ts={tested:!1,writable:!1},rw=()=>{if(!Ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ts.tested)return Ts.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ts.tested=!0,Ts.writable=!0}catch{Ts.tested=!0,Ts.writable=!1}return Ts.writable};function q4(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return n.searchParams.forEach((s,a)=>{e[a]=s}),e}const sw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),$4=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",wi=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Is=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ft=async(t,e)=>{await t.removeItem(e)};class eu{constructor(){this.promise=new eu.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}eu.promiseConstructor=Promise;function dh(t){const e=t.split(".");if(e.length!==3)throw new jd("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!D4.test(e[s]))throw new jd("JWT not in base64url format");return{header:JSON.parse(Np(e[0])),payload:JSON.parse(Np(e[1])),signature:Ki(e[2]),raw:{header:e[0],payload:e[1]}}}async function Y4(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Z4(t,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const h=await t(l);if(!e(l,null,h)){s(h);return}}catch(h){if(!e(l,h)){a(h);return}}})()})}function Q4(t){return("0"+t.toString(16)).substr(-2)}function J4(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let a="";for(let l=0;l<56;l++)a+=n.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,Q4).join("")}async function e8(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function t8(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await e8(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function di(t,e,n=!1){const s=J4();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await wi(t,`${e}-code-verifier`,a);const l=await t8(s);return[l,s===l?"plain":"s256"]}const n8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function r8(t){const e=t.headers.get(Dd);if(!e||!e.match(n8))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function s8(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function i8(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const o8=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fi(t){if(!o8.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fh(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function a8(t,e){return new Proxy(t,{get:(n,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,s,a)}})}function kp(t){return JSON.parse(JSON.stringify(t))}const Ps=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),l8=[502,503,504];async function Rp(t){var e;if(!$4(t))throw new Md(Ps(t),0);if(l8.includes(t.status))throw new Md(Ps(t),t.status);let n;try{n=await t.json()}catch(l){throw new Ms(Ps(l),l)}let s;const a=r8(t);if(a&&a.getTime()>=tw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new _p(Ps(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new yn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,h)=>l&&typeof h=="string",!0))throw new _p(Ps(n),t.status,n.weak_password.reasons);throw new j4(Ps(n),t.status||500,s)}const c8=(t,e,n,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))};async function be(t,e,n,s){var a;const l=Object.assign({},s==null?void 0:s.headers);l[Dd]||(l[Dd]=tw["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const h=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(h.redirect_to=s.redirectTo);const g=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",p=await u8(t,e,n+g,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(p):{data:Object.assign({},p),error:null}}async function u8(t,e,n,s,a,l){const h=c8(e,s,a,l);let g;try{g=await t(n,Object.assign({},h))}catch(p){throw console.error(p),new Md(Ps(p),0)}if(g.ok||await Rp(g),s!=null&&s.noResolveJson)return g;try{return await g.json()}catch(p){await Rp(p)}}function Kn(t){var e;let n=null;f8(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=X4(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function Op(t){const e=Kn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function es(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function h8(t){return{data:t,error:null}}function d8(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:l}=t,h=Qc(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:l},p=Object.assign({},h);return{data:{properties:g,user:p},error:null}}function Pp(t){return t}function f8(t){return t.access_token&&t.refresh_token&&t.expires_in}const gh=["global","local","others"];class g8{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=sw(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=gh[0]){if(gh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${gh.join(", ")}`);try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:es})}catch(s){if(ge(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=Qc(e,["options"]),a=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:d8,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ge(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:es})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,a,l,h,g,p;try{const m={nextPage:null,lastPage:0,total:0},v=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Pp});if(v.error)throw v.error;const b=await v.json(),C=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,T=(p=(g=v.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&p!==void 0?p:[];return T.length>0&&(T.forEach(R=>{const P=parseInt(R.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(R.split(";")[1].split("=")[1]);m[`${M}Page`]=P}),m.total=parseInt(C)),{data:Object.assign(Object.assign({},b),m),error:null}}catch(m){if(ge(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){fi(e);try{return await be(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:es})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){fi(e);try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:es})}catch(s){if(ge(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){fi(e);try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:es})}catch(s){if(ge(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){fi(e.userId);try{const{data:n,error:s}=await be(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:s}}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _deleteFactor(e){fi(e.userId),fi(e.id);try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,s,a,l,h,g,p;try{const m={nextPage:null,lastPage:0,total:0},v=await be(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Pp});if(v.error)throw v.error;const b=await v.json(),C=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,T=(p=(g=v.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&p!==void 0?p:[];return T.length>0&&(T.forEach(R=>{const P=parseInt(R.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(R.split(";")[1].split("=")[1]);m[`${M}Page`]=P}),m.total=parseInt(C)),{data:Object.assign(Object.assign({},b),m),error:null}}catch(m){if(ge(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await be(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await be(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ge(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await be(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ge(n))return{data:null,error:n};throw n}}}function Dp(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const gi={debug:!!(globalThis&&rw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class iw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class p8 extends iw{}async function m8(t,e,n){gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),gi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new p8(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(gi.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function x8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ow(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function y8(t){return parseInt(t,16)}function w8(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function v8(t){var e;const{chainId:n,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:h,notBefore:g,requestId:p,resources:m,scheme:v,uri:b,version:C}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(C!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${C}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const T=ow(t.address),R=v?`${v}://${s}`:s,P=t.statement?`${t.statement}
`:"",M=`${R} wants you to sign in with your Ethereum account:
${T}

${P}`;let k=`URI: ${b}
Version: ${C}
Chain ID: ${n}${h?`
Nonce: ${h}`:""}
Issued At: ${l.toISOString()}`;if(a&&(k+=`
Expiration Time: ${a.toISOString()}`),g&&(k+=`
Not Before: ${g.toISOString()}`),p&&(k+=`
Request ID: ${p}`),m){let I=`
Resources:`;for(const A of m){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);I+=`
- ${A}`}k+=I}return`${M}
${k}`}class Et extends Error{constructor({message:e,code:n,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class Ac extends Et{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function b8({error:t,options:e}){var n,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Et({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Et({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Et({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Et({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Et({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Et({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new Et({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Et({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const h=window.location.hostname;if(aw(h)){if(l.rp.id!==h)return new Et({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Et({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Et({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function E8({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Et({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Et({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(aw(s)){if(n.rpId!==s)return new Et({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Et({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class C8{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const A8=new C8;function S8(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,a=Qc(t,["challenge","user","excludeCredentials"]),l=Ki(e).buffer,h=Object.assign(Object.assign({},n),{id:Ki(n.id).buffer}),g=Object.assign(Object.assign({},a),{challenge:l,user:h});if(s&&s.length>0){g.excludeCredentials=new Array(s.length);for(let p=0;p<s.length;p++){const m=s[p];g.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:Ki(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return g}function _8(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=Qc(t,["challenge","allowCredentials"]),a=Ki(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let h=0;h<n.length;h++){const g=n[h];l.allowCredentials[h]=Object.assign(Object.assign({},g),{id:Ki(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return l}function T8(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Us(new Uint8Array(t.response.attestationObject)),clientDataJSON:Us(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function I8(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,s=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Us(new Uint8Array(a.authenticatorData)),clientDataJSON:Us(new Uint8Array(a.clientDataJSON)),signature:Us(new Uint8Array(a.signature)),userHandle:a.userHandle?Us(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function aw(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Mp(){var t,e;return!!(Ut()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function N8(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ac("Browser returned unexpected credential type",e)}:{data:null,error:new Ac("Empty credential response",e)}}catch(e){return{data:null,error:b8({error:e,options:t})}}}async function k8(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ac("Browser returned unexpected credential type",e)}:{data:null,error:new Ac("Empty credential response",e)}}catch(e){return{data:null,error:E8({error:e,options:t})}}}const R8={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},O8={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Sc(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of t)if(a)for(const l in a){const h=a[l];if(h!==void 0)if(Array.isArray(h))s[l]=h;else if(n(h))s[l]=h;else if(e(h)){const g=s[l];e(g)?s[l]=Sc(g,h):s[l]=Sc(h)}else s[l]=h}return s}function P8(t,e){return Sc(R8,t,e||{})}function D8(t,e){return Sc(O8,t,e||{})}class M8{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:s,signal:a},l){try{const{data:h,error:g}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!h)return{data:null,error:g};const p=a??A8.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:m}=h.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${s}`),m.displayName||(m.displayName=m.name)}switch(h.webauthn.type){case"create":{const m=P8(h.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:b}=await N8({publicKey:m,signal:p});return v?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}case"request":{const m=D8(h.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:b}=await k8(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:m,signal:p}));return v?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}}}catch(h){return ge(h)?{data:null,error:h}:{data:null,error:new Ms("Unexpected error in challenge",h)}}}async _verify({challengeId:e,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!n)return{data:null,error:new Na("rpId is required for WebAuthn authentication")};try{if(!Mp())return{data:null,error:new Ms("Browser does not support WebAuthn",null)};const{data:h,error:g}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:s},signal:a},{request:l});if(!h)return{data:null,error:g};const{webauthn:p}=h;return this._verify({factorId:e,challengeId:h.challengeId,webauthn:{type:p.type,rpId:n,rpOrigins:s,credential_response:p.credential_response}})}catch(h){return ge(h)?{data:null,error:h}:{data:null,error:new Ms("Unexpected error in authenticate",h)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!n)return{data:null,error:new Na("rpId is required for WebAuthn registration")};try{if(!Mp())return{data:null,error:new Ms("Browser does not support WebAuthn",null)};const{data:h,error:g}=await this._enroll({friendlyName:e});if(!h)return await this.client.mfa.listFactors().then(v=>{var b;return(b=v.data)===null||b===void 0?void 0:b.all.find(C=>C.factor_type==="webauthn"&&C.friendly_name===e&&C.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:g};const{data:p,error:m}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:a},{create:l});return p?this._verify({factorId:h.id,challengeId:p.challengeId,webauthn:{rpId:n,rpOrigins:s,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(h){return ge(h)?{data:null,error:h}:{data:null,error:new Ms("Unexpected error in register",h)}}}}x8();const j8={url:R4,storageKey:O4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:P4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function jp(t,e,n){return await n()}const pi={};class ka{get jwks(){var e,n;return(n=(e=pi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){pi[this.storageKey]=Object.assign(Object.assign({},pi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=pi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){pi[this.storageKey]=Object.assign(Object.assign({},pi[this.storageKey]),{cachedAt:e})}constructor(e){var n,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},j8),e);if(this.storageKey=l.storageKey,this.instanceID=(n=ka.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,ka.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Ut()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new g8({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=sw(l.fetch),this.lock=l.lock||jp,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&Ut()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=m8:this.lock=jp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new M8(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:rw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Dp(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Dp(this.memoryStorage)),Ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ew}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},s="none";if(Ut()&&(n=q4(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),Ut()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),F4(l)){const p=(e=l.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:h,redirectType:g}=a;return this._debug("#_initialize()","detected session in URL",h,"redirect type",g),await this._saveSession(h),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ge(n)?this._returnResult({error:n}):this._returnResult({error:new Ms("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,a;try{const l=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Kn}),{data:h,error:g}=l;if(g||!h)return this._returnResult({data:{user:null,session:null},error:g});const p=h.session,m=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(l){if(ge(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var n,s,a;try{let l;if("email"in e){const{email:v,password:b,options:C}=e;let T=null,R=null;this.flowType==="pkce"&&([T,R]=await di(this.storage,this.storageKey)),l=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:C==null?void 0:C.emailRedirectTo,body:{email:v,password:b,data:(n=C==null?void 0:C.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:C==null?void 0:C.captchaToken},code_challenge:T,code_challenge_method:R},xform:Kn})}else if("phone"in e){const{phone:v,password:b,options:C}=e;l=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:b,data:(s=C==null?void 0:C.data)!==null&&s!==void 0?s:{},channel:(a=C==null?void 0:C.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:C==null?void 0:C.captchaToken}},xform:Kn})}else throw new _l("You must provide either an email or phone number and a password");const{data:h,error:g}=l;if(g||!h)return await Ft(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const p=h.session,m=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(l){if(await Ft(this.storage,`${this.storageKey}-code-verifier`),ge(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:h,options:g}=e;n=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Op})}else if("phone"in e){const{phone:l,password:h,options:g}=e;n=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Op})}else throw new _l("You must provide either an email or phone number and a password");const{data:s,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const l=new hi;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(n){if(ge(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,s,a,l,h,g,p,m,v,b,C;let T,R;if("message"in e)T=e.message,R=e.signature;else{const{chain:P,wallet:M,statement:k,options:I}=e;let A;if(Ut())if(typeof M=="object")A=M;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")A=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=M}const j=new URL((n=I==null?void 0:I.url)!==null&&n!==void 0?n:window.location.href),U=await A.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=ow(U[0]);let L=(s=I==null?void 0:I.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!L){const K=await A.request({method:"eth_chainId"});L=y8(K)}const V={domain:j.host,address:z,statement:k,uri:j.href,version:"1",chainId:L,nonce:(a=I==null?void 0:I.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(h=(l=I==null?void 0:I.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(g=I==null?void 0:I.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(p=I==null?void 0:I.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=I==null?void 0:I.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=I==null?void 0:I.signInWithEthereum)===null||v===void 0?void 0:v.resources};T=v8(V),R=await A.request({method:"personal_sign",params:[w8(T),z]})}try{const{data:P,error:M}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:R},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(C=e.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:Kn});if(M)throw M;if(!P||!P.session||!P.user){const k=new hi;return this._returnResult({data:{user:null,session:null},error:k})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:M})}catch(P){if(ge(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async signInWithSolana(e){var n,s,a,l,h,g,p,m,v,b,C,T;let R,P;if("message"in e)R=e.message,P=e.signature;else{const{chain:M,wallet:k,statement:I,options:A}=e;let j;if(Ut())if(typeof k=="object")j=k;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))j=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=k}const U=new URL((n=A==null?void 0:A.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const z=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A==null?void 0:A.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),I?{statement:I}:null));let L;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")L=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)L=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)R=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),P=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");R=[`${U.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(a=(s=A==null?void 0:A.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=A==null?void 0:A.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((h=A==null?void 0:A.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((g=A==null?void 0:A.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((p=A==null?void 0:A.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((m=A==null?void 0:A.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((b=(v=A==null?void 0:A.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||b===void 0)&&b.length?["Resources",...A.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const z=await j.signMessage(new TextEncoder().encode(R),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=z}}try{const{data:M,error:k}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:R,signature:Us(P)},!((C=e.options)===null||C===void 0)&&C.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Kn});if(k)throw k;if(!M||!M.session||!M.user){const I=new hi;return this._returnResult({data:{user:null,session:null},error:I})}return M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),this._returnResult({data:Object.assign({},M),error:k})}catch(M){if(ge(M))return this._returnResult({data:{user:null,session:null},error:M});throw M}}async _exchangeCodeForSession(e){const n=await Is(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(n??"").split("/");try{if(!s&&this.flowType==="pkce")throw new U4;const{data:l,error:h}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Kn});if(await Ft(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!l||!l.session||!l.user){const g=new hi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:h})}catch(l){if(await Ft(this.storage,`${this.storageKey}-code-verifier`),ge(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:n,provider:s,token:a,access_token:l,nonce:h}=e,g=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:h,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Kn}),{data:p,error:m}=g;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p||!p.session||!p.user){const v=new hi;return this._returnResult({data:{user:null,session:null},error:v})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:m})}catch(n){if(ge(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,s,a,l,h;try{if("email"in e){const{email:g,options:p}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await di(this.storage,this.storageKey));const{error:b}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},create_user:(s=p==null?void 0:p.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in e){const{phone:g,options:p}=e,{data:m,error:v}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},create_user:(l=p==null?void 0:p.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(h=p==null?void 0:p.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:v})}throw new _l("You must provide either an email or phone number.")}catch(g){if(await Ft(this.storage,`${this.storageKey}-code-verifier`),ge(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(e){var n,s;try{let a,l;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:h,error:g}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:Kn});if(g)throw g;if(!h)throw new Error("An error occurred on token verification.");const p=h.session,m=h.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(a){if(ge(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var n,s,a,l,h;try{let g=null,p=null;this.flowType==="pkce"&&([g,p]=await di(this.storage,this.storageKey));const m=await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:p}),headers:this.headers,xform:h8});return!((l=m.data)===null||l===void 0)&&l.url&&Ut()&&!(!((h=e.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(g){if(await Ft(this.storage,`${this.storageKey}-code-verifier`),ge(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new yn;const{error:a}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(ge(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:h}=await be(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:h,error:g}=await be(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:g})}throw new _l("You must provide either an email or phone number and a type")}catch(n){if(ge(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Is(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<uh:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const h=await Is(this.userStorage,this.storageKey+"-user");h!=null&&h.user?e.user=h.user:e.user=fh()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};e.user=a8(e.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:es}):await this._useSession(async n=>{var s,a,l;const{data:h,error:g}=n;if(g)throw g;return!(!((s=h.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yn}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=h.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:es})})}catch(n){if(ge(n))return B4(n)&&(await this._removeSession(),await Ft(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new yn;const h=a.session;let g=null,p=null;this.flowType==="pkce"&&e.email!=null&&([g,p]=await di(this.storage,this.storageKey));const{data:m,error:v}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:g,code_challenge_method:p}),jwt:h.access_token,xform:es});if(v)throw v;return h.user=m.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(s){if(await Ft(this.storage,`${this.storageKey}-code-verifier`),ge(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new yn;const n=Date.now()/1e3;let s=n,a=!0,l=null;const{payload:h}=dh(e.access_token);if(h.exp&&(s=h.exp,a=s<=n),a){const{data:g,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g)return{data:{user:null,session:null},error:null};l=g}else{const{data:g,error:p}=await this._getUser(e.access_token);if(p)throw p;l={access_token:e.access_token,refresh_token:e.refresh_token,user:g.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(ge(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:h,error:g}=n;if(g)throw g;e=(s=h.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new yn;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ge(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Ut())throw new Tl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Tl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Sp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Sp("No code detected.");const{data:I,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:h,expires_in:g,expires_at:p,token_type:m}=e;if(!l||!g||!h||!m)throw new Tl("No session defined in URL");const v=Math.round(Date.now()/1e3),b=parseInt(g);let C=v+b;p&&(C=parseInt(p));const T=C-v;T*1e3<=yi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${b}s`);const R=C-b;v-R>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",R,C,v):v-R<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",R,C,v);const{data:P,error:M}=await this._getUser(l);if(M)throw M;const k={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:b,expires_at:C,refresh_token:h,token_type:m,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:e.type},error:null})}catch(s){if(ge(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Is(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return this._returnResult({error:l});const h=(s=a.session)===null||s===void 0?void 0:s.access_token;if(h){const{error:g}=await this.admin.signOut(h,e);if(g&&!(L4(g)&&(g.status===404||g.status===401||g.status===403)))return this._returnResult({error:g})}return e!=="others"&&(await this._removeSession(),await Ft(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=K4(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,a;try{const{data:{session:l},error:h}=n;if(h)throw h;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await di(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await Ft(this.storage,`${this.storageKey}-code-verifier`),ge(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:s,error:a}=await this._useSession(async l=>{var h,g,p,m,v;const{data:b,error:C}=l;if(C)throw C;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(h=e.options)===null||h===void 0?void 0:h.redirectTo,scopes:(g=e.options)===null||g===void 0?void 0:g.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",T,{headers:this.headers,jwt:(v=(m=b.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return Ut()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(ge(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var s;try{const{error:a,data:{session:l}}=n;if(a)throw a;const{options:h,provider:g,token:p,access_token:m,nonce:v}=e,b=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:g,id_token:p,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Kn}),{data:C,error:T}=b;return T?this._returnResult({data:{user:null,session:null},error:T}):!C||!C.session||!C.user?this._returnResult({data:{user:null,session:null},error:new hi}):(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("USER_UPDATED",C.session)),this._returnResult({data:C,error:T}))}catch(a){if(await Ft(this.storage,`${this.storageKey}-code-verifier`),ge(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,a;const{data:l,error:h}=n;if(h)throw h;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await Z4(async a=>(a>0&&await Y4(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Kn})),(a,l)=>{const h=200*Math.pow(2,a);return l&&hh(l)&&Date.now()+h-s<yi})}catch(s){if(this._debug(n,"error",s),ge(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),Ut()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Is(this.storage,this.storageKey);if(a&&this.userStorage){let h=await Is(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:a.user},await wi(this.userStorage,this.storageKey+"-user",h)),a.user=(e=h==null?void 0:h.user)!==null&&e!==void 0?e:fh()}else if(a&&!a.user&&!a.user){const h=await Is(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(a.user=h.user,await Ft(this.storage,this.storageKey+"-user"),await wi(this.storage,this.storageKey,a)):a.user=fh()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<uh;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${uh}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:h}=await this._callRefreshToken(a.refresh_token);h&&(console.error(h),hh(h)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:g}=await this._getUser(a.access_token);!g&&(h!=null&&h.user)?(a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(s,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new yn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new eu;const{data:l,error:h}=await this._refreshAccessToken(e);if(h)throw h;if(!l.session)throw new yn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const g={data:l.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(l){if(this._debug(a,"error",l),ge(l)){const h={data:null,error:l};return hh(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(h),h}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],h=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(e,n)}catch(p){l.push(p)}});if(await Promise.all(h),l.length>0){for(let g=0;g<l.length;g+=1)console.error(l[g]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ft(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await wi(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const l=kp(a);await wi(this.storage,this.storageKey,l)}else{const a=kp(n);await wi(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ft(this.storage,this.storageKey),await Ft(this.storage,this.storageKey+"-code-verifier"),await Ft(this.storage,this.storageKey+"-user"),this.userStorage&&await Ft(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),yi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/yi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${yi}ms, refresh threshold is ${Pd} ticks`),a<=Pd&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof iw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const a=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,h]=await di(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(h)}`});a.push(g.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;return l?this._returnResult({data:null,error:l}):await be(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,a;const{data:l,error:h}=n;if(h)return this._returnResult({data:null,error:h});const g=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:m}=await be(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&p.type==="totp"&&(!((a=p==null?void 0:p.totp)===null||a===void 0)&&a.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const h=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?T8(e.webauthn.credential_response):I8(e.webauthn.credential_response)})}:{code:e.code}),{data:g,error:p}=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:h,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:p}))})}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const h=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(h.error)return h;const{data:g}=h;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:S8(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:_8(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=dh(s.access_token);let h=null;l.aal&&(h=l.aal);let g=h;((n=(e=s.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(g="aal2");const m=l.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;return a?this._returnResult({data:null,error:a}):s?await be(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new yn})})}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new yn});const h=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&Ut()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(s){if(ge(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new yn});const h=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&Ut()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(s){if(ge(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;return s?this._returnResult({data:null,error:s}):n?await be(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new yn})})}catch(e){if(ge(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;return a?this._returnResult({data:null,error:a}):s?(await be(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new yn})})}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(g=>g.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(g=>g.kid===e),s&&this.jwks_cached_at+M4>a)return s;const{data:l,error:h}=await be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(g=>g.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:T,error:R}=await this.getSession();if(R||!T.session)return this._returnResult({data:null,error:R});s=T.session.access_token}const{header:a,payload:l,signature:h,raw:{header:g,payload:p}}=dh(s);n!=null&&n.allowExpired||s8(l.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!m){const{error:T}=await this.getUser(s);if(T)throw T;return{data:{claims:l,header:a,signature:h},error:null}}const v=i8(a.alg),b=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,b,h,G4(`${g}.${p}`)))throw new jd("Invalid JWT signature");return{data:{claims:l,header:a,signature:h},error:null}}catch(s){if(ge(s))return this._returnResult({data:null,error:s});throw s}}}ka.nextInstanceID={};const L8=ka,B8="2.89.0";let Vo="";typeof Deno<"u"?Vo="deno":typeof document<"u"?Vo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vo="react-native":Vo="node";const F8={"X-Client-Info":`supabase-js-${Vo}/${B8}`},U8={headers:F8},V8={schema:"public"},z8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},W8={};function Ra(t){"@babel/helpers - typeof";return Ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(t)}function H8(t,e){if(Ra(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Ra(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function G8(t){var e=H8(t,"string");return Ra(e)=="symbol"?e:e+""}function X8(t,e,n){return(e=G8(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function pt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lp(Object(n),!0).forEach(function(s){X8(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lp(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}const K8=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),q8=()=>Headers,$8=(t,e,n)=>{const s=K8(n),a=q8();return async(l,h)=>{var g;const p=(g=await e())!==null&&g!==void 0?g:t;let m=new a(h==null?void 0:h.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),s(l,pt(pt({},h),{},{headers:m}))}};function Y8(t){return t.endsWith("/")?t:t+"/"}function Z8(t,e){var n,s;const{db:a,auth:l,realtime:h,global:g}=t,{db:p,auth:m,realtime:v,global:b}=e,C={db:pt(pt({},p),a),auth:pt(pt({},m),l),realtime:pt(pt({},v),h),storage:{},global:pt(pt(pt({},b),g),{},{headers:pt(pt({},(n=b==null?void 0:b.headers)!==null&&n!==void 0?n:{}),(s=g==null?void 0:g.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?C.accessToken=t.accessToken:delete C.accessToken,C}function Q8(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Y8(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var J8=class extends L8{constructor(t){super(t)}},eT=class{constructor(t,e,n){var s,a;this.supabaseUrl=t,this.supabaseKey=e;const l=Q8(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const h=`sb-${l.hostname.split(".")[0]}-auth-token`,g={db:V8,realtime:W8,auth:pt(pt({},z8),{},{storageKey:h}),global:U8},p=Z8(n??{},g);if(this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=p.global.headers)!==null&&a!==void 0?a:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(v,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=p.auth)!==null&&m!==void 0?m:{},this.headers,p.global.fetch)}this.fetch=$8(e,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(pt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new P_(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new k4(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new I_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:s}=await t.auth.getSession();return(e=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:l,flowType:h,lock:g,debug:p,throwOnError:m},v,b){const C={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new J8({url:this.authUrl.href,headers:pt(pt({},C),v),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:s,userStorage:a,flowType:h,lock:g,debug:p,throwOnError:m,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Y_(this.realtimeUrl.href,pt(pt({},t),{},{params:pt(pt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const tT=(t,e,n)=>new eT(t,e,n);function nT(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}nT()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const rT="https://jitagrikzjyrupbuossi.supabase.co",sT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImppdGFncmlremp5cnVwYnVvc3NpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcyODY5MTIsImV4cCI6MjA4Mjg2MjkxMn0.gdb1U-kCVkO7x1fR6MHPvsPrxQIBZbxxwZRV5yzi_Zs",Ne=tT(rT,sT),Qs=({message:t,isVisible:e,onClose:n,type:s="success"})=>(X.useEffect(()=>{if(e){const a=setTimeout(n,3e3);return()=>clearTimeout(a)}},[e,n]),w.jsx(Xc,{children:e&&w.jsxs(rr.div,{initial:{opacity:0,y:-50,x:"-50%"},animate:{opacity:1,y:0,x:"-50%"},exit:{opacity:0,y:-50,x:"-50%"},className:"fixed top-6 left-1/2 z-[200] bg-[#00695c] text-white px-6 py-3 rounded-full shadow-xl flex items-center gap-3 min-w-[300px] justify-center border border-[#004d40]",children:[w.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:s==="error"?w.jsx(a2,{size:18,strokeWidth:3}):w.jsx(E3,{size:18,strokeWidth:3})}),w.jsx("span",{className:"font-bold text-sm",children:t})]})})),za=({isOpen:t,title:e,message:n,onConfirm:s,onCancel:a})=>t?w.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[w.jsx(rr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:a}),w.jsxs(rr.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl relative z-10 text-center border-t-4 border-red-500",children:[w.jsx("div",{className:"mx-auto w-12 h-12 bg-red-50 rounded-full flex items-center justify-center mb-4 text-red-500",children:w.jsx(va,{size:24})}),w.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:e}),w.jsx("p",{className:"text-gray-600 mb-6 font-medium",children:n}),w.jsxs("div",{className:"flex gap-3",children:[w.jsx("button",{onClick:a,className:"flex-1 py-3 rounded-xl border-2 border-gray-200 text-gray-600 font-bold hover:bg-gray-50 transition-colors",children:""}),w.jsx("button",{onClick:s,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold shadow-md hover:bg-red-600 transition-colors",children:""})]})]})]}):null,iT=({isOpen:t,title:e,initialValue:n,onConfirm:s,onCancel:a})=>{const[l,h]=X.useState("");return X.useEffect(()=>{t&&h(n||"")},[t,n]),t?w.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[w.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:a}),w.jsxs(rr.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl relative z-10 border-t-4 border-[#00695c]",children:[w.jsx("h3",{className:"text-xl font-bold text-[#00695c] mb-4 text-center",children:e}),w.jsx("input",{type:"text",value:l,onChange:g=>h(g.target.value),className:"w-full h-12 px-4 rounded-xl border-2 border-[#00695c] mb-6 text-right focus:outline-none focus:ring-2 focus:ring-[#00695c]/30 font-bold text-gray-700",autoFocus:!0,placeholder:" ..."}),w.jsxs("div",{className:"flex gap-3",children:[w.jsx("button",{onClick:a,className:"flex-1 py-3 rounded-xl border-2 border-gray-200 text-gray-500 font-bold hover:bg-gray-50",children:""}),w.jsx("button",{onClick:()=>s(l),className:"flex-1 py-3 rounded-xl bg-[#00695c] text-white font-bold shadow-md hover:bg-[#005c4b]",children:""})]})]})]}):null},oT=({onBack:t})=>{const[e,n]=X.useState([]),[s,a]=X.useState(""),[l,h]=X.useState(!1),[g,p]=X.useState({show:!1,message:""}),[m,v]=X.useState({show:!1,id:null}),[b,C]=X.useState({show:!1,id:null,name:""});X.useEffect(()=>{T()},[]);const T=async()=>{const{data:I}=await Ne.from("categories").select("*").order("created_at",{ascending:!1});I&&n(I)},R=I=>{p({show:!0,message:I})},P=async I=>{if(I.preventDefault(),!s.trim())return;h(!0);const A={name:s},{data:j,error:U}=await Ne.from("categories").insert([A]).select();U?(console.error("Error adding category:",U),alert("   : "+U.message)):j&&(R("   "),n([j[0],...e]),a("")),h(!1)},M=async()=>{if(!m.id)return;const{error:I}=await Ne.from("categories").delete().eq("id",m.id);I||(n(e.filter(A=>A.id!==m.id)),R("   ")),v({show:!1,id:null})},k=async I=>{if(I&&I!==b.name){const{error:A}=await Ne.from("categories").update({name:I}).eq("id",b.id);A||(n(e.map(j=>j.id===b.id?{...j,name:I}:j)),R("   "))}C({show:!1,id:null,name:""})};return w.jsxs("div",{className:"h-screen flex flex-col bg-[#FFF9C4] overflow-hidden relative font-sans",children:[w.jsx(Qs,{message:g.message,isVisible:g.show,onClose:()=>p({...g,show:!1})}),w.jsx(za,{isOpen:m.show,title:" ",message:"     ",onConfirm:M,onCancel:()=>v({show:!1,id:null})}),w.jsx(iT,{isOpen:b.show,title:"  ",initialValue:b.name,onConfirm:k,onCancel:()=>C({show:!1,id:null,name:""})}),w.jsxs("div",{className:"bg-[#00695c] text-white h-16 flex items-center px-4 shadow-lg shrink-0 rounded-b-2xl z-10",children:[w.jsx("button",{onClick:t,className:"p-2 hover:bg-[#005c4b] rounded-xl transition-colors active:scale-95",children:w.jsx(sr,{size:24,strokeWidth:2.5})}),w.jsx("h1",{className:"text-xl font-bold flex-1 text-center ml-10",children:" "})]}),w.jsxs("div",{className:"flex-1 flex flex-col p-4 overflow-hidden",children:[w.jsxs("form",{onSubmit:P,className:"mb-6 shrink-0 flex flex-col gap-3",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-[#00695c] text-xs font-bold mb-1 text-right px-1",children:" "}),w.jsx("input",{type:"text",value:s,onChange:I=>a(I.target.value),placeholder:"   ...",className:"w-full h-14 px-4 rounded-xl border-2 border-[#00695c] focus:outline-none focus:ring-2 focus:ring-[#00695c]/50 text-right text-lg font-medium shadow-sm caret-[#00695c] placeholder-gray-400 bg-white"})]}),w.jsxs("button",{type:"submit",disabled:l,className:"w-full bg-[#00695c] text-white h-12 rounded-xl font-bold text-lg shadow-md hover:bg-[#005c4b] flex items-center justify-center gap-2 active:scale-95 transition-all disabled:opacity-50",children:[w.jsx(to,{size:24,strokeWidth:3}),w.jsx("span",{children:""})]})]}),w.jsx("div",{className:"flex-1 overflow-y-auto pr-1 -mr-1 custom-scrollbar",children:w.jsxs("div",{className:"flex flex-col gap-3 pb-20",children:[e.map(I=>w.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 flex items-center justify-between group hover:shadow-md transition-shadow",children:[w.jsx("button",{onClick:()=>v({show:!0,id:I.id}),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors active:scale-90",children:w.jsx(Dr,{size:20,strokeWidth:2})}),w.jsx("span",{className:"flex-1 text-center font-bold text-gray-800 text-lg truncate px-2",children:I.name}),w.jsx("button",{onClick:()=>C({show:!0,id:I.id,name:I.name}),className:"p-2 text-[#00695c] hover:bg-[#e0f2f1] rounded-lg transition-colors active:scale-90",children:w.jsx(jf,{size:20,strokeWidth:2})})]},I.id)),e.length===0&&w.jsx("div",{className:"text-center text-gray-400 mt-10 font-medium",children:"    "})]})})]})]})};var le;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(le||(le={}));var Bp=new Map([[le.QR_CODE,"QR_CODE"],[le.AZTEC,"AZTEC"],[le.CODABAR,"CODABAR"],[le.CODE_39,"CODE_39"],[le.CODE_93,"CODE_93"],[le.CODE_128,"CODE_128"],[le.DATA_MATRIX,"DATA_MATRIX"],[le.MAXICODE,"MAXICODE"],[le.ITF,"ITF"],[le.EAN_13,"EAN_13"],[le.EAN_8,"EAN_8"],[le.PDF_417,"PDF_417"],[le.RSS_14,"RSS_14"],[le.RSS_EXPANDED,"RSS_EXPANDED"],[le.UPC_A,"UPC_A"],[le.UPC_E,"UPC_E"],[le.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Fp;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Fp||(Fp={}));function aT(t){return Object.values(le).includes(t)}var _c;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(_c||(_c={}));var lT=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[_c.SCAN_TYPE_CAMERA,_c.SCAN_TYPE_FILE],t}(),lw=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Bp.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Bp.get(e))},t}(),Up=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Ld;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ld||(Ld={}));var cT=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Ld.UNKWOWN_ERROR}},t}(),uT=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function br(t){return typeof t>"u"||t===null}var Fi=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),cw=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var s=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(a),h=Object.keys(e),g=0,p=h;g<p.length;g++){var m=p[g];if(l.has(m))return n.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},t}(),Bd={exports:{}};(function(t,e){(function(n,s){s(e)})(Ao,function(n){function s(S){return S==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,r){S.__proto__=r}||function(S,r){for(var i in r)r.hasOwnProperty(i)&&(S[i]=r[i])};function l(S,r){a(S,r);function i(){this.constructor=S}S.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}function h(S,r){var i=Object.setPrototypeOf;i?i(S,r):S.__proto__=r}function g(S,r){r===void 0&&(r=S.constructor);var i=Error.captureStackTrace;i&&i(S,r)}var p=function(S){l(r,S);function r(i){var o=this.constructor,c=S.call(this,i)||this;return Object.defineProperty(c,"name",{value:o.name,enumerable:!1}),h(c,o.prototype),g(c),c}return r}(Error);class m extends p{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}m.kind="Exception";class v extends m{}v.kind="ArgumentException";class b extends m{}b.kind="IllegalArgumentException";class C{constructor(r){if(this.binarizer=r,r===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,i){return this.binarizer.getBlackRow(r,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,i,o,c){const u=this.binarizer.getLuminanceSource().crop(r,i,o,c);return new C(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new C(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new C(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends m{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class R{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class P{static arraycopy(r,i,o,c,u){for(;u--;)o[c++]=r[i++]}static currentTimeMillis(){return Date.now()}}class M extends m{}M.kind="IndexOutOfBoundsException";class k extends M{constructor(r=void 0,i=void 0){super(i),this.index=r,this.message=i}}k.kind="ArrayIndexOutOfBoundsException";class I{static fill(r,i){for(let o=0,c=r.length;o<c;o++)r[o]=i}static fillWithin(r,i,o,c){I.rangeCheck(r.length,i,o);for(let u=i;u<o;u++)r[u]=c}static rangeCheck(r,i,o){if(i>o)throw new b("fromIndex("+i+") > toIndex("+o+")");if(i<0)throw new k(i);if(o>r)throw new k(o)}static asList(...r){return r}static create(r,i,o){return Array.from({length:r}).map(u=>Array.from({length:i}).fill(o))}static createInt32Array(r,i,o){return Array.from({length:r}).map(u=>Int32Array.from({length:i}).fill(o))}static equals(r,i){if(!r||!i||!r.length||!i.length||r.length!==i.length)return!1;for(let o=0,c=r.length;o<c;o++)if(r[o]!==i[o])return!1;return!0}static hashCode(r){if(r===null)return 0;let i=1;for(const o of r)i=31*i+o;return i}static fillUint8Array(r,i){for(let o=0;o!==r.length;o++)r[o]=i}static copyOf(r,i){return r.slice(0,i)}static copyOfUint8Array(r,i){if(r.length<=i){const o=new Uint8Array(i);return o.set(r),o}return r.slice(0,i)}static copyOfRange(r,i,o){const c=o-i,u=new Int32Array(c);return P.arraycopy(r,i,u,0,c),u}static binarySearch(r,i,o){o===void 0&&(o=I.numberComparator);let c=0,u=r.length-1;for(;c<=u;){const d=u+c>>1,f=o(i,r[d]);if(f>0)c=d+1;else if(f<0)u=d-1;else return d}return-c-1}static numberComparator(r,i){return r-i}}class A{static numberOfTrailingZeros(r){let i;if(r===0)return 32;let o=31;return i=r<<16,i!==0&&(o-=16,r=i),i=r<<8,i!==0&&(o-=8,r=i),i=r<<4,i!==0&&(o-=4,r=i),i=r<<2,i!==0&&(o-=2,r=i),o-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let i=1;return r>>>16||(i+=16,r<<=16),r>>>24||(i+=8,r<<=8),r>>>28||(i+=4,r<<=4),r>>>30||(i+=2,r<<=2),i-=r>>>31,i}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,i){return Math.trunc(r/i)}static parseInt(r,i=void 0){return parseInt(r,i)}}A.MIN_VALUE_32_BITS=-2147483648,A.MAX_VALUE=Number.MAX_SAFE_INTEGER;class j{constructor(r,i){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,i==null?this.bits=j.makeArray(r):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const i=j.makeArray(r);P.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const i=this.size;if(r>=i)return i;const o=this.bits;let c=Math.floor(r/32),u=o[c];u&=~((1<<(r&31))-1);const d=o.length;for(;u===0;){if(++c===d)return i;u=o[c]}const f=c*32+A.numberOfTrailingZeros(u);return f>i?i:f}getNextUnset(r){const i=this.size;if(r>=i)return i;const o=this.bits;let c=Math.floor(r/32),u=~o[c];u&=~((1<<(r&31))-1);const d=o.length;for(;u===0;){if(++c===d)return i;u=~o[c]}const f=c*32+A.numberOfTrailingZeros(u);return f>i?i:f}setBulk(r,i){this.bits[Math.floor(r/32)]=i}setRange(r,i){if(i<r||r<0||i>this.size)throw new b;if(i===r)return;i--;const o=Math.floor(r/32),c=Math.floor(i/32),u=this.bits;for(let d=o;d<=c;d++){const f=d>o?0:r&31,y=(2<<(d<c?31:i&31))-(1<<f);u[d]|=y}}clear(){const r=this.bits.length,i=this.bits;for(let o=0;o<r;o++)i[o]=0}isRange(r,i,o){if(i<r||r<0||i>this.size)throw new b;if(i===r)return!0;i--;const c=Math.floor(r/32),u=Math.floor(i/32),d=this.bits;for(let f=c;f<=u;f++){const x=f>c?0:r&31,E=(2<<(f<u?31:i&31))-(1<<x)&4294967295;if((d[f]&E)!==(o?E:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,i){if(i<0||i>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let o=i;o>0;o--)this.appendBit((r>>o-1&1)===1)}appendBitArray(r){const i=r.size;this.ensureCapacity(this.size+i);for(let o=0;o<i;o++)this.appendBit(r.get(o))}xor(r){if(this.size!==r.size)throw new b("Sizes don't match");const i=this.bits;for(let o=0,c=i.length;o<c;o++)i[o]^=r.bits[o]}toBytes(r,i,o,c){for(let u=0;u<c;u++){let d=0;for(let f=0;f<8;f++)this.get(r)&&(d|=1<<7-f),r++;i[o+u]=d}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),o=i+1,c=this.bits;for(let u=0;u<o;u++){let d=c[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,r[i-u]=d}if(this.size!==o*32){const u=o*32-this.size;let d=r[0]>>>u;for(let f=1;f<o;f++){const x=r[f];d|=x<<32-u,r[f-1]=d,d=x>>>u}r[o-1]=d}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof j))return!1;const i=r;return this.size===i.size&&I.equals(this.bits,i.bits)}hashCode(){return 31*this.size+I.hashCode(this.bits)}toString(){let r="";for(let i=0,o=this.size;i<o;i++)i&7||(r+=" "),r+=this.get(i)?"X":".";return r}clone(){return new j(this.size,this.bits.slice())}}var U;(function(S){S[S.OTHER=0]="OTHER",S[S.PURE_BARCODE=1]="PURE_BARCODE",S[S.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",S[S.TRY_HARDER=3]="TRY_HARDER",S[S.CHARACTER_SET=4]="CHARACTER_SET",S[S.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",S[S.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",S[S.ASSUME_GS1=7]="ASSUME_GS1",S[S.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",S[S.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",S[S.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(U||(U={}));var z=U;class L extends m{static getFormatInstance(){return new L}}L.kind="FormatException";var V;(function(S){S[S.Cp437=0]="Cp437",S[S.ISO8859_1=1]="ISO8859_1",S[S.ISO8859_2=2]="ISO8859_2",S[S.ISO8859_3=3]="ISO8859_3",S[S.ISO8859_4=4]="ISO8859_4",S[S.ISO8859_5=5]="ISO8859_5",S[S.ISO8859_6=6]="ISO8859_6",S[S.ISO8859_7=7]="ISO8859_7",S[S.ISO8859_8=8]="ISO8859_8",S[S.ISO8859_9=9]="ISO8859_9",S[S.ISO8859_10=10]="ISO8859_10",S[S.ISO8859_11=11]="ISO8859_11",S[S.ISO8859_13=12]="ISO8859_13",S[S.ISO8859_14=13]="ISO8859_14",S[S.ISO8859_15=14]="ISO8859_15",S[S.ISO8859_16=15]="ISO8859_16",S[S.SJIS=16]="SJIS",S[S.Cp1250=17]="Cp1250",S[S.Cp1251=18]="Cp1251",S[S.Cp1252=19]="Cp1252",S[S.Cp1256=20]="Cp1256",S[S.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",S[S.UTF8=22]="UTF8",S[S.ASCII=23]="ASCII",S[S.Big5=24]="Big5",S[S.GB18030=25]="GB18030",S[S.EUC_KR=26]="EUC_KR"})(V||(V={}));class K{constructor(r,i,o,...c){this.valueIdentifier=r,this.name=o,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=c,K.VALUE_IDENTIFIER_TO_ECI.set(r,this),K.NAME_TO_ECI.set(o,this);const u=this.values;for(let d=0,f=u.length;d!==f;d++){const x=u[d];K.VALUES_TO_ECI.set(x,this)}for(const d of c)K.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new L("incorect value");const i=K.VALUES_TO_ECI.get(r);if(i===void 0)throw new L("incorect value");return i}static getCharacterSetECIByName(r){const i=K.NAME_TO_ECI.get(r);if(i===void 0)throw new L("incorect value");return i}equals(r){if(!(r instanceof K))return!1;const i=r;return this.getName()===i.getName()}}K.VALUE_IDENTIFIER_TO_ECI=new Map,K.VALUES_TO_ECI=new Map,K.NAME_TO_ECI=new Map,K.Cp437=new K(V.Cp437,Int32Array.from([0,2]),"Cp437"),K.ISO8859_1=new K(V.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),K.ISO8859_2=new K(V.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),K.ISO8859_3=new K(V.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),K.ISO8859_4=new K(V.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),K.ISO8859_5=new K(V.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),K.ISO8859_6=new K(V.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),K.ISO8859_7=new K(V.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),K.ISO8859_8=new K(V.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),K.ISO8859_9=new K(V.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),K.ISO8859_10=new K(V.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),K.ISO8859_11=new K(V.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),K.ISO8859_13=new K(V.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),K.ISO8859_14=new K(V.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),K.ISO8859_15=new K(V.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),K.ISO8859_16=new K(V.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),K.SJIS=new K(V.SJIS,20,"SJIS","Shift_JIS"),K.Cp1250=new K(V.Cp1250,21,"Cp1250","windows-1250"),K.Cp1251=new K(V.Cp1251,22,"Cp1251","windows-1251"),K.Cp1252=new K(V.Cp1252,23,"Cp1252","windows-1252"),K.Cp1256=new K(V.Cp1256,24,"Cp1256","windows-1256"),K.UnicodeBigUnmarked=new K(V.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),K.UTF8=new K(V.UTF8,26,"UTF8","UTF-8"),K.ASCII=new K(V.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),K.Big5=new K(V.Big5,28,"Big5"),K.GB18030=new K(V.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),K.EUC_KR=new K(V.EUC_KR,30,"EUC_KR","EUC-KR");class Z extends m{}Z.kind="UnsupportedOperationException";class xe{static decode(r,i){const o=this.encodingName(i);return this.customDecoder?this.customDecoder(r,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(r,o):new TextDecoder(o).decode(r)}static shouldDecodeOnFallback(r){return!xe.isBrowser()&&r==="ISO-8859-1"}static encode(r,i){const o=this.encodingName(i);return this.customEncoder?this.customEncoder(r,o):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof K?r:K.getCharacterSetECIByName(r)}static decodeFallback(r,i){const o=this.encodingCharacterSet(i);if(xe.isDecodeFallbackSupported(o)){let c="";for(let u=0,d=r.length;u<d;u++){let f=r[u].toString(16);f.length<2&&(f="0"+f),c+="%"+f}return decodeURIComponent(c)}if(o.equals(K.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new Z(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(K.UTF8)||r.equals(K.ISO8859_1)||r.equals(K.ASCII)}static encodeFallback(r){const o=btoa(unescape(encodeURIComponent(r))).split(""),c=[];for(let u=0;u<o.length;u++)c.push(o[u].charCodeAt(0));return new Uint8Array(c)}}class ue{static castAsNonUtf8Char(r,i=null){const o=i?i.getName():this.ISO88591;return xe.decode(new Uint8Array([r]),o)}static guessEncoding(r,i){if(i!=null&&i.get(z.CHARACTER_SET)!==void 0)return i.get(z.CHARACTER_SET).toString();const o=r.length;let c=!0,u=!0,d=!0,f=0,x=0,y=0,E=0,_=0,N=0,D=0,B=0,F=0,H=0,$=0;const te=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let ne=0;ne<o&&(c||u||d);ne++){const Q=r[ne]&255;d&&(f>0?Q&128?f--:d=!1:Q&128&&(Q&64?(f++,Q&32?(f++,Q&16?(f++,Q&8?d=!1:E++):y++):x++):d=!1)),c&&(Q>127&&Q<160?c=!1:Q>159&&(Q<192||Q===215||Q===247)&&$++),u&&(_>0?Q<64||Q===127||Q>252?u=!1:_--:Q===128||Q===160||Q>239?u=!1:Q>160&&Q<224?(N++,B=0,D++,D>F&&(F=D)):Q>127?(_++,D=0,B++,B>H&&(H=B)):(D=0,B=0))}return d&&f>0&&(d=!1),u&&_>0&&(u=!1),d&&(te||x+y+E>0)?ue.UTF8:u&&(ue.ASSUME_SHIFT_JIS||F>=3||H>=3)?ue.SHIFT_JIS:c&&u?F===2&&N===2||$*10>=o?ue.SHIFT_JIS:ue.ISO88591:c?ue.ISO88591:u?ue.SHIFT_JIS:d?ue.UTF8:ue.PLATFORM_DEFAULT_ENCODING}static format(r,...i){let o=-1;function c(d,f,x,y,E,_){if(d==="%%")return"%";if(i[++o]===void 0)return;d=y?parseInt(y.substr(1)):void 0;let N=E?parseInt(E.substr(1)):void 0,D;switch(_){case"s":D=i[o];break;case"c":D=i[o][0];break;case"f":D=parseFloat(i[o]).toFixed(d);break;case"p":D=parseFloat(i[o]).toPrecision(d);break;case"e":D=parseFloat(i[o]).toExponential(d);break;case"x":D=parseInt(i[o]).toString(N||16);break;case"d":D=parseFloat(parseInt(i[o],N||10).toPrecision(d)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(N);let B=parseInt(x),F=x&&x[0]+""=="0"?"0":" ";for(;D.length<B;)D=f!==void 0?D+F:F+D;return D}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}static getBytes(r,i){return xe.encode(r,i)}static getCharCode(r,i=0){return r.charCodeAt(i)}static getCharAt(r){return String.fromCharCode(r)}}ue.SHIFT_JIS=K.SJIS.getName(),ue.GB2312="GB2312",ue.ISO88591=K.ISO8859_1.getName(),ue.EUC_JP="EUC_JP",ue.UTF8=K.UTF8.getName(),ue.PLATFORM_DEFAULT_ENCODING=ue.UTF8,ue.ASSUME_SHIFT_JIS=!1;class oe{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=ue.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,i,o){for(let c=i;i<i+o;c++)this.append(r[c]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,i){this.value=this.value.substr(0,r)+i+this.value.substr(r+1)}substring(r,i){return this.value.substring(r,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,i){this.value=this.value.substr(0,r)+i+this.value.substr(r+i.length)}}class se{constructor(r,i,o,c){if(this.width=r,this.height=i,this.rowSize=o,this.bits=c,i==null&&(i=r),this.height=i,r<1||i<1)throw new b("Both dimensions must be greater than 0");o==null&&(o=Math.floor((r+31)/32)),this.rowSize=o,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const i=r.length,o=r[0].length,c=new se(o,i);for(let u=0;u<i;u++){const d=r[u];for(let f=0;f<o;f++)d[f]&&c.set(f,u)}return c}static parseFromString(r,i,o){if(r===null)throw new b("stringRepresentation cannot be null");const c=new Array(r.length);let u=0,d=0,f=-1,x=0,y=0;for(;y<r.length;)if(r.charAt(y)===`
`||r.charAt(y)==="\r"){if(u>d){if(f===-1)f=u-d;else if(u-d!==f)throw new b("row lengths do not match");d=u,x++}y++}else if(r.substring(y,y+i.length)===i)y+=i.length,c[u]=!0,u++;else if(r.substring(y,y+o.length)===o)y+=o.length,c[u]=!1,u++;else throw new b("illegal character encountered: "+r.substring(y));if(u>d){if(f===-1)f=u-d;else if(u-d!==f)throw new b("row lengths do not match");x++}const E=new se(f,x);for(let _=0;_<u;_++)c[_]&&E.set(Math.floor(_%f),Math.floor(_/f));return E}get(r,i){const o=i*this.rowSize+Math.floor(r/32);return(this.bits[o]>>>(r&31)&1)!==0}set(r,i){const o=i*this.rowSize+Math.floor(r/32);this.bits[o]|=1<<(r&31)&4294967295}unset(r,i){const o=i*this.rowSize+Math.floor(r/32);this.bits[o]&=~(1<<(r&31)&4294967295)}flip(r,i){const o=i*this.rowSize+Math.floor(r/32);this.bits[o]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new b("input matrix dimensions do not match");const i=new j(Math.floor(this.width/32)+1),o=this.rowSize,c=this.bits;for(let u=0,d=this.height;u<d;u++){const f=u*o,x=r.getRow(u,i).getBitArray();for(let y=0;y<o;y++)c[f+y]^=x[y]}}clear(){const r=this.bits,i=r.length;for(let o=0;o<i;o++)r[o]=0}setRegion(r,i,o,c){if(i<0||r<0)throw new b("Left and top must be nonnegative");if(c<1||o<1)throw new b("Height and width must be at least 1");const u=r+o,d=i+c;if(d>this.height||u>this.width)throw new b("The region must fit inside the matrix");const f=this.rowSize,x=this.bits;for(let y=i;y<d;y++){const E=y*f;for(let _=r;_<u;_++)x[E+Math.floor(_/32)]|=1<<(_&31)&4294967295}}getRow(r,i){i==null||i.getSize()<this.width?i=new j(this.width):i.clear();const o=this.rowSize,c=this.bits,u=r*o;for(let d=0;d<o;d++)i.setBulk(d*32,c[u+d]);return i}setRow(r,i){P.arraycopy(i.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),i=this.getHeight();let o=new j(r),c=new j(r);for(let u=0,d=Math.floor((i+1)/2);u<d;u++)o=this.getRow(u,o),c=this.getRow(i-1-u,c),o.reverse(),c.reverse(),this.setRow(u,c),this.setRow(i-1-u,o)}getEnclosingRectangle(){const r=this.width,i=this.height,o=this.rowSize,c=this.bits;let u=r,d=i,f=-1,x=-1;for(let y=0;y<i;y++)for(let E=0;E<o;E++){const _=c[y*o+E];if(_!==0){if(y<d&&(d=y),y>x&&(x=y),E*32<u){let N=0;for(;!(_<<31-N&4294967295);)N++;E*32+N<u&&(u=E*32+N)}if(E*32+31>f){let N=31;for(;!(_>>>N);)N--;E*32+N>f&&(f=E*32+N)}}}return f<u||x<d?null:Int32Array.from([u,d,f-u+1,x-d+1])}getTopLeftOnBit(){const r=this.rowSize,i=this.bits;let o=0;for(;o<i.length&&i[o]===0;)o++;if(o===i.length)return null;const c=o/r;let u=o%r*32;const d=i[o];let f=0;for(;!(d<<31-f&4294967295);)f++;return u+=f,Int32Array.from([u,c])}getBottomRightOnBit(){const r=this.rowSize,i=this.bits;let o=i.length-1;for(;o>=0&&i[o]===0;)o--;if(o<0)return null;const c=Math.floor(o/r);let u=Math.floor(o%r)*32;const d=i[o];let f=31;for(;!(d>>>f);)f--;return u+=f,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof se))return!1;const i=r;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&I.equals(this.bits,i.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+I.hashCode(this.bits),r}toString(r="X ",i="  ",o=`
`){return this.buildToString(r,i,o)}buildToString(r,i,o){let c=new oe;for(let u=0,d=this.height;u<d;u++){for(let f=0,x=this.width;f<x;f++)c.append(this.get(f,u)?r:i);c.append(o)}return c.toString()}clone(){return new se(this.width,this.height,this.rowSize,this.bits.slice())}}class W extends m{static getNotFoundInstance(){return new W}}W.kind="NotFoundException";class Te extends R{constructor(r){super(r),this.luminances=Te.EMPTY,this.buckets=new Int32Array(Te.LUMINANCE_BUCKETS)}getBlackRow(r,i){const o=this.getLuminanceSource(),c=o.getWidth();i==null||i.getSize()<c?i=new j(c):i.clear(),this.initArrays(c);const u=o.getRow(r,this.luminances),d=this.buckets;for(let x=0;x<c;x++)d[(u[x]&255)>>Te.LUMINANCE_SHIFT]++;const f=Te.estimateBlackPoint(d);if(c<3)for(let x=0;x<c;x++)(u[x]&255)<f&&i.set(x);else{let x=u[0]&255,y=u[1]&255;for(let E=1;E<c-1;E++){const _=u[E+1]&255;(y*4-x-_)/2<f&&i.set(E),x=y,y=_}}return i}getBlackMatrix(){const r=this.getLuminanceSource(),i=r.getWidth(),o=r.getHeight(),c=new se(i,o);this.initArrays(i);const u=this.buckets;for(let x=1;x<5;x++){const y=Math.floor(o*x/5),E=r.getRow(y,this.luminances),_=Math.floor(i*4/5);for(let N=Math.floor(i/5);N<_;N++){const D=E[N]&255;u[D>>Te.LUMINANCE_SHIFT]++}}const d=Te.estimateBlackPoint(u),f=r.getMatrix();for(let x=0;x<o;x++){const y=x*i;for(let E=0;E<i;E++)(f[y+E]&255)<d&&c.set(E,x)}return c}createBinarizer(r){return new Te(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const i=this.buckets;for(let o=0;o<Te.LUMINANCE_BUCKETS;o++)i[o]=0}static estimateBlackPoint(r){const i=r.length;let o=0,c=0,u=0;for(let E=0;E<i;E++)r[E]>u&&(c=E,u=r[E]),r[E]>o&&(o=r[E]);let d=0,f=0;for(let E=0;E<i;E++){const _=E-c,N=r[E]*_*_;N>f&&(d=E,f=N)}if(c>d){const E=c;c=d,d=E}if(d-c<=i/16)throw new W;let x=d-1,y=-1;for(let E=d-1;E>c;E--){const _=E-c,N=_*_*(d-E)*(o-r[E]);N>y&&(x=E,y=N)}return x<<Te.LUMINANCE_SHIFT}}Te.LUMINANCE_BITS=5,Te.LUMINANCE_SHIFT=8-Te.LUMINANCE_BITS,Te.LUMINANCE_BUCKETS=1<<Te.LUMINANCE_BITS,Te.EMPTY=Uint8ClampedArray.from([0]);class re extends Te{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),i=r.getWidth(),o=r.getHeight();if(i>=re.MINIMUM_DIMENSION&&o>=re.MINIMUM_DIMENSION){const c=r.getMatrix();let u=i>>re.BLOCK_SIZE_POWER;i&re.BLOCK_SIZE_MASK&&u++;let d=o>>re.BLOCK_SIZE_POWER;o&re.BLOCK_SIZE_MASK&&d++;const f=re.calculateBlackPoints(c,u,d,i,o),x=new se(i,o);re.calculateThresholdForBlock(c,u,d,i,o,f,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new re(r)}static calculateThresholdForBlock(r,i,o,c,u,d,f){const x=u-re.BLOCK_SIZE,y=c-re.BLOCK_SIZE;for(let E=0;E<o;E++){let _=E<<re.BLOCK_SIZE_POWER;_>x&&(_=x);const N=re.cap(E,2,o-3);for(let D=0;D<i;D++){let B=D<<re.BLOCK_SIZE_POWER;B>y&&(B=y);const F=re.cap(D,2,i-3);let H=0;for(let te=-2;te<=2;te++){const ne=d[N+te];H+=ne[F-2]+ne[F-1]+ne[F]+ne[F+1]+ne[F+2]}const $=H/25;re.thresholdBlock(r,B,_,$,c,f)}}}static cap(r,i,o){return r<i?i:r>o?o:r}static thresholdBlock(r,i,o,c,u,d){for(let f=0,x=o*u+i;f<re.BLOCK_SIZE;f++,x+=u)for(let y=0;y<re.BLOCK_SIZE;y++)(r[x+y]&255)<=c&&d.set(i+y,o+f)}static calculateBlackPoints(r,i,o,c,u){const d=u-re.BLOCK_SIZE,f=c-re.BLOCK_SIZE,x=new Array(o);for(let y=0;y<o;y++){x[y]=new Int32Array(i);let E=y<<re.BLOCK_SIZE_POWER;E>d&&(E=d);for(let _=0;_<i;_++){let N=_<<re.BLOCK_SIZE_POWER;N>f&&(N=f);let D=0,B=255,F=0;for(let $=0,te=E*c+N;$<re.BLOCK_SIZE;$++,te+=c){for(let ne=0;ne<re.BLOCK_SIZE;ne++){const Q=r[te+ne]&255;D+=Q,Q<B&&(B=Q),Q>F&&(F=Q)}if(F-B>re.MIN_DYNAMIC_RANGE)for($++,te+=c;$<re.BLOCK_SIZE;$++,te+=c)for(let ne=0;ne<re.BLOCK_SIZE;ne++)D+=r[te+ne]&255}let H=D>>re.BLOCK_SIZE_POWER*2;if(F-B<=re.MIN_DYNAMIC_RANGE&&(H=B/2,y>0&&_>0)){const $=(x[y-1][_]+2*x[y][_-1]+x[y-1][_-1])/4;B<$&&(H=$)}x[y][_]=H}}return x}}re.BLOCK_SIZE_POWER=3,re.BLOCK_SIZE=1<<re.BLOCK_SIZE_POWER,re.BLOCK_SIZE_MASK=re.BLOCK_SIZE-1,re.MINIMUM_DIMENSION=re.BLOCK_SIZE*5,re.MIN_DYNAMIC_RANGE=24;class J{constructor(r,i){this.width=r,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,i,o,c){throw new Z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Z("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let i=new oe;for(let o=0;o<this.height;o++){const c=this.getRow(o,r);for(let u=0;u<this.width;u++){const d=c[u]&255;let f;d<64?f="#":d<128?f="+":d<192?f=".":f=" ",i.append(f)}i.append(`
`)}return i.toString()}}class de extends J{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,i){const o=this.delegate.getRow(r,i),c=this.getWidth();for(let u=0;u<c;u++)o[u]=255-(o[u]&255);return o}getMatrix(){const r=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(i);for(let c=0;c<i;c++)o[c]=255-(r[c]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(r,i,o,c){return new de(this.delegate.crop(r,i,o,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new de(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new de(this.delegate.rotateCounterClockwise45())}}class ye extends J{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=ye.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const i=r.getContext("2d").getImageData(0,0,r.width,r.height);return ye.toGrayscaleBuffer(i.data,r.width,r.height)}static toGrayscaleBuffer(r,i,o){const c=new Uint8ClampedArray(i*o);for(let u=0,d=0,f=r.length;u<f;u+=4,d++){let x;if(r[u+3]===0)x=255;else{const E=r[u],_=r[u+1],N=r[u+2];x=306*E+601*_+117*N+512>>10}c[d]=x}return c}getRow(r,i){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const o=this.getWidth(),c=r*o;return i===null?i=this.buffer.slice(c,c+o):(i.length<o&&(i=new Uint8ClampedArray(o)),i.set(this.buffer.slice(c,c+o))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,i,o,c){return super.crop(r,i,o,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const i=this.getTempCanvasElement(),o=i.getContext("2d"),c=r*ye.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*d),x=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*d);return i.width=f,i.height=x,o.translate(f/2,x/2),o.rotate(c),o.drawImage(this.canvas,u/-2,d/-2),this.buffer=ye.makeBufferFromCanvasImageData(i),this}invert(){return new de(this)}}ye.DEGREE_TO_RADIANS=Math.PI/180;class tt{constructor(r,i,o){this.deviceId=r,this.label=i,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Pe=(globalThis||Ao||self||window||void 0)&&(globalThis||Ao||self||window||void 0).__awaiter||function(S,r,i,o){function c(u){return u instanceof i?u:new i(function(d){d(u)})}return new(i||(i=Promise))(function(u,d){function f(E){try{y(o.next(E))}catch(_){d(_)}}function x(E){try{y(o.throw(E))}catch(_){d(_)}}function y(E){E.done?u(E.value):c(E.value).then(f,x)}y((o=o.apply(S,r||[])).next())})};class kn{constructor(r,i=500,o){this.reader=r,this.timeBetweenScansMillis=i,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Pe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const o of r){const c=o.kind==="video"?"videoinput":o.kind;if(c!=="videoinput")continue;const u=o.deviceId||o.id,d=o.label||`Video device ${i.length+1}`,f=o.groupId,x={deviceId:u,label:d,kind:c,groupId:f};i.push(x)}return i})}getVideoInputDevices(){return Pe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new tt(i.deviceId,i.label))})}findDeviceById(r){return Pe(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(o=>o.deviceId===r):null})}decodeFromInputVideoDevice(r,i){return Pe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,i)})}decodeOnceFromVideoDevice(r,i){return Pe(this,void 0,void 0,function*(){this.reset();let o;r?o={deviceId:{exact:r}}:o={facingMode:"environment"};const c={video:o};return yield this.decodeOnceFromConstraints(c,i)})}decodeOnceFromConstraints(r,i){return Pe(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(o,i)})}decodeOnceFromStream(r,i){return Pe(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(r,i);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(r,i,o){return Pe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,i,o)})}decodeFromVideoDevice(r,i,o){return Pe(this,void 0,void 0,function*(){let c;r?c={deviceId:{exact:r}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,i,o)})}decodeFromConstraints(r,i,o){return Pe(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(c,i,o)})}decodeFromStream(r,i,o){return Pe(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(r,i);return yield this.decodeContinuously(c,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,i){return Pe(this,void 0,void 0,function*(){const o=this.prepareVideoElement(i);return this.addVideoSource(o,r),this.videoElement=o,this.stream=r,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(r){return new Promise((i,o)=>this.playVideoOnLoad(r,()=>i()))}playVideoOnLoad(r,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",i),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Pe(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,i){const o=document.getElementById(r);if(!o)throw new v(`element with id '${r}' not found`);if(o.nodeName.toLowerCase()!==i.toLowerCase())throw new v(`element with id '${r}' must be an ${i} element`);return o}decodeFromImage(r,i){if(!r&&!i)throw new v("either imageElement with a src set or an url must be provided");return i&&!r?this.decodeFromImageUrl(i):this.decodeFromImageElement(r)}decodeFromVideo(r,i){if(!r&&!i)throw new v("Either an element with a src set or an URL must be provided");return i&&!r?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,i,o){if(r===void 0&&i===void 0)throw new v("Either an element with a src set or an URL must be provided");return i&&!r?this.decodeFromVideoUrlContinuously(i,o):this.decodeFromVideoElementContinuously(r,o)}decodeFromImageElement(r){if(!r)throw new v("An image element must be provided.");this.reset();const i=this.prepareImageElement(r);this.imageElement=i;let o;return this.isImageLoaded(i)?o=this.decodeOnce(i,!1,!0):o=this._decodeOnLoadImage(i),o}decodeFromVideoElement(r){const i=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(r,i){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(o,i)}_decodeFromVideoElementSetup(r){if(!r)throw new v("A video element must be provided.");this.reset();const i=this.prepareVideoElement(r);return this.videoElement=i,i}decodeFromImageUrl(r){if(!r)throw new v("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const o=this._decodeOnLoadImage(i);return i.src=r,o}decodeFromVideoUrl(r){if(!r)throw new v("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElement(i);return i.src=r,o}decodeFromVideoUrlContinuously(r,i){if(!r)throw new v("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(o,i);return o.src=r,c}_decodeOnLoadImage(r){return new Promise((i,o)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(i,o),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Pe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,i){return Pe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,i)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let i;return typeof r>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof r=="string"&&(i=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(i=r),i}prepareVideoElement(r){let i;return!r&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof r=="string"&&(i=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(i=r),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(r,i=!0,o=!0){this._stopAsyncDecode=!1;const c=(u,d)=>{if(this._stopAsyncDecode){d(new W("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(r);u(f)}catch(f){const x=i&&f instanceof W,E=(f instanceof T||f instanceof L)&&o;if(x||E)return setTimeout(c,this._timeBetweenDecodingAttempts,u,d);d(f)}};return new Promise((u,d)=>c(u,d))}decodeContinuously(r,i){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(r);i(c,null),setTimeout(o,this.timeBetweenScansMillis)}catch(c){i(null,c);const u=c instanceof T||c instanceof L,d=c instanceof W;(u||d)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(r){const i=this.createBinaryBitmap(r);return this.decodeBitmap(i)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,i,o){i||(i={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(r,i,o=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const i=this.getCaptureCanvas(r),o=new ye(i),c=new re(o);return new C(c)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const i=this.createCaptureCanvas(r);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let o,c;return typeof r<"u"&&(r instanceof HTMLVideoElement?(o=r.videoWidth,c=r.videoHeight):r instanceof HTMLImageElement&&(o=r.naturalWidth||r.width,c=r.naturalHeight||r.height)),i.style.width=o+"px",i.style.height=c+"px",i.width=o,i.height=c,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,i){try{r.srcObject=i}catch{r.src=URL.createObjectURL(i)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class st{constructor(r,i,o=i==null?0:8*i.length,c,u,d=P.currentTimeMillis()){this.text=r,this.rawBytes=i,this.numBits=o,this.resultPoints=c,this.format=u,this.timestamp=d,this.text=r,this.rawBytes=i,o==null?this.numBits=i==null?0:8*i.length:this.numBits=o,this.resultPoints=c,this.format=u,this.resultMetadata=null,d==null?this.timestamp=P.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,i)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const i=this.resultPoints;if(i===null)this.resultPoints=r;else if(r!==null&&r.length>0){const o=new Array(i.length+r.length);P.arraycopy(i,0,o,0,i.length),P.arraycopy(r,0,o,i.length,r.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ws;(function(S){S[S.AZTEC=0]="AZTEC",S[S.CODABAR=1]="CODABAR",S[S.CODE_39=2]="CODE_39",S[S.CODE_93=3]="CODE_93",S[S.CODE_128=4]="CODE_128",S[S.DATA_MATRIX=5]="DATA_MATRIX",S[S.EAN_8=6]="EAN_8",S[S.EAN_13=7]="EAN_13",S[S.ITF=8]="ITF",S[S.MAXICODE=9]="MAXICODE",S[S.PDF_417=10]="PDF_417",S[S.QR_CODE=11]="QR_CODE",S[S.RSS_14=12]="RSS_14",S[S.RSS_EXPANDED=13]="RSS_EXPANDED",S[S.UPC_A=14]="UPC_A",S[S.UPC_E=15]="UPC_E",S[S.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ws||(ws={}));var fe=ws,Fr;(function(S){S[S.OTHER=0]="OTHER",S[S.ORIENTATION=1]="ORIENTATION",S[S.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",S[S.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",S[S.ISSUE_NUMBER=4]="ISSUE_NUMBER",S[S.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",S[S.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",S[S.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",S[S.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",S[S.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",S[S.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Fr||(Fr={}));var kt=Fr;class ho{constructor(r,i,o,c,u=-1,d=-1){this.rawBytes=r,this.text=i,this.byteSegments=o,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class fo{exp(r){return this.expTable[r]}log(r){if(r===0)throw new b;return this.logTable[r]}static addOrSubtract(r,i){return r^i}}class on{constructor(r,i){if(i.length===0)throw new b;this.field=r;const o=i.length;if(o>1&&i[0]===0){let c=1;for(;c<o&&i[c]===0;)c++;c===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-c),P.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const i=this.coefficients;let o;if(r===1){o=0;for(let d=0,f=i.length;d!==f;d++){const x=i[d];o=fo.addOrSubtract(o,x)}return o}o=i[0];const c=i.length,u=this.field;for(let d=1;d<c;d++)o=fo.addOrSubtract(u.multiply(r,o),i[d]);return o}addOrSubtract(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let i=this.coefficients,o=r.coefficients;if(i.length>o.length){const d=i;i=o,o=d}let c=new Int32Array(o.length);const u=o.length-i.length;P.arraycopy(o,0,c,0,u);for(let d=u;d<o.length;d++)c[d]=fo.addOrSubtract(i[d-u],o[d]);return new on(this.field,c)}multiply(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const i=this.coefficients,o=i.length,c=r.coefficients,u=c.length,d=new Int32Array(o+u-1),f=this.field;for(let x=0;x<o;x++){const y=i[x];for(let E=0;E<u;E++)d[x+E]=fo.addOrSubtract(d[x+E],f.multiply(y,c[E]))}return new on(f,d)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const i=this.coefficients.length,o=this.field,c=new Int32Array(i),u=this.coefficients;for(let d=0;d<i;d++)c[d]=o.multiply(u[d],r);return new on(o,c)}multiplyByMonomial(r,i){if(r<0)throw new b;if(i===0)return this.field.getZero();const o=this.coefficients,c=o.length,u=new Int32Array(c+r),d=this.field;for(let f=0;f<c;f++)u[f]=d.multiply(o[f],i);return new on(d,u)}divide(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new b("Divide by 0");const i=this.field;let o=i.getZero(),c=this;const u=r.getCoefficient(r.getDegree()),d=i.inverse(u);for(;c.getDegree()>=r.getDegree()&&!c.isZero();){const f=c.getDegree()-r.getDegree(),x=i.multiply(c.getCoefficient(c.getDegree()),d),y=r.multiplyByMonomial(f,x),E=i.buildMonomial(f,x);o=o.addOrSubtract(E),c=c.addOrSubtract(y)}return[o,c]}toString(){let r="";for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);if(o!==0){if(o<0?(r+=" - ",o=-o):r.length>0&&(r+=" + "),i===0||o!==1){const c=this.field.log(o);c===0?r+="1":c===1?r+="a":(r+="a^",r+=c)}i!==0&&(i===1?r+="x":(r+="x^",r+=i))}}return r}}class Wa extends m{}Wa.kind="ArithmeticException";class Le extends fo{constructor(r,i,o){super(),this.primitive=r,this.size=i,this.generatorBase=o;const c=new Int32Array(i);let u=1;for(let f=0;f<i;f++)c[f]=u,u*=2,u>=i&&(u^=r,u&=i-1);this.expTable=c;const d=new Int32Array(i);for(let f=0;f<i-1;f++)d[c[f]]=f;this.logTable=d,this.zero=new on(this,Int32Array.from([0])),this.one=new on(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,i){if(r<0)throw new b;if(i===0)return this.zero;const o=new Int32Array(r+1);return o[0]=i,new on(this,o)}inverse(r){if(r===0)throw new Wa;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,i){return r===0||i===0?0:this.expTable[(this.logTable[r]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+A.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Le.AZTEC_DATA_12=new Le(4201,4096,1),Le.AZTEC_DATA_10=new Le(1033,1024,1),Le.AZTEC_DATA_6=new Le(67,64,1),Le.AZTEC_PARAM=new Le(19,16,1),Le.QR_CODE_FIELD_256=new Le(285,256,0),Le.DATA_MATRIX_FIELD_256=new Le(301,256,1),Le.AZTEC_DATA_8=Le.DATA_MATRIX_FIELD_256,Le.MAXICODE_FIELD_64=Le.AZTEC_DATA_6;class Js extends m{}Js.kind="ReedSolomonException";class ir extends m{}ir.kind="IllegalStateException";class go{constructor(r){this.field=r}decode(r,i){const o=this.field,c=new on(o,r),u=new Int32Array(i);let d=!0;for(let D=0;D<i;D++){const B=c.evaluateAt(o.exp(D+o.getGeneratorBase()));u[u.length-1-D]=B,B!==0&&(d=!1)}if(d)return;const f=new on(o,u),x=this.runEuclideanAlgorithm(o.buildMonomial(i,1),f,i),y=x[0],E=x[1],_=this.findErrorLocations(y),N=this.findErrorMagnitudes(E,_);for(let D=0;D<_.length;D++){const B=r.length-1-o.log(_[D]);if(B<0)throw new Js("Bad error location");r[B]=Le.addOrSubtract(r[B],N[D])}}runEuclideanAlgorithm(r,i,o){if(r.getDegree()<i.getDegree()){const D=r;r=i,i=D}const c=this.field;let u=r,d=i,f=c.getZero(),x=c.getOne();for(;d.getDegree()>=(o/2|0);){let D=u,B=f;if(u=d,f=x,u.isZero())throw new Js("r_{i-1} was zero");d=D;let F=c.getZero();const H=u.getCoefficient(u.getDegree()),$=c.inverse(H);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const te=d.getDegree()-u.getDegree(),ne=c.multiply(d.getCoefficient(d.getDegree()),$);F=F.addOrSubtract(c.buildMonomial(te,ne)),d=d.addOrSubtract(u.multiplyByMonomial(te,ne))}if(x=F.multiply(f).addOrSubtract(B),d.getDegree()>=u.getDegree())throw new ir("Division algorithm failed to reduce polynomial?")}const y=x.getCoefficient(0);if(y===0)throw new Js("sigmaTilde(0) was zero");const E=c.inverse(y),_=x.multiplyScalar(E),N=d.multiplyScalar(E);return[_,N]}findErrorLocations(r){const i=r.getDegree();if(i===1)return Int32Array.from([r.getCoefficient(1)]);const o=new Int32Array(i);let c=0;const u=this.field;for(let d=1;d<u.getSize()&&c<i;d++)r.evaluateAt(d)===0&&(o[c]=u.inverse(d),c++);if(c!==i)throw new Js("Error locator degree does not match number of roots");return o}findErrorMagnitudes(r,i){const o=i.length,c=new Int32Array(o),u=this.field;for(let d=0;d<o;d++){const f=u.inverse(i[d]);let x=1;for(let y=0;y<o;y++)if(d!==y){const E=u.multiply(i[y],f),_=E&1?E&-2:E|1;x=u.multiply(x,_)}c[d]=u.multiply(r.evaluateAt(f),u.inverse(x)),u.getGeneratorBase()!==0&&(c[d]=u.multiply(c[d],f))}return c}}var Mt;(function(S){S[S.UPPER=0]="UPPER",S[S.LOWER=1]="LOWER",S[S.MIXED=2]="MIXED",S[S.DIGIT=3]="DIGIT",S[S.PUNCT=4]="PUNCT",S[S.BINARY=5]="BINARY"})(Mt||(Mt={}));class Xe{decode(r){this.ddata=r;let i=r.getBits(),o=this.extractBits(i),c=this.correctBits(o),u=Xe.convertBoolArrayToByteArray(c),d=Xe.getEncodedData(c),f=new ho(u,d,null,null);return f.setNumBits(c.length),f}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let i=r.length,o=Mt.UPPER,c=Mt.UPPER,u="",d=0;for(;d<i;)if(c===Mt.BINARY){if(i-d<5)break;let f=Xe.readCode(r,d,5);if(d+=5,f===0){if(i-d<11)break;f=Xe.readCode(r,d,11)+31,d+=11}for(let x=0;x<f;x++){if(i-d<8){d=i;break}const y=Xe.readCode(r,d,8);u+=ue.castAsNonUtf8Char(y),d+=8}c=o}else{let f=c===Mt.DIGIT?4:5;if(i-d<f)break;let x=Xe.readCode(r,d,f);d+=f;let y=Xe.getCharacter(c,x);y.startsWith("CTRL_")?(o=c,c=Xe.getTable(y.charAt(5)),y.charAt(6)==="L"&&(o=c)):(u+=y,c=o)}return u}static getTable(r){switch(r){case"L":return Mt.LOWER;case"P":return Mt.PUNCT;case"M":return Mt.MIXED;case"D":return Mt.DIGIT;case"B":return Mt.BINARY;case"U":default:return Mt.UPPER}}static getCharacter(r,i){switch(r){case Mt.UPPER:return Xe.UPPER_TABLE[i];case Mt.LOWER:return Xe.LOWER_TABLE[i];case Mt.MIXED:return Xe.MIXED_TABLE[i];case Mt.PUNCT:return Xe.PUNCT_TABLE[i];case Mt.DIGIT:return Xe.DIGIT_TABLE[i];default:throw new ir("Bad table")}}correctBits(r){let i,o;this.ddata.getNbLayers()<=2?(o=6,i=Le.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,i=Le.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,i=Le.AZTEC_DATA_10):(o=12,i=Le.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=r.length/o;if(u<c)throw new L;let d=r.length%o,f=new Int32Array(u);for(let N=0;N<u;N++,d+=o)f[N]=Xe.readCode(r,d,o);try{new go(i).decode(f,u-c)}catch(N){throw new L(N)}let x=(1<<o)-1,y=0;for(let N=0;N<c;N++){let D=f[N];if(D===0||D===x)throw new L;(D===1||D===x-1)&&y++}let E=new Array(c*o-y),_=0;for(let N=0;N<c;N++){let D=f[N];if(D===1||D===x-1)E.fill(D>1,_,_+o-1),_+=o-1;else for(let B=o-1;B>=0;--B)E[_++]=(D&1<<B)!==0}return E}extractBits(r){let i=this.ddata.isCompact(),o=this.ddata.getNbLayers(),c=(i?11:14)+o*4,u=new Int32Array(c),d=new Array(this.totalBitsInLayer(o,i));if(i)for(let f=0;f<u.length;f++)u[f]=f;else{let f=c+1+2*A.truncDivision(A.truncDivision(c,2)-1,15),x=c/2,y=A.truncDivision(f,2);for(let E=0;E<x;E++){let _=E+A.truncDivision(E,15);u[x-E-1]=y-_-1,u[x+E]=y+_+1}}for(let f=0,x=0;f<o;f++){let y=(o-f)*4+(i?9:12),E=f*2,_=c-1-E;for(let N=0;N<y;N++){let D=N*2;for(let B=0;B<2;B++)d[x+D+B]=r.get(u[E+B],u[E+N]),d[x+2*y+D+B]=r.get(u[E+N],u[_-B]),d[x+4*y+D+B]=r.get(u[_-B],u[_-N]),d[x+6*y+D+B]=r.get(u[_-N],u[E+B])}x+=y*8}return d}static readCode(r,i,o){let c=0;for(let u=i;u<i+o;u++)c<<=1,r[u]&&(c|=1);return c}static readByte(r,i){let o=r.length-i;return o>=8?Xe.readCode(r,i,8):Xe.readCode(r,i,o)<<8-o}static convertBoolArrayToByteArray(r){let i=new Uint8Array((r.length+7)/8);for(let o=0;o<i.length;o++)i[o]=Xe.readByte(r,8*o);return i}totalBitsInLayer(r,i){return((i?88:112)+16*r)*r}}Xe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Xe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Xe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Xe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Xe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class De{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,i,o,c){const u=r-o,d=i-c;return Math.sqrt(u*u+d*d)}static sum(r){let i=0;for(let o=0,c=r.length;o!==c;o++){const u=r[o];i+=u}return i}}class Ha{static floatToIntBits(r){return r}}Ha.MAX_VALUE=Number.MAX_SAFE_INTEGER;class he{constructor(r,i){this.x=r,this.y=i}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof he){const i=r;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*Ha.floatToIntBits(this.x)+Ha.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const i=this.distance(r[0],r[1]),o=this.distance(r[1],r[2]),c=this.distance(r[0],r[2]);let u,d,f;if(o>=i&&o>=c?(d=r[0],u=r[1],f=r[2]):c>=o&&c>=i?(d=r[1],u=r[0],f=r[2]):(d=r[2],u=r[0],f=r[1]),this.crossProductZ(u,d,f)<0){const x=u;u=f,f=x}r[0]=u,r[1]=d,r[2]=f}static distance(r,i){return De.distance(r.x,r.y,i.x,i.y)}static crossProductZ(r,i,o){const c=i.x,u=i.y;return(o.x-c)*(r.y-u)-(o.y-u)*(r.x-c)}}class Ga{constructor(r,i){this.bits=r,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class C0 extends Ga{constructor(r,i,o,c,u){super(r,i),this.compact=o,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class wr{constructor(r,i,o,c){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),i==null&&(i=wr.INIT_SIZE),o==null&&(o=r.getWidth()/2|0),c==null&&(c=r.getHeight()/2|0);const u=i/2|0;if(this.leftInit=o-u,this.rightInit=o+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new W}detect(){let r=this.leftInit,i=this.rightInit,o=this.upInit,c=this.downInit,u=!1,d=!0,f=!1,x=!1,y=!1,E=!1,_=!1;const N=this.width,D=this.height;for(;d;){d=!1;let B=!0;for(;(B||!x)&&i<N;)B=this.containsBlackPoint(o,c,i,!1),B?(i++,d=!0,x=!0):x||i++;if(i>=N){u=!0;break}let F=!0;for(;(F||!y)&&c<D;)F=this.containsBlackPoint(r,i,c,!0),F?(c++,d=!0,y=!0):y||c++;if(c>=D){u=!0;break}let H=!0;for(;(H||!E)&&r>=0;)H=this.containsBlackPoint(o,c,r,!1),H?(r--,d=!0,E=!0):E||r--;if(r<0){u=!0;break}let $=!0;for(;($||!_)&&o>=0;)$=this.containsBlackPoint(r,i,o,!0),$?(o--,d=!0,_=!0):_||o--;if(o<0){u=!0;break}d&&(f=!0)}if(!u&&f){const B=i-r;let F=null;for(let ne=1;F===null&&ne<B;ne++)F=this.getBlackPointOnSegment(r,c-ne,r+ne,c);if(F==null)throw new W;let H=null;for(let ne=1;H===null&&ne<B;ne++)H=this.getBlackPointOnSegment(r,o+ne,r+ne,o);if(H==null)throw new W;let $=null;for(let ne=1;$===null&&ne<B;ne++)$=this.getBlackPointOnSegment(i,o+ne,i-ne,o);if($==null)throw new W;let te=null;for(let ne=1;te===null&&ne<B;ne++)te=this.getBlackPointOnSegment(i,c-ne,i-ne,c);if(te==null)throw new W;return this.centerEdges(te,F,$,H)}else throw new W}getBlackPointOnSegment(r,i,o,c){const u=De.round(De.distance(r,i,o,c)),d=(o-r)/u,f=(c-i)/u,x=this.image;for(let y=0;y<u;y++){const E=De.round(r+y*d),_=De.round(i+y*f);if(x.get(E,_))return new he(E,_)}return null}centerEdges(r,i,o,c){const u=r.getX(),d=r.getY(),f=i.getX(),x=i.getY(),y=o.getX(),E=o.getY(),_=c.getX(),N=c.getY(),D=wr.CORR;return u<this.width/2?[new he(_-D,N+D),new he(f+D,x+D),new he(y-D,E-D),new he(u+D,d-D)]:[new he(_+D,N+D),new he(f+D,x-D),new he(y-D,E+D),new he(u-D,d-D)]}containsBlackPoint(r,i,o,c){const u=this.image;if(c){for(let d=r;d<=i;d++)if(u.get(d,o))return!0}else for(let d=r;d<=i;d++)if(u.get(o,d))return!0;return!1}}wr.INIT_SIZE=10,wr.CORR=1;class tu{static checkAndNudgePoints(r,i){const o=r.getWidth(),c=r.getHeight();let u=!0;for(let d=0;d<i.length&&u;d+=2){const f=Math.floor(i[d]),x=Math.floor(i[d+1]);if(f<-1||f>o||x<-1||x>c)throw new W;u=!1,f===-1?(i[d]=0,u=!0):f===o&&(i[d]=o-1,u=!0),x===-1?(i[d+1]=0,u=!0):x===c&&(i[d+1]=c-1,u=!0)}u=!0;for(let d=i.length-2;d>=0&&u;d-=2){const f=Math.floor(i[d]),x=Math.floor(i[d+1]);if(f<-1||f>o||x<-1||x>c)throw new W;u=!1,f===-1?(i[d]=0,u=!0):f===o&&(i[d]=o-1,u=!0),x===-1?(i[d+1]=0,u=!0):x===c&&(i[d+1]=c-1,u=!0)}}}class Wn{constructor(r,i,o,c,u,d,f,x,y){this.a11=r,this.a21=i,this.a31=o,this.a12=c,this.a22=u,this.a32=d,this.a13=f,this.a23=x,this.a33=y}static quadrilateralToQuadrilateral(r,i,o,c,u,d,f,x,y,E,_,N,D,B,F,H){const $=Wn.quadrilateralToSquare(r,i,o,c,u,d,f,x);return Wn.squareToQuadrilateral(y,E,_,N,D,B,F,H).times($)}transformPoints(r){const i=r.length,o=this.a11,c=this.a12,u=this.a13,d=this.a21,f=this.a22,x=this.a23,y=this.a31,E=this.a32,_=this.a33;for(let N=0;N<i;N+=2){const D=r[N],B=r[N+1],F=u*D+x*B+_;r[N]=(o*D+d*B+y)/F,r[N+1]=(c*D+f*B+E)/F}}transformPointsWithValues(r,i){const o=this.a11,c=this.a12,u=this.a13,d=this.a21,f=this.a22,x=this.a23,y=this.a31,E=this.a32,_=this.a33,N=r.length;for(let D=0;D<N;D++){const B=r[D],F=i[D],H=u*B+x*F+_;r[D]=(o*B+d*F+y)/H,i[D]=(c*B+f*F+E)/H}}static squareToQuadrilateral(r,i,o,c,u,d,f,x){const y=r-o+u-f,E=i-c+d-x;if(y===0&&E===0)return new Wn(o-r,u-o,r,c-i,d-c,i,0,0,1);{const _=o-u,N=f-u,D=c-d,B=x-d,F=_*B-N*D,H=(y*B-N*E)/F,$=(_*E-y*D)/F;return new Wn(o-r+H*o,f-r+$*f,r,c-i+H*c,x-i+$*x,i,H,$,1)}}static quadrilateralToSquare(r,i,o,c,u,d,f,x){return Wn.squareToQuadrilateral(r,i,o,c,u,d,f,x).buildAdjoint()}buildAdjoint(){return new Wn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Wn(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class A0 extends tu{sampleGrid(r,i,o,c,u,d,f,x,y,E,_,N,D,B,F,H,$,te,ne){const Q=Wn.quadrilateralToQuadrilateral(c,u,d,f,x,y,E,_,N,D,B,F,H,$,te,ne);return this.sampleGridWithTransform(r,i,o,Q)}sampleGridWithTransform(r,i,o,c){if(i<=0||o<=0)throw new W;const u=new se(i,o),d=new Float32Array(2*i);for(let f=0;f<o;f++){const x=d.length,y=f+.5;for(let E=0;E<x;E+=2)d[E]=E/2+.5,d[E+1]=y;c.transformPoints(d),tu.checkAndNudgePoints(r,d);try{for(let E=0;E<x;E+=2)r.get(Math.floor(d[E]),Math.floor(d[E+1]))&&u.set(E/2,f)}catch{throw new W}}return u}}class Ur{static setGridSampler(r){Ur.gridSampler=r}static getInstance(){return Ur.gridSampler}}Ur.gridSampler=new A0;class Jt{constructor(r,i){this.x=r,this.y=i}toResultPoint(){return new he(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class S0{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let i=this.getMatrixCenter(),o=this.getBullsEyeCorners(i);if(r){let d=o[0];o[0]=o[2],o[2]=d}this.extractParameters(o);let c=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),u=this.getMatrixCornerPoints(o);return new C0(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new W;let i=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(r[0],r[1],i),this.sampleLine(r[1],r[2],i),this.sampleLine(r[2],r[3],i),this.sampleLine(r[3],r[0],i)]);this.shift=this.getRotation(o,i);let c=0;for(let d=0;d<4;d++){let f=o[(this.shift+d)%4];this.compact?(c<<=7,c+=f>>1&127):(c<<=10,c+=(f>>2&992)+(f>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(r,i){let o=0;r.forEach((c,u,d)=>{let f=(c>>i-2<<1)+(c&1);o=(o<<3)+f}),o=((o&1)<<11)+(o>>1);for(let c=0;c<4;c++)if(A.bitCount(o^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new W}getCorrectedParameterData(r,i){let o,c;i?(o=7,c=2):(o=10,c=4);let u=o-c,d=new Int32Array(o);for(let x=o-1;x>=0;--x)d[x]=r&15,r>>=4;try{new go(Le.AZTEC_PARAM).decode(d,u)}catch{throw new W}let f=0;for(let x=0;x<c;x++)f=(f<<4)+d[x];return f}getBullsEyeCorners(r){let i=r,o=r,c=r,u=r,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let _=this.getFirstDifferent(i,d,1,-1),N=this.getFirstDifferent(o,d,1,1),D=this.getFirstDifferent(c,d,-1,1),B=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let F=this.distancePoint(B,_)*this.nbCenterLayers/(this.distancePoint(u,i)*(this.nbCenterLayers+2));if(F<.75||F>1.25||!this.isWhiteOrBlackRectangle(_,N,D,B))break}i=_,o=N,c=D,u=B,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new W;this.compact=this.nbCenterLayers===5;let f=new he(i.getX()+.5,i.getY()-.5),x=new he(o.getX()+.5,o.getY()+.5),y=new he(c.getX()-.5,c.getY()+.5),E=new he(u.getX()-.5,u.getY()-.5);return this.expandSquare([f,x,y,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,i,o,c;try{let f=new wr(this.image).detect();r=f[0],i=f[1],o=f[2],c=f[3]}catch{let x=this.image.getWidth()/2,y=this.image.getHeight()/2;r=this.getFirstDifferent(new Jt(x+7,y-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Jt(x+7,y+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Jt(x-7,y+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Jt(x-7,y-7),!1,-1,-1).toResultPoint()}let u=De.round((r.getX()+c.getX()+i.getX()+o.getX())/4),d=De.round((r.getY()+c.getY()+i.getY()+o.getY())/4);try{let f=new wr(this.image,15,u,d).detect();r=f[0],i=f[1],o=f[2],c=f[3]}catch{r=this.getFirstDifferent(new Jt(u+7,d-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Jt(u+7,d+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Jt(u-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Jt(u-7,d-7),!1,-1,-1).toResultPoint()}return u=De.round((r.getX()+c.getX()+i.getX()+o.getX())/4),d=De.round((r.getY()+c.getY()+i.getY()+o.getY())/4),new Jt(u,d)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,i,o,c,u){let d=Ur.getInstance(),f=this.getDimension(),x=f/2-this.nbCenterLayers,y=f/2+this.nbCenterLayers;return d.sampleGrid(r,f,f,x,x,y,x,y,y,x,y,i.getX(),i.getY(),o.getX(),o.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(r,i,o){let c=0,u=this.distanceResultPoint(r,i),d=u/o,f=r.getX(),x=r.getY(),y=d*(i.getX()-r.getX())/u,E=d*(i.getY()-r.getY())/u;for(let _=0;_<o;_++)this.image.get(De.round(f+_*y),De.round(x+_*E))&&(c|=1<<o-_-1);return c}isWhiteOrBlackRectangle(r,i,o,c){let u=3;r=new Jt(r.getX()-u,r.getY()+u),i=new Jt(i.getX()-u,i.getY()-u),o=new Jt(o.getX()+u,o.getY()-u),c=new Jt(c.getX()+u,c.getY()+u);let d=this.getColor(c,r);if(d===0)return!1;let f=this.getColor(r,i);return f!==d||(f=this.getColor(i,o),f!==d)?!1:(f=this.getColor(o,c),f===d)}getColor(r,i){let o=this.distancePoint(r,i),c=(i.getX()-r.getX())/o,u=(i.getY()-r.getY())/o,d=0,f=r.getX(),x=r.getY(),y=this.image.get(r.getX(),r.getY()),E=Math.ceil(o);for(let N=0;N<E;N++)f+=c,x+=u,this.image.get(De.round(f),De.round(x))!==y&&d++;let _=d/o;return _>.1&&_<.9?0:_<=.1===y?1:-1}getFirstDifferent(r,i,o,c){let u=r.getX()+o,d=r.getY()+c;for(;this.isValid(u,d)&&this.image.get(u,d)===i;)u+=o,d+=c;for(u-=o,d-=c;this.isValid(u,d)&&this.image.get(u,d)===i;)u+=o;for(u-=o;this.isValid(u,d)&&this.image.get(u,d)===i;)d+=c;return d-=c,new Jt(u,d)}expandSquare(r,i,o){let c=o/(2*i),u=r[0].getX()-r[2].getX(),d=r[0].getY()-r[2].getY(),f=(r[0].getX()+r[2].getX())/2,x=(r[0].getY()+r[2].getY())/2,y=new he(f+c*u,x+c*d),E=new he(f-c*u,x-c*d);u=r[1].getX()-r[3].getX(),d=r[1].getY()-r[3].getY(),f=(r[1].getX()+r[3].getX())/2,x=(r[1].getY()+r[3].getY())/2;let _=new he(f+c*u,x+c*d),N=new he(f-c*u,x-c*d);return[y,_,E,N]}isValid(r,i){return r>=0&&r<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(r){let i=De.round(r.getX()),o=De.round(r.getY());return this.isValid(i,o)}distancePoint(r,i){return De.distance(r.getX(),r.getY(),i.getX(),i.getY())}distanceResultPoint(r,i){return De.distance(r.getX(),r.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(A.truncDivision(this.nbLayers-4,8)+1)+15}}class Xa{decode(r,i=null){let o=null,c=new S0(r.getBlackMatrix()),u=null,d=null;try{let E=c.detectMirror(!1);u=E.getPoints(),this.reportFoundResultPoints(i,u),d=new Xe().decode(E)}catch(E){o=E}if(d==null)try{let E=c.detectMirror(!0);u=E.getPoints(),this.reportFoundResultPoints(i,u),d=new Xe().decode(E)}catch(E){throw o??E}let f=new st(d.getText(),d.getRawBytes(),d.getNumBits(),u,fe.AZTEC,P.currentTimeMillis()),x=d.getByteSegments();x!=null&&f.putMetadata(kt.BYTE_SEGMENTS,x);let y=d.getECLevel();return y!=null&&f.putMetadata(kt.ERROR_CORRECTION_LEVEL,y),f}reportFoundResultPoints(r,i){if(r!=null){let o=r.get(z.NEED_RESULT_POINT_CALLBACK);o!=null&&i.forEach((c,u,d)=>{o.foundPossibleResultPoint(c)})}}reset(){}}class hw extends kn{constructor(r=500){super(new Xa,r)}}class bt{decode(r,i){try{return this.doDecode(r,i)}catch{if(i&&i.get(z.TRY_HARDER)===!0&&r.isRotateSupported()){const u=r.rotateCounterClockwise(),d=this.doDecode(u,i),f=d.getResultMetadata();let x=270;f!==null&&f.get(kt.ORIENTATION)===!0&&(x=x+f.get(kt.ORIENTATION)%360),d.putMetadata(kt.ORIENTATION,x);const y=d.getResultPoints();if(y!==null){const E=u.getHeight();for(let _=0;_<y.length;_++)y[_]=new he(E-y[_].getY()-1,y[_].getX())}return d}else throw new W}}reset(){}doDecode(r,i){const o=r.getWidth(),c=r.getHeight();let u=new j(o);const d=i&&i.get(z.TRY_HARDER)===!0,f=Math.max(1,c>>(d?8:5));let x;d?x=c:x=15;const y=Math.trunc(c/2);for(let E=0;E<x;E++){const _=Math.trunc((E+1)/2),N=(E&1)===0,D=y+f*(N?_:-_);if(D<0||D>=c)break;try{u=r.getBlackRow(D,u)}catch{continue}for(let B=0;B<2;B++){if(B===1&&(u.reverse(),i&&i.get(z.NEED_RESULT_POINT_CALLBACK)===!0)){const F=new Map;i.forEach((H,$)=>F.set($,H)),F.delete(z.NEED_RESULT_POINT_CALLBACK),i=F}try{const F=this.decodeRow(D,u,i);if(B===1){F.putMetadata(kt.ORIENTATION,180);const H=F.getResultPoints();H!==null&&(H[0]=new he(o-H[0].getX()-1,H[0].getY()),H[1]=new he(o-H[1].getX()-1,H[1].getY()))}return F}catch{}}}throw new W}static recordPattern(r,i,o){const c=o.length;for(let y=0;y<c;y++)o[y]=0;const u=r.getSize();if(i>=u)throw new W;let d=!r.get(i),f=0,x=i;for(;x<u;){if(r.get(x)!==d)o[f]++;else{if(++f===c)break;o[f]=1,d=!d}x++}if(!(f===c||f===c-1&&x===u))throw new W}static recordPatternInReverse(r,i,o){let c=o.length,u=r.get(i);for(;i>0&&c>=0;)r.get(--i)!==u&&(c--,u=!u);if(c>=0)throw new W;bt.recordPattern(r,i+1,o)}static patternMatchVariance(r,i,o){const c=r.length;let u=0,d=0;for(let y=0;y<c;y++)u+=r[y],d+=i[y];if(u<d)return Number.POSITIVE_INFINITY;const f=u/d;o*=f;let x=0;for(let y=0;y<c;y++){const E=r[y],_=i[y]*f,N=E>_?E-_:_-E;if(N>o)return Number.POSITIVE_INFINITY;x+=N}return x/u}}class ie extends bt{static findStartPattern(r){const i=r.getSize(),o=r.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),d=o,f=!1;const x=6;for(let y=o;y<i;y++)if(r.get(y)!==f)u[c]++;else{if(c===x-1){let E=ie.MAX_AVG_VARIANCE,_=-1;for(let N=ie.CODE_START_A;N<=ie.CODE_START_C;N++){const D=bt.patternMatchVariance(u,ie.CODE_PATTERNS[N],ie.MAX_INDIVIDUAL_VARIANCE);D<E&&(E=D,_=N)}if(_>=0&&r.isRange(Math.max(0,d-(y-d)/2),d,!1))return Int32Array.from([d,y,_]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,f=!f}throw new W}static decodeCode(r,i,o){bt.recordPattern(r,o,i);let c=ie.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<ie.CODE_PATTERNS.length;d++){const f=ie.CODE_PATTERNS[d],x=this.patternMatchVariance(i,f,ie.MAX_INDIVIDUAL_VARIANCE);x<c&&(c=x,u=d)}if(u>=0)return u;throw new W}decodeRow(r,i,o){const c=o&&o.get(z.ASSUME_GS1)===!0,u=ie.findStartPattern(i),d=u[2];let f=0;const x=new Uint8Array(20);x[f++]=d;let y;switch(d){case ie.CODE_START_A:y=ie.CODE_CODE_A;break;case ie.CODE_START_B:y=ie.CODE_CODE_B;break;case ie.CODE_START_C:y=ie.CODE_CODE_C;break;default:throw new L}let E=!1,_=!1,N="",D=u[0],B=u[1];const F=Int32Array.from([0,0,0,0,0,0]);let H=0,$=0,te=d,ne=0,Q=!0,Re=!1,Se=!1;for(;!E;){const li=_;switch(_=!1,H=$,$=ie.decodeCode(i,F,B),x[f++]=$,$!==ie.CODE_STOP&&(Q=!0),$!==ie.CODE_STOP&&(ne++,te+=ne*$),D=B,B+=F.reduce((Uw,Vw)=>Uw+Vw,0),$){case ie.CODE_START_A:case ie.CODE_START_B:case ie.CODE_START_C:throw new L}switch(y){case ie.CODE_CODE_A:if($<64)Se===Re?N+=String.fromCharCode(32+$):N+=String.fromCharCode(32+$+128),Se=!1;else if($<96)Se===Re?N+=String.fromCharCode($-64):N+=String.fromCharCode($+64),Se=!1;else switch($!==ie.CODE_STOP&&(Q=!1),$){case ie.CODE_FNC_1:c&&(N.length===0?N+="]C1":N+="");break;case ie.CODE_FNC_2:case ie.CODE_FNC_3:break;case ie.CODE_FNC_4_A:!Re&&Se?(Re=!0,Se=!1):Re&&Se?(Re=!1,Se=!1):Se=!0;break;case ie.CODE_SHIFT:_=!0,y=ie.CODE_CODE_B;break;case ie.CODE_CODE_B:y=ie.CODE_CODE_B;break;case ie.CODE_CODE_C:y=ie.CODE_CODE_C;break;case ie.CODE_STOP:E=!0;break}break;case ie.CODE_CODE_B:if($<96)Se===Re?N+=String.fromCharCode(32+$):N+=String.fromCharCode(32+$+128),Se=!1;else switch($!==ie.CODE_STOP&&(Q=!1),$){case ie.CODE_FNC_1:c&&(N.length===0?N+="]C1":N+="");break;case ie.CODE_FNC_2:case ie.CODE_FNC_3:break;case ie.CODE_FNC_4_B:!Re&&Se?(Re=!0,Se=!1):Re&&Se?(Re=!1,Se=!1):Se=!0;break;case ie.CODE_SHIFT:_=!0,y=ie.CODE_CODE_A;break;case ie.CODE_CODE_A:y=ie.CODE_CODE_A;break;case ie.CODE_CODE_C:y=ie.CODE_CODE_C;break;case ie.CODE_STOP:E=!0;break}break;case ie.CODE_CODE_C:if($<100)$<10&&(N+="0"),N+=$;else switch($!==ie.CODE_STOP&&(Q=!1),$){case ie.CODE_FNC_1:c&&(N.length===0?N+="]C1":N+="");break;case ie.CODE_CODE_A:y=ie.CODE_CODE_A;break;case ie.CODE_CODE_B:y=ie.CODE_CODE_B;break;case ie.CODE_STOP:E=!0;break}break}li&&(y=y===ie.CODE_CODE_A?ie.CODE_CODE_B:ie.CODE_CODE_A)}const un=B-D;if(B=i.getNextUnset(B),!i.isRange(B,Math.min(i.getSize(),B+(B-D)/2),!1))throw new W;if(te-=ne*H,te%103!==H)throw new T;const Gn=N.length;if(Gn===0)throw new W;Gn>0&&Q&&(y===ie.CODE_CODE_C?N=N.substring(0,Gn-2):N=N.substring(0,Gn-1));const hn=(u[1]+u[0])/2,Ge=D+un/2,Bt=x.length,xn=new Uint8Array(Bt);for(let li=0;li<Bt;li++)xn[li]=x[li];const ai=[new he(hn,r),new he(Ge,r)];return new st(N,xn,0,ai,fe.CODE_128,new Date().getTime())}}ie.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ie.MAX_AVG_VARIANCE=.25,ie.MAX_INDIVIDUAL_VARIANCE=.7,ie.CODE_SHIFT=98,ie.CODE_CODE_C=99,ie.CODE_CODE_B=100,ie.CODE_CODE_A=101,ie.CODE_FNC_1=102,ie.CODE_FNC_2=97,ie.CODE_FNC_3=96,ie.CODE_FNC_4_A=101,ie.CODE_FNC_4_B=100,ie.CODE_START_A=103,ie.CODE_START_B=104,ie.CODE_START_C=105,ie.CODE_STOP=106;class At extends bt{constructor(r=!1,i=!1){super(),this.usingCheckDigit=r,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,i,o){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=At.findAsteriskPattern(i,c),d=i.getNextSet(u[1]),f=i.getSize(),x,y;do{At.recordPattern(i,d,c);let F=At.toNarrowWidePattern(c);if(F<0)throw new W;x=At.patternToChar(F),this.decodeRowResult+=x,y=d;for(let H of c)d+=H;d=i.getNextSet(d)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let F of c)E+=F;let _=d-y-E;if(d!==f&&_*2<E)throw new W;if(this.usingCheckDigit){let F=this.decodeRowResult.length-1,H=0;for(let $=0;$<F;$++)H+=At.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt($));if(this.decodeRowResult.charAt(F)!==At.ALPHABET_STRING.charAt(H%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,F)}if(this.decodeRowResult.length===0)throw new W;let N;this.extendedMode?N=At.decodeExtended(this.decodeRowResult):N=this.decodeRowResult;let D=(u[1]+u[0])/2,B=y+E/2;return new st(N,null,0,[new he(D,r),new he(B,r)],fe.CODE_39,new Date().getTime())}static findAsteriskPattern(r,i){let o=r.getSize(),c=r.getNextSet(0),u=0,d=c,f=!1,x=i.length;for(let y=c;y<o;y++)if(r.get(y)!==f)i[u]++;else{if(u===x-1){if(this.toNarrowWidePattern(i)===At.ASTERISK_ENCODING&&r.isRange(Math.max(0,d-Math.floor((y-d)/2)),d,!1))return[d,y];d+=i[0]+i[1],i.copyWithin(0,2,2+u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,f=!f}throw new W}static toNarrowWidePattern(r){let i=r.length,o=0,c;do{let u=2147483647;for(let x of r)x<u&&x>o&&(u=x);o=u,c=0;let d=0,f=0;for(let x=0;x<i;x++){let y=r[x];y>o&&(f|=1<<i-1-x,c++,d+=y)}if(c===3){for(let x=0;x<i&&c>0;x++){let y=r[x];if(y>o&&(c--,y*2>=d))return-1}return f}}while(c>3);return-1}static patternToChar(r){for(let i=0;i<At.CHARACTER_ENCODINGS.length;i++)if(At.CHARACTER_ENCODINGS[i]===r)return At.ALPHABET_STRING.charAt(i);if(r===At.ASTERISK_ENCODING)return"*";throw new W}static decodeExtended(r){let i=r.length,o="";for(let c=0;c<i;c++){let u=r.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let d=r.charAt(c+1),f="\0";switch(u){case"+":if(d>="A"&&d<="Z")f=String.fromCharCode(d.charCodeAt(0)+32);else throw new L;break;case"$":if(d>="A"&&d<="Z")f=String.fromCharCode(d.charCodeAt(0)-64);else throw new L;break;case"%":if(d>="A"&&d<="E")f=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")f=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")f=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")f=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")f="\0";else if(d==="V")f="@";else if(d==="W")f="`";else if(d==="X"||d==="Y"||d==="Z")f="";else throw new L;break;case"/":if(d>="A"&&d<="O")f=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")f=":";else throw new L;break}o+=f,c++}else o+=u}return o}}At.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",At.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],At.ASTERISK_ENCODING=148;class We extends bt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,i,o){let c=this.decodeStart(i),u=this.decodeEnd(i),d=new oe;We.decodeMiddle(i,c[1],u[0],d);let f=d.toString(),x=null;o!=null&&(x=o.get(z.ALLOWED_LENGTHS)),x==null&&(x=We.DEFAULT_ALLOWED_LENGTHS);let y=f.length,E=!1,_=0;for(let B of x){if(y===B){E=!0;break}B>_&&(_=B)}if(!E&&y>_&&(E=!0),!E)throw new L;const N=[new he(c[1],r),new he(u[0],r)];return new st(f,null,0,N,fe.ITF,new Date().getTime())}static decodeMiddle(r,i,o,c){let u=new Int32Array(10),d=new Int32Array(5),f=new Int32Array(5);for(u.fill(0),d.fill(0),f.fill(0);i<o;){bt.recordPattern(r,i,u);for(let y=0;y<5;y++){let E=2*y;d[y]=u[E],f[y]=u[E+1]}let x=We.decodeDigit(d);c.append(x.toString()),x=this.decodeDigit(f),c.append(x.toString()),u.forEach(function(y){i+=y})}}decodeStart(r){let i=We.skipWhiteSpace(r),o=We.findGuardPattern(r,i,We.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(r,o[0]),o}validateQuietZone(r,i){let o=this.narrowLineWidth*10;o=o<i?o:i;for(let c=i-1;o>0&&c>=0&&!r.get(c);c--)o--;if(o!==0)throw new W}static skipWhiteSpace(r){const i=r.getSize(),o=r.getNextSet(0);if(o===i)throw new W;return o}decodeEnd(r){r.reverse();try{let i=We.skipWhiteSpace(r),o;try{o=We.findGuardPattern(r,i,We.END_PATTERN_REVERSED[0])}catch(u){u instanceof W&&(o=We.findGuardPattern(r,i,We.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,o[0]);let c=o[0];return o[0]=r.getSize()-o[1],o[1]=r.getSize()-c,o}finally{r.reverse()}}static findGuardPattern(r,i,o){let c=o.length,u=new Int32Array(c),d=r.getSize(),f=!1,x=0,y=i;u.fill(0);for(let E=i;E<d;E++)if(r.get(E)!==f)u[x]++;else{if(x===c-1){if(bt.patternMatchVariance(u,o,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return[y,E];y+=u[0]+u[1],P.arraycopy(u,2,u,0,x-1),u[x-1]=0,u[x]=0,x--}else x++;u[x]=1,f=!f}throw new W}static decodeDigit(r){let i=We.MAX_AVG_VARIANCE,o=-1,c=We.PATTERNS.length;for(let u=0;u<c;u++){let d=We.PATTERNS[u],f=bt.patternMatchVariance(r,d,We.MAX_INDIVIDUAL_VARIANCE);f<i?(i=f,o=u):f===i&&(o=-1)}if(o>=0)return o%10;throw new W}}We.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],We.MAX_AVG_VARIANCE=.38,We.MAX_INDIVIDUAL_VARIANCE=.5,We.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],We.START_PATTERN=Int32Array.from([1,1,1,1]),We.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ht extends bt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let i=!1,o,c=0,u=Int32Array.from([0,0,0]);for(;!i;){u=Int32Array.from([0,0,0]),o=ht.findGuardPattern(r,c,!1,this.START_END_PATTERN,u);let d=o[0];c=o[1];let f=d-(c-d);f>=0&&(i=r.isRange(f,d,!1))}return o}static checkChecksum(r){return ht.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let i=r.length;if(i===0)return!1;let o=parseInt(r.charAt(i-1),10);return ht.getStandardUPCEANChecksum(r.substring(0,i-1))===o}static getStandardUPCEANChecksum(r){let i=r.length,o=0;for(let c=i-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new L;o+=u}o*=3;for(let c=i-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new L;o+=u}return(1e3-o)%10}static decodeEnd(r,i){return ht.findGuardPattern(r,i,!1,ht.START_END_PATTERN,new Int32Array(ht.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,i,o,c){return this.findGuardPattern(r,i,o,c,new Int32Array(c.length))}static findGuardPattern(r,i,o,c,u){let d=r.getSize();i=o?r.getNextUnset(i):r.getNextSet(i);let f=0,x=i,y=c.length,E=o;for(let _=i;_<d;_++)if(r.get(_)!==E)u[f]++;else{if(f===y-1){if(bt.patternMatchVariance(u,c,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE)return Int32Array.from([x,_]);x+=u[0]+u[1];let N=u.slice(2,u.length-1);for(let D=0;D<f-1;D++)u[D]=N[D];u[f-1]=0,u[f]=0,f--}else f++;u[f]=1,E=!E}throw new W}static decodeDigit(r,i,o,c){this.recordPattern(r,o,i);let u=this.MAX_AVG_VARIANCE,d=-1,f=c.length;for(let x=0;x<f;x++){let y=c[x],E=bt.patternMatchVariance(i,y,ht.MAX_INDIVIDUAL_VARIANCE);E<u&&(u=E,d=x)}if(d>=0)return d;throw new W}}ht.MAX_AVG_VARIANCE=.48,ht.MAX_INDIVIDUAL_VARIANCE=.7,ht.START_END_PATTERN=Int32Array.from([1,1,1]),ht.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ht.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ht.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class po{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,i,o){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(i,o,c),d=c.toString(),f=po.parseExtensionString(d),x=[new he((o[0]+o[1])/2,r),new he(u,r)],y=new st(d,null,0,x,fe.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&y.putAllMetadata(f),y}decodeMiddle(r,i,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=i[1],f=0;for(let y=0;y<5&&d<u;y++){let E=ht.decodeDigit(r,c,d,ht.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let _ of c)d+=_;E>=10&&(f|=1<<4-y),y!==4&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(o.length!==5)throw new W;let x=this.determineCheckDigit(f);if(po.extensionChecksum(o.toString())!==x)throw new W;return d}static extensionChecksum(r){let i=r.length,o=0;for(let c=i-2;c>=0;c-=2)o+=r.charAt(c).charCodeAt(0)-48;o*=3;for(let c=i-1;c>=0;c-=2)o+=r.charAt(c).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(r){for(let i=0;i<10;i++)if(r===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new W}static parseExtensionString(r){if(r.length!==5)return null;let i=po.parseExtension5String(r);return i==null?null:new Map([[kt.SUGGESTED_PRICE,i]])}static parseExtension5String(r){let i;switch(r.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let o=parseInt(r.substring(1)),c=(o/100).toString(),u=o%100,d=u<10?"0"+u:u.toString();return i+c+"."+d}}class nu{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,i,o){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(i,o,c),d=c.toString(),f=nu.parseExtensionString(d),x=[new he((o[0]+o[1])/2,r),new he(u,r)],y=new st(d,null,0,x,fe.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&y.putAllMetadata(f),y}decodeMiddle(r,i,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=i[1],f=0;for(let x=0;x<2&&d<u;x++){let y=ht.decodeDigit(r,c,d,ht.L_AND_G_PATTERNS);o+=String.fromCharCode(48+y%10);for(let E of c)d+=E;y>=10&&(f|=1<<1-x),x!==1&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(o.length!==2)throw new W;if(parseInt(o.toString())%4!==f)throw new W;return d}static parseExtensionString(r){return r.length!==2?null:new Map([[kt.ISSUE_NUMBER,parseInt(r)]])}}class _0{static decodeRow(r,i,o){let c=ht.findGuardPattern(i,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new po().decodeRow(r,i,c)}catch{return new nu().decodeRow(r,i,c)}}}_0.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Be extends ht{constructor(){super(),this.decodeRowStringBuffer="",Be.L_AND_G_PATTERNS=Be.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let i=Be.L_PATTERNS[r-10],o=new Int32Array(i.length);for(let c=0;c<i.length;c++)o[c]=i[i.length-c-1];Be.L_AND_G_PATTERNS[r]=o}}decodeRow(r,i,o){let c=Be.findStartGuardPattern(i),u=o==null?null:o.get(z.NEED_RESULT_POINT_CALLBACK);if(u!=null){const Q=new he((c[0]+c[1])/2,r);u.foundPossibleResultPoint(Q)}let d=this.decodeMiddle(i,c,this.decodeRowStringBuffer),f=d.rowOffset,x=d.resultString;if(u!=null){const Q=new he(f,r);u.foundPossibleResultPoint(Q)}let y=this.decodeEnd(i,f);if(u!=null){const Q=new he((y[0]+y[1])/2,r);u.foundPossibleResultPoint(Q)}let E=y[1],_=E+(E-y[0]);if(_>=i.getSize()||!i.isRange(E,_,!1))throw new W;let N=x.toString();if(N.length<8)throw new L;if(!Be.checkChecksum(N))throw new T;let D=(c[1]+c[0])/2,B=(y[1]+y[0])/2,F=this.getBarcodeFormat(),H=[new he(D,r),new he(B,r)],$=new st(N,null,0,H,F,new Date().getTime()),te=0;try{let Q=_0.decodeRow(r,i,y[1]);$.putMetadata(kt.UPC_EAN_EXTENSION,Q.getText()),$.putAllMetadata(Q.getResultMetadata()),$.addResultPoints(Q.getResultPoints()),te=Q.getText().length}catch{}let ne=o==null?null:o.get(z.ALLOWED_EAN_EXTENSIONS);if(ne!=null){let Q=!1;for(let Re in ne)if(te.toString()===Re){Q=!0;break}if(!Q)throw new W}return $}decodeEnd(r,i){return Be.findGuardPattern(r,i,!1,Be.START_END_PATTERN,new Int32Array(Be.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return Be.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let i=r.length;if(i===0)return!1;let o=parseInt(r.charAt(i-1),10);return Be.getStandardUPCEANChecksum(r.substring(0,i-1))===o}static getStandardUPCEANChecksum(r){let i=r.length,o=0;for(let c=i-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new L;o+=u}o*=3;for(let c=i-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new L;o+=u}return(1e3-o)%10}}class vs extends Be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,i,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=i[1],f=0;for(let y=0;y<6&&d<u;y++){let E=Be.decodeDigit(r,c,d,Be.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let _ of c)d+=_;E>=10&&(f|=1<<5-y)}o=vs.determineFirstDigit(o,f),d=Be.findGuardPattern(r,d,!0,Be.MIDDLE_PATTERN,new Int32Array(Be.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<6&&d<u;y++){let E=Be.decodeDigit(r,c,d,Be.L_PATTERNS);o+=String.fromCharCode(48+E);for(let _ of c)d+=_}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return fe.EAN_13}static determineFirstDigit(r,i){for(let o=0;o<10;o++)if(i===this.FIRST_DIGIT_ENCODINGS[o])return r=String.fromCharCode(48+o)+r,r;throw new W}}vs.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class T0 extends Be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,i,o){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=i[1];for(let x=0;x<4&&d<u;x++){let y=Be.decodeDigit(r,c,d,Be.L_PATTERNS);o+=String.fromCharCode(48+y);for(let E of c)d+=E}d=Be.findGuardPattern(r,d,!0,Be.MIDDLE_PATTERN,new Int32Array(Be.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&d<u;x++){let y=Be.decodeDigit(r,c,d,Be.L_PATTERNS);o+=String.fromCharCode(48+y);for(let E of c)d+=E}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return fe.EAN_8}}class I0 extends Be{constructor(){super(...arguments),this.ean13Reader=new vs}getBarcodeFormat(){return fe.UPC_A}decode(r,i){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,i,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,i,o))}decodeMiddle(r,i,o){return this.ean13Reader.decodeMiddle(r,i,o)}maybeReturnResult(r){let i=r.getText();if(i.charAt(0)==="0"){let o=new st(i.substring(1),null,null,r.getResultPoints(),fe.UPC_A);return r.getResultMetadata()!=null&&o.putAllMetadata(r.getResultMetadata()),o}else throw new W}reset(){this.ean13Reader.reset()}}class Hn extends Be{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,i,o){const c=this.decodeMiddleCounters.map(y=>y);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=r.getSize();let d=i[1],f=0;for(let y=0;y<6&&d<u;y++){const E=Hn.decodeDigit(r,c,d,Hn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let _ of c)d+=_;E>=10&&(f|=1<<5-y)}let x=Hn.determineNumSysAndCheckDigit(o,f);return{rowOffset:d,resultString:x}}decodeEnd(r,i){return Hn.findGuardPatternWithoutCounters(r,i,!0,Hn.MIDDLE_END_PATTERN)}checkChecksum(r){return Be.checkChecksum(Hn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,i){for(let o=0;o<=1;o++)for(let c=0;c<10;c++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][c]){let u=String.fromCharCode(48+o),d=String.fromCharCode(48+c);return u+r+d}throw W.getNotFoundInstance()}getBarcodeFormat(){return fe.UPC_E}static convertUPCEtoUPCA(r){const i=r.slice(1,7).split("").map(u=>u.charCodeAt(0)),o=new oe;o.append(r.charAt(0));let c=i[5];switch(c){case 0:case 1:case 2:o.appendChars(i,0,2),o.append(c),o.append("0000"),o.appendChars(i,2,3);break;case 3:o.appendChars(i,0,3),o.append("00000"),o.appendChars(i,3,2);break;case 4:o.appendChars(i,0,4),o.append("00000"),o.append(i[4]);break;default:o.appendChars(i,0,5),o.append("0000"),o.append(c);break}return r.length>=8&&o.append(r.charAt(7)),o.toString()}}Hn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Hn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ru extends bt{constructor(r){super();let i=r==null?null:r.get(z.POSSIBLE_FORMATS),o=[];s(i)?(o.push(new vs),o.push(new I0),o.push(new T0),o.push(new Hn)):(i.indexOf(fe.EAN_13)>-1&&o.push(new vs),i.indexOf(fe.UPC_A)>-1&&o.push(new I0),i.indexOf(fe.EAN_8)>-1&&o.push(new T0),i.indexOf(fe.UPC_E)>-1&&o.push(new Hn)),this.readers=o}decodeRow(r,i,o){for(let c of this.readers)try{const u=c.decodeRow(r,i,o),d=u.getBarcodeFormat()===fe.EAN_13&&u.getText().charAt(0)==="0",f=o==null?null:o.get(z.POSSIBLE_FORMATS),x=f==null||f.includes(fe.UPC_A);if(d&&x){const y=u.getRawBytes(),E=new st(u.getText().substring(1),y,y?y.length:null,u.getResultPoints(),fe.UPC_A);return E.putAllMetadata(u.getResultMetadata()),E}return u}catch{}throw new W}reset(){for(let r of this.readers)r.reset()}}class Gt extends bt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,i){for(let o=0;o<i.length;o++)if(bt.patternMatchVariance(r,i[o],Gt.MAX_INDIVIDUAL_VARIANCE)<Gt.MAX_AVG_VARIANCE)return o;throw new W}static count(r){return De.sum(new Int32Array(r))}static increment(r,i){let o=0,c=i[0];for(let u=1;u<r.length;u++)i[u]>c&&(c=i[u],o=u);r[o]++}static decrement(r,i){let o=0,c=i[0];for(let u=1;u<r.length;u++)i[u]<c&&(c=i[u],o=u);r[o]--}static isFinderPattern(r){let i=r[0]+r[1],o=i+r[2]+r[3],c=i/o;if(c>=Gt.MIN_FINDER_PATTERN_RATIO&&c<=Gt.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let f of r)f>d&&(d=f),f<u&&(u=f);return d<10*u}return!1}}Gt.MAX_AVG_VARIANCE=.2,Gt.MAX_INDIVIDUAL_VARIANCE=.45,Gt.MIN_FINDER_PATTERN_RATIO=9.5/12,Gt.MAX_FINDER_PATTERN_RATIO=12.5/14;class ei{constructor(r,i){this.value=r,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof ei))return!1;const i=r;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ka{constructor(r,i,o,c,u){this.value=r,this.startEnd=i,this.value=r,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new he(o,u)),this.resultPoints.push(new he(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Ka))return!1;const i=r;return this.value===i.value}hashCode(){return this.value}}class or{constructor(){}static getRSSvalue(r,i,o){let c=0;for(let x of r)c+=x;let u=0,d=0,f=r.length;for(let x=0;x<f-1;x++){let y;for(y=1,d|=1<<x;y<r[x];y++,d&=~(1<<x)){let E=or.combins(c-y-1,f-x-2);if(o&&d===0&&c-y-(f-x-1)>=f-x-1&&(E-=or.combins(c-y-(f-x),f-x-2)),f-x-1>1){let _=0;for(let N=c-y-(f-x-2);N>i;N--)_+=or.combins(c-y-N-1,f-x-3);E-=_*(f-1-x)}else c-y>i&&E--;u+=E}c-=y}return u}static combins(r,i){let o,c;r-i>i?(c=i,o=r-i):(c=r-i,o=i);let u=1,d=1;for(let f=r;f>o;f--)u*=f,d<=c&&(u/=d,d++);for(;d<=c;)u/=d,d++;return u}}class dw{static buildBitArray(r){let i=r.length*2-1;r[r.length-1].getRightChar()==null&&(i-=1);let o=12*i,c=new j(o),u=0,f=r[0].getRightChar().getValue();for(let x=11;x>=0;--x)f&1<<x&&c.set(u),u++;for(let x=1;x<r.length;++x){let y=r[x],E=y.getLeftChar().getValue();for(let _=11;_>=0;--_)E&1<<_&&c.set(u),u++;if(y.getRightChar()!=null){let _=y.getRightChar().getValue();for(let N=11;N>=0;--N)_&1<<N&&c.set(u),u++}}return c}}class bs{constructor(r,i){i?this.decodedInformation=null:(this.finished=r,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class su{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class an extends su{constructor(r,i){super(r),this.value=i}getValue(){return this.value}isFNC1(){return this.value===an.FNC1}}an.FNC1="$";class Es extends su{constructor(r,i,o){super(r),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Rn extends su{constructor(r,i,o){if(super(r),i<0||i>10||o<0||o>10)throw new L;this.firstDigit=i,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Rn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Rn.FNC1}isAnyFNC1(){return this.firstDigit===Rn.FNC1||this.secondDigit===Rn.FNC1}}Rn.FNC1=10;class ae{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new W;let i=r.substring(0,2);for(let u of ae.TWO_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===ae.VARIABLE_LENGTH?ae.processVariableAI(2,u[2],r):ae.processFixedAI(2,u[1],r);if(r.length<3)throw new W;let o=r.substring(0,3);for(let u of ae.THREE_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===ae.VARIABLE_LENGTH?ae.processVariableAI(3,u[2],r):ae.processFixedAI(3,u[1],r);for(let u of ae.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===ae.VARIABLE_LENGTH?ae.processVariableAI(4,u[2],r):ae.processFixedAI(4,u[1],r);if(r.length<4)throw new W;let c=r.substring(0,4);for(let u of ae.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===ae.VARIABLE_LENGTH?ae.processVariableAI(4,u[2],r):ae.processFixedAI(4,u[1],r);throw new W}static processFixedAI(r,i,o){if(o.length<r)throw new W;let c=o.substring(0,r);if(o.length<r+i)throw new W;let u=o.substring(r,r+i),d=o.substring(r+i),f="("+c+")"+u,x=ae.parseFieldsInGeneralPurpose(d);return x==null?f:f+x}static processVariableAI(r,i,o){let c=o.substring(0,r),u;o.length<r+i?u=o.length:u=r+i;let d=o.substring(r,u),f=o.substring(u),x="("+c+")"+d,y=ae.parseFieldsInGeneralPurpose(f);return y==null?x:x+y}}ae.VARIABLE_LENGTH=[],ae.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ae.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ae.VARIABLE_LENGTH,20],["22",ae.VARIABLE_LENGTH,29],["30",ae.VARIABLE_LENGTH,8],["37",ae.VARIABLE_LENGTH,8],["90",ae.VARIABLE_LENGTH,30],["91",ae.VARIABLE_LENGTH,30],["92",ae.VARIABLE_LENGTH,30],["93",ae.VARIABLE_LENGTH,30],["94",ae.VARIABLE_LENGTH,30],["95",ae.VARIABLE_LENGTH,30],["96",ae.VARIABLE_LENGTH,30],["97",ae.VARIABLE_LENGTH,3],["98",ae.VARIABLE_LENGTH,30],["99",ae.VARIABLE_LENGTH,30]],ae.THREE_DIGIT_DATA_LENGTH=[["240",ae.VARIABLE_LENGTH,30],["241",ae.VARIABLE_LENGTH,30],["242",ae.VARIABLE_LENGTH,6],["250",ae.VARIABLE_LENGTH,30],["251",ae.VARIABLE_LENGTH,30],["253",ae.VARIABLE_LENGTH,17],["254",ae.VARIABLE_LENGTH,20],["400",ae.VARIABLE_LENGTH,30],["401",ae.VARIABLE_LENGTH,30],["402",17],["403",ae.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ae.VARIABLE_LENGTH,20],["421",ae.VARIABLE_LENGTH,15],["422",3],["423",ae.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ae.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ae.VARIABLE_LENGTH,15],["391",ae.VARIABLE_LENGTH,18],["392",ae.VARIABLE_LENGTH,15],["393",ae.VARIABLE_LENGTH,18],["703",ae.VARIABLE_LENGTH,30]],ae.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ae.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ae.VARIABLE_LENGTH,20],["8003",ae.VARIABLE_LENGTH,30],["8004",ae.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ae.VARIABLE_LENGTH,30],["8008",ae.VARIABLE_LENGTH,12],["8018",18],["8020",ae.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ae.VARIABLE_LENGTH,70],["8200",ae.VARIABLE_LENGTH,70]];class ti{constructor(r){this.buffer=new oe,this.information=r}decodeAllCodes(r,i){let o=i,c=null;do{let u=this.decodeGeneralPurposeField(o,c),d=ae.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&r.append(d),u.isRemaining()?c=""+u.getRemainingValue():c=null,o===u.getNewPosition())break;o=u.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let i=r;i<r+3;++i)if(this.information.get(i))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(r,4);return u===0?new Rn(this.information.getSize(),Rn.FNC1,Rn.FNC1):new Rn(this.information.getSize(),u-1,Rn.FNC1)}let i=this.extractNumericValueFromBitArray(r,7),o=(i-8)/11,c=(i-8)%11;return new Rn(r+7,o,c)}extractNumericValueFromBitArray(r,i){return ti.extractNumericValueFromBitArray(this.information,r,i)}static extractNumericValueFromBitArray(r,i,o){let c=0;for(let u=0;u<o;++u)r.get(i+u)&&(c|=1<<o-u-1);return c}decodeGeneralPurposeField(r,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(r);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Es(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Es(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,i;do{let o=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),r=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),r=i.isFinished()):(i=this.parseNumericBlock(),r=i.isFinished()),!(o!==this.current.getPosition())&&!r)break}while(!r);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let i;return r.isSecondDigitFNC1()?i=new Es(this.current.getPosition(),this.buffer.toString()):i=new Es(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new bs(!0,i)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let i=new Es(this.current.getPosition(),this.buffer.toString());return new bs(!0,i)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new bs(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let i=new Es(this.current.getPosition(),this.buffer.toString());return new bs(!0,i)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new bs(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let i=new Es(this.current.getPosition(),this.buffer.toString());return new bs(!0,i)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new bs(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(r,5);if(i>=5&&i<16)return!0;if(r+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<116)return!0;if(r+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(r,8);return c>=232&&c<253}decodeIsoIec646(r){let i=this.extractNumericValueFromBitArray(r,5);if(i===15)return new an(r+5,an.FNC1);if(i>=5&&i<15)return new an(r+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<90)return new an(r+7,""+(o+1));if(o>=90&&o<116)return new an(r+7,""+(o+7));let c=this.extractNumericValueFromBitArray(r,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new L}return new an(r+8,u)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(r,5);if(i>=5&&i<16)return!0;if(r+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,6);return o>=16&&o<63}decodeAlphanumeric(r){let i=this.extractNumericValueFromBitArray(r,5);if(i===15)return new an(r+5,an.FNC1);if(i>=5&&i<15)return new an(r+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(r,6);if(o>=32&&o<58)return new an(r+6,""+(o+33));let c;switch(o){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new ir("Decoding invalid alphanumeric value: "+o)}return new an(r+6,c)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let i=0;i<5&&i+r<this.information.getSize();++i)if(i===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+i))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let i=r;i<r+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let i=0;i<4&&i+r<this.information.getSize();++i)if(this.information.get(r+i))return!1;return!0}}class iu{constructor(r){this.information=r,this.generalDecoder=new ti(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class ln extends iu{constructor(r){super(r)}encodeCompressedGtin(r,i){r.append("(01)");let o=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,i,o)}encodeCompressedGtinWithoutAI(r,i,o){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*c,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}ln.appendCheckDigit(r,o)}static appendCheckDigit(r,i){let o=0;for(let c=0;c<13;c++){let u=r.charAt(c+i).charCodeAt(0)-48;o+=c&1?u:3*u}o=10-o%10,o===10&&(o=0),r.append(o)}}ln.GTIN_SIZE=40;class ni extends ln{constructor(r){super(r)}parseInformation(){let r=new oe;r.append("(01)");let i=r.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(ni.HEADER_SIZE,4);return r.append(o),this.encodeCompressedGtinWithoutAI(r,ni.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(r,ni.HEADER_SIZE+44)}}ni.HEADER_SIZE=4;class qa extends iu{constructor(r){super(r)}parseInformation(){let r=new oe;return this.getGeneralDecoder().decodeAllCodes(r,qa.HEADER_SIZE)}}qa.HEADER_SIZE=5;class $a extends ln{constructor(r){super(r)}encodeCompressedWeight(r,i,o){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i,o);this.addWeightCode(r,c);let u=this.checkWeight(c),d=1e5;for(let f=0;f<5;++f)u/d===0&&r.append("0"),d/=10;r.append(u)}}class ar extends $a{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=ar.HEADER_SIZE+$a.GTIN_SIZE+ar.WEIGHT_SIZE)throw new W;let r=new oe;return this.encodeCompressedGtin(r,ar.HEADER_SIZE),this.encodeCompressedWeight(r,ar.HEADER_SIZE+$a.GTIN_SIZE,ar.WEIGHT_SIZE),r.toString()}}ar.HEADER_SIZE=5,ar.WEIGHT_SIZE=15;class fw extends ar{constructor(r){super(r)}addWeightCode(r,i){r.append("(3103)")}checkWeight(r){return r}}class gw extends ar{constructor(r){super(r)}addWeightCode(r,i){i<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class lr extends ln{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<lr.HEADER_SIZE+ln.GTIN_SIZE)throw new W;let r=new oe;this.encodeCompressedGtin(r,lr.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(lr.HEADER_SIZE+ln.GTIN_SIZE,lr.LAST_DIGIT_SIZE);r.append("(392"),r.append(i),r.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(lr.HEADER_SIZE+ln.GTIN_SIZE+lr.LAST_DIGIT_SIZE,null);return r.append(o.getNewString()),r.toString()}}lr.HEADER_SIZE=8,lr.LAST_DIGIT_SIZE=2;class en extends ln{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<en.HEADER_SIZE+ln.GTIN_SIZE)throw new W;let r=new oe;this.encodeCompressedGtin(r,en.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(en.HEADER_SIZE+ln.GTIN_SIZE,en.LAST_DIGIT_SIZE);r.append("(393"),r.append(i),r.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(en.HEADER_SIZE+ln.GTIN_SIZE+en.LAST_DIGIT_SIZE,en.FIRST_THREE_DIGITS_SIZE);o/100==0&&r.append("0"),o/10==0&&r.append("0"),r.append(o);let c=this.getGeneralDecoder().decodeGeneralPurposeField(en.HEADER_SIZE+ln.GTIN_SIZE+en.LAST_DIGIT_SIZE+en.FIRST_THREE_DIGITS_SIZE,null);return r.append(c.getNewString()),r.toString()}}en.HEADER_SIZE=8,en.LAST_DIGIT_SIZE=2,en.FIRST_THREE_DIGITS_SIZE=10;class nt extends $a{constructor(r,i,o){super(r),this.dateCode=o,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=nt.HEADER_SIZE+nt.GTIN_SIZE+nt.WEIGHT_SIZE+nt.DATE_SIZE)throw new W;let r=new oe;return this.encodeCompressedGtin(r,nt.HEADER_SIZE),this.encodeCompressedWeight(r,nt.HEADER_SIZE+nt.GTIN_SIZE,nt.WEIGHT_SIZE),this.encodeCompressedDate(r,nt.HEADER_SIZE+nt.GTIN_SIZE+nt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(i,nt.DATE_SIZE);if(o==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let c=o%32;o/=32;let u=o%12+1;o/=12;let d=o;d/10==0&&r.append("0"),r.append(d),u/10==0&&r.append("0"),r.append(u),c/10==0&&r.append("0"),r.append(c)}addWeightCode(r,i){r.append("("),r.append(this.firstAIdigits),r.append(i/1e5),r.append(")")}checkWeight(r){return r%1e5}}nt.HEADER_SIZE=8,nt.WEIGHT_SIZE=20,nt.DATE_SIZE=16;function N0(S){try{if(S.get(1))return new ni(S);if(!S.get(2))return new qa(S);switch(ti.extractNumericValueFromBitArray(S,1,4)){case 4:return new fw(S);case 5:return new gw(S)}switch(ti.extractNumericValueFromBitArray(S,1,5)){case 12:return new lr(S);case 13:return new en(S)}switch(ti.extractNumericValueFromBitArray(S,1,7)){case 56:return new nt(S,"310","11");case 57:return new nt(S,"320","11");case 58:return new nt(S,"310","13");case 59:return new nt(S,"320","13");case 60:return new nt(S,"310","15");case 61:return new nt(S,"320","15");case 62:return new nt(S,"310","17");case 63:return new nt(S,"320","17")}}catch(r){throw console.log(r),new ir("unknown decoder: "+S)}}class Vr{constructor(r,i,o,c){this.leftchar=r,this.rightchar=i,this.finderpattern=o,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,i){return r instanceof Vr?Vr.equalsOrNull(r.leftchar,i.leftchar)&&Vr.equalsOrNull(r.rightchar,i.rightchar)&&Vr.equalsOrNull(r.finderpattern,i.finderpattern):!1}static equalsOrNull(r,i){return r===null?i===null:Vr.equals(r,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ou{constructor(r,i,o){this.pairs=r,this.rowNumber=i,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,i){return r instanceof ou?this.checkEqualitity(r,i)&&r.wasReversed===i.wasReversed:!1}checkEqualitity(r,i){if(!r||!i)return;let o;return r.forEach((c,u)=>{i.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(o=!0)})}),o}}class Y extends Gt{constructor(r){super(...arguments),this.pairs=new Array(Y.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,i,o){this.pairs.length=0,this.startFromEven=!1;try{return Y.constructResult(this.decodeRow2pairs(r,i))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,Y.constructResult(this.decodeRow2pairs(r,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,i){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,r))}catch(u){if(u instanceof W){if(!this.pairs.length)throw new W;o=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(r,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new W}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return r&&(this.rows=this.rows.reverse()),i}checkRows(r,i){for(let o=i;o<this.rows.length;o++){let c=this.rows[o];this.pairs.length=0;for(let d of r)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!Y.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(r);u.push(c);try{return this.checkRows(u,o+1)}catch(d){this.verbose&&console.log(d)}}throw new W}static isValidSequence(r){for(let i of Y.FINDER_PATTERN_SEQUENCES){if(r.length>i.length)continue;let o=!0;for(let c=0;c<r.length;c++)if(r[c].getFinderPattern().getValue()!=i[c]){o=!1;break}if(o)return!0}return!1}storeRow(r,i){let o=0,c=!1,u=!1;for(;o<this.rows.length;){let d=this.rows[o];if(d.getRowNumber()>r){u=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),o++}u||c||Y.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new ou(this.pairs,r,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,i){for(let o of i)if(o.getPairs().length!==r.length){for(let c of o.getPairs())for(let u of r)if(Vr.equals(c,u))break}}static isPartialRow(r,i){for(let o of i){let c=!0;for(let u of r){let d=!1;for(let f of o.getPairs())if(u.equals(f)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(r){let i=dw.buildBitArray(r),c=N0(i).parseInformation(),u=r[0].getFinderPattern().getResultPoints(),d=r[r.length-1].getFinderPattern().getResultPoints(),f=[u[0],u[1],d[0],d[1]];return new st(c,null,null,f,fe.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),i=r.getLeftChar(),o=r.getRightChar();if(o==null)return!1;let c=o.getChecksumPortion(),u=2;for(let f=1;f<this.pairs.size();++f){let x=this.pairs.get(f);c+=x.getLeftChar().getChecksumPortion(),u++;let y=x.getRightChar();y!=null&&(c+=y.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==i.getValue()}static getNextSecondBar(r,i){let o;return r.get(i)?(o=r.getNextUnset(i),o=r.getNextSet(o)):(o=r.getNextSet(i),o=r.getNextUnset(o)),o}retrieveNextPair(r,i,o){let c=i.length%2==0;this.startFromEven&&(c=!c);let u,d=!0,f=-1;do this.findNextPair(r,i,f),u=this.parseFoundFinderPattern(r,o,c),u==null?f=Y.getNextSecondBar(r,this.startEnd[0]):d=!1;while(d);let x=this.decodeDataCharacter(r,u,c,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new W;let y;try{y=this.decodeDataCharacter(r,u,c,!1)}catch(E){y=null,this.verbose&&console.log(E)}return new Vr(x,y,u,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,i,o){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d;o>=0?d=o:this.isEmptyPair(i)?d=0:d=i[i.length-1].getFinderPattern().getStartEnd()[1];let f=i.length%2!=0;this.startFromEven&&(f=!f);let x=!1;for(;d<u&&(x=!r.get(d),!!x);)d++;let y=0,E=d;for(let _=d;_<u;_++)if(r.get(_)!=x)c[y]++;else{if(y==3){if(f&&Y.reverseCounters(c),Y.isFinderPattern(c)){this.startEnd[0]=E,this.startEnd[1]=_;return}f&&Y.reverseCounters(c),E+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,y--}else y++;c[y]=1,x=!x}throw new W}static reverseCounters(r){let i=r.length;for(let o=0;o<i/2;++o){let c=r[o];r[o]=r[i-o-1],r[i-o-1]=c}}parseFoundFinderPattern(r,i,o){let c,u,d;if(o){let y=this.startEnd[0]-1;for(;y>=0&&!r.get(y);)y--;y++,c=this.startEnd[0]-y,u=y,d=this.startEnd[1]}else u=this.startEnd[0],d=r.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let f=this.getDecodeFinderCounters();P.arraycopy(f,0,f,1,f.length-1),f[0]=c;let x;try{x=this.parseFinderValue(f,Y.FINDER_PATTERNS)}catch{return null}return new Ka(x,[u,d],u,d,i)}decodeDataCharacter(r,i,o,c){let u=this.getDataCharacterCounters();for(let Ge=0;Ge<u.length;Ge++)u[Ge]=0;if(c)Y.recordPatternInReverse(r,i.getStartEnd()[0],u);else{Y.recordPattern(r,i.getStartEnd()[1],u);for(let Ge=0,Bt=u.length-1;Ge<Bt;Ge++,Bt--){let xn=u[Ge];u[Ge]=u[Bt],u[Bt]=xn}}let d=17,f=De.sum(new Int32Array(u))/d,x=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(f-x)/x>.3)throw new W;let y=this.getOddCounts(),E=this.getEvenCounts(),_=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let Ge=0;Ge<u.length;Ge++){let Bt=1*u[Ge]/f,xn=Bt+.5;if(xn<1){if(Bt<.3)throw new W;xn=1}else if(xn>8){if(Bt>8.7)throw new W;xn=8}let ai=Ge/2;Ge&1?(E[ai]=xn,N[ai]=Bt-xn):(y[ai]=xn,_[ai]=Bt-xn)}this.adjustOddEvenCounts(d);let D=4*i.getValue()+(o?0:2)+(c?0:1)-1,B=0,F=0;for(let Ge=y.length-1;Ge>=0;Ge--){if(Y.isNotA1left(i,o,c)){let Bt=Y.WEIGHTS[D][2*Ge];F+=y[Ge]*Bt}B+=y[Ge]}let H=0;for(let Ge=E.length-1;Ge>=0;Ge--)if(Y.isNotA1left(i,o,c)){let Bt=Y.WEIGHTS[D][2*Ge+1];H+=E[Ge]*Bt}let $=F+H;if(B&1||B>13||B<4)throw new W;let te=(13-B)/2,ne=Y.SYMBOL_WIDEST[te],Q=9-ne,Re=or.getRSSvalue(y,ne,!0),Se=or.getRSSvalue(E,Q,!1),un=Y.EVEN_TOTAL_SUBSET[te],Gn=Y.GSUM[te],hn=Re*un+Se+Gn;return new ei(hn,$)}static isNotA1left(r,i,o){return!(r.getValue()==0&&i&&o)}adjustOddEvenCounts(r){let i=De.sum(new Int32Array(this.getOddCounts())),o=De.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;i>13?u=!0:i<4&&(c=!0);let d=!1,f=!1;o>13?f=!0:o<4&&(d=!0);let x=i+o-r,y=(i&1)==1,E=(o&1)==0;if(x==1)if(y){if(E)throw new W;u=!0}else{if(!E)throw new W;f=!0}else if(x==-1)if(y){if(E)throw new W;c=!0}else{if(!E)throw new W;d=!0}else if(x==0){if(y){if(!E)throw new W;i<o?(c=!0,f=!0):(u=!0,d=!0)}else if(E)throw new W}else throw new W;if(c){if(u)throw new W;Y.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&Y.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(f)throw new W;Y.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&Y.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Y.SYMBOL_WIDEST=[7,5,4,3,1],Y.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Y.GSUM=[0,348,1388,2948,3988],Y.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Y.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Y.FINDER_PAT_A=0,Y.FINDER_PAT_B=1,Y.FINDER_PAT_C=2,Y.FINDER_PAT_D=3,Y.FINDER_PAT_E=4,Y.FINDER_PAT_F=5,Y.FINDER_PATTERN_SEQUENCES=[[Y.FINDER_PAT_A,Y.FINDER_PAT_A],[Y.FINDER_PAT_A,Y.FINDER_PAT_B,Y.FINDER_PAT_B],[Y.FINDER_PAT_A,Y.FINDER_PAT_C,Y.FINDER_PAT_B,Y.FINDER_PAT_D],[Y.FINDER_PAT_A,Y.FINDER_PAT_E,Y.FINDER_PAT_B,Y.FINDER_PAT_D,Y.FINDER_PAT_C],[Y.FINDER_PAT_A,Y.FINDER_PAT_E,Y.FINDER_PAT_B,Y.FINDER_PAT_D,Y.FINDER_PAT_D,Y.FINDER_PAT_F],[Y.FINDER_PAT_A,Y.FINDER_PAT_E,Y.FINDER_PAT_B,Y.FINDER_PAT_D,Y.FINDER_PAT_E,Y.FINDER_PAT_F,Y.FINDER_PAT_F],[Y.FINDER_PAT_A,Y.FINDER_PAT_A,Y.FINDER_PAT_B,Y.FINDER_PAT_B,Y.FINDER_PAT_C,Y.FINDER_PAT_C,Y.FINDER_PAT_D,Y.FINDER_PAT_D],[Y.FINDER_PAT_A,Y.FINDER_PAT_A,Y.FINDER_PAT_B,Y.FINDER_PAT_B,Y.FINDER_PAT_C,Y.FINDER_PAT_C,Y.FINDER_PAT_D,Y.FINDER_PAT_E,Y.FINDER_PAT_E],[Y.FINDER_PAT_A,Y.FINDER_PAT_A,Y.FINDER_PAT_B,Y.FINDER_PAT_B,Y.FINDER_PAT_C,Y.FINDER_PAT_C,Y.FINDER_PAT_D,Y.FINDER_PAT_E,Y.FINDER_PAT_F,Y.FINDER_PAT_F],[Y.FINDER_PAT_A,Y.FINDER_PAT_A,Y.FINDER_PAT_B,Y.FINDER_PAT_B,Y.FINDER_PAT_C,Y.FINDER_PAT_D,Y.FINDER_PAT_D,Y.FINDER_PAT_E,Y.FINDER_PAT_E,Y.FINDER_PAT_F,Y.FINDER_PAT_F]],Y.MAX_PAIRS=11;class pw extends ei{constructor(r,i,o){super(r,i),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class dt extends Gt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,i,o){const c=this.decodePair(i,!1,r,o);dt.addOrTally(this.possibleLeftPairs,c),i.reverse();let u=this.decodePair(i,!0,r,o);dt.addOrTally(this.possibleRightPairs,u),i.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&dt.checkChecksum(d,f))return dt.constructResult(d,f)}throw new W}static addOrTally(r,i){if(i==null)return;let o=!1;for(let c of r)if(c.getValue()===i.getValue()){c.incrementCount(),o=!0;break}o||r.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,i){let o=4537077*r.getValue()+i.getValue(),c=new String(o).toString(),u=new oe;for(let y=13-c.length;y>0;y--)u.append("0");u.append(c);let d=0;for(let y=0;y<13;y++){let E=u.charAt(y).charCodeAt(0)-48;d+=y&1?E:3*E}d=10-d%10,d===10&&(d=0),u.append(d.toString());let f=r.getFinderPattern().getResultPoints(),x=i.getFinderPattern().getResultPoints();return new st(u.toString(),null,0,[f[0],f[1],x[0],x[1]],fe.RSS_14,new Date().getTime())}static checkChecksum(r,i){let o=(r.getChecksumPortion()+16*i.getChecksumPortion())%79,c=9*r.getFinderPattern().getValue()+i.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,o===c}decodePair(r,i,o,c){try{let u=this.findFinderPattern(r,i),d=this.parseFoundFinderPattern(r,o,i,u),f=c==null?null:c.get(z.NEED_RESULT_POINT_CALLBACK);if(f!=null){let E=(u[0]+u[1])/2;i&&(E=r.getSize()-1-E),f.foundPossibleResultPoint(new he(E,o))}let x=this.decodeDataCharacter(r,d,!0),y=this.decodeDataCharacter(r,d,!1);return new pw(1597*x.getValue()+y.getValue(),x.getChecksumPortion()+4*y.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(r,i,o){let c=this.getDataCharacterCounters();for(let H=0;H<c.length;H++)c[H]=0;if(o)bt.recordPatternInReverse(r,i.getStartEnd()[0],c);else{bt.recordPattern(r,i.getStartEnd()[1]+1,c);for(let H=0,$=c.length-1;H<$;H++,$--){let te=c[H];c[H]=c[$],c[$]=te}}let u=o?16:15,d=De.sum(new Int32Array(c))/u,f=this.getOddCounts(),x=this.getEvenCounts(),y=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let H=0;H<c.length;H++){let $=c[H]/d,te=Math.floor($+.5);te<1?te=1:te>8&&(te=8);let ne=Math.floor(H/2);H&1?(x[ne]=te,E[ne]=$-te):(f[ne]=te,y[ne]=$-te)}this.adjustOddEvenCounts(o,u);let _=0,N=0;for(let H=f.length-1;H>=0;H--)N*=9,N+=f[H],_+=f[H];let D=0,B=0;for(let H=x.length-1;H>=0;H--)D*=9,D+=x[H],B+=x[H];let F=N+3*D;if(o){if(_&1||_>12||_<4)throw new W;let H=(12-_)/2,$=dt.OUTSIDE_ODD_WIDEST[H],te=9-$,ne=or.getRSSvalue(f,$,!1),Q=or.getRSSvalue(x,te,!0),Re=dt.OUTSIDE_EVEN_TOTAL_SUBSET[H],Se=dt.OUTSIDE_GSUM[H];return new ei(ne*Re+Q+Se,F)}else{if(B&1||B>10||B<4)throw new W;let H=(10-B)/2,$=dt.INSIDE_ODD_WIDEST[H],te=9-$,ne=or.getRSSvalue(f,$,!0),Q=or.getRSSvalue(x,te,!1),Re=dt.INSIDE_ODD_TOTAL_SUBSET[H],Se=dt.INSIDE_GSUM[H];return new ei(Q*Re+ne+Se,F)}}findFinderPattern(r,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let c=r.getSize(),u=!1,d=0;for(;d<c&&(u=!r.get(d),i!==u);)d++;let f=0,x=d;for(let y=d;y<c;y++)if(r.get(y)!==u)o[f]++;else{if(f===3){if(Gt.isFinderPattern(o))return[x,y];x+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,u=!u}throw new W}parseFoundFinderPattern(r,i,o,c){let u=r.get(c[0]),d=c[0]-1;for(;d>=0&&u!==r.get(d);)d--;d++;const f=c[0]-d,x=this.getDecodeFinderCounters(),y=new Int32Array(x.length);P.arraycopy(x,0,y,1,x.length-1),y[0]=f;const E=this.parseFinderValue(y,dt.FINDER_PATTERNS);let _=d,N=c[1];return o&&(_=r.getSize()-1-_,N=r.getSize()-1-N),new Ka(E,[d,c[1]],_,N,i)}adjustOddEvenCounts(r,i){let o=De.sum(new Int32Array(this.getOddCounts())),c=De.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,f=!1,x=!1;r?(o>12?d=!0:o<4&&(u=!0),c>12?x=!0:c<4&&(f=!0)):(o>11?d=!0:o<5&&(u=!0),c>10?x=!0:c<4&&(f=!0));let y=o+c-i,E=(o&1)===(r?1:0),_=(c&1)===1;if(y===1)if(E){if(_)throw new W;d=!0}else{if(!_)throw new W;x=!0}else if(y===-1)if(E){if(_)throw new W;u=!0}else{if(!_)throw new W;f=!0}else if(y===0){if(E){if(!_)throw new W;o<c?(u=!0,x=!0):(d=!0,f=!0)}else if(_)throw new W}else throw new W;if(u){if(d)throw new W;Gt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Gt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(x)throw new W;Gt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Gt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}dt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],dt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],dt.OUTSIDE_GSUM=[0,161,961,2015,2715],dt.INSIDE_GSUM=[0,336,1036,1516],dt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],dt.INSIDE_ODD_WIDEST=[2,4,6,8],dt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ri extends bt{constructor(r,i){super(),this.readers=[],this.verbose=i===!0;const o=r?r.get(z.POSSIBLE_FORMATS):null,c=r&&r.get(z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(fe.EAN_13)||o.includes(fe.UPC_A)||o.includes(fe.EAN_8)||o.includes(fe.UPC_E))&&this.readers.push(new ru(r)),o.includes(fe.CODE_39)&&this.readers.push(new At(c)),o.includes(fe.CODE_128)&&this.readers.push(new ie),o.includes(fe.ITF)&&this.readers.push(new We),o.includes(fe.RSS_14)&&this.readers.push(new dt),o.includes(fe.RSS_EXPANDED)&&this.readers.push(new Y(this.verbose))):(this.readers.push(new ru(r)),this.readers.push(new At),this.readers.push(new ru(r)),this.readers.push(new ie),this.readers.push(new We),this.readers.push(new dt),this.readers.push(new Y(this.verbose)))}decodeRow(r,i,o){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(r,i,o)}catch{}throw new W}reset(){this.readers.forEach(r=>r.reset())}}class mw extends kn{constructor(r=500,i){super(new ri(i),r,i)}}class Ue{constructor(r,i,o){this.ecCodewords=r,this.ecBlocks=[i],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Fe{constructor(r,i){this.count=r,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Oe{constructor(r,i,o,c,u,d){this.versionNumber=r,this.symbolSizeRows=i,this.symbolSizeColumns=o,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=d;let f=0;const x=d.getECCodewords(),y=d.getECBlocks();for(let E of y)f+=E.getCount()*(E.getDataCodewords()+x);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,i){if(r&1||i&1)throw new L;for(let o of Oe.VERSIONS)if(o.symbolSizeRows===r&&o.symbolSizeColumns===i)return o;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new Oe(1,10,10,8,8,new Ue(5,new Fe(1,3))),new Oe(2,12,12,10,10,new Ue(7,new Fe(1,5))),new Oe(3,14,14,12,12,new Ue(10,new Fe(1,8))),new Oe(4,16,16,14,14,new Ue(12,new Fe(1,12))),new Oe(5,18,18,16,16,new Ue(14,new Fe(1,18))),new Oe(6,20,20,18,18,new Ue(18,new Fe(1,22))),new Oe(7,22,22,20,20,new Ue(20,new Fe(1,30))),new Oe(8,24,24,22,22,new Ue(24,new Fe(1,36))),new Oe(9,26,26,24,24,new Ue(28,new Fe(1,44))),new Oe(10,32,32,14,14,new Ue(36,new Fe(1,62))),new Oe(11,36,36,16,16,new Ue(42,new Fe(1,86))),new Oe(12,40,40,18,18,new Ue(48,new Fe(1,114))),new Oe(13,44,44,20,20,new Ue(56,new Fe(1,144))),new Oe(14,48,48,22,22,new Ue(68,new Fe(1,174))),new Oe(15,52,52,24,24,new Ue(42,new Fe(2,102))),new Oe(16,64,64,14,14,new Ue(56,new Fe(2,140))),new Oe(17,72,72,16,16,new Ue(36,new Fe(4,92))),new Oe(18,80,80,18,18,new Ue(48,new Fe(4,114))),new Oe(19,88,88,20,20,new Ue(56,new Fe(4,144))),new Oe(20,96,96,22,22,new Ue(68,new Fe(4,174))),new Oe(21,104,104,24,24,new Ue(56,new Fe(6,136))),new Oe(22,120,120,18,18,new Ue(68,new Fe(6,175))),new Oe(23,132,132,20,20,new Ue(62,new Fe(8,163))),new Oe(24,144,144,22,22,new Ue(62,new Fe(8,156),new Fe(2,155))),new Oe(25,8,18,6,16,new Ue(7,new Fe(1,5))),new Oe(26,8,32,6,14,new Ue(11,new Fe(1,10))),new Oe(27,12,26,10,24,new Ue(14,new Fe(1,16))),new Oe(28,12,36,10,16,new Ue(18,new Fe(1,22))),new Oe(29,16,36,14,16,new Ue(24,new Fe(1,32))),new Oe(30,16,48,14,22,new Ue(28,new Fe(1,49)))]}}Oe.VERSIONS=Oe.buildVersions();class au{constructor(r){const i=r.getHeight();if(i<8||i>144||i&1)throw new L;this.version=au.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new se(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const i=r.getHeight(),o=r.getWidth();return Oe.getVersionForDimensions(i,o)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let i=0,o=4,c=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let f=!1,x=!1,y=!1,E=!1;do if(o===u&&c===0&&!f)r[i++]=this.readCorner1(u,d)&255,o-=2,c+=2,f=!0;else if(o===u-2&&c===0&&d&3&&!x)r[i++]=this.readCorner2(u,d)&255,o-=2,c+=2,x=!0;else if(o===u+4&&c===2&&!(d&7)&&!y)r[i++]=this.readCorner3(u,d)&255,o-=2,c+=2,y=!0;else if(o===u-2&&c===0&&(d&7)===4&&!E)r[i++]=this.readCorner4(u,d)&255,o-=2,c+=2,E=!0;else{do o<u&&c>=0&&!this.readMappingMatrix.get(c,o)&&(r[i++]=this.readUtah(o,c,u,d)&255),o-=2,c+=2;while(o>=0&&c<d);o+=1,c+=3;do o>=0&&c<d&&!this.readMappingMatrix.get(c,o)&&(r[i++]=this.readUtah(o,c,u,d)&255),o+=2,c-=2;while(o<u&&c>=0);o+=3,c+=1}while(o<u||c<d);if(i!==this.version.getTotalCodewords())throw new L;return r}readModule(r,i,o,c){return r<0&&(r+=o,i+=4-(o+4&7)),i<0&&(i+=c,r+=4-(c+4&7)),this.readMappingMatrix.set(i,r),this.mappingBitMatrix.get(i,r)}readUtah(r,i,o,c){let u=0;return this.readModule(r-2,i-2,o,c)&&(u|=1),u<<=1,this.readModule(r-2,i-1,o,c)&&(u|=1),u<<=1,this.readModule(r-1,i-2,o,c)&&(u|=1),u<<=1,this.readModule(r-1,i-1,o,c)&&(u|=1),u<<=1,this.readModule(r-1,i,o,c)&&(u|=1),u<<=1,this.readModule(r,i-2,o,c)&&(u|=1),u<<=1,this.readModule(r,i-1,o,c)&&(u|=1),u<<=1,this.readModule(r,i,o,c)&&(u|=1),u}readCorner1(r,i){let o=0;return this.readModule(r-1,0,r,i)&&(o|=1),o<<=1,this.readModule(r-1,1,r,i)&&(o|=1),o<<=1,this.readModule(r-1,2,r,i)&&(o|=1),o<<=1,this.readModule(0,i-2,r,i)&&(o|=1),o<<=1,this.readModule(0,i-1,r,i)&&(o|=1),o<<=1,this.readModule(1,i-1,r,i)&&(o|=1),o<<=1,this.readModule(2,i-1,r,i)&&(o|=1),o<<=1,this.readModule(3,i-1,r,i)&&(o|=1),o}readCorner2(r,i){let o=0;return this.readModule(r-3,0,r,i)&&(o|=1),o<<=1,this.readModule(r-2,0,r,i)&&(o|=1),o<<=1,this.readModule(r-1,0,r,i)&&(o|=1),o<<=1,this.readModule(0,i-4,r,i)&&(o|=1),o<<=1,this.readModule(0,i-3,r,i)&&(o|=1),o<<=1,this.readModule(0,i-2,r,i)&&(o|=1),o<<=1,this.readModule(0,i-1,r,i)&&(o|=1),o<<=1,this.readModule(1,i-1,r,i)&&(o|=1),o}readCorner3(r,i){let o=0;return this.readModule(r-1,0,r,i)&&(o|=1),o<<=1,this.readModule(r-1,i-1,r,i)&&(o|=1),o<<=1,this.readModule(0,i-3,r,i)&&(o|=1),o<<=1,this.readModule(0,i-2,r,i)&&(o|=1),o<<=1,this.readModule(0,i-1,r,i)&&(o|=1),o<<=1,this.readModule(1,i-3,r,i)&&(o|=1),o<<=1,this.readModule(1,i-2,r,i)&&(o|=1),o<<=1,this.readModule(1,i-1,r,i)&&(o|=1),o}readCorner4(r,i){let o=0;return this.readModule(r-3,0,r,i)&&(o|=1),o<<=1,this.readModule(r-2,0,r,i)&&(o|=1),o<<=1,this.readModule(r-1,0,r,i)&&(o|=1),o<<=1,this.readModule(0,i-2,r,i)&&(o|=1),o<<=1,this.readModule(0,i-1,r,i)&&(o|=1),o<<=1,this.readModule(1,i-1,r,i)&&(o|=1),o<<=1,this.readModule(2,i-1,r,i)&&(o|=1),o<<=1,this.readModule(3,i-1,r,i)&&(o|=1),o}extractDataRegion(r){const i=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(r.getHeight()!==i)throw new b("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=i/c|0,f=o/u|0,x=d*c,y=f*u,E=new se(y,x);for(let _=0;_<d;++_){const N=_*c;for(let D=0;D<f;++D){const B=D*u;for(let F=0;F<c;++F){const H=_*(c+2)+1+F,$=N+F;for(let te=0;te<u;++te){const ne=D*(u+2)+1+te;if(r.get(ne,H)){const Q=B+te;E.set(Q,$)}}}}}return E}}class lu{constructor(r,i){this.numDataCodewords=r,this.codewords=i}static getDataBlocks(r,i){const o=i.getECBlocks();let c=0;const u=o.getECBlocks();for(let F of u)c+=F.getCount();const d=new Array(c);let f=0;for(let F of u)for(let H=0;H<F.getCount();H++){const $=F.getDataCodewords(),te=o.getECCodewords()+$;d[f++]=new lu($,new Uint8Array(te))}const y=d[0].codewords.length-o.getECCodewords(),E=y-1;let _=0;for(let F=0;F<E;F++)for(let H=0;H<f;H++)d[H].codewords[F]=r[_++];const N=i.getVersionNumber()===24,D=N?8:f;for(let F=0;F<D;F++)d[F].codewords[y-1]=r[_++];const B=d[0].codewords.length;for(let F=y;F<B;F++)for(let H=0;H<f;H++){const $=N?(H+8)%f:H,te=N&&$>7?F-1:F;d[$].codewords[te]=r[_++]}if(_!==r.length)throw new b;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class cu{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new b(""+r);let i=0,o=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(o>0){const d=8-o,f=r<d?r:d,x=d-f,y=255>>8-f<<x;i=(u[c]&y)>>x,r-=f,o+=f,o===8&&(o=0,c++)}if(r>0){for(;r>=8;)i=i<<8|u[c]&255,c++,r-=8;if(r>0){const d=8-r,f=255>>d<<d;i=i<<r|(u[c]&f)>>d,o+=r}}return this.bitOffset=o,this.byteOffset=c,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var St;(function(S){S[S.PAD_ENCODE=0]="PAD_ENCODE",S[S.ASCII_ENCODE=1]="ASCII_ENCODE",S[S.C40_ENCODE=2]="C40_ENCODE",S[S.TEXT_ENCODE=3]="TEXT_ENCODE",S[S.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",S[S.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",S[S.BASE256_ENCODE=6]="BASE256_ENCODE"})(St||(St={}));class zr{static decode(r){const i=new cu(r),o=new oe,c=new oe,u=new Array;let d=St.ASCII_ENCODE;do if(d===St.ASCII_ENCODE)d=this.decodeAsciiSegment(i,o,c);else{switch(d){case St.C40_ENCODE:this.decodeC40Segment(i,o);break;case St.TEXT_ENCODE:this.decodeTextSegment(i,o);break;case St.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,o);break;case St.EDIFACT_ENCODE:this.decodeEdifactSegment(i,o);break;case St.BASE256_ENCODE:this.decodeBase256Segment(i,o,u);break;default:throw new L}d=St.ASCII_ENCODE}while(d!==St.PAD_ENCODE&&i.available()>0);return c.length()>0&&o.append(c.toString()),new ho(r,o.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(r,i,o){let c=!1;do{let u=r.readBits(8);if(u===0)throw new L;if(u<=128)return c&&(u+=128),i.append(String.fromCharCode(u-1)),St.ASCII_ENCODE;if(u===129)return St.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&i.append("0"),i.append(""+d)}else switch(u){case 230:return St.C40_ENCODE;case 231:return St.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:i.append("[)>05"),o.insert(0,"");break;case 237:i.append("[)>06"),o.insert(0,"");break;case 238:return St.ANSIX12_ENCODE;case 239:return St.TEXT_ENCODE;case 240:return St.EDIFACT_ENCODE;case 241:break;default:if(u!==254||r.available()!==0)throw new L;break}}while(r.available()>0);return St.ASCII_ENCODE}static decodeC40Segment(r,i){let o=!1;const c=[];let u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),c);for(let f=0;f<3;f++){const x=c[f];switch(u){case 0:if(x<3)u=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const y=this.C40_BASIC_SET_CHARS[x];o?(i.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):i.append(y)}else throw new L;break;case 1:o?(i.append(String.fromCharCode(x+128)),o=!1):i.append(String.fromCharCode(x)),u=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const y=this.C40_SHIFT2_SET_CHARS[x];o?(i.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):i.append(y)}else switch(x){case 27:i.append("");break;case 30:o=!0;break;default:throw new L}u=0;break;case 3:o?(i.append(String.fromCharCode(x+224)),o=!1):i.append(String.fromCharCode(x+96)),u=0;break;default:throw new L}}}while(r.available()>0)}static decodeTextSegment(r,i){let o=!1,c=[],u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),c);for(let f=0;f<3;f++){const x=c[f];switch(u){case 0:if(x<3)u=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const y=this.TEXT_BASIC_SET_CHARS[x];o?(i.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):i.append(y)}else throw new L;break;case 1:o?(i.append(String.fromCharCode(x+128)),o=!1):i.append(String.fromCharCode(x)),u=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const y=this.TEXT_SHIFT2_SET_CHARS[x];o?(i.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):i.append(y)}else switch(x){case 27:i.append("");break;case 30:o=!0;break;default:throw new L}u=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const y=this.TEXT_SHIFT3_SET_CHARS[x];o?(i.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):i.append(y),u=0}else throw new L;break;default:throw new L}}}while(r.available()>0)}static decodeAnsiX12Segment(r,i){const o=[];do{if(r.available()===8)return;const c=r.readBits(8);if(c===254)return;this.parseTwoBytes(c,r.readBits(8),o);for(let u=0;u<3;u++){const d=o[u];switch(d){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(d<14)i.append(String.fromCharCode(d+44));else if(d<40)i.append(String.fromCharCode(d+51));else throw new L;break}}}while(r.available()>0)}static parseTwoBytes(r,i,o){let c=(r<<8)+i-1,u=Math.floor(c/1600);o[0]=u,c-=u*1600,u=Math.floor(c/40),o[1]=u,o[2]=c-u*40}static decodeEdifactSegment(r,i){do{if(r.available()<=16)return;for(let o=0;o<4;o++){let c=r.readBits(6);if(c===31){const u=8-r.getBitOffset();u!==8&&r.readBits(u);return}c&32||(c|=64),i.append(String.fromCharCode(c))}}while(r.available()>0)}static decodeBase256Segment(r,i,o){let c=1+r.getByteOffset();const u=this.unrandomize255State(r.readBits(8),c++);let d;if(u===0?d=r.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(r.readBits(8),c++),d<0)throw new L;const f=new Uint8Array(d);for(let x=0;x<d;x++){if(r.available()<8)throw new L;f[x]=this.unrandomize255State(r.readBits(8),c++)}o.push(f);try{i.append(xe.decode(f,ue.ISO88591))}catch(x){throw new ir("Platform does not support required encoding: "+x.message)}}static unrandomize255State(r,i){const o=149*i%255+1,c=r-o;return c>=0?c:c+256}}zr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],zr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],zr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],zr.TEXT_SHIFT2_SET_CHARS=zr.C40_SHIFT2_SET_CHARS,zr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class xw{constructor(){this.rsDecoder=new go(Le.DATA_MATRIX_FIELD_256)}decode(r){const i=new au(r),o=i.getVersion(),c=i.readCodewords(),u=lu.getDataBlocks(c,o);let d=0;for(let y of u)d+=y.getNumDataCodewords();const f=new Uint8Array(d),x=u.length;for(let y=0;y<x;y++){const E=u[y],_=E.getCodewords(),N=E.getNumDataCodewords();this.correctErrors(_,N);for(let D=0;D<N;D++)f[D*x+y]=_[D]}return zr.decode(f)}correctErrors(r,i){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-i)}catch{throw new T}for(let c=0;c<i;c++)r[c]=o[c]}}class yt{constructor(r){this.image=r,this.rectangleDetector=new wr(this.image)}detect(){const r=this.rectangleDetector.detect();let i=this.detectSolid1(r);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new W;i=this.shiftToModuleCenter(i);const o=i[0],c=i[1],u=i[2],d=i[3];let f=this.transitionsBetween(o,d)+1,x=this.transitionsBetween(u,d)+1;(f&1)===1&&(f+=1),(x&1)===1&&(x+=1),4*f<7*x&&4*x<7*f&&(f=x=Math.max(f,x));let y=yt.sampleGrid(this.image,o,c,u,d,f,x);return new Ga(y,[o,c,u,d])}static shiftPoint(r,i,o){let c=(i.getX()-r.getX())/(o+1),u=(i.getY()-r.getY())/(o+1);return new he(r.getX()+c,r.getY()+u)}static moveAway(r,i,o){let c=r.getX(),u=r.getY();return c<i?c-=1:c+=1,u<o?u-=1:u+=1,new he(c,u)}detectSolid1(r){let i=r[0],o=r[1],c=r[3],u=r[2],d=this.transitionsBetween(i,o),f=this.transitionsBetween(o,c),x=this.transitionsBetween(c,u),y=this.transitionsBetween(u,i),E=d,_=[u,i,o,c];return E>f&&(E=f,_[0]=i,_[1]=o,_[2]=c,_[3]=u),E>x&&(E=x,_[0]=o,_[1]=c,_[2]=u,_[3]=i),E>y&&(_[0]=c,_[1]=u,_[2]=i,_[3]=o),_}detectSolid2(r){let i=r[0],o=r[1],c=r[2],u=r[3],d=this.transitionsBetween(i,u),f=yt.shiftPoint(o,c,(d+1)*4),x=yt.shiftPoint(c,o,(d+1)*4),y=this.transitionsBetween(f,i),E=this.transitionsBetween(x,u);return y<E?(r[0]=i,r[1]=o,r[2]=c,r[3]=u):(r[0]=o,r[1]=c,r[2]=u,r[3]=i),r}correctTopRight(r){let i=r[0],o=r[1],c=r[2],u=r[3],d=this.transitionsBetween(i,u),f=this.transitionsBetween(o,u),x=yt.shiftPoint(i,o,(f+1)*4),y=yt.shiftPoint(c,o,(d+1)*4);d=this.transitionsBetween(x,u),f=this.transitionsBetween(y,u);let E=new he(u.getX()+(c.getX()-o.getX())/(d+1),u.getY()+(c.getY()-o.getY())/(d+1)),_=new he(u.getX()+(i.getX()-o.getX())/(f+1),u.getY()+(i.getY()-o.getY())/(f+1));if(!this.isValid(E))return this.isValid(_)?_:null;if(!this.isValid(_))return E;let N=this.transitionsBetween(x,E)+this.transitionsBetween(y,E),D=this.transitionsBetween(x,_)+this.transitionsBetween(y,_);return N>D?E:_}shiftToModuleCenter(r){let i=r[0],o=r[1],c=r[2],u=r[3],d=this.transitionsBetween(i,u)+1,f=this.transitionsBetween(c,u)+1,x=yt.shiftPoint(i,o,f*4),y=yt.shiftPoint(c,o,d*4);d=this.transitionsBetween(x,u)+1,f=this.transitionsBetween(y,u)+1,(d&1)===1&&(d+=1),(f&1)===1&&(f+=1);let E=(i.getX()+o.getX()+c.getX()+u.getX())/4,_=(i.getY()+o.getY()+c.getY()+u.getY())/4;i=yt.moveAway(i,E,_),o=yt.moveAway(o,E,_),c=yt.moveAway(c,E,_),u=yt.moveAway(u,E,_);let N,D;return x=yt.shiftPoint(i,o,f*4),x=yt.shiftPoint(x,u,d*4),N=yt.shiftPoint(o,i,f*4),N=yt.shiftPoint(N,c,d*4),y=yt.shiftPoint(c,u,f*4),y=yt.shiftPoint(y,o,d*4),D=yt.shiftPoint(u,c,f*4),D=yt.shiftPoint(D,i,d*4),[x,N,y,D]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,i,o,c,u,d,f){return Ur.getInstance().sampleGrid(r,d,f,.5,.5,d-.5,.5,d-.5,f-.5,.5,f-.5,i.getX(),i.getY(),u.getX(),u.getY(),c.getX(),c.getY(),o.getX(),o.getY())}transitionsBetween(r,i){let o=Math.trunc(r.getX()),c=Math.trunc(r.getY()),u=Math.trunc(i.getX()),d=Math.trunc(i.getY()),f=Math.abs(d-c)>Math.abs(u-o);if(f){let F=o;o=c,c=F,F=u,u=d,d=F}let x=Math.abs(u-o),y=Math.abs(d-c),E=-x/2,_=c<d?1:-1,N=o<u?1:-1,D=0,B=this.image.get(f?c:o,f?o:c);for(let F=o,H=c;F!==u;F+=N){let $=this.image.get(f?H:F,f?F:H);if($!==B&&(D++,B=$),E+=y,E>0){if(H===d)break;H+=_,E-=x}}return D}}class Wr{constructor(){this.decoder=new xw}decode(r,i=null){let o,c;if(i!=null&&i.has(z.PURE_BARCODE)){const y=Wr.extractPureBits(r.getBlackMatrix());o=this.decoder.decode(y),c=Wr.NO_POINTS}else{const y=new yt(r.getBlackMatrix()).detect();o=this.decoder.decode(y.getBits()),c=y.getPoints()}const u=o.getRawBytes(),d=new st(o.getText(),u,8*u.length,c,fe.DATA_MATRIX,P.currentTimeMillis()),f=o.getByteSegments();f!=null&&d.putMetadata(kt.BYTE_SEGMENTS,f);const x=o.getECLevel();return x!=null&&d.putMetadata(kt.ERROR_CORRECTION_LEVEL,x),d}reset(){}static extractPureBits(r){const i=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(i==null||o==null)throw new W;const c=this.moduleSize(i,r);let u=i[1];const d=o[1];let f=i[0];const y=(o[0]-f+1)/c,E=(d-u+1)/c;if(y<=0||E<=0)throw new W;const _=c/2;u+=_,f+=_;const N=new se(y,E);for(let D=0;D<E;D++){const B=u+D*c;for(let F=0;F<y;F++)r.get(f+F*c,B)&&N.set(F,D)}return N}static moduleSize(r,i){const o=i.getWidth();let c=r[0];const u=r[1];for(;c<o&&i.get(c,u);)c++;if(c===o)throw new W;const d=c-r[0];if(d===0)throw new W;return d}}Wr.NO_POINTS=[];class yw extends kn{constructor(r=500){super(new Wr,r)}}var si;(function(S){S[S.L=0]="L",S[S.M=1]="M",S[S.Q=2]="Q",S[S.H=3]="H"})(si||(si={}));class Ke{constructor(r,i,o){this.value=r,this.stringValue=i,this.bits=o,Ke.FOR_BITS.set(o,this),Ke.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return Ke.L;case"M":return Ke.M;case"Q":return Ke.Q;case"H":return Ke.H;default:throw new v(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof Ke))return!1;const i=r;return this.value===i.value}static forBits(r){if(r<0||r>=Ke.FOR_BITS.size)throw new b;return Ke.FOR_BITS.get(r)}}Ke.FOR_BITS=new Map,Ke.FOR_VALUE=new Map,Ke.L=new Ke(si.L,"L",1),Ke.M=new Ke(si.M,"M",0),Ke.Q=new Ke(si.Q,"Q",3),Ke.H=new Ke(si.H,"H",2);class Xt{constructor(r){this.errorCorrectionLevel=Ke.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,i){return A.bitCount(r^i)}static decodeFormatInformation(r,i){const o=Xt.doDecodeFormatInformation(r,i);return o!==null?o:Xt.doDecodeFormatInformation(r^Xt.FORMAT_INFO_MASK_QR,i^Xt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,i){let o=Number.MAX_SAFE_INTEGER,c=0;for(const u of Xt.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===r||d===i)return new Xt(u[1]);let f=Xt.numBitsDiffering(r,d);f<o&&(c=u[1],o=f),r!==i&&(f=Xt.numBitsDiffering(i,d),f<o&&(c=u[1],o=f))}return o<=3?new Xt(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Xt))return!1;const i=r;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}Xt.FORMAT_INFO_MASK_QR=21522,Xt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class G{constructor(r,...i){this.ecCodewordsPerBlock=r,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const i=this.ecBlocks;for(const o of i)r+=o.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class O{constructor(r,i){this.count=r,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class me{constructor(r,i,...o){this.versionNumber=r,this.alignmentPatternCenters=i,this.ecBlocks=o;let c=0;const u=o[0].getECCodewordsPerBlock(),d=o[0].getECBlocks();for(const f of d)c+=f.getCount()*(f.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new L;try{return this.getVersionForNumber((r-17)/4)}catch{throw new L}}static getVersionForNumber(r){if(r<1||r>40)throw new b;return me.VERSIONS[r-1]}static decodeVersionInformation(r){let i=Number.MAX_SAFE_INTEGER,o=0;for(let c=0;c<me.VERSION_DECODE_INFO.length;c++){const u=me.VERSION_DECODE_INFO[c];if(u===r)return me.getVersionForNumber(c+7);const d=Xt.numBitsDiffering(r,u);d<i&&(o=c+7,i=d)}return i<=3?me.getVersionForNumber(o):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),i=new se(r);i.setRegion(0,0,9,9),i.setRegion(r-8,0,8,9),i.setRegion(0,r-8,9,8);const o=this.alignmentPatternCenters.length;for(let c=0;c<o;c++){const u=this.alignmentPatternCenters[c]-2;for(let d=0;d<o;d++)c===0&&(d===0||d===o-1)||c===o-1&&d===0||i.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return i.setRegion(6,9,1,r-17),i.setRegion(9,6,r-17,1),this.versionNumber>6&&(i.setRegion(r-11,0,3,6),i.setRegion(0,r-11,6,3)),i}toString(){return""+this.versionNumber}}me.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),me.VERSIONS=[new me(1,new Int32Array(0),new G(7,new O(1,19)),new G(10,new O(1,16)),new G(13,new O(1,13)),new G(17,new O(1,9))),new me(2,Int32Array.from([6,18]),new G(10,new O(1,34)),new G(16,new O(1,28)),new G(22,new O(1,22)),new G(28,new O(1,16))),new me(3,Int32Array.from([6,22]),new G(15,new O(1,55)),new G(26,new O(1,44)),new G(18,new O(2,17)),new G(22,new O(2,13))),new me(4,Int32Array.from([6,26]),new G(20,new O(1,80)),new G(18,new O(2,32)),new G(26,new O(2,24)),new G(16,new O(4,9))),new me(5,Int32Array.from([6,30]),new G(26,new O(1,108)),new G(24,new O(2,43)),new G(18,new O(2,15),new O(2,16)),new G(22,new O(2,11),new O(2,12))),new me(6,Int32Array.from([6,34]),new G(18,new O(2,68)),new G(16,new O(4,27)),new G(24,new O(4,19)),new G(28,new O(4,15))),new me(7,Int32Array.from([6,22,38]),new G(20,new O(2,78)),new G(18,new O(4,31)),new G(18,new O(2,14),new O(4,15)),new G(26,new O(4,13),new O(1,14))),new me(8,Int32Array.from([6,24,42]),new G(24,new O(2,97)),new G(22,new O(2,38),new O(2,39)),new G(22,new O(4,18),new O(2,19)),new G(26,new O(4,14),new O(2,15))),new me(9,Int32Array.from([6,26,46]),new G(30,new O(2,116)),new G(22,new O(3,36),new O(2,37)),new G(20,new O(4,16),new O(4,17)),new G(24,new O(4,12),new O(4,13))),new me(10,Int32Array.from([6,28,50]),new G(18,new O(2,68),new O(2,69)),new G(26,new O(4,43),new O(1,44)),new G(24,new O(6,19),new O(2,20)),new G(28,new O(6,15),new O(2,16))),new me(11,Int32Array.from([6,30,54]),new G(20,new O(4,81)),new G(30,new O(1,50),new O(4,51)),new G(28,new O(4,22),new O(4,23)),new G(24,new O(3,12),new O(8,13))),new me(12,Int32Array.from([6,32,58]),new G(24,new O(2,92),new O(2,93)),new G(22,new O(6,36),new O(2,37)),new G(26,new O(4,20),new O(6,21)),new G(28,new O(7,14),new O(4,15))),new me(13,Int32Array.from([6,34,62]),new G(26,new O(4,107)),new G(22,new O(8,37),new O(1,38)),new G(24,new O(8,20),new O(4,21)),new G(22,new O(12,11),new O(4,12))),new me(14,Int32Array.from([6,26,46,66]),new G(30,new O(3,115),new O(1,116)),new G(24,new O(4,40),new O(5,41)),new G(20,new O(11,16),new O(5,17)),new G(24,new O(11,12),new O(5,13))),new me(15,Int32Array.from([6,26,48,70]),new G(22,new O(5,87),new O(1,88)),new G(24,new O(5,41),new O(5,42)),new G(30,new O(5,24),new O(7,25)),new G(24,new O(11,12),new O(7,13))),new me(16,Int32Array.from([6,26,50,74]),new G(24,new O(5,98),new O(1,99)),new G(28,new O(7,45),new O(3,46)),new G(24,new O(15,19),new O(2,20)),new G(30,new O(3,15),new O(13,16))),new me(17,Int32Array.from([6,30,54,78]),new G(28,new O(1,107),new O(5,108)),new G(28,new O(10,46),new O(1,47)),new G(28,new O(1,22),new O(15,23)),new G(28,new O(2,14),new O(17,15))),new me(18,Int32Array.from([6,30,56,82]),new G(30,new O(5,120),new O(1,121)),new G(26,new O(9,43),new O(4,44)),new G(28,new O(17,22),new O(1,23)),new G(28,new O(2,14),new O(19,15))),new me(19,Int32Array.from([6,30,58,86]),new G(28,new O(3,113),new O(4,114)),new G(26,new O(3,44),new O(11,45)),new G(26,new O(17,21),new O(4,22)),new G(26,new O(9,13),new O(16,14))),new me(20,Int32Array.from([6,34,62,90]),new G(28,new O(3,107),new O(5,108)),new G(26,new O(3,41),new O(13,42)),new G(30,new O(15,24),new O(5,25)),new G(28,new O(15,15),new O(10,16))),new me(21,Int32Array.from([6,28,50,72,94]),new G(28,new O(4,116),new O(4,117)),new G(26,new O(17,42)),new G(28,new O(17,22),new O(6,23)),new G(30,new O(19,16),new O(6,17))),new me(22,Int32Array.from([6,26,50,74,98]),new G(28,new O(2,111),new O(7,112)),new G(28,new O(17,46)),new G(30,new O(7,24),new O(16,25)),new G(24,new O(34,13))),new me(23,Int32Array.from([6,30,54,78,102]),new G(30,new O(4,121),new O(5,122)),new G(28,new O(4,47),new O(14,48)),new G(30,new O(11,24),new O(14,25)),new G(30,new O(16,15),new O(14,16))),new me(24,Int32Array.from([6,28,54,80,106]),new G(30,new O(6,117),new O(4,118)),new G(28,new O(6,45),new O(14,46)),new G(30,new O(11,24),new O(16,25)),new G(30,new O(30,16),new O(2,17))),new me(25,Int32Array.from([6,32,58,84,110]),new G(26,new O(8,106),new O(4,107)),new G(28,new O(8,47),new O(13,48)),new G(30,new O(7,24),new O(22,25)),new G(30,new O(22,15),new O(13,16))),new me(26,Int32Array.from([6,30,58,86,114]),new G(28,new O(10,114),new O(2,115)),new G(28,new O(19,46),new O(4,47)),new G(28,new O(28,22),new O(6,23)),new G(30,new O(33,16),new O(4,17))),new me(27,Int32Array.from([6,34,62,90,118]),new G(30,new O(8,122),new O(4,123)),new G(28,new O(22,45),new O(3,46)),new G(30,new O(8,23),new O(26,24)),new G(30,new O(12,15),new O(28,16))),new me(28,Int32Array.from([6,26,50,74,98,122]),new G(30,new O(3,117),new O(10,118)),new G(28,new O(3,45),new O(23,46)),new G(30,new O(4,24),new O(31,25)),new G(30,new O(11,15),new O(31,16))),new me(29,Int32Array.from([6,30,54,78,102,126]),new G(30,new O(7,116),new O(7,117)),new G(28,new O(21,45),new O(7,46)),new G(30,new O(1,23),new O(37,24)),new G(30,new O(19,15),new O(26,16))),new me(30,Int32Array.from([6,26,52,78,104,130]),new G(30,new O(5,115),new O(10,116)),new G(28,new O(19,47),new O(10,48)),new G(30,new O(15,24),new O(25,25)),new G(30,new O(23,15),new O(25,16))),new me(31,Int32Array.from([6,30,56,82,108,134]),new G(30,new O(13,115),new O(3,116)),new G(28,new O(2,46),new O(29,47)),new G(30,new O(42,24),new O(1,25)),new G(30,new O(23,15),new O(28,16))),new me(32,Int32Array.from([6,34,60,86,112,138]),new G(30,new O(17,115)),new G(28,new O(10,46),new O(23,47)),new G(30,new O(10,24),new O(35,25)),new G(30,new O(19,15),new O(35,16))),new me(33,Int32Array.from([6,30,58,86,114,142]),new G(30,new O(17,115),new O(1,116)),new G(28,new O(14,46),new O(21,47)),new G(30,new O(29,24),new O(19,25)),new G(30,new O(11,15),new O(46,16))),new me(34,Int32Array.from([6,34,62,90,118,146]),new G(30,new O(13,115),new O(6,116)),new G(28,new O(14,46),new O(23,47)),new G(30,new O(44,24),new O(7,25)),new G(30,new O(59,16),new O(1,17))),new me(35,Int32Array.from([6,30,54,78,102,126,150]),new G(30,new O(12,121),new O(7,122)),new G(28,new O(12,47),new O(26,48)),new G(30,new O(39,24),new O(14,25)),new G(30,new O(22,15),new O(41,16))),new me(36,Int32Array.from([6,24,50,76,102,128,154]),new G(30,new O(6,121),new O(14,122)),new G(28,new O(6,47),new O(34,48)),new G(30,new O(46,24),new O(10,25)),new G(30,new O(2,15),new O(64,16))),new me(37,Int32Array.from([6,28,54,80,106,132,158]),new G(30,new O(17,122),new O(4,123)),new G(28,new O(29,46),new O(14,47)),new G(30,new O(49,24),new O(10,25)),new G(30,new O(24,15),new O(46,16))),new me(38,Int32Array.from([6,32,58,84,110,136,162]),new G(30,new O(4,122),new O(18,123)),new G(28,new O(13,46),new O(32,47)),new G(30,new O(48,24),new O(14,25)),new G(30,new O(42,15),new O(32,16))),new me(39,Int32Array.from([6,26,54,82,110,138,166]),new G(30,new O(20,117),new O(4,118)),new G(28,new O(40,47),new O(7,48)),new G(30,new O(43,24),new O(22,25)),new G(30,new O(10,15),new O(67,16))),new me(40,Int32Array.from([6,30,58,86,114,142,170]),new G(30,new O(19,118),new O(6,119)),new G(28,new O(18,47),new O(31,48)),new G(30,new O(34,24),new O(34,25)),new G(30,new O(20,15),new O(61,16)))];var Rt;(function(S){S[S.DATA_MASK_000=0]="DATA_MASK_000",S[S.DATA_MASK_001=1]="DATA_MASK_001",S[S.DATA_MASK_010=2]="DATA_MASK_010",S[S.DATA_MASK_011=3]="DATA_MASK_011",S[S.DATA_MASK_100=4]="DATA_MASK_100",S[S.DATA_MASK_101=5]="DATA_MASK_101",S[S.DATA_MASK_110=6]="DATA_MASK_110",S[S.DATA_MASK_111=7]="DATA_MASK_111"})(Rt||(Rt={}));class On{constructor(r,i){this.value=r,this.isMasked=i}unmaskBitMatrix(r,i){for(let o=0;o<i;o++)for(let c=0;c<i;c++)this.isMasked(o,c)&&r.flip(c,o)}}On.values=new Map([[Rt.DATA_MASK_000,new On(Rt.DATA_MASK_000,(S,r)=>(S+r&1)===0)],[Rt.DATA_MASK_001,new On(Rt.DATA_MASK_001,(S,r)=>(S&1)===0)],[Rt.DATA_MASK_010,new On(Rt.DATA_MASK_010,(S,r)=>r%3===0)],[Rt.DATA_MASK_011,new On(Rt.DATA_MASK_011,(S,r)=>(S+r)%3===0)],[Rt.DATA_MASK_100,new On(Rt.DATA_MASK_100,(S,r)=>(Math.floor(S/2)+Math.floor(r/3)&1)===0)],[Rt.DATA_MASK_101,new On(Rt.DATA_MASK_101,(S,r)=>S*r%6===0)],[Rt.DATA_MASK_110,new On(Rt.DATA_MASK_110,(S,r)=>S*r%6<3)],[Rt.DATA_MASK_111,new On(Rt.DATA_MASK_111,(S,r)=>(S+r+S*r%3&1)===0)]]);class ww{constructor(r){const i=r.getHeight();if(i<21||(i&3)!==1)throw new L;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let u=0;u<6;u++)r=this.copyBit(u,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let u=5;u>=0;u--)r=this.copyBit(8,u,r);const i=this.bitMatrix.getHeight();let o=0;const c=i-7;for(let u=i-1;u>=c;u--)o=this.copyBit(8,u,o);for(let u=i-8;u<i;u++)o=this.copyBit(u,8,o);if(this.parsedFormatInfo=Xt.decodeFormatInformation(r,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),i=Math.floor((r-17)/4);if(i<=6)return me.getVersionForNumber(i);let o=0;const c=r-11;for(let d=5;d>=0;d--)for(let f=r-9;f>=c;f--)o=this.copyBit(f,d,o);let u=me.decodeVersionInformation(o);if(u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;o=0;for(let d=5;d>=0;d--)for(let f=r-9;f>=c;f--)o=this.copyBit(d,f,o);if(u=me.decodeVersionInformation(o),u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;throw new L}copyBit(r,i,o){return(this.isMirror?this.bitMatrix.get(i,r):this.bitMatrix.get(r,i))?o<<1|1:o<<1}readCodewords(){const r=this.readFormatInformation(),i=this.readVersion(),o=On.values.get(r.getDataMask()),c=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,c);const u=i.buildFunctionPattern();let d=!0;const f=new Uint8Array(i.getTotalCodewords());let x=0,y=0,E=0;for(let _=c-1;_>0;_-=2){_===6&&_--;for(let N=0;N<c;N++){const D=d?c-1-N:N;for(let B=0;B<2;B++)u.get(_-B,D)||(E++,y<<=1,this.bitMatrix.get(_-B,D)&&(y|=1),E===8&&(f[x++]=y,E=0,y=0))}d=!d}if(x!==i.getTotalCodewords())throw new L;return f}remask(){if(this.parsedFormatInfo===null)return;const r=On.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let i=0,o=r.getWidth();i<o;i++)for(let c=i+1,u=r.getHeight();c<u;c++)r.get(i,c)!==r.get(c,i)&&(r.flip(c,i),r.flip(i,c))}}class uu{constructor(r,i){this.numDataCodewords=r,this.codewords=i}static getDataBlocks(r,i,o){if(r.length!==i.getTotalCodewords())throw new b;const c=i.getECBlocksForLevel(o);let u=0;const d=c.getECBlocks();for(const B of d)u+=B.getCount();const f=new Array(u);let x=0;for(const B of d)for(let F=0;F<B.getCount();F++){const H=B.getDataCodewords(),$=c.getECCodewordsPerBlock()+H;f[x++]=new uu(H,new Uint8Array($))}const y=f[0].codewords.length;let E=f.length-1;for(;E>=0&&f[E].codewords.length!==y;)E--;E++;const _=y-c.getECCodewordsPerBlock();let N=0;for(let B=0;B<_;B++)for(let F=0;F<x;F++)f[F].codewords[B]=r[N++];for(let B=E;B<x;B++)f[B].codewords[_]=r[N++];const D=f[0].codewords.length;for(let B=_;B<D;B++)for(let F=0;F<x;F++){const H=F<E?B:B+1;f[F].codewords[H]=r[N++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Pn;(function(S){S[S.TERMINATOR=0]="TERMINATOR",S[S.NUMERIC=1]="NUMERIC",S[S.ALPHANUMERIC=2]="ALPHANUMERIC",S[S.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",S[S.BYTE=4]="BYTE",S[S.ECI=5]="ECI",S[S.KANJI=6]="KANJI",S[S.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",S[S.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",S[S.HANZI=9]="HANZI"})(Pn||(Pn={}));class we{constructor(r,i,o,c){this.value=r,this.stringValue=i,this.characterCountBitsForVersions=o,this.bits=c,we.FOR_BITS.set(c,this),we.FOR_VALUE.set(r,this)}static forBits(r){const i=we.FOR_BITS.get(r);if(i===void 0)throw new b;return i}getCharacterCountBits(r){const i=r.getVersionNumber();let o;return i<=9?o=0:i<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof we))return!1;const i=r;return this.value===i.value}toString(){return this.stringValue}}we.FOR_BITS=new Map,we.FOR_VALUE=new Map,we.TERMINATOR=new we(Pn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),we.NUMERIC=new we(Pn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),we.ALPHANUMERIC=new we(Pn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),we.STRUCTURED_APPEND=new we(Pn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),we.BYTE=new we(Pn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),we.ECI=new we(Pn.ECI,"ECI",Int32Array.from([0,0,0]),7),we.KANJI=new we(Pn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),we.FNC1_FIRST_POSITION=new we(Pn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),we.FNC1_SECOND_POSITION=new we(Pn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),we.HANZI=new we(Pn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class it{static decode(r,i,o,c){const u=new cu(r);let d=new oe;const f=new Array;let x=-1,y=-1;try{let E=null,_=!1,N;do{if(u.available()<4)N=we.TERMINATOR;else{const D=u.readBits(4);N=we.forBits(D)}switch(N){case we.TERMINATOR:break;case we.FNC1_FIRST_POSITION:case we.FNC1_SECOND_POSITION:_=!0;break;case we.STRUCTURED_APPEND:if(u.available()<16)throw new L;x=u.readBits(8),y=u.readBits(8);break;case we.ECI:const D=it.parseECIValue(u);if(E=K.getCharacterSetECIByValue(D),E===null)throw new L;break;case we.HANZI:const B=u.readBits(4),F=u.readBits(N.getCharacterCountBits(i));B===it.GB2312_SUBSET&&it.decodeHanziSegment(u,d,F);break;default:const H=u.readBits(N.getCharacterCountBits(i));switch(N){case we.NUMERIC:it.decodeNumericSegment(u,d,H);break;case we.ALPHANUMERIC:it.decodeAlphanumericSegment(u,d,H,_);break;case we.BYTE:it.decodeByteSegment(u,d,H,E,f,c);break;case we.KANJI:it.decodeKanjiSegment(u,d,H);break;default:throw new L}break}}while(N!==we.TERMINATOR)}catch{throw new L}return new ho(r,d.toString(),f.length===0?null:f,o===null?null:o.toString(),x,y)}static decodeHanziSegment(r,i,o){if(o*13>r.available())throw new L;const c=new Uint8Array(2*o);let u=0;for(;o>0;){const d=r.readBits(13);let f=d/96<<8&4294967295|d%96;f<959?f+=41377:f+=42657,c[u]=f>>8&255,c[u+1]=f&255,u+=2,o--}try{i.append(xe.decode(c,ue.GB2312))}catch(d){throw new L(d)}}static decodeKanjiSegment(r,i,o){if(o*13>r.available())throw new L;const c=new Uint8Array(2*o);let u=0;for(;o>0;){const d=r.readBits(13);let f=d/192<<8&4294967295|d%192;f<7936?f+=33088:f+=49472,c[u]=f>>8,c[u+1]=f,u+=2,o--}try{i.append(xe.decode(c,ue.SHIFT_JIS))}catch(d){throw new L(d)}}static decodeByteSegment(r,i,o,c,u,d){if(8*o>r.available())throw new L;const f=new Uint8Array(o);for(let y=0;y<o;y++)f[y]=r.readBits(8);let x;c===null?x=ue.guessEncoding(f,d):x=c.getName();try{i.append(xe.decode(f,x))}catch(y){throw new L(y)}u.push(f)}static toAlphaNumericChar(r){if(r>=it.ALPHANUMERIC_CHARS.length)throw new L;return it.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,i,o,c){const u=i.length();for(;o>1;){if(r.available()<11)throw new L;const d=r.readBits(11);i.append(it.toAlphaNumericChar(Math.floor(d/45))),i.append(it.toAlphaNumericChar(d%45)),o-=2}if(o===1){if(r.available()<6)throw new L;i.append(it.toAlphaNumericChar(r.readBits(6)))}if(c)for(let d=u;d<i.length();d++)i.charAt(d)==="%"&&(d<i.length()-1&&i.charAt(d+1)==="%"?i.deleteCharAt(d+1):i.setCharAt(d,""))}static decodeNumericSegment(r,i,o){for(;o>=3;){if(r.available()<10)throw new L;const c=r.readBits(10);if(c>=1e3)throw new L;i.append(it.toAlphaNumericChar(Math.floor(c/100))),i.append(it.toAlphaNumericChar(Math.floor(c/10)%10)),i.append(it.toAlphaNumericChar(c%10)),o-=3}if(o===2){if(r.available()<7)throw new L;const c=r.readBits(7);if(c>=100)throw new L;i.append(it.toAlphaNumericChar(Math.floor(c/10))),i.append(it.toAlphaNumericChar(c%10))}else if(o===1){if(r.available()<4)throw new L;const c=r.readBits(4);if(c>=10)throw new L;i.append(it.toAlphaNumericChar(c))}}static parseECIValue(r){const i=r.readBits(8);if(!(i&128))return i&127;if((i&192)===128){const o=r.readBits(8);return(i&63)<<8&4294967295|o}if((i&224)===192){const o=r.readBits(16);return(i&31)<<16&4294967295|o}throw new L}}it.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",it.GB2312_SUBSET=1;class k0{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const i=r[0];r[0]=r[2],r[2]=i}}class vw{constructor(){this.rsDecoder=new go(Le.QR_CODE_FIELD_256)}decodeBooleanArray(r,i){return this.decodeBitMatrix(se.parseFromBooleanArray(r),i)}decodeBitMatrix(r,i){const o=new ww(r);let c=null;try{return this.decodeBitMatrixParser(o,i)}catch(u){c=u}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const u=this.decodeBitMatrixParser(o,i);return u.setOther(new k0(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(r,i){const o=r.readVersion(),c=r.readFormatInformation().getErrorCorrectionLevel(),u=r.readCodewords(),d=uu.getDataBlocks(u,o,c);let f=0;for(const E of d)f+=E.getNumDataCodewords();const x=new Uint8Array(f);let y=0;for(const E of d){const _=E.getCodewords(),N=E.getNumDataCodewords();this.correctErrors(_,N);for(let D=0;D<N;D++)x[y++]=_[D]}return it.decode(x,o,c,i)}correctErrors(r,i){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-i)}catch{throw new T}for(let c=0;c<i;c++)r[c]=o[c]}}class hu extends he{constructor(r,i,o){super(r,i),this.estimatedModuleSize=o}aboutEquals(r,i,o){if(Math.abs(i-this.getY())<=r&&Math.abs(o-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,i,o){const c=(this.getX()+i)/2,u=(this.getY()+r)/2,d=(this.estimatedModuleSize+o)/2;return new hu(c,u,d)}}class Ya{constructor(r,i,o,c,u,d,f){this.image=r,this.startX=i,this.startY=o,this.width=c,this.height=u,this.moduleSize=d,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,i=this.height,o=this.width,c=r+o,u=this.startY+i/2,d=new Int32Array(3),f=this.image;for(let x=0;x<i;x++){const y=u+(x&1?-Math.floor((x+1)/2):Math.floor((x+1)/2));d[0]=0,d[1]=0,d[2]=0;let E=r;for(;E<c&&!f.get(E,y);)E++;let _=0;for(;E<c;){if(f.get(E,y))if(_===1)d[1]++;else if(_===2){if(this.foundPatternCross(d)){const N=this.handlePossibleCenter(d,y,E);if(N!==null)return N}d[0]=d[2],d[1]=1,d[2]=0,_=1}else d[++_]++;else _===1&&_++,d[_]++;E++}if(this.foundPatternCross(d)){const N=this.handlePossibleCenter(d,y,c);if(N!==null)return N}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new W}static centerFromEnd(r,i){return i-r[2]-r[1]/2}foundPatternCross(r){const i=this.moduleSize,o=i/2;for(let c=0;c<3;c++)if(Math.abs(i-r[c])>=o)return!1;return!0}crossCheckVertical(r,i,o,c){const u=this.image,d=u.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let x=r;for(;x>=0&&u.get(i,x)&&f[1]<=o;)f[1]++,x--;if(x<0||f[1]>o)return NaN;for(;x>=0&&!u.get(i,x)&&f[0]<=o;)f[0]++,x--;if(f[0]>o)return NaN;for(x=r+1;x<d&&u.get(i,x)&&f[1]<=o;)f[1]++,x++;if(x===d||f[1]>o)return NaN;for(;x<d&&!u.get(i,x)&&f[2]<=o;)f[2]++,x++;if(f[2]>o)return NaN;const y=f[0]+f[1]+f[2];return 5*Math.abs(y-c)>=2*c?NaN:this.foundPatternCross(f)?Ya.centerFromEnd(f,x):NaN}handlePossibleCenter(r,i,o){const c=r[0]+r[1]+r[2],u=Ya.centerFromEnd(r,o),d=this.crossCheckVertical(i,u,2*r[1],c);if(!isNaN(d)){const f=(r[0]+r[1]+r[2])/3;for(const y of this.possibleCenters)if(y.aboutEquals(f,d,u))return y.combineEstimate(d,u,f);const x=new hu(u,d,f);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class du extends he{constructor(r,i,o,c){super(r,i),this.estimatedModuleSize=o,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,i,o){if(Math.abs(i-this.getY())<=r&&Math.abs(o-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,i,o){const c=this.count+1,u=(this.count*this.getX()+i)/c,d=(this.count*this.getY()+r)/c,f=(this.count*this.estimatedModuleSize+o)/c;return new du(u,d,f,c)}}class bw{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ot{constructor(r,i){this.image=r,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const i=r!=null&&r.get(z.TRY_HARDER)!==void 0,o=r!=null&&r.get(z.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),d=c.getWidth();let f=Math.floor(3*u/(4*Ot.MAX_MODULES));(f<Ot.MIN_SKIP||i)&&(f=Ot.MIN_SKIP);let x=!1;const y=new Int32Array(5);for(let _=f-1;_<u&&!x;_+=f){y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0;let N=0;for(let D=0;D<d;D++)if(c.get(D,_))(N&1)===1&&N++,y[N]++;else if(N&1)y[N]++;else if(N===4)if(Ot.foundPatternCross(y)){if(this.handlePossibleCenter(y,_,D,o)===!0)if(f=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const F=this.findRowSkip();F>y[2]&&(_+=F-y[2]-f,D=d-1)}else{y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,N=3;continue}N=0,y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0}else y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,N=3;else y[++N]++;Ot.foundPatternCross(y)&&this.handlePossibleCenter(y,_,d,o)===!0&&(f=y[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return he.orderBestPatterns(E),new bw(E)}static centerFromEnd(r,i){return i-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let i=0;for(let u=0;u<5;u++){const d=r[u];if(d===0)return!1;i+=d}if(i<7)return!1;const o=i/7,c=o/2;return Math.abs(o-r[0])<c&&Math.abs(o-r[1])<c&&Math.abs(3*o-r[2])<3*c&&Math.abs(o-r[3])<c&&Math.abs(o-r[4])<c}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,i,o,c){const u=this.getCrossCheckStateCount();let d=0;const f=this.image;for(;r>=d&&i>=d&&f.get(i-d,r-d);)u[2]++,d++;if(r<d||i<d)return!1;for(;r>=d&&i>=d&&!f.get(i-d,r-d)&&u[1]<=o;)u[1]++,d++;if(r<d||i<d||u[1]>o)return!1;for(;r>=d&&i>=d&&f.get(i-d,r-d)&&u[0]<=o;)u[0]++,d++;if(u[0]>o)return!1;const x=f.getHeight(),y=f.getWidth();for(d=1;r+d<x&&i+d<y&&f.get(i+d,r+d);)u[2]++,d++;if(r+d>=x||i+d>=y)return!1;for(;r+d<x&&i+d<y&&!f.get(i+d,r+d)&&u[3]<o;)u[3]++,d++;if(r+d>=x||i+d>=y||u[3]>=o)return!1;for(;r+d<x&&i+d<y&&f.get(i+d,r+d)&&u[4]<o;)u[4]++,d++;if(u[4]>=o)return!1;const E=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(E-c)<2*c&&Ot.foundPatternCross(u)}crossCheckVertical(r,i,o,c){const u=this.image,d=u.getHeight(),f=this.getCrossCheckStateCount();let x=r;for(;x>=0&&u.get(i,x);)f[2]++,x--;if(x<0)return NaN;for(;x>=0&&!u.get(i,x)&&f[1]<=o;)f[1]++,x--;if(x<0||f[1]>o)return NaN;for(;x>=0&&u.get(i,x)&&f[0]<=o;)f[0]++,x--;if(f[0]>o)return NaN;for(x=r+1;x<d&&u.get(i,x);)f[2]++,x++;if(x===d)return NaN;for(;x<d&&!u.get(i,x)&&f[3]<o;)f[3]++,x++;if(x===d||f[3]>=o)return NaN;for(;x<d&&u.get(i,x)&&f[4]<o;)f[4]++,x++;if(f[4]>=o)return NaN;const y=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(y-c)>=2*c?NaN:Ot.foundPatternCross(f)?Ot.centerFromEnd(f,x):NaN}crossCheckHorizontal(r,i,o,c){const u=this.image,d=u.getWidth(),f=this.getCrossCheckStateCount();let x=r;for(;x>=0&&u.get(x,i);)f[2]++,x--;if(x<0)return NaN;for(;x>=0&&!u.get(x,i)&&f[1]<=o;)f[1]++,x--;if(x<0||f[1]>o)return NaN;for(;x>=0&&u.get(x,i)&&f[0]<=o;)f[0]++,x--;if(f[0]>o)return NaN;for(x=r+1;x<d&&u.get(x,i);)f[2]++,x++;if(x===d)return NaN;for(;x<d&&!u.get(x,i)&&f[3]<o;)f[3]++,x++;if(x===d||f[3]>=o)return NaN;for(;x<d&&u.get(x,i)&&f[4]<o;)f[4]++,x++;if(f[4]>=o)return NaN;const y=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(y-c)>=c?NaN:Ot.foundPatternCross(f)?Ot.centerFromEnd(f,x):NaN}handlePossibleCenter(r,i,o,c){const u=r[0]+r[1]+r[2]+r[3]+r[4];let d=Ot.centerFromEnd(r,o),f=this.crossCheckVertical(i,Math.floor(d),r[2],u);if(!isNaN(f)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(f),r[2],u),!isNaN(d)&&(!c||this.crossCheckDiagonal(Math.floor(f),Math.floor(d),r[2],u)))){const x=u/7;let y=!1;const E=this.possibleCenters;for(let _=0,N=E.length;_<N;_++){const D=E[_];if(D.aboutEquals(x,f,d)){E[_]=D.combineEstimate(f,d,x),y=!0;break}}if(!y){const _=new du(d,f,x);E.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const o of this.possibleCenters)if(o.getCount()>=Ot.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,i=0;const o=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Ot.CENTER_QUORUM&&(r++,i+=d.getEstimatedModuleSize());if(r<3)return!1;const c=i/o;let u=0;for(const d of this.possibleCenters)u+=Math.abs(d.getEstimatedModuleSize()-c);return u<=.05*i}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new W;const i=this.possibleCenters;let o;if(r>3){let c=0,u=0;for(const x of this.possibleCenters){const y=x.getEstimatedModuleSize();c+=y,u+=y*y}o=c/r;let d=Math.sqrt(u/r-o*o);i.sort((x,y)=>{const E=Math.abs(y.getEstimatedModuleSize()-o),_=Math.abs(x.getEstimatedModuleSize()-o);return E<_?-1:E>_?1:0});const f=Math.max(.2*o,d);for(let x=0;x<i.length&&i.length>3;x++){const y=i[x];Math.abs(y.getEstimatedModuleSize()-o)>f&&(i.splice(x,1),x--)}}if(i.length>3){let c=0;for(const u of i)c+=u.getEstimatedModuleSize();o=c/i.length,i.sort((u,d)=>{if(d.getCount()===u.getCount()){const f=Math.abs(d.getEstimatedModuleSize()-o),x=Math.abs(u.getEstimatedModuleSize()-o);return f<x?1:f>x?-1:0}else return d.getCount()-u.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Ot.CENTER_QUORUM=2,Ot.MIN_SKIP=3,Ot.MAX_MODULES=57;class mo{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(z.NEED_RESULT_POINT_CALLBACK);const o=new Ot(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(o)}processFinderPatternInfo(r){const i=r.getTopLeft(),o=r.getTopRight(),c=r.getBottomLeft(),u=this.calculateModuleSize(i,o,c);if(u<1)throw new W("No pattern found in proccess finder.");const d=mo.computeDimension(i,o,c,u),f=me.getProvisionalVersionForDimension(d),x=f.getDimensionForVersion()-7;let y=null;if(f.getAlignmentPatternCenters().length>0){const D=o.getX()-i.getX()+c.getX(),B=o.getY()-i.getY()+c.getY(),F=1-3/x,H=Math.floor(i.getX()+F*(D-i.getX())),$=Math.floor(i.getY()+F*(B-i.getY()));for(let te=4;te<=16;te<<=1)try{y=this.findAlignmentInRegion(u,H,$,te);break}catch(ne){if(!(ne instanceof W))throw ne}}const E=mo.createTransform(i,o,c,y,d),_=mo.sampleGrid(this.image,E,d);let N;return y===null?N=[c,i,o]:N=[c,i,o,y],new Ga(_,N)}static createTransform(r,i,o,c,u){const d=u-3.5;let f,x,y,E;return c!==null?(f=c.getX(),x=c.getY(),y=d-3,E=y):(f=i.getX()-r.getX()+o.getX(),x=i.getY()-r.getY()+o.getY(),y=d,E=d),Wn.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,y,E,3.5,d,r.getX(),r.getY(),i.getX(),i.getY(),f,x,o.getX(),o.getY())}static sampleGrid(r,i,o){return Ur.getInstance().sampleGridWithTransform(r,o,o,i)}static computeDimension(r,i,o,c){const u=De.round(he.distance(r,i)/c),d=De.round(he.distance(r,o)/c);let f=Math.floor((u+d)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new W("Dimensions could be not found.")}return f}calculateModuleSize(r,i,o){return(this.calculateModuleSizeOneWay(r,i)+this.calculateModuleSizeOneWay(r,o))/2}calculateModuleSizeOneWay(r,i){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(i.getX()),Math.floor(i.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(o)?c/7:isNaN(c)?o/7:(o+c)/14}sizeOfBlackWhiteBlackRunBothWays(r,i,o,c){let u=this.sizeOfBlackWhiteBlackRun(r,i,o,c),d=1,f=r-(o-r);f<0?(d=r/(r-f),f=0):f>=this.image.getWidth()&&(d=(this.image.getWidth()-1-r)/(f-r),f=this.image.getWidth()-1);let x=Math.floor(i-(c-i)*d);return d=1,x<0?(d=i/(i-x),x=0):x>=this.image.getHeight()&&(d=(this.image.getHeight()-1-i)/(x-i),x=this.image.getHeight()-1),f=Math.floor(r+(f-r)*d),u+=this.sizeOfBlackWhiteBlackRun(r,i,f,x),u-1}sizeOfBlackWhiteBlackRun(r,i,o,c){const u=Math.abs(c-i)>Math.abs(o-r);if(u){let D=r;r=i,i=D,D=o,o=c,c=D}const d=Math.abs(o-r),f=Math.abs(c-i);let x=-d/2;const y=r<o?1:-1,E=i<c?1:-1;let _=0;const N=o+y;for(let D=r,B=i;D!==N;D+=y){const F=u?B:D,H=u?D:B;if(_===1===this.image.get(F,H)){if(_===2)return De.distance(D,B,r,i);_++}if(x+=f,x>0){if(B===c)break;B+=E,x-=d}}return _===2?De.distance(o+y,c,r,i):NaN}findAlignmentInRegion(r,i,o,c){const u=Math.floor(c*r),d=Math.max(0,i-u),f=Math.min(this.image.getWidth()-1,i+u);if(f-d<r*3)throw new W("Alignment top exceeds estimated module size.");const x=Math.max(0,o-u),y=Math.min(this.image.getHeight()-1,o+u);if(y-x<r*3)throw new W("Alignment bottom exceeds estimated module size.");return new Ya(this.image,d,x,f-d,y-x,r,this.resultPointCallback).find()}}class Hr{constructor(){this.decoder=new vw}getDecoder(){return this.decoder}decode(r,i){let o,c;if(i!=null&&i.get(z.PURE_BARCODE)!==void 0){const x=Hr.extractPureBits(r.getBlackMatrix());o=this.decoder.decodeBitMatrix(x,i),c=Hr.NO_POINTS}else{const x=new mo(r.getBlackMatrix()).detect(i);o=this.decoder.decodeBitMatrix(x.getBits(),i),c=x.getPoints()}o.getOther()instanceof k0&&o.getOther().applyMirroredCorrection(c);const u=new st(o.getText(),o.getRawBytes(),void 0,c,fe.QR_CODE,void 0),d=o.getByteSegments();d!==null&&u.putMetadata(kt.BYTE_SEGMENTS,d);const f=o.getECLevel();return f!==null&&u.putMetadata(kt.ERROR_CORRECTION_LEVEL,f),o.hasStructuredAppend()&&(u.putMetadata(kt.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),u.putMetadata(kt.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),u}reset(){}static extractPureBits(r){const i=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(i===null||o===null)throw new W;const c=this.moduleSize(i,r);let u=i[1],d=o[1],f=i[0],x=o[0];if(f>=x||u>=d)throw new W;if(d-u!==x-f&&(x=f+(d-u),x>=r.getWidth()))throw new W;const y=Math.round((x-f+1)/c),E=Math.round((d-u+1)/c);if(y<=0||E<=0)throw new W;if(E!==y)throw new W;const _=Math.floor(c/2);u+=_,f+=_;const N=f+Math.floor((y-1)*c)-x;if(N>0){if(N>_)throw new W;f-=N}const D=u+Math.floor((E-1)*c)-d;if(D>0){if(D>_)throw new W;u-=D}const B=new se(y,E);for(let F=0;F<E;F++){const H=u+Math.floor(F*c);for(let $=0;$<y;$++)r.get(f+Math.floor($*c),H)&&B.set($,F)}return B}static moduleSize(r,i){const o=i.getHeight(),c=i.getWidth();let u=r[0],d=r[1],f=!0,x=0;for(;u<c&&d<o;){if(f!==i.get(u,d)){if(++x===5)break;f=!f}u++,d++}if(u===c||d===o)throw new W;return(u-r[0])/7}}Hr.NO_POINTS=new Array;class Ae{PDF417Common(){}static getBitCountSum(r){return De.sum(r)}static toIntArray(r){if(r==null||!r.length)return Ae.EMPTY_INT_ARRAY;const i=new Int32Array(r.length);let o=0;for(const c of r)i[o++]=c;return i}static getCodeword(r){const i=I.binarySearch(Ae.SYMBOL_TABLE,r&262143);return i<0?-1:(Ae.CODEWORD_TABLE[i]-1)%Ae.NUMBER_OF_CODEWORDS}}Ae.NUMBER_OF_CODEWORDS=929,Ae.MAX_CODEWORDS_IN_BARCODE=Ae.NUMBER_OF_CODEWORDS-1,Ae.MIN_ROWS_IN_BARCODE=3,Ae.MAX_ROWS_IN_BARCODE=90,Ae.MODULES_IN_CODEWORD=17,Ae.MODULES_IN_STOP_PATTERN=18,Ae.BARS_IN_MODULE=8,Ae.EMPTY_INT_ARRAY=new Int32Array([]),Ae.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ae.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ew{constructor(r,i){this.bits=r,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class _e{static detectMultiple(r,i,o){let c=r.getBlackMatrix(),u=_e.detect(o,c);return u.length||(c=c.clone(),c.rotate180(),u=_e.detect(o,c)),new Ew(c,u)}static detect(r,i){const o=new Array;let c=0,u=0,d=!1;for(;c<i.getHeight();){const f=_e.findVertices(i,c,u);if(f[0]==null&&f[3]==null){if(!d)break;d=!1,u=0;for(const x of o)x[1]!=null&&(c=Math.trunc(Math.max(c,x[1].getY()))),x[3]!=null&&(c=Math.max(c,Math.trunc(x[3].getY())));c+=_e.ROW_STEP;continue}if(d=!0,o.push(f),!r)break;f[2]!=null?(u=Math.trunc(f[2].getX()),c=Math.trunc(f[2].getY())):(u=Math.trunc(f[4].getX()),c=Math.trunc(f[4].getY()))}return o}static findVertices(r,i,o){const c=r.getHeight(),u=r.getWidth(),d=new Array(8);return _e.copyToResult(d,_e.findRowsWithPattern(r,c,u,i,o,_e.START_PATTERN),_e.INDEXES_START_PATTERN),d[4]!=null&&(o=Math.trunc(d[4].getX()),i=Math.trunc(d[4].getY())),_e.copyToResult(d,_e.findRowsWithPattern(r,c,u,i,o,_e.STOP_PATTERN),_e.INDEXES_STOP_PATTERN),d}static copyToResult(r,i,o){for(let c=0;c<o.length;c++)r[o[c]]=i[c]}static findRowsWithPattern(r,i,o,c,u,d){const f=new Array(4);let x=!1;const y=new Int32Array(d.length);for(;c<i;c+=_e.ROW_STEP){let _=_e.findGuardPattern(r,u,c,o,!1,d,y);if(_!=null){for(;c>0;){const N=_e.findGuardPattern(r,u,--c,o,!1,d,y);if(N!=null)_=N;else{c++;break}}f[0]=new he(_[0],c),f[1]=new he(_[1],c),x=!0;break}}let E=c+1;if(x){let _=0,N=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;E<i;E++){const D=_e.findGuardPattern(r,N[0],E,o,!1,d,y);if(D!=null&&Math.abs(N[0]-D[0])<_e.MAX_PATTERN_DRIFT&&Math.abs(N[1]-D[1])<_e.MAX_PATTERN_DRIFT)N=D,_=0;else{if(_>_e.SKIPPED_ROW_COUNT_MAX)break;_++}}E-=_+1,f[2]=new he(N[0],E),f[3]=new he(N[1],E)}return E-c<_e.BARCODE_MIN_HEIGHT&&I.fill(f,null),f}static findGuardPattern(r,i,o,c,u,d,f){I.fillWithin(f,0,f.length,0);let x=i,y=0;for(;r.get(x,o)&&x>0&&y++<_e.MAX_PIXEL_DRIFT;)x--;let E=x,_=0,N=d.length;for(let D=u;E<c;E++)if(r.get(E,o)!==D)f[_]++;else{if(_===N-1){if(_e.patternMatchVariance(f,d,_e.MAX_INDIVIDUAL_VARIANCE)<_e.MAX_AVG_VARIANCE)return new Int32Array([x,E]);x+=f[0]+f[1],P.arraycopy(f,2,f,0,_-1),f[_-1]=0,f[_]=0,_--}else _++;f[_]=1,D=!D}return _===N-1&&_e.patternMatchVariance(f,d,_e.MAX_INDIVIDUAL_VARIANCE)<_e.MAX_AVG_VARIANCE?new Int32Array([x,E-1]):null}static patternMatchVariance(r,i,o){let c=r.length,u=0,d=0;for(let y=0;y<c;y++)u+=r[y],d+=i[y];if(u<d)return 1/0;let f=u/d;o*=f;let x=0;for(let y=0;y<c;y++){let E=r[y],_=i[y]*f,N=E>_?E-_:_-E;if(N>o)return 1/0;x+=N}return x/u}}_e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),_e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),_e.MAX_AVG_VARIANCE=.42,_e.MAX_INDIVIDUAL_VARIANCE=.8,_e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),_e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),_e.MAX_PIXEL_DRIFT=3,_e.MAX_PATTERN_DRIFT=5,_e.SKIPPED_ROW_COUNT_MAX=25,_e.ROW_STEP=5,_e.BARCODE_MIN_HEIGHT=10;class jt{constructor(r,i){if(i.length===0)throw new b;this.field=r;let o=i.length;if(o>1&&i[0]===0){let c=1;for(;c<o&&i[c]===0;)c++;c===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-c),P.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let i=this.coefficients[0],o=this.coefficients.length;for(let c=1;c<o;c++)i=this.field.add(this.field.multiply(r,i),this.coefficients[c]);return i}add(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let i=this.coefficients,o=r.coefficients;if(i.length>o.length){let d=i;i=o,o=d}let c=new Int32Array(o.length),u=o.length-i.length;P.arraycopy(o,0,c,0,u);for(let d=u;d<o.length;d++)c[d]=this.field.add(i[d-u],o[d]);return new jt(this.field,c)}subtract(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof jt?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new jt(this.field,new Int32Array([0]));let i=this.coefficients,o=i.length,c=r.coefficients,u=c.length,d=new Int32Array(o+u-1);for(let f=0;f<o;f++){let x=i[f];for(let y=0;y<u;y++)d[f+y]=this.field.add(d[f+y],this.field.multiply(x,c[y]))}return new jt(this.field,d)}negative(){let r=this.coefficients.length,i=new Int32Array(r);for(let o=0;o<r;o++)i[o]=this.field.subtract(0,this.coefficients[o]);return new jt(this.field,i)}multiplyScalar(r){if(r===0)return new jt(this.field,new Int32Array([0]));if(r===1)return this;let i=this.coefficients.length,o=new Int32Array(i);for(let c=0;c<i;c++)o[c]=this.field.multiply(this.coefficients[c],r);return new jt(this.field,o)}multiplyByMonomial(r,i){if(r<0)throw new b;if(i===0)return new jt(this.field,new Int32Array([0]));let o=this.coefficients.length,c=new Int32Array(o+r);for(let u=0;u<o;u++)c[u]=this.field.multiply(this.coefficients[u],i);return new jt(this.field,c)}toString(){let r=new oe;for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);o!==0&&(o<0?(r.append(" - "),o=-o):r.length()>0&&r.append(" + "),(i===0||o!==1)&&r.append(o),i!==0&&(i===1?r.append("x"):(r.append("x^"),r.append(i))))}return r.toString()}}class Cw{add(r,i){return(r+i)%this.modulus}subtract(r,i){return(this.modulus+r-i)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new b;return this.logTable[r]}inverse(r){if(r===0)throw new Wa;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,i){return r===0||i===0?0:this.expTable[(this.logTable[r]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class fu extends Cw{constructor(r,i){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let o=1;for(let c=0;c<r;c++)this.expTable[c]=o,o=o*i%r;for(let c=0;c<r-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new jt(this,new Int32Array([0])),this.one=new jt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,i){if(r<0)throw new b;if(i===0)return this.zero;let o=new Int32Array(r+1);return o[0]=i,new jt(this,o)}}fu.PDF417_GF=new fu(Ae.NUMBER_OF_CODEWORDS,3);class R0{constructor(){this.field=fu.PDF417_GF}decode(r,i,o){let c=new jt(this.field,r),u=new Int32Array(i),d=!1;for(let B=i;B>0;B--){let F=c.evaluateAt(this.field.exp(B));u[i-B]=F,F!==0&&(d=!0)}if(!d)return 0;let f=this.field.getOne();if(o!=null)for(const B of o){let F=this.field.exp(r.length-1-B),H=new jt(this.field,new Int32Array([this.field.subtract(0,F),1]));f=f.multiply(H)}let x=new jt(this.field,u),y=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),x,i),E=y[0],_=y[1],N=this.findErrorLocations(E),D=this.findErrorMagnitudes(_,E,N);for(let B=0;B<N.length;B++){let F=r.length-1-this.field.log(N[B]);if(F<0)throw T.getChecksumInstance();r[F]=this.field.subtract(r[F],D[B])}return N.length}runEuclideanAlgorithm(r,i,o){if(r.getDegree()<i.getDegree()){let N=r;r=i,i=N}let c=r,u=i,d=this.field.getZero(),f=this.field.getOne();for(;u.getDegree()>=Math.round(o/2);){let N=c,D=d;if(c=u,d=f,c.isZero())throw T.getChecksumInstance();u=N;let B=this.field.getZero(),F=c.getCoefficient(c.getDegree()),H=this.field.inverse(F);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let $=u.getDegree()-c.getDegree(),te=this.field.multiply(u.getCoefficient(u.getDegree()),H);B=B.add(this.field.buildMonomial($,te)),u=u.subtract(c.multiplyByMonomial($,te))}f=B.multiply(d).subtract(D).negative()}let x=f.getCoefficient(0);if(x===0)throw T.getChecksumInstance();let y=this.field.inverse(x),E=f.multiply(y),_=u.multiply(y);return[E,_]}findErrorLocations(r){let i=r.getDegree(),o=new Int32Array(i),c=0;for(let u=1;u<this.field.getSize()&&c<i;u++)r.evaluateAt(u)===0&&(o[c]=this.field.inverse(u),c++);if(c!==i)throw T.getChecksumInstance();return o}findErrorMagnitudes(r,i,o){let c=i.getDegree(),u=new Int32Array(c);for(let y=1;y<=c;y++)u[c-y]=this.field.multiply(y,i.getCoefficient(y));let d=new jt(this.field,u),f=o.length,x=new Int32Array(f);for(let y=0;y<f;y++){let E=this.field.inverse(o[y]),_=this.field.subtract(0,r.evaluateAt(E)),N=this.field.inverse(d.evaluateAt(E));x[y]=this.field.multiply(_,N)}return x}}class Cs{constructor(r,i,o,c,u){r instanceof Cs?this.constructor_2(r):this.constructor_1(r,i,o,c,u)}constructor_1(r,i,o,c,u){const d=i==null||o==null,f=c==null||u==null;if(d&&f)throw new W;d?(i=new he(0,c.getY()),o=new he(0,u.getY())):f&&(c=new he(r.getWidth()-1,i.getY()),u=new he(r.getWidth()-1,o.getY())),this.image=r,this.topLeft=i,this.bottomLeft=o,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(i.getX(),o.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(i.getY(),c.getY())),this.maxY=Math.trunc(Math.max(o.getY(),u.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,i){return r==null?i:i==null?r:new Cs(r.image,r.topLeft,r.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(r,i,o){let c=this.topLeft,u=this.bottomLeft,d=this.topRight,f=this.bottomRight;if(r>0){let x=o?this.topLeft:this.topRight,y=Math.trunc(x.getY()-r);y<0&&(y=0);let E=new he(x.getX(),y);o?c=E:d=E}if(i>0){let x=o?this.bottomLeft:this.bottomRight,y=Math.trunc(x.getY()+i);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);let E=new he(x.getX(),y);o?u=E:f=E}return new Cs(this.image,c,u,d,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Aw{constructor(r,i,o,c){this.columnCount=r,this.errorCorrectionLevel=c,this.rowCountUpperPart=i,this.rowCountLowerPart=o,this.rowCount=i+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class xo{constructor(){this.buffer=""}static form(r,i){let o=-1;function c(d,f,x,y,E,_){if(d==="%%")return"%";if(i[++o]===void 0)return;d=y?parseInt(y.substr(1)):void 0;let N=E?parseInt(E.substr(1)):void 0,D;switch(_){case"s":D=i[o];break;case"c":D=i[o][0];break;case"f":D=parseFloat(i[o]).toFixed(d);break;case"p":D=parseFloat(i[o]).toPrecision(d);break;case"e":D=parseFloat(i[o]).toExponential(d);break;case"x":D=parseInt(i[o]).toString(N||16);break;case"d":D=parseFloat(parseInt(i[o],N||10).toPrecision(d)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(N);let B=parseInt(x),F=x&&x[0]+""=="0"?"0":" ";for(;D.length<B;)D=f!==void 0?D+F:F+D;return D}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}format(r,...i){this.buffer+=xo.form(r,i)}toString(){return this.buffer}}class yo{constructor(r){this.boundingBox=new Cs(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let i=this.getCodeword(r);if(i!=null)return i;for(let o=1;o<yo.MAX_NEARBY_DISTANCE;o++){let c=this.imageRowToCodewordIndex(r)-o;if(c>=0&&(i=this.codewords[c],i!=null)||(c=this.imageRowToCodewordIndex(r)+o,c<this.codewords.length&&(i=this.codewords[c],i!=null)))return i}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,i){this.codewords[this.imageRowToCodewordIndex(r)]=i}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new xo;let i=0;for(const o of this.codewords){if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}return r.toString()}}yo.MAX_NEARBY_DISTANCE=5;class wo{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let i=this.values.get(r);i==null&&(i=0),i++,this.values.set(r,i)}getValue(){let r=-1,i=new Array;for(const[o,c]of this.values.entries()){const u={getKey:()=>o,getValue:()=>c};u.getValue()>r?(r=u.getValue(),i=[],i.push(u.getKey())):u.getValue()===r&&i.push(u.getKey())}return Ae.toIntArray(i)}getConfidence(r){return this.values.get(r)}}class O0 extends yo{constructor(r,i){super(r),this._isLeft=i}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,r);let o=this.getBoundingBox(),c=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=-1,y=1,E=0;for(let _=d;_<f;_++){if(i[_]==null)continue;let N=i[_],D=N.getRowNumber()-x;if(D===0)E++;else if(D===1)y=Math.max(y,E),E=1,x=N.getRowNumber();else if(D<0||N.getRowNumber()>=r.getRowCount()||D>_)i[_]=null;else{let B;y>2?B=(y-2)*D:B=D;let F=B>=_;for(let H=1;H<=B&&!F;H++)F=i[_-H]!=null;F?i[_]=null:(x=N.getRowNumber(),E=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let i=new Int32Array(r.getRowCount());for(let o of this.getCodewords())if(o!=null){let c=o.getRowNumber();if(c>=i.length)continue;i[c]++}return i}adjustIncompleteIndicatorColumnRowNumbers(r){let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),f=this.getCodewords(),x=-1;for(let y=u;y<d;y++){if(f[y]==null)continue;let E=f[y];E.setRowNumberAsRowIndicatorColumn();let _=E.getRowNumber()-x;_===0||(_===1?x=E.getRowNumber():E.getRowNumber()>=r.getRowCount()?f[y]=null:x=E.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),i=new wo,o=new wo,c=new wo,u=new wo;for(let f of r){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let x=f.getValue()%30,y=f.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:o.setValue(x*3+1);break;case 1:u.setValue(x/3),c.setValue(x%3);break;case 2:i.setValue(x+1);break}}if(i.getValue().length===0||o.getValue().length===0||c.getValue().length===0||u.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+c.getValue()[0]<Ae.MIN_ROWS_IN_BARCODE||o.getValue()[0]+c.getValue()[0]>Ae.MAX_ROWS_IN_BARCODE)return null;let d=new Aw(i.getValue()[0],o.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(r,d),d}removeIncorrectCodewords(r,i){for(let o=0;o<r.length;o++){let c=r[o];if(r[o]==null)continue;let u=c.getValue()%30,d=c.getRowNumber();if(d>i.getRowCount()){r[o]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==i.getRowCountUpperPart()&&(r[o]=null);break;case 1:(Math.trunc(u/3)!==i.getErrorCorrectionLevel()||u%3!==i.getRowCountLowerPart())&&(r[o]=null);break;case 2:u+1!==i.getColumnCount()&&(r[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class vo{constructor(r,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Ae.MAX_CODEWORDS_IN_BARCODE,i;do i=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let o=this.detectionResultColumns[i].getCodewords();for(let c=0;c<o.length;c++)o[c]!=null&&(o[c].hasValidRowNumber()||this.adjustRowNumbers(i,c,o))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<r.length;o++)if(r[o]!=null&&i[o]!=null&&r[o].getRowNumber()===i[o].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[o];u!=null&&(u.setRowNumber(r[o].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let c=i[o].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(u=vo.adjustRowNumberIfValid(c,u,f),f.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,i=this.detectionResultColumns[0].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let c=i[o].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(u=vo.adjustRowNumberIfValid(c,u,f),f.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,i,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(r)?(o.setRowNumber(r),i=0):++i),i}adjustRowNumbers(r,i,o){if(!this.detectionResultColumns[r-1])return;let c=o[i],u=this.detectionResultColumns[r-1].getCodewords(),d=u;this.detectionResultColumns[r+1]!=null&&(d=this.detectionResultColumns[r+1].getCodewords());let f=new Array(14);f[2]=u[i],f[3]=d[i],i>0&&(f[0]=o[i-1],f[4]=u[i-1],f[5]=d[i-1]),i>1&&(f[8]=o[i-2],f[10]=u[i-2],f[11]=d[i-2]),i<o.length-1&&(f[1]=o[i+1],f[6]=u[i+1],f[7]=d[i+1]),i<o.length-2&&(f[9]=o[i+2],f[12]=u[i+2],f[13]=d[i+2]);for(let x of f)if(vo.adjustRowNumber(c,x))return}static adjustRowNumber(r,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===r.getBucket()?(r.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,i){this.detectionResultColumns[r]=i}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new xo;for(let o=0;o<r.getCodewords().length;o++){i.format("CW %3d:",o);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){i.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[o];if(u==null){i.format("    |   ");continue}i.format(" %3d|%3d",u.getRowNumber(),u.getValue())}i.format("%n")}return i.toString()}}class bo{constructor(r,i,o,c){this.rowNumber=bo.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(i),this.bucket=Math.trunc(o),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==bo.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}bo.BARCODE_ROW_UNKNOWN=-1;class cn{static initialize(){for(let r=0;r<Ae.SYMBOL_TABLE.length;r++){let i=Ae.SYMBOL_TABLE[r],o=i&1;for(let c=0;c<Ae.BARS_IN_MODULE;c++){let u=0;for(;(i&1)===o;)u+=1,i>>=1;o=i&1,cn.RATIOS_TABLE[r]||(cn.RATIOS_TABLE[r]=new Array(Ae.BARS_IN_MODULE)),cn.RATIOS_TABLE[r][Ae.BARS_IN_MODULE-c-1]=Math.fround(u/Ae.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let i=cn.getDecodedCodewordValue(cn.sampleBitCounts(r));return i!==-1?i:cn.getClosestDecodedValue(r)}static sampleBitCounts(r){let i=De.sum(r),o=new Int32Array(Ae.BARS_IN_MODULE),c=0,u=0;for(let d=0;d<Ae.MODULES_IN_CODEWORD;d++){let f=i/(2*Ae.MODULES_IN_CODEWORD)+d*i/Ae.MODULES_IN_CODEWORD;u+r[c]<=f&&(u+=r[c],c++),o[c]++}return o}static getDecodedCodewordValue(r){let i=cn.getBitValue(r);return Ae.getCodeword(i)===-1?-1:i}static getBitValue(r){let i=0;for(let o=0;o<r.length;o++)for(let c=0;c<r[o];c++)i=i<<1|(o%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(r){let i=De.sum(r),o=new Array(Ae.BARS_IN_MODULE);if(i>1)for(let d=0;d<o.length;d++)o[d]=Math.fround(r[d]/i);let c=Ha.MAX_VALUE,u=-1;this.bSymbolTableReady||cn.initialize();for(let d=0;d<cn.RATIOS_TABLE.length;d++){let f=0,x=cn.RATIOS_TABLE[d];for(let y=0;y<Ae.BARS_IN_MODULE;y++){let E=Math.fround(x[y]-o[y]);if(f+=Math.fround(E*E),f>=c)break}f<c&&(c=f,u=Ae.SYMBOL_TABLE[d])}return u}}cn.bSymbolTableReady=!1,cn.RATIOS_TABLE=new Array(Ae.SYMBOL_TABLE.length).map(S=>new Array(Ae.BARS_IN_MODULE));class P0{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class D0{static parseLong(r,i=void 0){return parseInt(r,i)}}class M0 extends m{}M0.kind="NullPointerException";class Sw{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,i,o){if(r==null)throw new M0;if(i<0||i>r.length||o<0||i+o>r.length||i+o<0)throw new M;if(o===0)return;for(let c=0;c<o;c++)this.write(r[i+c])}flush(){}close(){}}class _w extends m{}class Tw extends Sw{constructor(r=32){if(super(),this.count=0,r<0)throw new b("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let o=this.buf.length<<1;if(o-r<0&&(o=r),o<0){if(r<0)throw new _w;o=A.MAX_VALUE}this.buf=I.copyOfUint8Array(this.buf,o)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,i,o){if(i<0||i>r.length||o<0||i+o-r.length>0)throw new M;this.ensureCapacity(this.count+o),P.arraycopy(r,i,this.buf,this.count,o),this.count+=o}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return I.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var ze;(function(S){S[S.ALPHA=0]="ALPHA",S[S.LOWER=1]="LOWER",S[S.MIXED=2]="MIXED",S[S.PUNCT=3]="PUNCT",S[S.ALPHA_SHIFT=4]="ALPHA_SHIFT",S[S.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ze||(ze={}));function j0(){if(typeof window<"u")return window.BigInt||null;if(typeof Ao<"u")return Ao.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Za;function Gr(S){if(typeof Za>"u"&&(Za=j0()),Za===null)throw new Error("BigInt is not supported!");return Za(S)}function Iw(){let S=[];S[0]=Gr(1);let r=Gr(900);S[1]=r;for(let i=2;i<16;i++)S[i]=S[i-1]*r;return S}class q{static decode(r,i){let o=new oe(""),c=K.ISO8859_1;o.enableDecoding(c);let u=1,d=r[u++],f=new P0;for(;u<r[0];){switch(d){case q.TEXT_COMPACTION_MODE_LATCH:u=q.textCompaction(r,u,o);break;case q.BYTE_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:u=q.byteCompaction(d,r,c,u,o);break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[u++]);break;case q.NUMERIC_COMPACTION_MODE_LATCH:u=q.numericCompaction(r,u,o);break;case q.ECI_CHARSET:K.getCharacterSetECIByValue(r[u++]);break;case q.ECI_GENERAL_PURPOSE:u+=2;break;case q.ECI_USER_DEFINED:u++;break;case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=q.decodeMacroBlock(r,u,f);break;case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:throw new L;default:u--,u=q.textCompaction(r,u,o);break}if(u<r.length)d=r[u++];else throw L.getFormatInstance()}if(o.length()===0)throw L.getFormatInstance();let x=new ho(null,o.toString(),null,i);return x.setOther(f),x}static decodeMacroBlock(r,i,o){if(i+q.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw L.getFormatInstance();let c=new Int32Array(q.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<q.NUMBER_OF_SEQUENCE_CODEWORDS;f++,i++)c[f]=r[i];o.setSegmentIndex(A.parseInt(q.decodeBase900toBase10(c,q.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new oe;i=q.textCompaction(r,i,u),o.setFileId(u.toString());let d=-1;for(r[i]===q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=i+1);i<r[0];)switch(r[i]){case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,r[i]){case q.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new oe;i=q.textCompaction(r,i+1,f),o.setFileName(f.toString());break;case q.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new oe;i=q.textCompaction(r,i+1,x),o.setSender(x.toString());break;case q.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let y=new oe;i=q.textCompaction(r,i+1,y),o.setAddressee(y.toString());break;case q.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new oe;i=q.numericCompaction(r,i+1,E),o.setSegmentCount(A.parseInt(E.toString()));break;case q.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let _=new oe;i=q.numericCompaction(r,i+1,_),o.setTimestamp(D0.parseLong(_.toString()));break;case q.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let N=new oe;i=q.numericCompaction(r,i+1,N),o.setChecksum(A.parseInt(N.toString()));break;case q.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let D=new oe;i=q.numericCompaction(r,i+1,D),o.setFileSize(D0.parseLong(D.toString()));break;default:throw L.getFormatInstance()}break;case q.MACRO_PDF417_TERMINATOR:i++,o.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(d!==-1){let f=i-d;o.isLastSegment()&&f--,o.setOptionalData(I.copyOfRange(r,d,d+f))}return i}static textCompaction(r,i,o){let c=new Int32Array((r[0]-i)*2),u=new Int32Array((r[0]-i)*2),d=0,f=!1;for(;i<r[0]&&!f;){let x=r[i++];if(x<q.TEXT_COMPACTION_MODE_LATCH)c[d]=x/30,c[d+1]=x%30,d+=2;else switch(x){case q.TEXT_COMPACTION_MODE_LATCH:c[d++]=q.TEXT_COMPACTION_MODE_LATCH;break;case q.BYTE_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.NUMERIC_COMPACTION_MODE_LATCH:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:i--,f=!0;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=r[i++],u[d]=x,d++;break}}return q.decodeTextCompaction(c,u,d,o),i}static decodeTextCompaction(r,i,o,c){let u=ze.ALPHA,d=ze.ALPHA,f=0;for(;f<o;){let x=r[f],y="";switch(u){case ze.ALPHA:if(x<26)y=String.fromCharCode(65+x);else switch(x){case 26:y=" ";break;case q.LL:u=ze.LOWER;break;case q.ML:u=ze.MIXED;break;case q.PS:d=u,u=ze.PUNCT_SHIFT;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[f]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA;break}break;case ze.LOWER:if(x<26)y=String.fromCharCode(97+x);else switch(x){case 26:y=" ";break;case q.AS:d=u,u=ze.ALPHA_SHIFT;break;case q.ML:u=ze.MIXED;break;case q.PS:d=u,u=ze.PUNCT_SHIFT;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[f]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA;break}break;case ze.MIXED:if(x<q.PL)y=q.MIXED_CHARS[x];else switch(x){case q.PL:u=ze.PUNCT;break;case 26:y=" ";break;case q.LL:u=ze.LOWER;break;case q.AL:u=ze.ALPHA;break;case q.PS:d=u,u=ze.PUNCT_SHIFT;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[f]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA;break}break;case ze.PUNCT:if(x<q.PAL)y=q.PUNCT_CHARS[x];else switch(x){case q.PAL:u=ze.ALPHA;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[f]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA;break}break;case ze.ALPHA_SHIFT:if(u=d,x<26)y=String.fromCharCode(65+x);else switch(x){case 26:y=" ";break;case q.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA;break}break;case ze.PUNCT_SHIFT:if(u=d,x<q.PAL)y=q.PUNCT_CHARS[x];else switch(x){case q.PAL:u=ze.ALPHA;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[f]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA;break}break}y!==""&&c.append(y),f++}}static byteCompaction(r,i,o,c,u){let d=new Tw,f=0,x=0,y=!1;switch(r){case q.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),_=i[c++];for(;c<i[0]&&!y;)switch(E[f++]=_,x=900*x+_,_=i[c++],_){case q.TEXT_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH:case q.NUMERIC_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:c--,y=!0;break;default:if(f%5===0&&f>0){for(let N=0;N<6;++N)d.write(Number(Gr(x)>>Gr(8*(5-N))));x=0,f=0}break}c===i[0]&&_<q.TEXT_COMPACTION_MODE_LATCH&&(E[f++]=_);for(let N=0;N<f;N++)d.write(E[N]);break;case q.BYTE_COMPACTION_MODE_LATCH_6:for(;c<i[0]&&!y;){let N=i[c++];if(N<q.TEXT_COMPACTION_MODE_LATCH)f++,x=900*x+N;else switch(N){case q.TEXT_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH:case q.NUMERIC_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:c--,y=!0;break}if(f%5===0&&f>0){for(let D=0;D<6;++D)d.write(Number(Gr(x)>>Gr(8*(5-D))));x=0,f=0}}break}return u.append(xe.decode(d.toByteArray(),o)),c}static numericCompaction(r,i,o){let c=0,u=!1,d=new Int32Array(q.MAX_NUMERIC_CODEWORDS);for(;i<r[0]&&!u;){let f=r[i++];if(i===r[0]&&(u=!0),f<q.TEXT_COMPACTION_MODE_LATCH)d[c]=f,c++;else switch(f){case q.TEXT_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:i--,u=!0;break}(c%q.MAX_NUMERIC_CODEWORDS===0||f===q.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(o.append(q.decodeBase900toBase10(d,c)),c=0)}return i}static decodeBase900toBase10(r,i){let o=Gr(0);for(let u=0;u<i;u++)o+=q.EXP900[i-u-1]*Gr(r[u]);let c=o.toString();if(c.charAt(0)!=="1")throw new L;return c.substring(1)}}q.TEXT_COMPACTION_MODE_LATCH=900,q.BYTE_COMPACTION_MODE_LATCH=901,q.NUMERIC_COMPACTION_MODE_LATCH=902,q.BYTE_COMPACTION_MODE_LATCH_6=924,q.ECI_USER_DEFINED=925,q.ECI_GENERAL_PURPOSE=926,q.ECI_CHARSET=927,q.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,q.MACRO_PDF417_TERMINATOR=922,q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,q.MAX_NUMERIC_CODEWORDS=15,q.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,q.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,q.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,q.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,q.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,q.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,q.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,q.PL=25,q.LL=27,q.AS=27,q.ML=28,q.AL=28,q.PS=29,q.PAL=29,q.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,q.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",q.EXP900=j0()?Iw():[],q.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ie{constructor(){}static decode(r,i,o,c,u,d,f){let x=new Cs(r,i,o,c,u),y=null,E=null,_;for(let B=!0;;B=!1){if(i!=null&&(y=Ie.getRowIndicatorColumn(r,x,i,!0,d,f)),c!=null&&(E=Ie.getRowIndicatorColumn(r,x,c,!1,d,f)),_=Ie.merge(y,E),_==null)throw W.getNotFoundInstance();let F=_.getBoundingBox();if(B&&F!=null&&(F.getMinY()<x.getMinY()||F.getMaxY()>x.getMaxY()))x=F;else break}_.setBoundingBox(x);let N=_.getBarcodeColumnCount()+1;_.setDetectionResultColumn(0,y),_.setDetectionResultColumn(N,E);let D=y!=null;for(let B=1;B<=N;B++){let F=D?B:N-B;if(_.getDetectionResultColumn(F)!==void 0)continue;let H;F===0||F===N?H=new O0(x,F===0):H=new yo(x),_.setDetectionResultColumn(F,H);let $=-1,te=$;for(let ne=x.getMinY();ne<=x.getMaxY();ne++){if($=Ie.getStartColumn(_,F,ne,D),$<0||$>x.getMaxX()){if(te===-1)continue;$=te}let Q=Ie.detectCodeword(r,x.getMinX(),x.getMaxX(),D,$,ne,d,f);Q!=null&&(H.setCodeword(ne,Q),te=$,d=Math.min(d,Q.getWidth()),f=Math.max(f,Q.getWidth()))}}return Ie.createDecoderResult(_)}static merge(r,i){if(r==null&&i==null)return null;let o=Ie.getBarcodeMetadata(r,i);if(o==null)return null;let c=Cs.merge(Ie.adjustBoundingBox(r),Ie.adjustBoundingBox(i));return new vo(o,c)}static adjustBoundingBox(r){if(r==null)return null;let i=r.getRowHeights();if(i==null)return null;let o=Ie.getMax(i),c=0;for(let f of i)if(c+=o-f,f>0)break;let u=r.getCodewords();for(let f=0;c>0&&u[f]==null;f++)c--;let d=0;for(let f=i.length-1;f>=0&&(d+=o-i[f],!(i[f]>0));f--);for(let f=u.length-1;d>0&&u[f]==null;f--)d--;return r.getBoundingBox().addMissingRows(c,d,r.isLeft())}static getMax(r){let i=-1;for(let o of r)i=Math.max(i,o);return i}static getBarcodeMetadata(r,i){let o;if(r==null||(o=r.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let c;return i==null||(c=i.getBarcodeMetadata())==null?o:o.getColumnCount()!==c.getColumnCount()&&o.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&o.getRowCount()!==c.getRowCount()?null:o}static getRowIndicatorColumn(r,i,o,c,u,d){let f=new O0(i,c);for(let x=0;x<2;x++){let y=x===0?1:-1,E=Math.trunc(Math.trunc(o.getX()));for(let _=Math.trunc(Math.trunc(o.getY()));_<=i.getMaxY()&&_>=i.getMinY();_+=y){let N=Ie.detectCodeword(r,0,r.getWidth(),c,E,_,u,d);N!=null&&(f.setCodeword(_,N),c?E=N.getStartX():E=N.getEndX())}}return f}static adjustCodewordCount(r,i){let o=i[0][1],c=o.getValue(),u=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Ie.getNumberOfECCodeWords(r.getBarcodeECLevel());if(c.length===0){if(u<1||u>Ae.MAX_CODEWORDS_IN_BARCODE)throw W.getNotFoundInstance();o.setValue(u)}else c[0]!==u&&o.setValue(u)}static createDecoderResult(r){let i=Ie.createBarcodeMatrix(r);Ie.adjustCodewordCount(r,i);let o=new Array,c=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),u=[],d=new Array;for(let x=0;x<r.getBarcodeRowCount();x++)for(let y=0;y<r.getBarcodeColumnCount();y++){let E=i[x][y+1].getValue(),_=x*r.getBarcodeColumnCount()+y;E.length===0?o.push(_):E.length===1?c[_]=E[0]:(d.push(_),u.push(E))}let f=new Array(u.length);for(let x=0;x<f.length;x++)f[x]=u[x];return Ie.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),c,Ae.toIntArray(o),Ae.toIntArray(d),f)}static createDecoderResultFromAmbiguousValues(r,i,o,c,u){let d=new Int32Array(c.length),f=100;for(;f-- >0;){for(let x=0;x<d.length;x++)i[c[x]]=u[x][d[x]];try{return Ie.decodeCodewords(i,r,o)}catch(x){if(!(x instanceof T))throw x}if(d.length===0)throw T.getChecksumInstance();for(let x=0;x<d.length;x++)if(d[x]<u[x].length-1){d[x]++;break}else if(d[x]=0,x===d.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(r){let i=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let c=0;c<i.length;c++)for(let u=0;u<i[c].length;u++)i[c][u]=new wo;let o=0;for(let c of r.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=i.length)continue;i[d][o].setValue(u.getValue())}}}o++}return i}static isValidBarcodeColumn(r,i){return i>=0&&i<=r.getBarcodeColumnCount()+1}static getStartColumn(r,i,o,c){let u=c?1:-1,d=null;if(Ie.isValidBarcodeColumn(r,i-u)&&(d=r.getDetectionResultColumn(i-u).getCodeword(o)),d!=null)return c?d.getEndX():d.getStartX();if(d=r.getDetectionResultColumn(i).getCodewordNearby(o),d!=null)return c?d.getStartX():d.getEndX();if(Ie.isValidBarcodeColumn(r,i-u)&&(d=r.getDetectionResultColumn(i-u).getCodewordNearby(o)),d!=null)return c?d.getEndX():d.getStartX();let f=0;for(;Ie.isValidBarcodeColumn(r,i-u);){i-=u;for(let x of r.getDetectionResultColumn(i).getCodewords())if(x!=null)return(c?x.getEndX():x.getStartX())+u*f*(x.getEndX()-x.getStartX());f++}return c?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,i,o,c,u,d,f,x){u=Ie.adjustCodewordStartColumn(r,i,o,c,u,d);let y=Ie.getModuleBitCount(r,i,o,c,u,d);if(y==null)return null;let E,_=De.sum(y);if(c)E=u+_;else{for(let B=0;B<y.length/2;B++){let F=y[B];y[B]=y[y.length-1-B],y[y.length-1-B]=F}E=u,u=E-_}if(!Ie.checkCodewordSkew(_,f,x))return null;let N=cn.getDecodedValue(y),D=Ae.getCodeword(N);return D===-1?null:new bo(u,E,Ie.getCodewordBucketNumber(N),D)}static getModuleBitCount(r,i,o,c,u,d){let f=u,x=new Int32Array(8),y=0,E=c?1:-1,_=c;for(;(c?f<o:f>=i)&&y<x.length;)r.get(f,d)===_?(x[y]++,f+=E):(y++,_=!_);return y===x.length||f===(c?o:i)&&y===x.length-1?x:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,i,o,c,u,d){let f=u,x=c?-1:1;for(let y=0;y<2;y++){for(;(c?f>=i:f<o)&&c===r.get(f,d);){if(Math.abs(u-f)>Ie.CODEWORD_SKEW_SIZE)return u;f+=x}x=-x,c=!c}return f}static checkCodewordSkew(r,i,o){return i-Ie.CODEWORD_SKEW_SIZE<=r&&r<=o+Ie.CODEWORD_SKEW_SIZE}static decodeCodewords(r,i,o){if(r.length===0)throw L.getFormatInstance();let c=1<<i+1,u=Ie.correctErrors(r,o,c);Ie.verifyCodewordCount(r,c);let d=q.decode(r,""+i);return d.setErrorsCorrected(u),d.setErasures(o.length),d}static correctErrors(r,i,o){if(i!=null&&i.length>o/2+Ie.MAX_ERRORS||o<0||o>Ie.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return Ie.errorCorrection.decode(r,o,i)}static verifyCodewordCount(r,i){if(r.length<4)throw L.getFormatInstance();let o=r[0];if(o>r.length)throw L.getFormatInstance();if(o===0)if(i<r.length)r[0]=r.length-i;else throw L.getFormatInstance()}static getBitCountForCodeword(r){let i=new Int32Array(8),o=0,c=i.length-1;for(;!((r&1)!==o&&(o=r&1,c--,c<0));)i[c]++,r>>=1;return i}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Ie.getCodewordBucketNumber(Ie.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let i=new xo;for(let o=0;o<r.length;o++){i.format("Row %2d: ",o);for(let c=0;c<r[o].length;c++){let u=r[o][c];u.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}i.format("%n")}return i.toString()}}Ie.CODEWORD_SKEW_SIZE=2,Ie.MAX_ERRORS=3,Ie.MAX_EC_CODEWORDS=512,Ie.errorCorrection=new R0;class Lt{decode(r,i=null){let o=Lt.decode(r,i,!1);if(o==null||o.length===0||o[0]==null)throw W.getNotFoundInstance();return o[0]}decodeMultiple(r,i=null){try{return Lt.decode(r,i,!0)}catch(o){throw o instanceof L||o instanceof T?W.getNotFoundInstance():o}}static decode(r,i,o){const c=new Array,u=_e.detectMultiple(r,i,o);for(const d of u.getPoints()){const f=Ie.decode(u.getBits(),d[4],d[5],d[6],d[7],Lt.getMinCodewordWidth(d),Lt.getMaxCodewordWidth(d)),x=new st(f.getText(),f.getRawBytes(),void 0,d,fe.PDF_417);x.putMetadata(kt.ERROR_CORRECTION_LEVEL,f.getECLevel());const y=f.getOther();y!=null&&x.putMetadata(kt.PDF417_EXTRA_METADATA,y),c.push(x)}return c.map(d=>d)}static getMaxWidth(r,i){return r==null||i==null?0:Math.trunc(Math.abs(r.getX()-i.getX()))}static getMinWidth(r,i){return r==null||i==null?A.MAX_VALUE:Math.trunc(Math.abs(r.getX()-i.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Lt.getMaxWidth(r[0],r[4]),Lt.getMaxWidth(r[6],r[2])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN),Math.max(Lt.getMaxWidth(r[1],r[5]),Lt.getMaxWidth(r[7],r[3])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Lt.getMinWidth(r[0],r[4]),Lt.getMinWidth(r[6],r[2])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN),Math.min(Lt.getMinWidth(r[1],r[5]),Lt.getMinWidth(r[7],r[3])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN)))}reset(){}}class Qa extends m{}Qa.kind="ReaderException";class L0{constructor(r,i){this.verbose=r===!0,i&&this.setHints(i)}decode(r,i){return i&&this.setHints(i),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const i=!s(r)&&r.get(z.TRY_HARDER)===!0,o=s(r)?null:r.get(z.POSSIBLE_FORMATS),c=new Array;if(!s(o)){const u=o.some(d=>d===fe.UPC_A||d===fe.UPC_E||d===fe.EAN_13||d===fe.EAN_8||d===fe.CODABAR||d===fe.CODE_39||d===fe.CODE_93||d===fe.CODE_128||d===fe.ITF||d===fe.RSS_14||d===fe.RSS_EXPANDED);u&&!i&&c.push(new ri(r,this.verbose)),o.includes(fe.QR_CODE)&&c.push(new Hr),o.includes(fe.DATA_MATRIX)&&c.push(new Wr),o.includes(fe.AZTEC)&&c.push(new Xa),o.includes(fe.PDF_417)&&c.push(new Lt),u&&i&&c.push(new ri(r,this.verbose))}c.length===0&&(i||c.push(new ri(r,this.verbose)),c.push(new Hr),c.push(new Wr),c.push(new Xa),c.push(new Lt),i&&c.push(new ri(r,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Qa("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(r,this.hints)}catch(o){if(o instanceof Qa)continue}throw new W("No MultiFormat Readers were able to detect the code.")}}class Nw extends kn{constructor(r=null,i=500){const o=new L0;o.setHints(r),super(o,i)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class kw extends kn{constructor(r=500){super(new Lt,r)}}class Rw extends kn{constructor(r=500){super(new Hr,r)}}var gu;(function(S){S[S.ERROR_CORRECTION=0]="ERROR_CORRECTION",S[S.CHARACTER_SET=1]="CHARACTER_SET",S[S.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",S[S.MIN_SIZE=3]="MIN_SIZE",S[S.MAX_SIZE=4]="MAX_SIZE",S[S.MARGIN=5]="MARGIN",S[S.PDF417_COMPACT=6]="PDF417_COMPACT",S[S.PDF417_COMPACTION=7]="PDF417_COMPACTION",S[S.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",S[S.AZTEC_LAYERS=9]="AZTEC_LAYERS",S[S.QR_VERSION=10]="QR_VERSION"})(gu||(gu={}));var _t=gu;class pu{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new on(r,Int32Array.from([1])))}buildGenerator(r){const i=this.cachedGenerators;if(r>=i.length){let o=i[i.length-1];const c=this.field;for(let u=i.length;u<=r;u++){const d=o.multiply(new on(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));i.push(d),o=d}}return i[r]}encode(r,i){if(i===0)throw new b("No error correction bytes");const o=r.length-i;if(o<=0)throw new b("No data bytes provided");const c=this.buildGenerator(i),u=new Int32Array(o);P.arraycopy(r,0,u,0,o);let d=new on(this.field,u);d=d.multiplyByMonomial(i,1);const x=d.divide(c)[1].getCoefficients(),y=i-x.length;for(let E=0;E<y;E++)r[o+E]=0;P.arraycopy(x,0,r,o+y,x.length)}}class ft{constructor(){}static applyMaskPenaltyRule1(r){return ft.applyMaskPenaltyRule1Internal(r,!0)+ft.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let i=0;const o=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let d=0;d<u-1;d++){const f=o[d];for(let x=0;x<c-1;x++){const y=f[x];y===f[x+1]&&y===o[d+1][x]&&y===o[d+1][x+1]&&i++}}return ft.N2*i}static applyMaskPenaltyRule3(r){let i=0;const o=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let d=0;d<u;d++)for(let f=0;f<c;f++){const x=o[d];f+6<c&&x[f]===1&&x[f+1]===0&&x[f+2]===1&&x[f+3]===1&&x[f+4]===1&&x[f+5]===0&&x[f+6]===1&&(ft.isWhiteHorizontal(x,f-4,f)||ft.isWhiteHorizontal(x,f+7,f+11))&&i++,d+6<u&&o[d][f]===1&&o[d+1][f]===0&&o[d+2][f]===1&&o[d+3][f]===1&&o[d+4][f]===1&&o[d+5][f]===0&&o[d+6][f]===1&&(ft.isWhiteVertical(o,f,d-4,d)||ft.isWhiteVertical(o,f,d+7,d+11))&&i++}return i*ft.N3}static isWhiteHorizontal(r,i,o){i=Math.max(i,0),o=Math.min(o,r.length);for(let c=i;c<o;c++)if(r[c]===1)return!1;return!0}static isWhiteVertical(r,i,o,c){o=Math.max(o,0),c=Math.min(c,r.length);for(let u=o;u<c;u++)if(r[u][i]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let i=0;const o=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let x=0;x<u;x++){const y=o[x];for(let E=0;E<c;E++)y[E]===1&&i++}const d=r.getHeight()*r.getWidth();return Math.floor(Math.abs(i*2-d)*10/d)*ft.N4}static getDataMaskBit(r,i,o){let c,u;switch(r){case 0:c=o+i&1;break;case 1:c=o&1;break;case 2:c=i%3;break;case 3:c=(o+i)%3;break;case 4:c=Math.floor(o/2)+Math.floor(i/3)&1;break;case 5:u=o*i,c=(u&1)+u%3;break;case 6:u=o*i,c=(u&1)+u%3&1;break;case 7:u=o*i,c=u%3+(o+i&1)&1;break;default:throw new b("Invalid mask pattern: "+r)}return c===0}static applyMaskPenaltyRule1Internal(r,i){let o=0;const c=i?r.getHeight():r.getWidth(),u=i?r.getWidth():r.getHeight(),d=r.getArray();for(let f=0;f<c;f++){let x=0,y=-1;for(let E=0;E<u;E++){const _=i?d[f][E]:d[E][f];_===y?x++:(x>=5&&(o+=ft.N1+(x-5)),x=1,y=_)}x>=5&&(o+=ft.N1+(x-5))}return o}}ft.N1=3,ft.N2=3,ft.N3=40,ft.N4=10;class Ja{constructor(r,i){this.width=r,this.height=i;const o=new Array(i);for(let c=0;c!==i;c++)o[c]=new Uint8Array(r);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(r,i){return this.bytes[i][r]}getArray(){return this.bytes}setNumber(r,i,o){this.bytes[i][r]=o}setBoolean(r,i,o){this.bytes[i][r]=o?1:0}clear(r){for(const i of this.bytes)I.fill(i,r)}equals(r){if(!(r instanceof Ja))return!1;const i=r;if(this.width!==i.width||this.height!==i.height)return!1;for(let o=0,c=this.height;o<c;++o){const u=this.bytes[o],d=i.bytes[o];for(let f=0,x=this.width;f<x;++f)if(u[f]!==d[f])return!1}return!0}toString(){const r=new oe;for(let i=0,o=this.height;i<o;++i){const c=this.bytes[i];for(let u=0,d=this.width;u<d;++u)switch(c[u]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class As{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new oe;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<As.NUM_MASK_PATTERNS}}As.NUM_MASK_PATTERNS=8;class He extends m{}He.kind="WriterException";class ve{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,i,o,c,u){ve.clearMatrix(u),ve.embedBasicPatterns(o,u),ve.embedTypeInfo(i,c,u),ve.maybeEmbedVersionInfo(o,u),ve.embedDataBits(r,c,u)}static embedBasicPatterns(r,i){ve.embedPositionDetectionPatternsAndSeparators(i),ve.embedDarkDotAtLeftBottomCorner(i),ve.maybeEmbedPositionAdjustmentPatterns(r,i),ve.embedTimingPatterns(i)}static embedTypeInfo(r,i,o){const c=new j;ve.makeTypeInfoBits(r,i,c);for(let u=0,d=c.getSize();u<d;++u){const f=c.get(c.getSize()-1-u),x=ve.TYPE_INFO_COORDINATES[u],y=x[0],E=x[1];if(o.setBoolean(y,E,f),u<8){const _=o.getWidth()-u-1;o.setBoolean(_,8,f)}else{const N=o.getHeight()-7+(u-8);o.setBoolean(8,N,f)}}}static maybeEmbedVersionInfo(r,i){if(r.getVersionNumber()<7)return;const o=new j;ve.makeVersionInfoBits(r,o);let c=6*3-1;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const f=o.get(c);c--,i.setBoolean(u,i.getHeight()-11+d,f),i.setBoolean(i.getHeight()-11+d,u,f)}}static embedDataBits(r,i,o){let c=0,u=-1,d=o.getWidth()-1,f=o.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);f>=0&&f<o.getHeight();){for(let x=0;x<2;++x){const y=d-x;if(!ve.isEmpty(o.get(y,f)))continue;let E;c<r.getSize()?(E=r.get(c),++c):E=!1,i!==255&&ft.getDataMaskBit(i,y,f)&&(E=!E),o.setBoolean(y,f,E)}f+=u}u=-u,f+=u,d-=2}if(c!==r.getSize())throw new He("Not all bits consumed: "+c+"/"+r.getSize())}static findMSBSet(r){return 32-A.numberOfLeadingZeros(r)}static calculateBCHCode(r,i){if(i===0)throw new b("0 polynomial");const o=ve.findMSBSet(i);for(r<<=o-1;ve.findMSBSet(r)>=o;)r^=i<<ve.findMSBSet(r)-o;return r}static makeTypeInfoBits(r,i,o){if(!As.isValidMaskPattern(i))throw new He("Invalid mask pattern");const c=r.getBits()<<3|i;o.appendBits(c,5);const u=ve.calculateBCHCode(c,ve.TYPE_INFO_POLY);o.appendBits(u,10);const d=new j;if(d.appendBits(ve.TYPE_INFO_MASK_PATTERN,15),o.xor(d),o.getSize()!==15)throw new He("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(r,i){i.appendBits(r.getVersionNumber(),6);const o=ve.calculateBCHCode(r.getVersionNumber(),ve.VERSION_INFO_POLY);if(i.appendBits(o,12),i.getSize()!==18)throw new He("should not happen but we got: "+i.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let i=8;i<r.getWidth()-8;++i){const o=(i+1)%2;ve.isEmpty(r.get(i,6))&&r.setNumber(i,6,o),ve.isEmpty(r.get(6,i))&&r.setNumber(6,i,o)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new He;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,i,o){for(let c=0;c<8;++c){if(!ve.isEmpty(o.get(r+c,i)))throw new He;o.setNumber(r+c,i,0)}}static embedVerticalSeparationPattern(r,i,o){for(let c=0;c<7;++c){if(!ve.isEmpty(o.get(r,i+c)))throw new He;o.setNumber(r,i+c,0)}}static embedPositionAdjustmentPattern(r,i,o){for(let c=0;c<5;++c){const u=ve.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)o.setNumber(r+d,i+c,u[d])}}static embedPositionDetectionPattern(r,i,o){for(let c=0;c<7;++c){const u=ve.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)o.setNumber(r+d,i+c,u[d])}}static embedPositionDetectionPatternsAndSeparators(r){const i=ve.POSITION_DETECTION_PATTERN[0].length;ve.embedPositionDetectionPattern(0,0,r),ve.embedPositionDetectionPattern(r.getWidth()-i,0,r),ve.embedPositionDetectionPattern(0,r.getWidth()-i,r);const o=8;ve.embedHorizontalSeparationPattern(0,o-1,r),ve.embedHorizontalSeparationPattern(r.getWidth()-o,o-1,r),ve.embedHorizontalSeparationPattern(0,r.getWidth()-o,r);const c=7;ve.embedVerticalSeparationPattern(c,0,r),ve.embedVerticalSeparationPattern(r.getHeight()-c-1,0,r),ve.embedVerticalSeparationPattern(c,r.getHeight()-c,r)}static maybeEmbedPositionAdjustmentPatterns(r,i){if(r.getVersionNumber()<2)return;const o=r.getVersionNumber()-1,c=ve.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let u=0,d=c.length;u!==d;u++){const f=c[u];if(f>=0)for(let x=0;x!==d;x++){const y=c[x];y>=0&&ve.isEmpty(i.get(y,f))&&ve.embedPositionAdjustmentPattern(y-2,f-2,i)}}}}ve.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ve.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ve.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ve.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ve.VERSION_INFO_POLY=7973,ve.TYPE_INFO_POLY=1335,ve.TYPE_INFO_MASK_PATTERN=21522;class Ow{constructor(r,i){this.dataBytes=r,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ye{constructor(){}static calculateMaskPenalty(r){return ft.applyMaskPenaltyRule1(r)+ft.applyMaskPenaltyRule2(r)+ft.applyMaskPenaltyRule3(r)+ft.applyMaskPenaltyRule4(r)}static encode(r,i,o=null){let c=Ye.DEFAULT_BYTE_MODE_ENCODING;const u=o!==null&&o.get(_t.CHARACTER_SET)!==void 0;u&&(c=o.get(_t.CHARACTER_SET).toString());const d=this.chooseMode(r,c),f=new j;if(d===we.BYTE&&(u||Ye.DEFAULT_BYTE_MODE_ENCODING!==c)){const ne=K.getCharacterSetECIByName(c);ne!==void 0&&this.appendECI(ne,f)}this.appendModeInfo(d,f);const x=new j;this.appendBytes(r,d,x,c);let y;if(o!==null&&o.get(_t.QR_VERSION)!==void 0){const ne=Number.parseInt(o.get(_t.QR_VERSION).toString(),10);y=me.getVersionForNumber(ne);const Q=this.calculateBitsNeeded(d,f,x,y);if(!this.willFit(Q,y,i))throw new He("Data too big for requested version")}else y=this.recommendVersion(i,d,f,x);const E=new j;E.appendBitArray(f);const _=d===we.BYTE?x.getSizeInBytes():r.length;this.appendLengthInfo(_,y,d,E),E.appendBitArray(x);const N=y.getECBlocksForLevel(i),D=y.getTotalCodewords()-N.getTotalECCodewords();this.terminateBits(D,E);const B=this.interleaveWithECBytes(E,y.getTotalCodewords(),D,N.getNumBlocks()),F=new As;F.setECLevel(i),F.setMode(d),F.setVersion(y);const H=y.getDimensionForVersion(),$=new Ja(H,H),te=this.chooseMaskPattern(B,i,y,$);return F.setMaskPattern(te),ve.buildMatrix(B,i,y,te,$),F.setMatrix($),F}static recommendVersion(r,i,o,c){const u=this.calculateBitsNeeded(i,o,c,me.getVersionForNumber(1)),d=this.chooseVersion(u,r),f=this.calculateBitsNeeded(i,o,c,d);return this.chooseVersion(f,r)}static calculateBitsNeeded(r,i,o,c){return i.getSize()+r.getCharacterCountBits(c)+o.getSize()}static getAlphanumericCode(r){return r<Ye.ALPHANUMERIC_TABLE.length?Ye.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,i=null){if(K.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(r))return we.KANJI;let o=!1,c=!1;for(let u=0,d=r.length;u<d;++u){const f=r.charAt(u);if(Ye.isDigit(f))o=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)c=!0;else return we.BYTE}return c?we.ALPHANUMERIC:o?we.NUMERIC:we.BYTE}static isOnlyDoubleByteKanji(r){let i;try{i=xe.encode(r,K.SJIS)}catch{return!1}const o=i.length;if(o%2!==0)return!1;for(let c=0;c<o;c+=2){const u=i[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(r,i,o,c){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let f=0;f<As.NUM_MASK_PATTERNS;f++){ve.buildMatrix(r,i,o,f,c);let x=this.calculateMaskPenalty(c);x<u&&(u=x,d=f)}return d}static chooseVersion(r,i){for(let o=1;o<=40;o++){const c=me.getVersionForNumber(o);if(Ye.willFit(r,c,i))return c}throw new He("Data too big")}static willFit(r,i,o){const c=i.getTotalCodewords(),d=i.getECBlocksForLevel(o).getTotalECCodewords(),f=c-d,x=(r+7)/8;return f>=x}static terminateBits(r,i){const o=r*8;if(i.getSize()>o)throw new He("data bits cannot fit in the QR Code"+i.getSize()+" > "+o);for(let d=0;d<4&&i.getSize()<o;++d)i.appendBit(!1);const c=i.getSize()&7;if(c>0)for(let d=c;d<8;d++)i.appendBit(!1);const u=r-i.getSizeInBytes();for(let d=0;d<u;++d)i.appendBits(d&1?17:236,8);if(i.getSize()!==o)throw new He("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,i,o,c,u,d){if(c>=o)throw new He("Block ID too large");const f=r%o,x=o-f,y=Math.floor(r/o),E=y+1,_=Math.floor(i/o),N=_+1,D=y-_,B=E-N;if(D!==B)throw new He("EC bytes mismatch");if(o!==x+f)throw new He("RS blocks mismatch");if(r!==(_+D)*x+(N+B)*f)throw new He("Total bytes mismatch");c<x?(u[0]=_,d[0]=D):(u[0]=N,d[0]=B)}static interleaveWithECBytes(r,i,o,c){if(r.getSizeInBytes()!==o)throw new He("Number of bits and data bytes does not match");let u=0,d=0,f=0;const x=new Array;for(let E=0;E<c;++E){const _=new Int32Array(1),N=new Int32Array(1);Ye.getNumDataBytesAndNumECBytesForBlockID(i,o,c,E,_,N);const D=_[0],B=new Uint8Array(D);r.toBytes(8*u,B,0,D);const F=Ye.generateECBytes(B,N[0]);x.push(new Ow(B,F)),d=Math.max(d,D),f=Math.max(f,F.length),u+=_[0]}if(o!==u)throw new He("Data bytes does not match offset");const y=new j;for(let E=0;E<d;++E)for(const _ of x){const N=_.getDataBytes();E<N.length&&y.appendBits(N[E],8)}for(let E=0;E<f;++E)for(const _ of x){const N=_.getErrorCorrectionBytes();E<N.length&&y.appendBits(N[E],8)}if(i!==y.getSizeInBytes())throw new He("Interleaving error: "+i+" and "+y.getSizeInBytes()+" differ.");return y}static generateECBytes(r,i){const o=r.length,c=new Int32Array(o+i);for(let d=0;d<o;d++)c[d]=r[d]&255;new pu(Le.QR_CODE_FIELD_256).encode(c,i);const u=new Uint8Array(i);for(let d=0;d<i;d++)u[d]=c[o+d];return u}static appendModeInfo(r,i){i.appendBits(r.getBits(),4)}static appendLengthInfo(r,i,o,c){const u=o.getCharacterCountBits(i);if(r>=1<<u)throw new He(r+" is bigger than "+((1<<u)-1));c.appendBits(r,u)}static appendBytes(r,i,o,c){switch(i){case we.NUMERIC:Ye.appendNumericBytes(r,o);break;case we.ALPHANUMERIC:Ye.appendAlphanumericBytes(r,o);break;case we.BYTE:Ye.append8BitBytes(r,o,c);break;case we.KANJI:Ye.appendKanjiBytes(r,o);break;default:throw new He("Invalid mode: "+i)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const i=Ye.getDigit(r);return i>=0&&i<=9}static appendNumericBytes(r,i){const o=r.length;let c=0;for(;c<o;){const u=Ye.getDigit(r.charAt(c));if(c+2<o){const d=Ye.getDigit(r.charAt(c+1)),f=Ye.getDigit(r.charAt(c+2));i.appendBits(u*100+d*10+f,10),c+=3}else if(c+1<o){const d=Ye.getDigit(r.charAt(c+1));i.appendBits(u*10+d,7),c+=2}else i.appendBits(u,4),c++}}static appendAlphanumericBytes(r,i){const o=r.length;let c=0;for(;c<o;){const u=Ye.getAlphanumericCode(r.charCodeAt(c));if(u===-1)throw new He;if(c+1<o){const d=Ye.getAlphanumericCode(r.charCodeAt(c+1));if(d===-1)throw new He;i.appendBits(u*45+d,11),c+=2}else i.appendBits(u,6),c++}}static append8BitBytes(r,i,o){let c;try{c=xe.encode(r,o)}catch(u){throw new He(u)}for(let u=0,d=c.length;u!==d;u++){const f=c[u];i.appendBits(f,8)}}static appendKanjiBytes(r,i){let o;try{o=xe.encode(r,K.SJIS)}catch(u){throw new He(u)}const c=o.length;for(let u=0;u<c;u+=2){const d=o[u]&255,f=o[u+1]&255,x=d<<8&4294967295|f;let y=-1;if(x>=33088&&x<=40956?y=x-33088:x>=57408&&x<=60351&&(y=x-49472),y===-1)throw new He("Invalid byte sequence");const E=(y>>8)*192+(y&255);i.appendBits(E,13)}}static appendECI(r,i){i.appendBits(we.ECI.getBits(),4),i.appendBits(r.getValue(),8)}}Ye.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ye.DEFAULT_BYTE_MODE_ENCODING=K.UTF8.getName();class Ss{write(r,i,o,c=null){if(r.length===0)throw new b("Found empty contents");if(i<0||o<0)throw new b("Requested dimensions are too small: "+i+"x"+o);let u=Ke.L,d=Ss.QUIET_ZONE_SIZE;c!==null&&(c.get(_t.ERROR_CORRECTION)!==void 0&&(u=Ke.fromString(c.get(_t.ERROR_CORRECTION).toString())),c.get(_t.MARGIN)!==void 0&&(d=Number.parseInt(c.get(_t.MARGIN).toString(),10)));const f=Ye.encode(r,u,c);return this.renderResult(f,i,o,d)}writeToDom(r,i,o,c,u=null){typeof r=="string"&&(r=document.querySelector(r));const d=this.write(i,o,c,u);r&&r.appendChild(d)}renderResult(r,i,o,c){const u=r.getMatrix();if(u===null)throw new ir;const d=u.getWidth(),f=u.getHeight(),x=d+c*2,y=f+c*2,E=Math.max(i,x),_=Math.max(o,y),N=Math.min(Math.floor(E/x),Math.floor(_/y)),D=Math.floor((E-d*N)/2),B=Math.floor((_-f*N)/2),F=this.createSVGElement(E,_);for(let H=0,$=B;H<f;H++,$+=N)for(let te=0,ne=D;te<d;te++,ne+=N)if(u.get(te,H)===1){const Q=this.createSvgRectElement(ne,$,N,N);F.appendChild(Q)}return F}createSVGElement(r,i){const o=document.createElementNS(Ss.SVG_NS,"svg");return o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",i.toString()),o}createSvgRectElement(r,i,o,c){const u=document.createElementNS(Ss.SVG_NS,"rect");return u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",i.toString()),u.setAttributeNS(null,"height",o.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}Ss.QUIET_ZONE_SIZE=4,Ss.SVG_NS="http://www.w3.org/2000/svg";class ii{encode(r,i,o,c,u){if(r.length===0)throw new b("Found empty contents");if(i!==fe.QR_CODE)throw new b("Can only encode QR_CODE, but got "+i);if(o<0||c<0)throw new b(`Requested dimensions are too small: ${o}x${c}`);let d=Ke.L,f=ii.QUIET_ZONE_SIZE;u!==null&&(u.get(_t.ERROR_CORRECTION)!==void 0&&(d=Ke.fromString(u.get(_t.ERROR_CORRECTION).toString())),u.get(_t.MARGIN)!==void 0&&(f=Number.parseInt(u.get(_t.MARGIN).toString(),10)));const x=Ye.encode(r,d,u);return ii.renderResult(x,o,c,f)}static renderResult(r,i,o,c){const u=r.getMatrix();if(u===null)throw new ir;const d=u.getWidth(),f=u.getHeight(),x=d+c*2,y=f+c*2,E=Math.max(i,x),_=Math.max(o,y),N=Math.min(Math.floor(E/x),Math.floor(_/y)),D=Math.floor((E-d*N)/2),B=Math.floor((_-f*N)/2),F=new se(E,_);for(let H=0,$=B;H<f;H++,$+=N)for(let te=0,ne=D;te<d;te++,ne+=N)u.get(te,H)===1&&F.setRegion(ne,$,N,N);return F}}ii.QUIET_ZONE_SIZE=4;class Pw{encode(r,i,o,c,u){let d;switch(i){case fe.QR_CODE:d=new ii;break;default:throw new b("No encoder available for format "+i)}return d.encode(r,i,o,c,u)}}class cr extends J{constructor(r,i,o,c,u,d,f,x){if(super(d,f),this.yuvData=r,this.dataWidth=i,this.dataHeight=o,this.left=c,this.top=u,c+d>i||u+f>o)throw new b("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(d,f)}getRow(r,i){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const c=(r+this.top)*this.dataWidth+this.left;return P.arraycopy(this.yuvData,c,i,0,o),i}getMatrix(){const r=this.getWidth(),i=this.getHeight();if(r===this.dataWidth&&i===this.dataHeight)return this.yuvData;const o=r*i,c=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return P.arraycopy(this.yuvData,u,c,0,o),c;for(let d=0;d<i;d++){const f=d*r;P.arraycopy(this.yuvData,u,c,f,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,i,o,c){return new cr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+i,o,c,!1)}renderThumbnail(){const r=this.getWidth()/cr.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/cr.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(r*i),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let d=0;d<i;d++){const f=d*r;for(let x=0;x<r;x++){const y=c[u+x*cr.THUMBNAIL_SCALE_FACTOR]&255;o[f+x]=4278190080|y*65793}u+=this.dataWidth*cr.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/cr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/cr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,i){const o=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<i;c++,u+=this.dataWidth){const d=u+r/2;for(let f=u,x=u+r-1;f<d;f++,x--){const y=o[f];o[f]=o[x],o[x]=y}}}invert(){return new de(this)}}cr.THUMBNAIL_SCALE_FACTOR=2;class mu extends J{constructor(r,i,o,c,u,d,f){if(super(i,o),this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=f,r.BYTES_PER_ELEMENT===4){const x=i*o,y=new Uint8ClampedArray(x);for(let E=0;E<x;E++){const _=r[E],N=_>>16&255,D=_>>7&510,B=_&255;y[E]=(N+D+B)/4&255}this.luminances=y}else this.luminances=r;if(c===void 0&&(this.dataWidth=i),u===void 0&&(this.dataHeight=o),d===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+o>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(r,i){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const c=(r+this.top)*this.dataWidth+this.left;return P.arraycopy(this.luminances,c,i,0,o),i}getMatrix(){const r=this.getWidth(),i=this.getHeight();if(r===this.dataWidth&&i===this.dataHeight)return this.luminances;const o=r*i,c=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return P.arraycopy(this.luminances,u,c,0,o),c;for(let d=0;d<i;d++){const f=d*r;P.arraycopy(this.luminances,u,c,f,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,i,o,c){return new mu(this.luminances,o,c,this.dataWidth,this.dataHeight,this.left+r,this.top+i)}invert(){return new de(this)}}class B0 extends K{static forName(r){return this.getCharacterSetECIByName(r)}}class xu{}xu.ISO_8859_1=K.ISO8859_1;class F0{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class U0{static singletonList(r){return[r]}static min(r,i){return r.sort(i)[0]}}class Dw{constructor(r){this.previous=r}getPrevious(){return this.previous}}class oi extends Dw{constructor(r,i,o){super(r),this.value=i,this.bitCount=o}appendTo(r,i){r.appendBits(this.value,this.bitCount)}add(r,i){return new oi(this,r,i)}addBinaryShift(r,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new oi(this,r,i)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+A.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class yu extends oi{constructor(r,i,o){super(r,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=o}appendTo(r,i){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):o===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(i[this.binaryShiftStart+o],8)}addBinaryShift(r,i){return new yu(this,r,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Mw(S,r,i){return new yu(S,r,i)}function Eo(S,r,i){return new oi(S,r,i)}const jw=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Xr=0,el=1,Dn=2,V0=3,ur=4,Lw=new oi(null,0,0),wu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Bw(S){for(let r of S)I.fill(r,-1);return S[Xr][ur]=0,S[el][ur]=0,S[el][Xr]=28,S[V0][ur]=0,S[Dn][ur]=0,S[Dn][Xr]=15,S}const z0=Bw(I.createInt32Array(6,6));class hr{constructor(r,i,o,c){this.token=r,this.mode=i,this.binaryShiftByteCount=o,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,i){let o=this.bitCount,c=this.token;if(r!==this.mode){let d=wu[this.mode][r];c=Eo(c,d&65535,d>>16),o+=d>>16}let u=r===Dn?4:5;return c=Eo(c,i,u),new hr(c,r,0,o+u)}shiftAndAppend(r,i){let o=this.token,c=this.mode===Dn?4:5;return o=Eo(o,z0[this.mode][r],c),o=Eo(o,i,5),new hr(o,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(r){let i=this.token,o=this.mode,c=this.bitCount;if(this.mode===ur||this.mode===Dn){let f=wu[o][Xr];i=Eo(i,f&65535,f>>16),c+=f>>16,o=Xr}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new hr(i,o,this.binaryShiftByteCount+1,c+u);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(r+1)),d}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=Mw(i,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new hr(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let i=this.bitCount+(wu[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?i+=hr.calculateBinaryShiftCost(r)-hr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(i+=10),i<=r.bitCount}toBitArray(r){let i=[];for(let c=this.endBinaryShift(r.length).token;c!==null;c=c.getPrevious())i.unshift(c);let o=new j;for(const c of i)c.appendTo(o,r);return o}toString(){return ue.format("%s bits=%d bytes=%d",jw[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}hr.INITIAL_STATE=new hr(Lw,Xr,0,0);function Fw(S){const r=ue.getCharCode(" "),i=ue.getCharCode("."),o=ue.getCharCode(",");S[Xr][r]=1;const c=ue.getCharCode("Z"),u=ue.getCharCode("A");for(let N=u;N<=c;N++)S[Xr][N]=N-u+2;S[el][r]=1;const d=ue.getCharCode("z"),f=ue.getCharCode("a");for(let N=f;N<=d;N++)S[el][N]=N-f+2;S[Dn][r]=1;const x=ue.getCharCode("9"),y=ue.getCharCode("0");for(let N=y;N<=x;N++)S[Dn][N]=N-y+2;S[Dn][o]=12,S[Dn][i]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let N=0;N<E.length;N++)S[V0][ue.getCharCode(E[N])]=N;const _=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let N=0;N<_.length;N++)ue.getCharCode(_[N])>0&&(S[ur][ue.getCharCode(_[N])]=N);return S}const vu=Fw(I.createInt32Array(5,256));class Co{constructor(r){this.text=r}encode(){const r=ue.getCharCode(" "),i=ue.getCharCode(`
`);let o=U0.singletonList(hr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,f=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case ue.getCharCode("\r"):d=f===i?2:0;break;case ue.getCharCode("."):d=f===r?3:0;break;case ue.getCharCode(","):d=f===r?4:0;break;case ue.getCharCode(":"):d=f===r?5:0;break;default:d=0}d>0?(o=Co.updateStateListForPair(o,u,d),u++):o=this.updateStateListForChar(o,u)}return U0.min(o,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,i){const o=[];for(let c of r)this.updateStateForChar(c,i,o);return Co.simplifyStates(o)}updateStateForChar(r,i,o){let c=this.text[i]&255,u=vu[r.getMode()][c]>0,d=null;for(let f=0;f<=ur;f++){let x=vu[f][c];if(x>0){if(d==null&&(d=r.endBinaryShift(i)),!u||f===r.getMode()||f===Dn){const y=d.latchAndAppend(f,x);o.push(y)}if(!u&&z0[r.getMode()][f]>=0){const y=d.shiftAndAppend(f,x);o.push(y)}}}if(r.getBinaryShiftByteCount()>0||vu[r.getMode()][c]===0){let f=r.addBinaryShiftChar(i);o.push(f)}}static updateStateListForPair(r,i,o){const c=[];for(let u of r)this.updateStateForPair(u,i,o,c);return this.simplifyStates(c)}static updateStateForPair(r,i,o,c){let u=r.endBinaryShift(i);if(c.push(u.latchAndAppend(ur,o)),r.getMode()!==ur&&c.push(u.shiftAndAppend(ur,o)),o===3||o===4){let d=u.latchAndAppend(Dn,16-o).latchAndAppend(Dn,1);c.push(d)}if(r.getBinaryShiftByteCount()>0){let d=r.addBinaryShiftChar(i).addBinaryShiftChar(i+1);c.push(d)}}static simplifyStates(r){let i=[];for(const o of r){let c=!0;for(const u of i){if(u.isBetterThanOrEqualTo(o)){c=!1;break}o.isBetterThanOrEqualTo(u)&&(i=i.filter(d=>d!==u))}c&&i.push(o)}return i}}class Me{constructor(){}static encodeBytes(r){return Me.encode(r,Me.DEFAULT_EC_PERCENT,Me.DEFAULT_AZTEC_LAYERS)}static encode(r,i,o){let c=new Co(r).encode(),u=A.truncDivision(c.getSize()*i,100)+11,d=c.getSize()+u,f,x,y,E,_;if(o!==Me.DEFAULT_AZTEC_LAYERS){if(f=o<0,x=Math.abs(o),x>(f?Me.MAX_NB_BITS_COMPACT:Me.MAX_NB_BITS))throw new b(ue.format("Illegal value %s for layers",o));y=Me.totalBitsInLayer(x,f),E=Me.WORD_SIZE[x];let Q=y-y%E;if(_=Me.stuffBits(c,E),_.getSize()+u>Q)throw new b("Data to large for user specified layer");if(f&&_.getSize()>E*64)throw new b("Data to large for user specified layer")}else{E=0,_=null;for(let Q=0;;Q++){if(Q>Me.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(f=Q<=3,x=f?Q+1:Q,y=Me.totalBitsInLayer(x,f),d>y)continue;(_==null||E!==Me.WORD_SIZE[x])&&(E=Me.WORD_SIZE[x],_=Me.stuffBits(c,E));let Re=y-y%E;if(!(f&&_.getSize()>E*64)&&_.getSize()+u<=Re)break}}let N=Me.generateCheckWords(_,y,E),D=_.getSize()/E,B=Me.generateModeMessage(f,x,D),F=(f?11:14)+x*4,H=new Int32Array(F),$;if(f){$=F;for(let Q=0;Q<H.length;Q++)H[Q]=Q}else{$=F+1+2*A.truncDivision(A.truncDivision(F,2)-1,15);let Q=A.truncDivision(F,2),Re=A.truncDivision($,2);for(let Se=0;Se<Q;Se++){let un=Se+A.truncDivision(Se,15);H[Q-Se-1]=Re-un-1,H[Q+Se]=Re+un+1}}let te=new se($);for(let Q=0,Re=0;Q<x;Q++){let Se=(x-Q)*4+(f?9:12);for(let un=0;un<Se;un++){let Gn=un*2;for(let hn=0;hn<2;hn++)N.get(Re+Gn+hn)&&te.set(H[Q*2+hn],H[Q*2+un]),N.get(Re+Se*2+Gn+hn)&&te.set(H[Q*2+un],H[F-1-Q*2-hn]),N.get(Re+Se*4+Gn+hn)&&te.set(H[F-1-Q*2-hn],H[F-1-Q*2-un]),N.get(Re+Se*6+Gn+hn)&&te.set(H[F-1-Q*2-un],H[Q*2+hn])}Re+=Se*8}if(Me.drawModeMessage(te,f,$,B),f)Me.drawBullsEye(te,A.truncDivision($,2),5);else{Me.drawBullsEye(te,A.truncDivision($,2),7);for(let Q=0,Re=0;Q<A.truncDivision(F,2)-1;Q+=15,Re+=16)for(let Se=A.truncDivision($,2)&1;Se<$;Se+=2)te.set(A.truncDivision($,2)-Re,Se),te.set(A.truncDivision($,2)+Re,Se),te.set(Se,A.truncDivision($,2)-Re),te.set(Se,A.truncDivision($,2)+Re)}let ne=new F0;return ne.setCompact(f),ne.setSize($),ne.setLayers(x),ne.setCodeWords(D),ne.setMatrix(te),ne}static drawBullsEye(r,i,o){for(let c=0;c<o;c+=2)for(let u=i-c;u<=i+c;u++)r.set(u,i-c),r.set(u,i+c),r.set(i-c,u),r.set(i+c,u);r.set(i-o,i-o),r.set(i-o+1,i-o),r.set(i-o,i-o+1),r.set(i+o,i-o),r.set(i+o,i-o+1),r.set(i+o,i+o-1)}static generateModeMessage(r,i,o){let c=new j;return r?(c.appendBits(i-1,2),c.appendBits(o-1,6),c=Me.generateCheckWords(c,28,4)):(c.appendBits(i-1,5),c.appendBits(o-1,11),c=Me.generateCheckWords(c,40,4)),c}static drawModeMessage(r,i,o,c){let u=A.truncDivision(o,2);if(i)for(let d=0;d<7;d++){let f=u-3+d;c.get(d)&&r.set(f,u-5),c.get(d+7)&&r.set(u+5,f),c.get(20-d)&&r.set(f,u+5),c.get(27-d)&&r.set(u-5,f)}else for(let d=0;d<10;d++){let f=u-5+d+A.truncDivision(d,5);c.get(d)&&r.set(f,u-7),c.get(d+10)&&r.set(u+7,f),c.get(29-d)&&r.set(f,u+7),c.get(39-d)&&r.set(u-7,f)}}static generateCheckWords(r,i,o){let c=r.getSize()/o,u=new pu(Me.getGF(o)),d=A.truncDivision(i,o),f=Me.bitsToWords(r,o,d);u.encode(f,d-c);let x=i%o,y=new j;y.appendBits(0,x);for(const E of Array.from(f))y.appendBits(E,o);return y}static bitsToWords(r,i,o){let c=new Int32Array(o),u,d;for(u=0,d=r.getSize()/i;u<d;u++){let f=0;for(let x=0;x<i;x++)f|=r.get(u*i+x)?1<<i-x-1:0;c[u]=f}return c}static getGF(r){switch(r){case 4:return Le.AZTEC_PARAM;case 6:return Le.AZTEC_DATA_6;case 8:return Le.AZTEC_DATA_8;case 10:return Le.AZTEC_DATA_10;case 12:return Le.AZTEC_DATA_12;default:throw new b("Unsupported word size "+r)}}static stuffBits(r,i){let o=new j,c=r.getSize(),u=(1<<i)-2;for(let d=0;d<c;d+=i){let f=0;for(let x=0;x<i;x++)(d+x>=c||r.get(d+x))&&(f|=1<<i-1-x);(f&u)===u?(o.appendBits(f&u,i),d--):f&u?o.appendBits(f,i):(o.appendBits(f|1,i),d--)}return o}static totalBitsInLayer(r,i){return((i?88:112)+16*r)*r}}Me.DEFAULT_EC_PERCENT=33,Me.DEFAULT_AZTEC_LAYERS=0,Me.MAX_NB_BITS=32,Me.MAX_NB_BITS_COMPACT=4,Me.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class tl{encode(r,i,o,c){return this.encodeWithHints(r,i,o,c,null)}encodeWithHints(r,i,o,c,u){let d=xu.ISO_8859_1,f=Me.DEFAULT_EC_PERCENT,x=Me.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(_t.CHARACTER_SET)&&(d=B0.forName(u.get(_t.CHARACTER_SET).toString())),u.has(_t.ERROR_CORRECTION)&&(f=A.parseInt(u.get(_t.ERROR_CORRECTION).toString())),u.has(_t.AZTEC_LAYERS)&&(x=A.parseInt(u.get(_t.AZTEC_LAYERS).toString()))),tl.encodeLayers(r,i,o,c,d,f,x)}static encodeLayers(r,i,o,c,u,d,f){if(i!==fe.AZTEC)throw new b("Can only encode AZTEC, but got "+i);let x=Me.encode(ue.getBytes(r,u),d,f);return tl.renderResult(x,o,c)}static renderResult(r,i,o){let c=r.getMatrix();if(c==null)throw new ir;let u=c.getWidth(),d=c.getHeight(),f=Math.max(i,u),x=Math.max(o,d),y=Math.min(f/u,x/d),E=(f-u*y)/2,_=(x-d*y)/2,N=new se(f,x);for(let D=0,B=_;D<d;D++,B+=y)for(let F=0,H=E;F<u;F++,H+=y)c.get(F,D)&&N.setRegion(H,B,y,y);return N}}n.AbstractExpandedDecoder=iu,n.ArgumentException=v,n.ArithmeticException=Wa,n.AztecCode=F0,n.AztecCodeReader=Xa,n.AztecCodeWriter=tl,n.AztecDecoder=Xe,n.AztecDetector=S0,n.AztecDetectorResult=C0,n.AztecEncoder=Me,n.AztecHighLevelEncoder=Co,n.AztecPoint=Jt,n.BarcodeFormat=fe,n.Binarizer=R,n.BinaryBitmap=C,n.BitArray=j,n.BitMatrix=se,n.BitSource=cu,n.BrowserAztecCodeReader=hw,n.BrowserBarcodeReader=mw,n.BrowserCodeReader=kn,n.BrowserDatamatrixCodeReader=yw,n.BrowserMultiFormatReader=Nw,n.BrowserPDF417Reader=kw,n.BrowserQRCodeReader=Rw,n.BrowserQRCodeSvgWriter=Ss,n.CharacterSetECI=K,n.ChecksumException=T,n.Code128Reader=ie,n.Code39Reader=At,n.DataMatrixDecodedBitStreamParser=zr,n.DataMatrixReader=Wr,n.DecodeHintType=z,n.DecoderResult=ho,n.DefaultGridSampler=A0,n.DetectorResult=Ga,n.EAN13Reader=vs,n.EncodeHintType=_t,n.Exception=m,n.FormatException=L,n.GenericGF=Le,n.GenericGFPoly=on,n.GlobalHistogramBinarizer=Te,n.GridSampler=tu,n.GridSamplerInstance=Ur,n.HTMLCanvasElementLuminanceSource=ye,n.HybridBinarizer=re,n.ITFReader=We,n.IllegalArgumentException=b,n.IllegalStateException=ir,n.InvertedLuminanceSource=de,n.LuminanceSource=J,n.MathUtils=De,n.MultiFormatOneDReader=ri,n.MultiFormatReader=L0,n.MultiFormatWriter=Pw,n.NotFoundException=W,n.OneDReader=bt,n.PDF417DecodedBitStreamParser=q,n.PDF417DecoderErrorCorrection=R0,n.PDF417Reader=Lt,n.PDF417ResultMetadata=P0,n.PerspectiveTransform=Wn,n.PlanarYUVLuminanceSource=cr,n.QRCodeByteMatrix=Ja,n.QRCodeDataMask=On,n.QRCodeDecodedBitStreamParser=it,n.QRCodeDecoderErrorCorrectionLevel=Ke,n.QRCodeDecoderFormatInformation=Xt,n.QRCodeEncoder=Ye,n.QRCodeEncoderQRCode=As,n.QRCodeMaskUtil=ft,n.QRCodeMatrixUtil=ve,n.QRCodeMode=we,n.QRCodeReader=Hr,n.QRCodeVersion=me,n.QRCodeWriter=ii,n.RGBLuminanceSource=mu,n.RSS14Reader=dt,n.RSSExpandedReader=Y,n.ReaderException=Qa,n.ReedSolomonDecoder=go,n.ReedSolomonEncoder=pu,n.ReedSolomonException=Js,n.Result=st,n.ResultMetadataType=kt,n.ResultPoint=he,n.StringUtils=ue,n.UnsupportedOperationException=Z,n.VideoInputDevice=tt,n.WhiteRectangleDetector=wr,n.WriterException=He,n.ZXingArrays=I,n.ZXingCharset=B0,n.ZXingInteger=A,n.ZXingStandardCharsets=xu,n.ZXingStringBuilder=oe,n.ZXingStringEncoding=xe,n.ZXingSystem=P,n.createAbstractExpandedDecoder=N0,Object.defineProperty(n,"__esModule",{value:!0})})})(Bd,Bd.exports);var Qe=Bd.exports;const hT=Ww(Qe),dT=zw({__proto__:null,default:hT},[Qe]);var Vp=function(){function t(e,n,s){if(this.formatMap=new Map([[le.QR_CODE,Qe.BarcodeFormat.QR_CODE],[le.AZTEC,Qe.BarcodeFormat.AZTEC],[le.CODABAR,Qe.BarcodeFormat.CODABAR],[le.CODE_39,Qe.BarcodeFormat.CODE_39],[le.CODE_93,Qe.BarcodeFormat.CODE_93],[le.CODE_128,Qe.BarcodeFormat.CODE_128],[le.DATA_MATRIX,Qe.BarcodeFormat.DATA_MATRIX],[le.MAXICODE,Qe.BarcodeFormat.MAXICODE],[le.ITF,Qe.BarcodeFormat.ITF],[le.EAN_13,Qe.BarcodeFormat.EAN_13],[le.EAN_8,Qe.BarcodeFormat.EAN_8],[le.PDF_417,Qe.BarcodeFormat.PDF_417],[le.RSS_14,Qe.BarcodeFormat.RSS_14],[le.RSS_EXPANDED,Qe.BarcodeFormat.RSS_EXPANDED],[le.UPC_A,Qe.BarcodeFormat.UPC_A],[le.UPC_E,Qe.BarcodeFormat.UPC_E],[le.UPC_EAN_EXTENSION,Qe.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!dT)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=s;var a=this.createZXingFormats(e),l=new Map;l.set(Qe.DecodeHintType.POSSIBLE_FORMATS,a),l.set(Qe.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(s,a){try{s(n.decode(e))}catch(l){a(l)}})},t.prototype.decode=function(e){var n=new Qe.MultiFormatReader(this.verbose,this.hints),s=new Qe.HTMLCanvasElementLuminanceSource(e),a=new Qe.BinaryBitmap(new Qe.HybridBinarizer(s)),l=n.decode(a);return{text:l.text,format:lw.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,s,a){e.set(n,s)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],s=0,a=e;s<a.length;s++){var l=a[s];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),fT=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(v){try{m(s.next(v))}catch(b){h(b)}}function p(v){try{m(s.throw(v))}catch(b){h(b)}}function m(v){v.done?l(v.value):a(v.value).then(g,p)}m((s=s.apply(t,e||[])).next())})},gT=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(m){return function(v){return p([m,v])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,m[0]&&(n=0)),n;)try{if(s=1,a&&(l=m[0]&2?a.return:m[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,m[1])).done)return l;switch(a=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(v){m=[6,v],a=0}finally{s=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},zp=function(){function t(e,n,s){if(this.formatMap=new Map([[le.QR_CODE,"qr_code"],[le.AZTEC,"aztec"],[le.CODABAR,"codabar"],[le.CODE_39,"code_39"],[le.CODE_93,"code_93"],[le.CODE_128,"code_128"],[le.DATA_MATRIX,"data_matrix"],[le.ITF,"itf"],[le.EAN_13,"ean_13"],[le.EAN_8,"ean_8"],[le.PDF_417,"pdf417"],[le.UPC_A,"upc_a"],[le.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=s;var a=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return fT(this,void 0,void 0,function(){var n,s;return gT(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(n),[2,{text:s.rawValue,format:lw.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,s=0,a=0,l=e;a<l.length;a++){var h=l[a],g=h.boundingBox.width*h.boundingBox.height;g>s&&(s=g,n=h)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],s=0,a=e;s<a.length;s++){var l=a[s];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,s,a){e.set(n,s)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Wp=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(v){try{m(s.next(v))}catch(b){h(b)}}function p(v){try{m(s.throw(v))}catch(b){h(b)}}function m(v){v.done?l(v.value):a(v.value).then(g,p)}m((s=s.apply(t,e||[])).next())})},Hp=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(m){return function(v){return p([m,v])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,m[0]&&(n=0)),n;)try{if(s=1,a&&(l=m[0]&2?a.return:m[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,m[1])).done)return l;switch(a=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(v){m=[6,v],a=0}finally{s=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},pT=function(){function t(e,n,s,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,n&&zp.isSupported()?(this.primaryDecoder=new zp(e,s,a),this.secondaryDecoder=new Vp(e,s,a)):this.primaryDecoder=new Vp(e,s,a)}return t.prototype.decodeAsync=function(e){return Wp(this,void 0,void 0,function(){var n;return Hp(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Wp(this,void 0,void 0,function(){var n,s;return Hp(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,a.sent()];case 3:if(s=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw s;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,s=this.executionResults;n<s.length;n++){var a=s[n];e+=a}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),E0=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function s(){this.constructor=e}e.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),Tc=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(v){try{m(s.next(v))}catch(b){h(b)}}function p(v){try{m(s.throw(v))}catch(b){h(b)}}function m(v){v.done?l(v.value):a(v.value).then(g,p)}m((s=s.apply(t,e||[])).next())})},Ic=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(m){return function(v){return p([m,v])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,m[0]&&(n=0)),n;)try{if(s=1,a&&(l=m[0]&2?a.return:m[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,m[1])).done)return l;switch(a=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(v){m=[6,v],a=0}finally{s=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},uw=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var s={advanced:[n]};return this.track.applyConstraints(s)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),mT=function(t){E0(e,t);function e(n,s){return t.call(this,n,s)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var s={};s[this.name]=n;var a={advanced:[s]};return this.track.applyConstraints(a)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),s=n[this.name];return{min:s.min,max:s.max,step:s.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(uw),xT=function(t){E0(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(mT),yT=function(t){E0(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(uw),wT=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new xT(this.track)},t.prototype.torchFeature=function(){return new yT(this.track)},t}(),vT=function(){function t(e,n,s){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var s=e.surface.clientWidth,a=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(s,a),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,s,a){return Tc(this,void 0,void 0,function(){var l,h;return Ic(this,function(g){switch(g.label){case 0:return l=new t(e,n,a),s.aspectRatio?(h={aspectRatio:s.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(h)]):[3,2];case 1:g.sent(),g.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,s=function(){setTimeout(e,200),n.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Tc(this,void 0,void 0,function(){return Ic(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,s){var a=e.mediaStream.getVideoTracks(),l=a.length,h=0;e.mediaStream.getVideoTracks().forEach(function(g){e.mediaStream.removeTrack(g),g.stop(),++h,h>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new wT(this.getFirstTrackOrFail())},t}(),bT=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,s){return Tc(this,void 0,void 0,function(){return Ic(this,function(a){return[2,vT.create(e,this.mediaStream,n,s)]})})},t.create=function(e){return Tc(this,void 0,void 0,function(){var n,s;return Ic(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return s=a.sent(),[2,new t(s)]}})})},t}(),Gp=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(v){try{m(s.next(v))}catch(b){h(b)}}function p(v){try{m(s.throw(v))}catch(b){h(b)}}function m(v){v.done?l(v.value):a(v.value).then(g,p)}m((s=s.apply(t,e||[])).next())})},Xp=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(m){return function(v){return p([m,v])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,m[0]&&(n=0)),n;)try{if(s=1,a&&(l=m[0]&2?a.return:m[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,m[1])).done)return l;switch(a=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(v){m=[6,v],a=0}finally{s=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},ET=function(){function t(){}return t.failIfNotSupported=function(){return Gp(this,void 0,void 0,function(){return Xp(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Gp(this,void 0,void 0,function(){return Xp(this,function(n){return[2,bT.create(e)]})})},t}(),CT=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(v){try{m(s.next(v))}catch(b){h(b)}}function p(v){try{m(s.throw(v))}catch(b){h(b)}}function m(v){v.done?l(v.value):a(v.value).then(g,p)}m((s=s.apply(t,e||[])).next())})},AT=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(m){return function(v){return p([m,v])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,m[0]&&(n=0)),n;)try{if(s=1,a&&(l=m[0]&2?a.return:m[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,m[1])).done)return l;switch(a=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(v){m=[6,v],a=0}finally{s=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},ST=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Fi.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Fi.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return CT(this,void 0,void 0,function(){var e,n,s,a,l,h,g;return AT(this,function(p){switch(p.label){case 0:return e=function(m){for(var v=m.getVideoTracks(),b=0,C=v;b<C.length;b++){var T=C[b];T.enabled=!1,T.stop(),m.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=p.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=p.sent(),a=[],l=0,h=s;l<h.length;l++)g=h[l],g.kind==="videoinput"&&a.push({id:g.deviceId,label:g.label});return e(n),[2,a]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var s=function(l){for(var h=[],g=0,p=l;g<p.length;g++){var m=p[g];m.kind==="video"&&h.push({id:m.id,label:m.label})}e(h)},a=MediaStreamTrack;a.getSources(s)})},t}(),gt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(gt||(gt={}));var _T=function(){function t(){this.state=gt.NOT_STARTED,this.onGoingTransactionNewState=gt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===gt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=gt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===gt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=gt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==gt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case gt.UNKNOWN:throw"Transition from unknown is not allowed";case gt.NOT_STARTED:this.failIfNewStateIs(e,[gt.PAUSED]);break;case gt.SCANNING:break;case gt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var s=0,a=n;s<a.length;s++){var l=a[s];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),TT=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===gt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==gt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===gt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===gt.PAUSED},t}(),IT=function(){function t(){}return t.create=function(){return new TT(new _T)},t}(),NT=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function s(){this.constructor=e}e.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),wn=function(t){NT(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(lT),kT=function(){function t(e,n){this.logger=n,this.fps=wn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=wn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?cw.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!br(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),RT=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var s;typeof n=="boolean"?this.verbose=n===!0:n&&(s=n,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new uT(this.verbose),this.qrcode=new pT(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=IT.create()}return t.prototype.start=function(e,n,s,a){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var h;a?h=a:h=this.verbose?this.logger.log:function(){};var g=kT.create(n,this.logger);this.clearElement();var p=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?p=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=p,v=document.getElementById(this.elementId);v.clientWidth?v.clientWidth:wn.DEFAULT_WIDTH,v.style.position="relative",this.shouldScan=!0,this.element=v;var b=this,C=this.stateManagerProxy.startTransition(gt.SCANNING);return new Promise(function(T,R){var P=m?g.videoConstraints:b.createVideoConstraints(e);if(!P){C.cancel(),R("videoConstraints should be defined");return}var M={};(!m||g.aspectRatio)&&(M.aspectRatio=g.aspectRatio);var k={onRenderSurfaceReady:function(I,A){b.setupUi(I,A,g),b.isScanning=!0,b.foreverScan(g,s,h)}};ET.failIfNotSupported().then(function(I){I.create(P).then(function(A){return A.render(l.element,M,k).then(function(j){b.renderedCamera=j,C.execute(),T(null)}).catch(function(j){C.cancel(),R(j)})}).catch(function(A){C.cancel(),R(Fi.errorGettingUserMedia(A))})}).catch(function(I){C.cancel(),R(Fi.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(gt.PAUSED),this.showPausedState(),(br(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(gt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(gt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(e.element){var l=document.getElementById(wn.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),s(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(s){return s.decodedText})},t.prototype.scanFileV2=function(e,n){var s=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(br(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,l){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(e);var h=new Image;h.onload=function(){var g=h.width,p=h.height,m=document.getElementById(s.elementId),v=m.clientWidth?m.clientWidth:wn.DEFAULT_WIDTH,b=Math.max(m.clientHeight?m.clientHeight:p,wn.FILE_SCAN_MIN_HEIGHT),C=s.computeCanvasDrawConfig(g,p,v,b);if(n){var T=s.createCanvasElement(v,b,"qr-canvas-visible");T.style.display="inline-block",m.appendChild(T);var R=T.getContext("2d");if(!R)throw"Unable to get 2d context from canvas";R.canvas.width=v,R.canvas.height=b,R.drawImage(h,0,0,g,p,C.x,C.y,C.width,C.height)}var P=wn.FILE_SCAN_HIDDEN_CANVAS_PADDING,M=Math.max(h.width,C.width),k=Math.max(h.height,C.height),I=M+2*P,A=k+2*P,j=s.createCanvasElement(I,A);m.appendChild(j);var U=j.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=I,U.canvas.height=A,U.drawImage(h,0,0,g,p,P,P,M,k);try{s.qrcode.decodeRobustlyAsync(j).then(function(z){a(Up.createFromQrcodeResult(z))}).catch(l)}catch(z){l("QR code parse error, error = ".concat(z))}},h.onerror=l,h.onabort=l,h.onstalled=l,h.onsuspend=l,h.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return ST.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!cw.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[le.QR_CODE,le.AZTEC,le.CODABAR,le.CODE_39,le.CODE_93,le.CODE_128,le.DATA_MATRIX,le.MAXICODE,le.ITF,le.EAN_13,le.EAN_8,le.PDF_417,le.RSS_14,le.RSS_EXPANDED,le.UPC_A,le.UPC_E,le.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],a=0,l=e.formatsToSupport;a<l.length;a++){var h=l[a];aT(h)?s.push(h):this.logger.warn("Invalid format: ".concat(h," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(br(e))return!0;if(!br(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(br(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return br(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,s){var a=this,l=s.qrbox;this.validateQrboxConfig(l);var h=this.toQrdimensions(e,n,l),g=function(m){if(m<wn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(wn.MIN_QR_BOX_SIZE,"px.")},p=function(m){return m>e&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=e),m};g(h.width),g(h.height),h.width=p(h.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(e,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return s},t.prototype.setupUi=function(e,n,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,s);var a=br(s.qrbox)?{width:e,height:n}:s.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(e,n,a);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var h=s.isShadedBoxEnabled()&&l.height<=n,g={x:0,y:0,width:e,height:n},p=h?this.getShadedRegionBounds(e,n,l):g,m=this.createCanvasElement(p.width,p.height),v={willReadFrequently:!0},b=m.getContext("2d",v);b.canvas.width=p.width,b.canvas.height=p.height,this.element.append(m),h&&this.possiblyInsertShadingElement(this.element,e,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=p,this.context=b,this.canvasElement=m},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Fi.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return e(a.text,Up.createFromQrcodeResult(a)),s.possiblyUpdateShaders(!0),!0}).catch(function(a){s.possiblyUpdateShaders(!1);var l=Fi.codeParseError(a);return n(l,cT.createFrom(l)),!1})},t.prototype.foreverScan=function(e,n,s){var a=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),h=l.videoWidth/l.clientWidth,g=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var p=this.qrRegion.width*h,m=this.qrRegion.height*g,v=this.qrRegion.x*h,b=this.qrRegion.y*g;this.context.drawImage(l,v,b,p,m,0,0,this.qrRegion.width,this.qrRegion.height);var C=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(e,n,s)},a.getTimeoutFps(e.fps))};this.scanContext(n,s).then(function(T){!T&&e.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,s).finally(function(){C()})):C()}).catch(function(T){a.logger.logError("Error happend while scanning context",T),C()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",s="deviceId",a={user:!0,environment:!0},l="exact",h=function(R){if(R in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(R,"'")},g=Object.keys(e);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var p=Object.keys(e)[0];if(p!==n&&p!==s)throw"Only '".concat(n,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(p===n){var m=e.facingMode;if(typeof m=="string"){if(h(m))return{facingMode:m}}else if(typeof m=="object")if(l in m){if(h(m["".concat(l)]))return{facingMode:{exact:m["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var v=typeof m;throw"Invalid type of 'facingMode' = ".concat(v)}}else{var b=e.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(l in b)return{deviceId:{exact:b["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var C=typeof b;throw"Invalid type of 'deviceId' = ".concat(C)}}}var T=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},t.prototype.computeCanvasDrawConfig=function(e,n,s,a){if(e<=s&&n<=a){var l=(s-e)/2,h=(a-n)/2;return{x:l,y:h,width:e,height:n}}else{var g=e,p=n;return e>s&&(n=s/e*n,e=s),n>a&&(e=a/n*e,n=a),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(p)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,s,a)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?wn.BORDER_SHADER_MATCH_COLOR:wn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,s){var a=e,l=n,h=document.createElement("canvas");return h.style.width="".concat(a,"px"),h.style.height="".concat(l,"px"),h.style.display="none",h.id=br(s)?"qr-canvas":s,h},t.prototype.getShadedRegionBounds=function(e,n,s){if(s.width>e||s.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-s.width)/2,y:(n-s.height)/2,width:s.width,height:s.height}},t.prototype.possiblyInsertShadingElement=function(e,n,s,a){if(!(n-a.width<1||s-a.height<1)){var l=document.createElement("div");l.style.position="absolute";var h=(n-a.width)/2,g=(s-a.height)/2;if(l.style.borderLeft="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(wn.SHADED_REGION_ELEMENT_ID),n-a.width<11||s-a.height<11)this.hasBorderShaders=!1;else{var p=5,m=40;this.insertShaderBorders(l,m,p,-p,null,0,!0),this.insertShaderBorders(l,m,p,-p,null,0,!1),this.insertShaderBorders(l,m,p,null,-p,0,!0),this.insertShaderBorders(l,m,p,null,-p,0,!1),this.insertShaderBorders(l,p,m+p,-p,null,-p,!0),this.insertShaderBorders(l,p,m+p,null,-p,-p,!0),this.insertShaderBorders(l,p,m+p,-p,null,-p,!1),this.insertShaderBorders(l,p,m+p,null,-p,-p,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,n,s,a,l,h,g){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=wn.BORDER_SHADER_DEFAULT_COLOR,p.style.width="".concat(n,"px"),p.style.height="".concat(s,"px"),a!==null&&(p.style.top="".concat(a,"px")),l!==null&&(p.style.bottom="".concat(l,"px")),g?p.style.left="".concat(h,"px"):p.style.right="".concat(h,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),e.appendChild(p)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Kp;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Kp||(Kp={}));const OT=()=>{try{const t=new(window.AudioContext||window.webkitAudioContext),e=t.createOscillator(),n=t.createGain();e.connect(n),n.connect(t.destination),e.type="sine",e.frequency.value=1500,n.gain.value=.1,e.start(),setTimeout(()=>e.stop(),150)}catch(t){console.error("Audio Context not supported",t)}},PT=({onBack:t,currentUser:e,onOpenRegistration:n})=>{const[s,a]=X.useState([]),[l,h]=X.useState(""),[g,p]=X.useState(!1),[m,v]=X.useState(!1),[b,C]=X.useState(null),[T,R]=X.useState({show:!1,message:""}),[P,M]=X.useState(!1);X.useEffect(()=>{k()},[e]);const k=async()=>{let V=Ne.from("products").select("*").order("created_at",{ascending:!1});e?V=V.eq("user_id",e.id):V=V.is("user_id",null);const{data:K}=await V;K&&a(K)},I=V=>{C(V),v(!0)},A=()=>{if(!e&&s.length>=3){M(!0);return}C(null),v(!0)},j=()=>{v(!1),C(null)},U=V=>{j(),k(),R({show:!0,message:V})},z=()=>{M(!1),n&&n("   ")},L=s.filter(V=>V.name.toLowerCase().includes(l.toLowerCase()));return w.jsxs("div",{className:"h-screen flex flex-col bg-[#FFF9C4] overflow-hidden font-sans relative",children:[w.jsx(Qs,{message:T.message,isVisible:T.show,onClose:()=>R({...T,show:!1})}),P&&w.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[w.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>M(!1)}),w.jsxs("div",{className:"bg-white w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden relative z-10 animate-in zoom-in duration-200 p-6 text-center",children:[w.jsx("div",{className:"w-16 h-16 bg-[#00695c]/10 rounded-full flex items-center justify-center mx-auto mb-4 text-[#00695c]",children:w.jsx(p2,{size:32,strokeWidth:2.5})}),w.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"   ! "}),w.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-6",children:"                 .     !"}),w.jsx("button",{onClick:z,className:"w-full bg-[#00695c] text-white h-12 rounded-xl font-bold shadow-md hover:bg-[#005c4b] active:scale-95 transition-transform",children:" "}),w.jsx("button",{onClick:()=>M(!1),className:"mt-3 text-gray-400 text-sm font-medium hover:text-gray-600",children:""})]})]}),w.jsxs("div",{className:"bg-[#00695c] text-white h-16 flex items-center justify-between px-4 shadow-lg shrink-0 rounded-b-2xl z-20",children:[w.jsx("button",{onClick:t,className:"p-2 hover:bg-[#005c4b] rounded-xl transition-colors active:scale-95",children:w.jsx(sr,{size:24,strokeWidth:2.5})}),w.jsx("h1",{className:"text-xl font-bold text-center mx-2",children:""}),w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx("button",{onClick:()=>p(!g),className:`p-2 rounded-xl transition-colors active:scale-95 ${g?"bg-[#005c4b]":"hover:bg-[#005c4b]"}`,children:w.jsx(j3,{size:24,strokeWidth:2.5})}),w.jsx("button",{onClick:A,className:"p-2 hover:bg-[#005c4b] rounded-xl transition-colors active:scale-95",children:w.jsx(to,{size:28,strokeWidth:2.5})})]})]}),w.jsx("div",{className:`bg-[#FFF9C4] px-4 overflow-hidden transition-all duration-300 ease-in-out ${g?"max-h-20 py-4":"max-h-0 py-0"}`,children:w.jsx("input",{type:"text",value:l,onChange:V=>h(V.target.value),placeholder:"  ...",className:"w-full h-12 px-4 rounded-xl border-2 border-[#00695c] focus:outline-none focus:ring-2 focus:ring-[#00695c]/50 text-right text-base font-medium shadow-sm caret-[#00695c] placeholder-gray-400 bg-white"})}),w.jsxs("div",{className:"px-4 py-2 flex items-center gap-2 text-[#00695c] font-bold text-sm border-b border-[#00695c]/10 shrink-0",children:[w.jsx("div",{className:"flex-1 text-center pr-2",children:""}),w.jsx("div",{className:"w-16 text-center",children:""}),w.jsx("div",{className:"w-20 text-center",children:""}),w.jsx("div",{className:"w-10 text-center",children:""})]}),w.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-20 pt-2 custom-scrollbar",children:w.jsxs("div",{className:"flex flex-col gap-3",children:[L.map(V=>{const K=(V.quantity||0)<=(V.low_stock_alert||0);return w.jsxs("div",{className:"bg-white rounded-xl p-2 shadow-sm border border-gray-100 flex items-center gap-2 h-14",children:[w.jsxs("div",{className:`flex-1 text-center truncate font-bold pr-2 text-sm flex items-center justify-center gap-1 ${K?"text-red-600":"text-gray-800"}`,children:[K&&w.jsx(y3,{size:18,strokeWidth:3,className:"text-red-600 animate-bounce"}),w.jsx("span",{className:"truncate",children:V.name})]}),w.jsx("div",{className:`w-16 h-10 rounded-lg border flex items-center justify-center font-bold text-sm ${K?"bg-red-50 border-red-200 text-red-600":"bg-gray-50 border-gray-200 text-gray-700"}`,children:V.quantity}),w.jsx("div",{className:"w-20 h-10 rounded-lg border border-gray-200 flex items-center justify-center font-bold text-gray-700 bg-gray-50 text-sm",children:V.selling_price}),w.jsx("button",{onClick:()=>I(V),className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gray-100 text-gray-400 hover:bg-[#00695c] hover:text-white hover:shadow-md transition-all active:scale-95",children:w.jsx(lo,{size:20})})]},V.id)}),L.length===0&&w.jsx("div",{className:"text-center text-gray-400 mt-10 font-medium",children:"  "})]})}),m&&w.jsx(DT,{product:b,currentUser:e,onClose:j,onSuccess:U})]})},DT=({product:t,currentUser:e,onClose:n,onSuccess:s})=>{const[a,l]=X.useState(!1),[h,g]=X.useState([]),[p,m]=X.useState(!1),[v,b]=X.useState(!1),[C,T]=X.useState(!1),[R,P]=X.useState({name:"",quantity:"",purchase_price:"",selling_price:"",barcode:"",low_stock_alert:"",category:""});X.useEffect(()=>{(async()=>{const{data:V}=await Ne.from("categories").select("id, name");V&&g(V)})(),t&&P({name:t.name||"",quantity:t.quantity||"",purchase_price:t.purchase_price||"",selling_price:t.selling_price||"",barcode:t.barcode||"",low_stock_alert:t.low_stock_alert||"",category:t.category||""})},[t]);const M=L=>P({...R,[L.target.name]:L.target.value}),k=async L=>{if(L.preventDefault(),!R.name)return;l(!0);let V;const K={...R,user_id:e?e.id:null};if(t){const{error:Z}=await Ne.from("products").update(K).eq("id",t.id);V=Z}else{const{error:Z}=await Ne.from("products").insert([K]);V=Z}l(!1),V?alert("   "):s(t?"   ":"   ")},I=async()=>{if(!t)return;l(!0);const{error:L}=await Ne.from("products").delete().eq("id",t.id);l(!1),L?alert("   "):s("   "),T(!1)},A=X.useCallback(L=>{OT(),P(V=>({...V,barcode:L})),m(!1),b(!1)},[]),j=X.useCallback(()=>{b(!0)},[]),U="w-full h-12 px-4 rounded-xl border-2 border-[#00695c] focus:outline-none focus:ring-2 focus:ring-[#00695c]/50 text-right text-base font-medium shadow-sm caret-[#00695c] placeholder-gray-400 bg-white",z="block text-[#00695c] text-xs font-bold mb-1 text-right px-1";return w.jsxs("div",{className:"absolute inset-0 bg-[#FFF9C4] z-50 flex flex-col h-full animate-in slide-in-from-bottom duration-300",children:[w.jsx(za,{isOpen:C,title:" ",message:"      ",onConfirm:I,onCancel:()=>T(!1)}),w.jsxs("div",{className:"bg-[#00695c] text-white h-16 flex items-center px-4 shadow-lg shrink-0 rounded-b-2xl",children:[w.jsx("button",{onClick:n,className:"p-2 hover:bg-[#005c4b] rounded-xl",children:w.jsx(Mr,{size:24})}),w.jsx("h1",{className:"text-xl font-bold flex-1 text-center ml-10",children:t?"  ":"  "})]}),p&&w.jsx("div",{className:"absolute inset-0 z-[60] bg-black flex flex-col items-center justify-center p-4",children:w.jsxs("div",{className:"w-full max-w-sm relative",children:[w.jsx("button",{onClick:()=>{m(!1),b(!1)},className:"absolute -top-12 right-0 z-20 bg-white/20 p-2 rounded-full text-white hover:bg-white/40",children:w.jsx(Mr,{size:24})}),w.jsx("div",{className:"bg-black rounded-3xl overflow-hidden relative min-h-[350px] border-4 border-[#00695c] shadow-2xl",children:v?w.jsxs("div",{className:"absolute inset-0 bg-gray-900 flex flex-col items-center justify-center p-6 text-center text-white",children:[w.jsx("div",{className:"w-20 h-20 bg-[#00695c] rounded-full flex items-center justify-center mb-6 shadow-lg animate-pulse",children:w.jsx(Df,{size:40,className:"text-white"})}),w.jsx("h3",{className:"text-2xl font-bold mb-4",children:" "}),w.jsx("p",{className:"text-gray-300 text-base mb-8 leading-relaxed max-w-xs",children:"       ."}),w.jsx("button",{onClick:()=>{try{window.open("chrome://settings/content/camera")}catch(L){console.log(L)}window.location.reload()},className:"bg-white text-[#00695c] px-8 py-4 rounded-xl font-bold text-lg hover:bg-gray-100 transition-colors w-full shadow-md",children:" "})]}):w.jsxs(w.Fragment,{children:[w.jsx("div",{id:"reader",className:"w-full h-full"}),w.jsx(MT,{onScanSuccess:A,onPermissionError:j}),w.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:w.jsx("p",{className:"text-white/80 text-sm font-bold animate-pulse",children:"   ..."})})]})})]})}),w.jsxs("form",{onSubmit:k,className:"flex-1 flex flex-col p-4 gap-3 overflow-y-auto",children:[w.jsxs("div",{children:[w.jsx("label",{className:z,children:" "}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{name:"name",value:R.name,onChange:M,className:`${U} ${t?"pl-12":""}`,placeholder:" ..."}),t&&w.jsx("button",{type:"button",onClick:()=>T(!0),className:"absolute left-1 top-1 bottom-1 w-10 flex items-center justify-center text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:w.jsx(Dr,{size:20})})]})]}),w.jsxs("div",{className:"flex gap-3",children:[w.jsxs("div",{className:"flex-1",children:[w.jsx("label",{className:z,children:" "}),w.jsx("input",{name:"purchase_price",value:R.purchase_price,onChange:M,type:"number",className:U,placeholder:"0.00"})]}),w.jsxs("div",{className:"flex-1",children:[w.jsx("label",{className:z,children:" "}),w.jsx("input",{name:"selling_price",value:R.selling_price,onChange:M,type:"number",className:U,placeholder:"0.00"})]})]}),w.jsxs("div",{className:"flex gap-3",children:[w.jsxs("div",{className:"flex-1",children:[w.jsx("label",{className:z,children:""}),w.jsx("input",{name:"quantity",value:R.quantity,onChange:M,type:"number",className:U,placeholder:"0"})]}),w.jsxs("div",{className:"flex-1",children:[w.jsx("label",{className:z,children:" "}),w.jsx("input",{name:"low_stock_alert",value:R.low_stock_alert,onChange:M,type:"number",className:U,placeholder:"5"})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:z,children:""}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{name:"barcode",value:R.barcode,onChange:M,className:`${U} pl-12`,placeholder:"scan..."}),w.jsx("button",{type:"button",onClick:()=>{m(!0),b(!1)},className:"absolute left-1 top-1 bottom-1 w-10 flex items-center justify-center text-[#00695c] hover:bg-gray-100 rounded-lg transition-colors",children:w.jsx(d2,{size:24})})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:z,children:""}),w.jsxs("select",{name:"category",value:R.category,onChange:M,className:`${U} appearance-none`,children:[w.jsx("option",{value:"",children:""}),h.map(L=>w.jsx("option",{value:L.name,children:L.name},L.id))]})]}),w.jsxs("button",{type:"submit",disabled:a,className:"w-full bg-[#00695c] text-white h-14 rounded-xl font-bold text-lg shadow-md hover:bg-[#005c4b] flex items-center justify-center gap-2 mt-2 shrink-0",children:[w.jsx(lo,{size:24}),w.jsx("span",{children:t?" ":" "})]}),w.jsx("div",{className:"flex-1"})]})]})},MT=({onScanSuccess:t,onPermissionError:e})=>(X.useEffect(()=>{const n=new RT("reader"),s={fps:10,qrbox:{width:250,height:250}};return n.start({facingMode:"environment"},s,a=>{t(a),n.stop().catch(l=>console.error("Stop failed",l))},a=>{}).catch(a=>{(a==null?void 0:a.name)==="NotAllowedError"||(a==null?void 0:a.name)==="NotFoundError"||(a==null?void 0:a.toString().includes("Permission"))?e():console.error("Error starting scanner",a)}),()=>{n.isScanning&&n.stop().catch(a=>console.error("Cleanup stop failed",a)),n.clear()}},[t,e]),null),jT=({onBack:t})=>{const[e,n]=X.useState(0),[s,a]=X.useState([{id:"bok",name:" ",amount:0,color:"#d32f2f",textColor:"text-white"},{id:"fib",name:"  ",amount:0,color:"#fbc02d",textColor:"text-gray-900"},{id:"omd",name:"  ",amount:0,color:"#2e7d32",textColor:"text-white"},{id:"other",name:" ",amount:0,color:"#7b1fa2",textColor:"text-white"}]);X.useEffect(()=>{l();const g=Ne.channel("treasury_updates").on("postgres_changes",{event:"*",schema:"public",table:"treasury_balances"},l).subscribe();return()=>{g.unsubscribe()}},[]);const l=async()=>{const{data:g}=await Ne.from("treasury_balances").select("*");if(g&&g.length>0){a(m=>m.map(v=>{const b=g.find(C=>C.name===v.name);return b?{...v,amount:b.amount}:v}));const p=g.filter(m=>m.name!==" ").reduce((m,v)=>m+Number(v.amount),0);n(p)}},h=s.length>0?Math.max(...s.map(g=>g.amount),1):1;return w.jsxs("div",{className:"h-screen flex flex-col bg-[#FFF9C4] overflow-hidden font-sans",children:[w.jsxs("div",{className:"bg-[#00695c] text-white h-16 flex items-center px-4 shadow-lg shrink-0 rounded-b-2xl z-10",children:[w.jsx("button",{onClick:t,className:"p-2 hover:bg-[#005c4b] rounded-xl transition-colors active:scale-95",children:w.jsx(sr,{size:24,strokeWidth:2.5})}),w.jsx("h1",{className:"text-xl font-bold flex-1 text-center ml-10",children:""})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pb-20 custom-scrollbar",children:[w.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-gray-100 mb-6 text-center relative overflow-hidden group",children:[w.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-[#00695c]/10 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),w.jsxs("h2",{className:"text-gray-500 font-bold mb-2 flex items-center justify-center gap-2",children:[w.jsx(g2,{size:20,className:"text-[#00695c]"}),"  ( )"]}),w.jsxs("div",{className:"text-4xl font-black text-[#00695c] tracking-tight",children:[e.toLocaleString()," ",w.jsx("span",{className:"text-lg text-gray-400 font-medium",children:"."})]})]}),w.jsx("div",{className:"grid grid-cols-2 gap-4 mb-8",children:s.map(g=>w.jsxs("button",{className:"relative group h-24 rounded-2xl transition-all duration-150 active:scale-95 outline-none",children:[w.jsx("div",{className:"absolute inset-0 rounded-2xl translate-y-1.5 opacity-40",style:{backgroundColor:g.color}}),w.jsxs("div",{className:`absolute inset-0 rounded-2xl flex flex-col items-center justify-center p-2 border-2 transition-transform duration-150 group-hover:-translate-y-1 group-active:translate-y-1 ${g.textColor}`,style:{backgroundColor:g.color,borderColor:"rgba(255,255,255,0.2)"},children:[w.jsx("span",{className:"font-bold text-sm opacity-90",children:g.name}),w.jsx("span",{className:"font-black text-lg dir-ltr",children:Number(g.amount).toLocaleString()})]})]},g.id))}),w.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:[w.jsx("h3",{className:"text-[#00695c] font-bold mb-6 text-right border-r-4 border-[#00695c] pr-2",children:" "}),w.jsx("div",{className:"flex items-end justify-around h-48 gap-2 px-2",children:s.map(g=>{const p=g.amount/h*100;return w.jsxs("div",{className:"flex flex-col items-center gap-2 w-full group",children:[w.jsx("div",{className:"relative w-full max-w-[40px] flex items-end h-full rounded-t-lg bg-gray-50 overflow-hidden",children:w.jsx("div",{className:"w-full rounded-t-lg transition-all duration-1000 ease-out relative group-hover:opacity-90",style:{height:`${p}%`,backgroundColor:g.color},children:w.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:Number(g.amount).toLocaleString()})})}),w.jsx("span",{className:"text-[10px] font-bold text-gray-500 truncate w-full text-center",children:g.name.split(" ")[1]||g.name})]},g.id)})})]})]})]})},LT=({onBack:t})=>{const[e,n]=X.useState([]),[s,a]=X.useState({}),[l,h]=X.useState(!1),[g,p]=X.useState(!1),[m,v]=X.useState({show:!1,message:""}),[b,C]=X.useState(null),[T,R]=X.useState(!1),[P,M]=X.useState(!1),[k,I]=X.useState(!1),[A,j]=X.useState({name:"",amount:"",payment_method:" "});X.useEffect(()=>{U(),z()},[]);const U=async()=>{const{data:oe}=await Ne.from("expenses").select("*").order("created_at",{ascending:!1});oe&&n(oe)},z=async()=>{const{data:oe}=await Ne.from("treasury_balances").select("name, amount");if(oe){const se={};oe.forEach(W=>{se[W.name]=W.amount}),a(se)}},L=()=>{const oe=new Date,se=String(oe.getDate()).padStart(2,"0"),W=oe.toLocaleString("default",{month:"short"});return`${se} ${W}`},V=async oe=>{if(oe.preventDefault(),!A.name||!A.amount)return;const se=parseFloat(A.amount);if(!k){const W=s[A.payment_method]||0;if(se>W){alert(`     ${A.payment_method}.  : ${W.toLocaleString()}`);return}}if(p(!0),k&&b){const W=parseFloat(b.amount),Te=se-W,{error:re}=await Ne.from("expenses").update({name:A.name,amount:se}).eq("id",b.id);if(re)alert("   ");else{const de=(s[b.payment_method]||0)-Te;await Ne.from("treasury_balances").update({amount:de}).eq("name",b.payment_method),v({show:!0,message:"   "})}}else{const{error:W}=await Ne.from("expenses").insert([{name:A.name,amount:se,payment_method:A.payment_method,expense_date:L()}]);W?alert("   "):v({show:!0,message:"   "})}p(!1),h(!1),I(!1),C(null),j({name:"",amount:"",payment_method:" "}),U(),z()},K=oe=>{C(oe),R(!0)},Z=()=>{b&&(j({name:b.name,amount:b.amount,payment_method:b.payment_method}),I(!0),h(!0),R(!1))},xe=async()=>{if(!b)return;const{error:oe}=await Ne.from("expenses").delete().eq("id",b.id);oe||(v({show:!0,message:"   "}),U()),M(!1),R(!1)},ue=e.reduce((oe,se)=>oe+Number(se.amount),0);return w.jsxs("div",{className:"h-screen flex flex-col bg-[#FFF9C4] overflow-hidden font-sans relative",children:[w.jsx(Qs,{message:m.message,isVisible:m.show,onClose:()=>v({...m,show:!1})}),w.jsx(za,{isOpen:P,title:" ",message:"      ",onConfirm:xe,onCancel:()=>M(!1)}),w.jsxs("div",{className:"bg-[#00695c] text-white h-16 flex items-center px-4 shadow-lg shrink-0 rounded-b-2xl z-10",children:[w.jsx("button",{onClick:t,className:"p-2 hover:bg-[#005c4b] rounded-xl transition-colors active:scale-95",children:w.jsx(sr,{size:24,strokeWidth:2.5})}),w.jsx("h1",{className:"text-xl font-bold flex-1 text-center ml-10",children:""})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-4 pb-20 custom-scrollbar",children:e.length===0?w.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 opacity-80 mt-[-40px]",children:[w.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:w.jsx(cd,{size:40,className:"text-gray-300"})}),w.jsx("p",{className:"font-bold text-lg text-center max-w-[200px]",children:"    +  "})]}):w.jsxs("div",{className:"flex flex-col gap-3",children:[e.map(oe=>w.jsxs("button",{onClick:()=>K(oe),className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 flex items-center justify-between active:scale-[0.98] transition-transform w-full",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-12 h-12 rounded-lg bg-red-50 flex items-center justify-center text-red-500",children:w.jsx(cd,{size:24})}),w.jsxs("div",{className:"text-right",children:[w.jsx("h3",{className:"font-bold text-gray-800",children:oe.name}),w.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[w.jsx(l2,{size:12})," ",oe.expense_date,"  ",oe.payment_method]})]})]}),w.jsxs("div",{className:"text-left",children:[w.jsxs("span",{className:"block font-black text-red-600 text-lg dir-ltr",children:["-",Number(oe.amount).toLocaleString()]}),w.jsx("span",{className:"text-[10px] text-gray-400 font-bold",children:"."})]})]},oe.id)),w.jsx("div",{className:"border-t border-dashed border-red-300 my-2 mx-2"}),w.jsxs("div",{className:"px-3 flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-12 h-1 invisible"}),w.jsx("div",{className:"font-bold text-gray-800 text-lg",children:" "})]}),w.jsxs("div",{className:"text-left",children:[w.jsxs("span",{className:"block font-black text-red-600 text-xl dir-ltr",children:["-",ue.toLocaleString()]}),w.jsx("span",{className:"text-[10px] text-gray-400 font-bold",children:"."})]})]})]})}),w.jsx("button",{onClick:()=>{I(!1),j({name:"",amount:"",payment_method:" "}),h(!0)},className:"absolute bottom-6 left-6 w-14 h-14 bg-[#00695c] text-white rounded-2xl shadow-xl flex items-center justify-center hover:bg-[#005c4b] active:scale-90 transition-all z-20",children:w.jsx(to,{size:32,strokeWidth:3})}),T&&w.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center p-4 pt-24",children:[w.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>R(!1)}),w.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl p-4 relative z-10 animate-in slide-in-from-top duration-200 shadow-xl",children:[w.jsx("h3",{className:"text-center font-bold text-gray-800 mb-4 text-lg",children:" "}),w.jsxs("div",{className:"flex gap-3",children:[w.jsxs("button",{onClick:()=>M(!0),className:"flex-1 bg-red-50 text-red-600 h-12 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-red-100",children:[w.jsx(Dr,{size:20})," "]}),w.jsxs("button",{onClick:Z,className:"flex-1 bg-blue-50 text-blue-600 h-12 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-blue-100",children:[w.jsx(jf,{size:20})," "]})]})]})]}),l&&w.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4",children:[w.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>h(!1)}),w.jsxs("div",{className:"bg-white w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden relative z-10 animate-in slide-in-from-bottom duration-300",children:[w.jsxs("div",{className:"bg-[#00695c] text-white p-4 flex justify-between items-center",children:[w.jsx("h2",{className:"text-lg font-bold",children:k?" ":"  "}),w.jsx("button",{onClick:()=>h(!1),className:"p-1 hover:bg-white/20 rounded-full",children:w.jsx(Mr,{size:24})})]}),w.jsxs("form",{onSubmit:V,className:"p-5 flex flex-col gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-[#00695c] text-xs font-bold mb-1 text-right px-1",children:" "}),w.jsx("input",{type:"text",value:A.name,onChange:oe=>j({...A,name:oe.target.value}),placeholder:"  .. ",className:"w-full h-12 px-4 rounded-xl border-2 border-[#00695c] focus:outline-none focus:ring-2 focus:ring-[#00695c]/50 text-right font-medium placeholder-gray-400",autoFocus:!0})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-[#00695c] text-xs font-bold mb-1 text-right px-1",children:" ( )"}),w.jsx("input",{type:"number",value:A.amount,onChange:oe=>j({...A,amount:oe.target.value}),placeholder:"0.00",className:"w-full h-12 px-4 rounded-xl border-2 border-[#00695c] focus:outline-none focus:ring-2 focus:ring-[#00695c]/50 text-right font-bold text-lg placeholder-gray-400"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-[#00695c] text-xs font-bold mb-1 text-right px-1",children:" "}),w.jsxs("div",{className:"relative",children:[w.jsxs("select",{value:A.payment_method,onChange:oe=>j({...A,payment_method:oe.target.value}),disabled:k,className:`w-full h-12 px-4 rounded-xl border-2 border-[#00695c] focus:outline-none focus:ring-2 focus:ring-[#00695c]/50 text-right font-medium appearance-none ${k?"bg-gray-100 text-gray-500":"bg-white"}`,children:[w.jsx("option",{value:" ",children:" "}),w.jsx("option",{value:"  ",children:"  "}),w.jsx("option",{value:"  ",children:"  "}),w.jsx("option",{value:" ",children:" "})]}),!k&&w.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-[#00695c]",children:w.jsx(a2,{size:16,className:"rotate-180"})})]})]}),w.jsxs("button",{type:"submit",disabled:g,className:"w-full bg-[#00695c] text-white h-14 rounded-xl font-bold text-lg shadow-md hover:bg-[#005c4b] flex items-center justify-center gap-2 mt-2",children:[w.jsx(lo,{size:24}),w.jsx("span",{children:k?" ":" "})]})]})]})]})]})},mi=()=>{try{const t=new(window.AudioContext||window.webkitAudioContext),e=t.createOscillator(),n=t.createGain();e.connect(n),n.connect(t.destination),e.type="square",e.frequency.value=800,n.gain.value=.1,e.start(),setTimeout(()=>e.stop(),100)}catch(t){console.error("Audio Context not supported",t)}},BT=({onBack:t})=>{const[e,n]=X.useState([]),[s,a]=X.useState([]),[l,h]=X.useState(!1),[g,p]=X.useState(!1),[m,v]=X.useState(!1),[b,C]=X.useState({show:!1,message:""}),[T,R]=X.useState([]),[P,M]=X.useState(""),[k,I]=X.useState(" "),[A,j]=X.useState(null);X.useEffect(()=>{U(),z()},[]);const U=async()=>{const{data:se}=await Ne.from("sales").select("*").order("created_at",{ascending:!1});if(se){const W={};se.forEach(re=>{const J=re.invoice_id||`LEGACY-${re.id}`;W[J]||(W[J]={invoice_id:J,total_amount:0,date:new Date(re.created_at).toLocaleDateString("en-GB"),created_at:re.created_at}),W[J].total_amount+=Number(re.total_price)});const Te=Object.values(W).sort((re,J)=>new Date(J.created_at)-new Date(re.created_at));n(Te)}},z=async()=>{const{data:se}=await Ne.from("products").select("*").gt("quantity",0);se&&a(se)},L=se=>{if(!se)return;const W=s.find(re=>re.id===parseInt(se));if(!W)return;const Te=T.find(re=>re.id===W.id);Te?Te.quantity<W.quantity?(mi(),R(T.map(re=>re.id===W.id?{...re,quantity:re.quantity+1}:re))):alert("     "):(mi(),R([...T,{...W,quantity:1}])),M("")},V=(se,W)=>{mi(),R(T.map(Te=>{if(Te.id===se){const re=Te.quantity+W,J=s.find(de=>de.id===se);return re>J.quantity||re<1?Te:{...Te,quantity:re}}return Te}))},K=se=>{R(T.filter(W=>W.id!==se))},Z=()=>T.reduce((se,W)=>se+W.selling_price*W.quantity,0),xe=async()=>{if(T.length===0)return;mi(),v(!0);const se=Z(),W=Math.floor(Math.random()*1e6).toString(),Te=new Date().toLocaleString("ar-EG");for(const J of T){await Ne.from("sales").insert([{product_name:J.name,quantity:J.quantity,total_price:J.selling_price*J.quantity,invoice_id:W}]);const de=s.find(ye=>ye.id===J.id);await Ne.from("products").update({quantity:de.quantity-J.quantity}).eq("id",J.id)}const{data:re}=await Ne.from("treasury_balances").select("amount").eq("name",k).single();re&&await Ne.from("treasury_balances").update({amount:re.amount+se}).eq("name",k),v(!1),j({id:W,date:Te,items:T,total:se,method:k}),h(!1),p(!0),R([]),U(),z()},ue=()=>{mi(),window.print()},oe=()=>{mi(),navigator.share?navigator.share({title:" ",text:`  ${A.id} - : ${A.total}`}).catch(console.error):alert("     ")};return w.jsxs("div",{className:"h-screen flex flex-col bg-[#FFF9C4] overflow-hidden font-sans relative",children:[w.jsx(Qs,{message:b.message,isVisible:b.show,onClose:()=>C({...b,show:!1})}),w.jsxs("div",{className:"bg-[#00695c] text-white h-16 flex items-center justify-between px-4 shadow-lg shrink-0 rounded-b-2xl z-10",children:[w.jsx("button",{onClick:t,className:"p-2 hover:bg-[#005c4b] rounded-xl transition-colors active:scale-95",children:w.jsx(sr,{size:24,strokeWidth:2.5})}),w.jsx("h1",{className:"text-xl font-bold flex-1 text-center mx-2 pt-1",children:""}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"p-2 bg-white/10 rounded-xl",children:w.jsx(d2,{size:24,strokeWidth:2})}),w.jsxs("button",{onClick:()=>h(!0),className:"relative group w-10 h-10",children:[w.jsx("div",{className:"absolute inset-0 bg-[#004d40] rounded-xl translate-y-1"}),w.jsx("div",{className:"absolute inset-0 bg-[#26a69a] rounded-xl flex items-center justify-center transition-transform active:translate-y-1 hover:-translate-y-0.5 border border-white/20",children:w.jsx(to,{size:24,strokeWidth:3})})]})]})]}),w.jsxs("div",{className:"px-4 py-3 flex items-center gap-2 text-[#00695c] font-bold text-xs border-b border-[#00695c]/10 shrink-0 bg-[#FFF9C4]",children:[w.jsx("div",{className:"w-8 text-center",children:""}),w.jsx("div",{className:"flex-1 text-center",children:" "}),w.jsx("div",{className:"w-24 text-center",children:""}),w.jsx("div",{className:"w-20 text-center",children:""})]}),w.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-20 pt-2 custom-scrollbar",children:e.length===0?w.jsx("div",{className:"text-center text-gray-400 mt-20 font-medium",children:"   "}):w.jsx("div",{className:"flex flex-col gap-2",children:e.map((se,W)=>w.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-100 flex items-center gap-2 h-12",children:[w.jsx("div",{className:"w-8 text-center font-bold text-gray-400 text-sm",children:W+1}),w.jsxs("div",{className:"flex-1 text-center font-bold text-gray-800 text-sm truncate",children:["#",se.invoice_id.replace("LEGACY-","")]}),w.jsx("div",{className:"w-24 text-center font-black text-[#00695c] text-sm dir-ltr",children:se.total_amount.toLocaleString()}),w.jsx("div",{className:"w-20 text-center font-medium text-gray-500 text-xs dir-ltr",children:se.date})]},se.invoice_id))})}),l&&w.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center p-4 pt-20",children:[w.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>h(!1)}),w.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden relative z-10 animate-in slide-in-from-top duration-300 flex flex-col max-h-[85vh]",children:[w.jsxs("div",{className:"bg-[#00695c] text-white p-4 flex justify-between items-center shrink-0",children:[w.jsx("h2",{className:"text-lg font-bold",children:"  "}),w.jsx("button",{onClick:()=>h(!1),className:"p-1 hover:bg-white/20 rounded-full",children:w.jsx(Mr,{size:24})})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-4",children:[w.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-200",children:[w.jsx("label",{className:"block text-[#00695c] text-xs font-bold mb-2 text-right",children:"  "}),w.jsxs("select",{value:P,onChange:se=>L(se.target.value),className:"w-full h-12 px-4 rounded-xl border-2 border-[#00695c] focus:outline-none focus:ring-2 focus:ring-[#00695c]/50 text-right font-medium bg-white appearance-none",children:[w.jsx("option",{value:"",children:"   ..."}),s.map(se=>w.jsxs("option",{value:se.id,children:[se.name," (: ",se.quantity," | : ",se.selling_price,")"]},se.id))]})]}),w.jsx("div",{className:"flex flex-col gap-2",children:T.map(se=>w.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-3 flex items-center justify-between shadow-sm",children:[w.jsxs("div",{className:"flex-1",children:[w.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:se.name}),w.jsx("div",{className:"text-xs text-gray-500 flex gap-2 mt-1",children:w.jsxs("span",{children:[": ",se.selling_price]})})]}),w.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 rounded-lg p-1",children:[w.jsx("button",{onClick:()=>V(se.id,1),className:"w-8 h-8 bg-white rounded shadow text-[#00695c] flex items-center justify-center active:scale-90",children:w.jsx(to,{size:16,strokeWidth:3})}),w.jsx("span",{className:"font-bold text-lg w-6 text-center",children:se.quantity}),w.jsx("button",{onClick:()=>V(se.id,-1),className:"w-8 h-8 bg-white rounded shadow text-red-500 flex items-center justify-center active:scale-90",children:w.jsx(O3,{size:16,strokeWidth:3})})]}),w.jsx("button",{onClick:()=>K(se.id),className:"mr-3 text-red-400 hover:text-red-600",children:w.jsx(Dr,{size:18})})]},se.id))})]}),w.jsxs("div",{className:"bg-gray-50 p-4 border-t border-gray-200 shrink-0",children:[w.jsxs("div",{className:"flex justify-between items-center mb-4",children:[w.jsx("span",{className:"font-bold text-gray-600",children:" :"}),w.jsxs("span",{className:"font-black text-2xl text-[#00695c]",children:[Z().toLocaleString()," ",w.jsx("span",{className:"text-sm",children:"."})]})]}),w.jsxs("div",{className:"mb-4",children:[w.jsx("label",{className:"block text-gray-600 text-xs font-bold mb-1 text-right",children:"  ()"}),w.jsxs("select",{value:k,onChange:se=>I(se.target.value),className:"w-full h-10 px-3 rounded-lg border border-gray-300 text-right bg-white",children:[w.jsx("option",{value:" ",children:" "}),w.jsx("option",{value:"  ",children:"  "}),w.jsx("option",{value:"  ",children:"  "}),w.jsx("option",{value:" ",children:" "}),w.jsx("option",{value:" ",children:" "})]})]}),w.jsxs("button",{onClick:xe,disabled:m||T.length===0,className:"w-full bg-[#00695c] text-white h-12 rounded-xl font-bold text-lg shadow-md hover:bg-[#005c4b] flex items-center justify-center gap-2 disabled:opacity-50",children:[w.jsx(lo,{size:20}),w.jsx("span",{children:m?" ...":" "})]})]})]})]}),g&&A&&w.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[w.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>p(!1)}),w.jsx("div",{className:"bg-white w-full max-w-sm rounded-none sm:rounded-lg shadow-2xl overflow-hidden relative z-10 animate-in zoom-in duration-200 print:w-full print:h-full print:fixed print:inset-0",children:w.jsxs("div",{className:"p-8 text-center bg-white",children:[w.jsx("div",{className:"w-16 h-16 bg-[#00695c] rounded-full flex items-center justify-center mx-auto mb-4 text-white",children:w.jsx(F3,{size:32})}),w.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:" "}),w.jsxs("p",{className:"text-gray-500 text-sm mb-6",children:[" : #",A.id]}),w.jsxs("div",{className:"border-t border-b border-gray-200 py-4 mb-4",children:[w.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[w.jsx("span",{children:":"}),w.jsx("span",{children:A.date})]}),w.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[w.jsx("span",{children:" :"}),w.jsx("span",{children:A.method})]})]}),w.jsx("div",{className:"flex flex-col gap-2 mb-6",children:A.items.map((se,W)=>w.jsxs("div",{className:"flex justify-between items-center text-sm",children:[w.jsxs("div",{className:"text-right",children:[w.jsx("span",{className:"font-bold text-gray-800 block",children:se.name}),w.jsxs("span",{className:"text-gray-400 text-xs",children:["x",se.quantity]})]}),w.jsx("span",{className:"font-bold text-gray-800",children:(se.selling_price*se.quantity).toLocaleString()})]},W))}),w.jsx("div",{className:"border-t-2 border-dashed border-gray-300 pt-4 mb-8",children:w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"font-bold text-xl text-gray-800",children:" "}),w.jsx("span",{className:"font-black text-2xl text-[#00695c]",children:A.total.toLocaleString()})]})}),w.jsxs("div",{className:"flex gap-3 print:hidden",children:[w.jsxs("button",{onClick:ue,className:"flex-1 bg-gray-800 text-white h-12 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-gray-900",children:[w.jsx(P3,{size:20})," "]}),w.jsxs("button",{onClick:oe,className:"flex-1 bg-[#00695c] text-white h-12 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-[#005c4b]",children:[w.jsx(Mf,{size:20})," "]})]}),w.jsx("button",{onClick:()=>p(!1),className:"mt-4 text-gray-400 hover:text-gray-600 text-sm font-medium print:hidden",children:""})]})})]})]})},FT=({onBack:t})=>{const[e,n]=X.useState({totalProductsCount:0,totalPurchaseValue:0,totalSellingValue:0,lowStockCount:0}),[s,a]=X.useState(!0);X.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:g,error:p}=await Ne.from("products").select("quantity, purchase_price, selling_price, low_stock_alert");if(p)throw p;let m=0,v=0,b=0,C=0;g.forEach(T=>{const R=Number(T.quantity)||0,P=Number(T.purchase_price)||0,M=Number(T.selling_price)||0,k=Number(T.low_stock_alert)||0;m+=R,v+=R*P,b+=R*M,R<=k&&(C+=1)}),n({totalProductsCount:m,totalPurchaseValue:v,totalSellingValue:b,lowStockCount:C})}catch(g){console.error("Error calculating stats:",g)}finally{a(!1)}},h=({title:g,value:p,icon:m,color:v,isAlert:b})=>w.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 flex items-center justify-between",children:w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${v}15`,color:v},children:w.jsx(m,{size:24,strokeWidth:2.5})}),w.jsxs("div",{className:"text-right",children:[w.jsx("h3",{className:"text-gray-500 text-xs font-bold mb-1",children:g}),w.jsxs("div",{className:`text-xl font-black ${b?"text-red-600":"text-gray-800"}`,children:[typeof p=="number"?p.toLocaleString():p,!b&&g.includes("")&&w.jsx("span",{className:"text-[10px] text-gray-400 mr-1 font-medium",children:"."})]})]})]})});return w.jsxs("div",{className:"h-screen flex flex-col bg-[#FFF9C4] overflow-hidden font-sans",children:[w.jsxs("div",{className:"bg-[#00695c] text-white h-16 flex items-center px-4 shadow-lg shrink-0 rounded-b-2xl z-10",children:[w.jsx("button",{onClick:t,className:"p-2 hover:bg-[#005c4b] rounded-xl transition-colors active:scale-95",children:w.jsx(sr,{size:24,strokeWidth:2.5})}),w.jsx("h1",{className:"text-xl font-bold flex-1 text-center ml-10",children:" "})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-4 pb-20 custom-scrollbar",children:w.jsxs("div",{className:"flex flex-col gap-4",children:[w.jsx(h,{title:"  ()",value:e.totalProductsCount,icon:h2,color:"#1976d2"}),w.jsx(h,{title:"   ",value:e.totalPurchaseValue,icon:S3,color:"#f57c00"}),w.jsx(h,{title:"   ",value:e.totalSellingValue,icon:g2,color:"#2e7d32"}),w.jsx(h,{title:"  ()",value:e.lowStockCount,icon:va,color:"#d32f2f",isAlert:!0})]})})]})},UT=({isOpen:t,onClose:e})=>{const[n,s]=X.useState(""),[a,l]=X.useState(""),h=b=>{s(C=>C+b)},g=()=>{s(""),l("")},p=()=>{s(b=>b.slice(0,-1))},m=()=>{try{const b=Function('"use strict";return ('+n+")")();l(b.toString()),s(b.toString())}catch{l("Error")}};if(!t)return null;const v=[{label:"C",action:g,color:"bg-red-100 text-red-600"},{label:"",value:"/",color:"bg-gray-100 text-[#00695c]"},{label:"",value:"*",color:"bg-gray-100 text-[#00695c]"},{label:"",action:p,color:"bg-orange-100 text-orange-600"},{label:"7",value:"7"},{label:"8",value:"8"},{label:"9",value:"9"},{label:"-",value:"-",color:"bg-gray-100 text-[#00695c]"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"},{label:"+",value:"+",color:"bg-gray-100 text-[#00695c]"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"=",action:m,color:"bg-[#00695c] text-white row-span-2 h-full"},{label:"0",value:"0",width:"col-span-2"},{label:".",value:"."}];return w.jsx(Xc,{children:w.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end justify-center sm:items-center p-4",children:[w.jsx(rr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),w.jsxs(rr.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden relative z-10 pb-6",children:[w.jsxs("div",{className:"bg-[#00695c] p-4 flex justify-between items-center text-white",children:[w.jsx("h2",{className:"text-lg font-bold",children:" "}),w.jsx("button",{onClick:e,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:w.jsx(Mr,{size:24})})]}),w.jsxs("div",{className:"bg-gray-50 p-6 text-right border-b-2 border-gray-100",children:[w.jsx("div",{className:"text-gray-500 text-sm h-6 font-medium",children:a!==""&&n!==a?n:""}),w.jsx("div",{className:"text-4xl font-bold text-gray-800 truncate h-12",children:n||"0"})]}),w.jsx("div",{className:"grid grid-cols-4 gap-3 p-4 direction-ltr",children:v.map((b,C)=>w.jsx("button",{onClick:()=>b.action?b.action():h(b.value),className:`
                  ${b.width||""} 
                  ${b.color||"bg-white text-gray-700 shadow-sm border border-gray-100 hover:bg-gray-50"} 
                  rounded-2xl p-4 text-xl font-bold transition-all active:scale-95 flex items-center justify-center
                `,children:b.label===""?w.jsx(A3,{size:24}):b.label},C))})]})]})})},vr=({label:t,icon:e,type:n="text",value:s,onChange:a,placeholder:l})=>w.jsxs("div",{children:[w.jsx("label",{className:"block text-[#00695c] text-xs font-bold mb-1 text-right px-1",children:t}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:n,value:s,onChange:a,placeholder:l,className:"w-full h-12 px-4 pl-10 rounded-xl border-2 border-[#00695c] focus:outline-none focus:ring-2 focus:ring-[#00695c]/50 text-right font-medium"}),w.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:w.jsx(e,{size:20})})]})]}),VT=({isOpen:t,onClose:e,onLogin:n,triggerMessage:s})=>{const[a,l]=X.useState("login"),[h,g]=X.useState(!1),[p,m]=X.useState({show:!1,message:"",type:"success"}),[v,b]=X.useState(""),[C,T]=X.useState(""),[R,P]=X.useState(""),[M,k]=X.useState({phone:"",password:"",confirmPassword:"",securityQuestion:"",securityAnswer:""});X.useEffect(()=>{t&&s&&l("register")},[t,s]);const I=["  ","  ","    ","  "," "];if(!t)return null;const A=(Z,xe="success")=>{m({show:!0,message:Z,type:xe})},j=()=>{k({phone:"",password:"",confirmPassword:"",securityQuestion:"",securityAnswer:""}),b(""),T(""),g(!1),P("")},U=()=>{j(),l("login"),e()},z=async Z=>{Z.preventDefault(),g(!0),b("");const{data:xe,error:ue}=await Ne.from("app_users").select("*").eq("username",M.phone).eq("password",M.password).single();g(!1),xe?(A("   "),n&&n(xe)):b("      ")},L=async Z=>{if(Z.preventDefault(),T(""),!M.phone||!M.password||!M.securityQuestion||!M.securityAnswer){A("     ","error");return}g(!0);const xe=Math.random().toString(36).substring(2,8).toUpperCase(),{data:ue,error:oe}=await Ne.from("app_users").insert([{username:M.phone,password:M.password,security_question:M.securityQuestion,security_answer:M.securityAnswer,activation_code:xe}]).select().single();g(!1),!oe&&ue?(P(xe),l("register-success")):(console.error(oe),T("             (  )"))},V=async Z=>{Z.preventDefault(),g(!0);const{data:xe}=await Ne.from("app_users").select("*").eq("username",M.phone).eq("security_question",M.securityQuestion).eq("security_answer",M.securityAnswer).single();g(!1),xe?l("forgot-reset"):A("   ","error")},K=async Z=>{if(Z.preventDefault(),M.password!==M.confirmPassword){A("   ","error");return}g(!0);const{error:xe}=await Ne.from("app_users").update({password:M.password}).eq("username",M.phone);g(!1),xe?A("   ","error"):(A("    "),setTimeout(()=>l("login"),1500))};return w.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[w.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:U}),w.jsx(Qs,{message:p.message,isVisible:p.show,onClose:()=>m({...p,show:!1}),type:p.type}),w.jsxs("div",{className:"bg-white w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden relative z-10 animate-in zoom-in duration-200",children:[w.jsxs("div",{className:"bg-[#00695c] text-white p-4 flex justify-between items-center",children:[w.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[a==="login"&&w.jsxs(w.Fragment,{children:[w.jsx(u2,{size:24}),"  "]}),a==="register"&&w.jsxs(w.Fragment,{children:[w.jsx(p2,{size:24}),"  "]}),a==="register-success"&&w.jsxs(w.Fragment,{children:[w.jsx(ad,{size:24}),"  "]}),(a==="forgot-check"||a==="forgot-reset")&&w.jsxs(w.Fragment,{children:[w.jsx(N3,{size:24}),"   "]})]}),w.jsx("button",{onClick:U,className:"p-1 hover:bg-white/20 rounded-full",children:w.jsx(Mr,{size:24})})]}),w.jsxs("div",{className:"p-6",children:[s&&a==="register"&&w.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-3 mb-4 text-center",children:w.jsx("p",{className:"text-yellow-800 text-sm font-bold leading-relaxed",children:s})}),a==="login"&&w.jsxs("form",{onSubmit:z,className:"flex flex-col gap-4",children:[v&&w.jsxs("div",{className:"bg-red-50 border-2 border-red-100 rounded-xl p-4 flex items-center gap-3 animate-in slide-in-from-top duration-200",children:[w.jsx("div",{className:"bg-red-100 p-2 rounded-full text-red-600 shrink-0",children:w.jsx(va,{size:20,strokeWidth:2.5})}),w.jsx("p",{className:"text-red-600 font-bold text-sm leading-tight text-right",children:v})]}),w.jsx(vr,{label:" ",icon:Vl,value:M.phone,onChange:Z=>{k({...M,phone:Z.target.value}),b("")}}),w.jsx(vr,{label:" ",icon:Oi,type:"password",value:M.password,onChange:Z=>{k({...M,password:Z.target.value}),b("")}}),w.jsx("button",{disabled:h,className:"w-full bg-[#00695c] text-white h-12 rounded-xl font-bold shadow-md hover:bg-[#005c4b] mt-2 active:scale-95 transition-transform",children:""}),w.jsxs("div",{className:"flex justify-between text-xs font-bold text-[#00695c] mt-2 px-1",children:[w.jsx("button",{type:"button",onClick:()=>{j(),l("register")},children:"  "}),w.jsx("button",{type:"button",onClick:()=>{j(),l("forgot-check")},children:"  "})]})]}),a==="register"&&w.jsxs("form",{onSubmit:L,className:"flex flex-col gap-4",children:[C&&w.jsxs("div",{className:"bg-red-50 border-2 border-red-100 rounded-xl p-4 flex items-center gap-3 animate-in slide-in-from-top duration-200",children:[w.jsx("div",{className:"bg-red-100 p-2 rounded-full text-red-600 shrink-0",children:w.jsx(va,{size:20,strokeWidth:2.5})}),w.jsx("p",{className:"text-red-600 font-bold text-sm leading-tight text-right",children:C})]}),w.jsx(vr,{label:" ",icon:Vl,value:M.phone,onChange:Z=>{k({...M,phone:Z.target.value}),T("")}}),w.jsx(vr,{label:" ",icon:Oi,type:"password",value:M.password,onChange:Z=>{k({...M,password:Z.target.value}),T("")}}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-[#00695c] text-xs font-bold mb-1 text-right px-1",children:" "}),w.jsxs("div",{className:"relative",children:[w.jsxs("select",{value:M.securityQuestion,onChange:Z=>k({...M,securityQuestion:Z.target.value}),className:"w-full h-12 px-4 pl-10 rounded-xl border-2 border-[#00695c] focus:outline-none focus:ring-2 focus:ring-[#00695c]/50 text-right font-medium bg-white appearance-none",children:[w.jsx("option",{value:"",children:" ..."}),I.map((Z,xe)=>w.jsx("option",{value:Z,children:Z},xe))]}),w.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",children:w.jsx(Q1,{size:20})})]})]}),w.jsx(vr,{label:" ",icon:pc,value:M.securityAnswer,onChange:Z=>k({...M,securityAnswer:Z.target.value})}),w.jsx("button",{disabled:h,className:"w-full bg-[#00695c] text-white h-12 rounded-xl font-bold shadow-md hover:bg-[#005c4b] mt-2 active:scale-95 transition-transform",children:""}),w.jsx("button",{type:"button",onClick:()=>l("login"),className:"text-xs font-bold text-gray-500 text-center mt-2",children:"  "})]}),a==="register-success"&&w.jsxs("div",{className:"flex flex-col items-center text-center py-4",children:[w.jsx(rr.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mb-6",children:w.jsx(ad,{size:64,className:"text-green-600",strokeWidth:3})}),w.jsx("h3",{className:"text-xl font-bold text-[#00695c] mb-4",children:"  !"}),w.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200 w-full mb-4",children:[w.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"    :"}),w.jsx("div",{className:"text-3xl font-black text-gray-800 tracking-widest select-all",children:R})]}),w.jsx("p",{className:"text-red-500 text-xs font-bold mb-6",children:"    ."}),w.jsx("button",{onClick:()=>l("login"),className:"w-full bg-[#00695c] text-white h-12 rounded-xl font-bold shadow-md hover:bg-[#005c4b] active:scale-95 transition-transform",children:"  "})]}),a==="forgot-check"&&w.jsxs("form",{onSubmit:V,className:"flex flex-col gap-4",children:[w.jsx(vr,{label:" ",icon:Vl,value:M.phone,onChange:Z=>k({...M,phone:Z.target.value})}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-[#00695c] text-xs font-bold mb-1 text-right px-1",children:" "}),w.jsxs("div",{className:"relative",children:[w.jsxs("select",{value:M.securityQuestion,onChange:Z=>k({...M,securityQuestion:Z.target.value}),className:"w-full h-12 px-4 pl-10 rounded-xl border-2 border-[#00695c] focus:outline-none focus:ring-2 focus:ring-[#00695c]/50 text-right font-medium bg-white appearance-none",children:[w.jsx("option",{value:"",children:" ..."}),I.map((Z,xe)=>w.jsx("option",{value:Z,children:Z},xe))]}),w.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",children:w.jsx(Q1,{size:20})})]})]}),w.jsx(vr,{label:" ",icon:pc,value:M.securityAnswer,onChange:Z=>k({...M,securityAnswer:Z.target.value})}),w.jsx("button",{disabled:h,className:"w-full bg-[#00695c] text-white h-12 rounded-xl font-bold shadow-md hover:bg-[#005c4b] mt-2 active:scale-95 transition-transform",children:""}),w.jsx("button",{type:"button",onClick:()=>l("login"),className:"text-xs font-bold text-gray-500 text-center mt-2",children:""})]}),a==="forgot-reset"&&w.jsxs("form",{onSubmit:K,className:"flex flex-col gap-4",children:[w.jsx("div",{className:"bg-green-50 text-green-700 p-2 rounded-lg text-xs font-bold text-center mb-2",children:"  .    ."}),w.jsx(vr,{label:"  ",icon:Oi,type:"password",value:M.password,onChange:Z=>k({...M,password:Z.target.value})}),w.jsx(vr,{label:"  ",icon:Oi,type:"password",value:M.confirmPassword,onChange:Z=>k({...M,confirmPassword:Z.target.value})}),w.jsx("button",{disabled:h,className:"w-full bg-[#00695c] text-white h-12 rounded-xl font-bold shadow-md hover:bg-[#005c4b] mt-2 active:scale-95 transition-transform",children:""})]})]})]})]})},zT=({onBack:t})=>{const e=({title:n,icon:s,children:a})=>w.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 mb-4",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-2 text-[#00695c]",children:[w.jsx(s,{size:20}),w.jsx("h3",{className:"font-bold text-lg",children:n})]}),w.jsx("p",{className:"text-gray-600 text-sm leading-relaxed text-justify",children:a})]});return w.jsxs("div",{className:"h-screen flex flex-col bg-[#FFF9C4] overflow-hidden font-sans",children:[w.jsxs("div",{className:"bg-[#00695c] text-white h-16 flex items-center px-4 shadow-lg shrink-0 rounded-b-2xl z-10",children:[w.jsx("button",{onClick:t,className:"p-2 hover:bg-[#005c4b] rounded-xl transition-colors active:scale-95",children:w.jsx(sr,{size:24,strokeWidth:2.5})}),w.jsx("h1",{className:"text-xl font-bold flex-1 text-center ml-10",children:" "})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pb-20 custom-scrollbar",children:[w.jsx(e,{title:" ",icon:c2,children:"               .           ."}),w.jsx(e,{title:" ",icon:_3,children:"      .               ."}),w.jsx(e,{title:" ",icon:L3,children:"          .          ."}),w.jsx(e,{title:" ",icon:Oi,children:"                    ."})]})]})},WT=({onBack:t})=>{const[e,n]=X.useState({show:!1,action:null,title:"",message:""}),[s,a]=X.useState({show:!1,message:""}),[l,h]=X.useState(!1),g=async(m,v)=>{h(!0);let b=null;if(m==="treasury"){const{error:C}=await Ne.from("treasury_balances").update({amount:0}).neq("id",0);b=C}else if(m==="all")await Ne.from("sales").delete().neq("id",0),await Ne.from("expenses").delete().neq("id",0),await Ne.from("products").delete().neq("id",0),await Ne.from("categories").delete().neq("id",0),await Ne.from("treasury_balances").update({amount:0}).neq("id",0);else{const{error:C}=await Ne.from(m).delete().neq("id",0);b=C}h(!1),n({show:!1}),b?alert("   "):a({show:!0,message:v})},p=({title:m,icon:v,color:b,onClick:C})=>w.jsxs("button",{onClick:C,disabled:l,className:"bg-white w-full p-4 rounded-2xl shadow-sm border border-gray-100 flex items-center justify-between group active:scale-[0.98] transition-all mb-3",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${b}15`,color:b},children:w.jsx(v,{size:24,strokeWidth:2.5})}),w.jsx("span",{className:"font-bold text-gray-800 text-lg",children:m})]}),w.jsx(Dr,{size:20,className:"text-gray-300 group-hover:text-red-500 transition-colors"})]});return w.jsxs("div",{className:"h-screen flex flex-col bg-[#FFF9C4] overflow-hidden font-sans",children:[w.jsx(Qs,{message:s.message,isVisible:s.show,onClose:()=>a({...s,show:!1})}),w.jsx(za,{isOpen:e.show,title:e.title,message:e.message,onConfirm:()=>g(e.action,e.successMsg),onCancel:()=>n({show:!1})}),w.jsxs("div",{className:"bg-[#00695c] text-white h-16 flex items-center px-4 shadow-lg shrink-0 rounded-b-2xl z-10",children:[w.jsx("button",{onClick:t,className:"p-2 hover:bg-[#005c4b] rounded-xl transition-colors active:scale-95",children:w.jsx(sr,{size:24,strokeWidth:2.5})}),w.jsx("h1",{className:"text-xl font-bold flex-1 text-center ml-10",children:" "})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pb-20 custom-scrollbar",children:[w.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6 flex gap-3 items-start",children:[w.jsx(va,{className:"text-red-500 shrink-0"}),w.jsx("p",{className:"text-red-700 text-sm font-bold leading-relaxed",children:":       .    ."})]}),w.jsx(p,{title:" ",icon:wl,color:"#d32f2f",onClick:()=>n({show:!0,action:"products",title:" ",message:"      ",successMsg:"   "})}),w.jsx(p,{title:" ",icon:wl,color:"#f57c00",onClick:()=>n({show:!0,action:"categories",title:" ",message:"      ",successMsg:"   "})}),w.jsx(p,{title:" ",icon:wl,color:"#1976d2",onClick:()=>n({show:!0,action:"sales",title:" ",message:"       ",successMsg:"   "})}),w.jsx(p,{title:"  ()",icon:wl,color:"#7b1fa2",onClick:()=>n({show:!0,action:"treasury",title:" ",message:"       ",successMsg:"   "})}),w.jsx("div",{className:"my-4 border-t border-gray-300/50"}),w.jsxs("button",{onClick:()=>n({show:!0,action:"all",title:"  ( )",message:" :     (   )   .    ",successMsg:"   "}),className:"bg-red-600 text-white w-full p-4 rounded-2xl shadow-lg flex items-center justify-center gap-3 active:scale-[0.98] transition-all",children:[w.jsx(Dr,{size:24}),w.jsx("span",{className:"font-bold text-lg",children:"  "})]})]})]})},HT=({onBack:t})=>{const[e,n]=X.useState({barcodeSound:!0,clickSound:!0,currency:"SDG"});X.useEffect(()=>{const g=localStorage.getItem("appSettings");g&&n(JSON.parse(g))},[]);const s=g=>{n(g),localStorage.setItem("appSettings",JSON.stringify(g)),g.clickSound&&Xi("click")},a=g=>{s({...e,[g]:!e[g]})},l=g=>{s({...e,currency:g.target.value})},h=({label:g,value:p,onChange:m})=>w.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 flex items-center justify-between mb-3",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${p?"bg-[#00695c]/10 text-[#00695c]":"bg-gray-100 text-gray-400"}`,children:p?w.jsx(H3,{size:20}):w.jsx(G3,{size:20})}),w.jsx("span",{className:"font-bold text-gray-800",children:g})]}),w.jsx("button",{onClick:m,className:`w-14 h-8 rounded-full p-1 transition-colors duration-300 ${p?"bg-[#00695c]":"bg-gray-300"}`,children:w.jsx("div",{className:`w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300 ${p?"-translate-x-6":"translate-x-0"}`})})]});return w.jsxs("div",{className:"h-screen flex flex-col bg-[#FFF9C4] overflow-hidden font-sans",children:[w.jsxs("div",{className:"bg-[#00695c] text-white h-16 flex items-center px-4 shadow-lg shrink-0 rounded-b-2xl z-10",children:[w.jsx("button",{onClick:t,className:"p-2 hover:bg-[#005c4b] rounded-xl transition-colors active:scale-95",children:w.jsx(sr,{size:24,strokeWidth:2.5})}),w.jsx("h1",{className:"text-xl font-bold flex-1 text-center ml-10",children:""})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pb-20 custom-scrollbar",children:[w.jsx("h3",{className:"text-[#00695c] font-bold text-sm mb-3 px-2 border-r-4 border-[#00695c]",children:""}),w.jsx(h,{label:" ",value:e.barcodeSound,onChange:()=>a("barcodeSound")}),w.jsx(h,{label:"  ",value:e.clickSound,onChange:()=>a("clickSound")}),w.jsx("h3",{className:"text-[#00695c] font-bold text-sm mb-3 mt-6 px-2 border-r-4 border-[#00695c]",children:""}),w.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center",children:w.jsx(T3,{size:20})}),w.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),w.jsxs("select",{value:e.currency,onChange:l,className:"bg-gray-50 border border-gray-200 text-gray-800 text-sm rounded-lg focus:ring-[#00695c] focus:border-[#00695c] block p-2.5 font-bold outline-none",children:[w.jsx("option",{value:"SDG",children:" "}),w.jsx("option",{value:"EGP",children:" "}),w.jsx("option",{value:"SAR",children:" "}),w.jsx("option",{value:"AED",children:" "})]})]})]})]})},GT=({onBack:t,currentUser:e})=>w.jsxs("div",{className:"h-screen flex flex-col bg-[#FFF9C4] overflow-hidden font-sans",children:[w.jsxs("div",{className:"bg-[#00695c] text-white h-16 flex items-center px-4 shadow-lg shrink-0 rounded-b-2xl z-10",children:[w.jsx("button",{onClick:t,className:"p-2 hover:bg-[#005c4b] rounded-xl transition-colors active:scale-95",children:w.jsx(sr,{size:24,strokeWidth:2.5})}),w.jsx("h1",{className:"text-xl font-bold flex-1 text-center ml-10",children:""})]}),w.jsxs("div",{className:"flex-1 p-6 flex flex-col items-center pt-10",children:[w.jsx("div",{className:"w-24 h-24 bg-[#00695c]/10 rounded-full flex items-center justify-center mb-6 text-[#00695c]",children:w.jsx(V3,{size:48})}),w.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:e?e.username:""}),w.jsx("p",{className:"text-gray-500 font-medium",children:e?"  ":""}),w.jsx("div",{className:"mt-10 p-4 bg-white rounded-xl shadow-sm border border-gray-100 w-full max-w-sm text-center",children:w.jsx("p",{className:"text-gray-400 text-sm",children:"      ."})})]})]}),XT=({onBack:t})=>{const[e,n]=X.useState([]),[s,a]=X.useState(!1),[l,h]=X.useState(!1),[g,p]=X.useState({show:!1,message:""}),[m,v]=X.useState({show:!1,id:null}),[b,C]=X.useState({min:"",max:""}),[T,R]=X.useState({name:"",salary:"",job_title:"",start_date:""});X.useEffect(()=>{P();const j=new Date().toISOString().slice(0,16),U=new Date;U.setDate(U.getDate()-7);const z=U.toISOString().slice(0,16);C({min:z,max:j});const L=setInterval(()=>{n(V=>[...V])},1e3);return()=>clearInterval(L)},[]);const P=async()=>{const{data:A}=await Ne.from("workers").select("*").order("created_at",{ascending:!1});A&&n(A)},M=async A=>{if(A.preventDefault(),!T.name||!T.salary||!T.start_date)return;h(!0);const{error:j}=await Ne.from("workers").insert([{name:T.name,salary:T.salary,job_title:T.job_title,start_date:new Date(T.start_date).toISOString()}]);h(!1),j?alert("   "):(p({show:!0,message:"   "}),a(!1),R({name:"",salary:"",job_title:"",start_date:""}),P())},k=async()=>{if(!m.id)return;const{error:A}=await Ne.from("workers").delete().eq("id",m.id);A||(p({show:!0,message:"   "}),n(e.filter(j=>j.id!==m.id))),v({show:!1,id:null})},I=A=>{const j=new Date(A),U=new Date;let z=new Date(j);for(;z<U;)z.setDate(z.getDate()+30);const L=z-U;if(L<=0)return"00:00:00:00";const V=Math.floor(L/(1e3*60*60*24)),K=Math.floor(L%(1e3*60*60*24)/(1e3*60*60)),Z=Math.floor(L%(1e3*60*60)/(1e3*60)),xe=Math.floor(L%(1e3*60)/1e3);return`${String(V).padStart(2,"0")}:${String(K).padStart(2,"0")}:${String(Z).padStart(2,"0")}:${String(xe).padStart(2,"0")}`};return w.jsxs("div",{className:"h-screen flex flex-col bg-[#FFF9C4] overflow-hidden font-sans relative",children:[w.jsx(Qs,{message:g.message,isVisible:g.show,onClose:()=>p({...g,show:!1})}),w.jsx(za,{isOpen:m.show,title:" ",message:"      ",onConfirm:k,onCancel:()=>v({show:!1,id:null})}),w.jsxs("div",{className:"bg-[#00695c] text-white h-16 flex items-center px-4 shadow-lg shrink-0 rounded-b-2xl z-10",children:[w.jsx("button",{onClick:t,className:"p-2 hover:bg-[#005c4b] rounded-xl transition-colors active:scale-95",children:w.jsx(sr,{size:24,strokeWidth:2.5})}),w.jsx("h1",{className:"text-xl font-bold flex-1 text-center ml-10",children:" "})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-4 pb-20 custom-scrollbar",children:e.length===0?w.jsxs("div",{className:"text-center text-gray-400 mt-20 font-medium flex flex-col items-center",children:[w.jsx("div",{className:"w-20 h-20 bg-[#00695c]/10 rounded-full flex items-center justify-center mb-4 text-[#00695c]",children:w.jsx(ld,{size:40})}),"   "]}):w.jsx("div",{className:"flex flex-col gap-3",children:e.map(A=>w.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 relative group",children:[w.jsx("button",{onClick:()=>v({show:!0,id:A.id}),className:"absolute top-4 left-4 text-gray-300 hover:text-red-500 transition-colors",children:w.jsx(Dr,{size:18})}),w.jsxs("div",{className:"flex justify-between items-start mb-1 pl-8",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-50 flex items-center justify-center text-orange-600 shadow-sm shrink-0",children:w.jsx(ld,{size:20,strokeWidth:2})}),w.jsxs("div",{children:[w.jsx("h3",{className:"font-bold text-gray-800 text-lg leading-tight",children:A.name}),w.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 font-medium mt-1",children:[w.jsx(v3,{size:12})," ",A.job_title||" "]})]})]}),w.jsxs("div",{className:"text-left",children:[w.jsx("span",{className:"font-bold text-[#00695c] text-lg dir-ltr block",children:Number(A.salary).toLocaleString()}),w.jsx("span",{className:"text-[10px] text-gray-400 font-bold block text-center -mt-1",children:"."})]})]}),w.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 font-medium mb-3 mt-2 pr-14",children:[w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx(l2,{size:14,className:"text-orange-500"}),w.jsx("span",{className:"dir-ltr",children:new Date(A.start_date).toLocaleDateString("en-GB")})]}),w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx(J1,{size:14,className:"text-orange-500"}),w.jsx("span",{className:"dir-ltr",children:new Date(A.start_date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]}),w.jsxs("div",{className:"bg-[#00695c] rounded-xl p-2 text-white text-center shadow-inner mt-2",children:[w.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1 opacity-80 text-[10px] font-bold",children:[w.jsx(J1,{size:12}),w.jsx("span",{children:"  "})]}),w.jsx("div",{className:"text-xl font-black tracking-widest font-mono dir-ltr",children:I(A.start_date)})]})]},A.id))})}),w.jsx("button",{onClick:()=>a(!0),className:"absolute bottom-6 left-6 w-14 h-14 bg-[#e65100] text-white rounded-2xl shadow-xl flex items-center justify-center hover:bg-[#ef6c00] active:scale-90 transition-all z-20",children:w.jsx(to,{size:32,strokeWidth:3})}),s&&w.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center p-4 pt-24",children:[w.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>a(!1)}),w.jsxs("div",{className:"bg-white w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden relative z-10 animate-in slide-in-from-top duration-300",children:[w.jsxs("div",{className:"bg-[#e65100] text-white p-4 flex justify-between items-center",children:[w.jsx("h2",{className:"text-lg font-bold",children:"  "}),w.jsx("button",{onClick:()=>a(!1),className:"p-1 hover:bg-white/20 rounded-full",children:w.jsx(Mr,{size:24})})]}),w.jsxs("form",{onSubmit:M,className:"p-5 flex flex-col gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-[#e65100] text-xs font-bold mb-1 text-right px-1",children:" "}),w.jsx("input",{type:"text",value:T.name,onChange:A=>R({...T,name:A.target.value}),className:"w-full h-12 px-4 rounded-xl border-2 border-[#e65100] focus:outline-none focus:ring-2 focus:ring-[#e65100]/50 text-right font-medium"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-[#e65100] text-xs font-bold mb-1 text-right px-1",children:" "}),w.jsx("input",{type:"text",value:T.job_title,onChange:A=>R({...T,job_title:A.target.value}),className:"w-full h-12 px-4 rounded-xl border-2 border-[#e65100] focus:outline-none focus:ring-2 focus:ring-[#e65100]/50 text-right font-medium"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-[#e65100] text-xs font-bold mb-1 text-right px-1",children:" "}),w.jsx("input",{type:"number",value:T.salary,onChange:A=>R({...T,salary:A.target.value}),className:"w-full h-12 px-4 rounded-xl border-2 border-[#e65100] focus:outline-none focus:ring-2 focus:ring-[#e65100]/50 text-right font-bold text-lg"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-[#e65100] text-xs font-bold mb-1 text-right px-1",children:"  "}),w.jsx("input",{type:"datetime-local",value:T.start_date,min:b.min,max:b.max,onChange:A=>R({...T,start_date:A.target.value}),className:"w-full h-12 px-4 rounded-xl border-2 border-[#e65100] focus:outline-none focus:ring-2 focus:ring-[#e65100]/50 text-right font-medium bg-white"}),w.jsx("p",{className:"text-[10px] text-gray-400 mt-1 mr-1",children:"      7   ."})]}),w.jsxs("button",{type:"submit",disabled:l,className:"w-full bg-[#e65100] text-white h-14 rounded-xl font-bold text-lg shadow-md hover:bg-[#ef6c00] flex items-center justify-center gap-2 mt-2",children:[w.jsx(lo,{size:24}),w.jsx("span",{children:" "})]})]})]})]})]})},KT=({isOpen:t,onClose:e,currentUser:n,onUpgradeSuccess:s})=>{const[a,l]=X.useState(""),[h,g]=X.useState(!1),[p,m]=X.useState(2);if(!t)return null;const v=[{id:1,name:"",duration:" ",price:" ",icon:f2},{id:2,name:"",duration:"12 ",price:" ",icon:Ul,featured:!0},{id:3,name:"6 ",duration:" ",price:" ",icon:pc}],b=async()=>{a&&(g(!0),setTimeout(async()=>{var C;if(a.toUpperCase().startsWith("PRO")||a.length>3)if(n){const{error:T}=await Ne.from("app_users").update({is_pro:!0,subscription_plan:(C=v.find(R=>R.id===p))==null?void 0:C.name,subscription_end_date:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString()}).eq("id",n.id);T?alert("   "):(s&&s(),alert("   Pro !    ."),e())}else alert("     ");else alert("   ");g(!1)},1500))};return w.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[w.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),w.jsxs(rr.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-gradient-to-br from-gray-900 to-gray-800 w-full max-w-md rounded-3xl shadow-2xl overflow-hidden relative z-10 border border-yellow-500/30",children:[w.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-32 bg-yellow-500/20 blur-3xl rounded-full pointer-events-none"}),w.jsxs("div",{className:"p-6 relative",children:[w.jsx("button",{onClick:e,className:"absolute top-4 left-4 text-gray-400 hover:text-white transition-colors",children:w.jsx(Mr,{size:24})}),w.jsxs("div",{className:"text-center mb-8 mt-2",children:[w.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-b from-yellow-300 to-yellow-600 shadow-lg mb-4 animate-pulse",children:w.jsx(Ul,{size:32,className:"text-white",fill:"currentColor"})}),w.jsx("h2",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 via-yellow-400 to-yellow-200",children:"  Pro"}),w.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"      "})]}),w.jsx("div",{className:"grid grid-cols-3 gap-3 mb-8",children:v.map(C=>w.jsxs("button",{onClick:()=>m(C.id),className:`relative rounded-xl p-3 flex flex-col items-center gap-2 border transition-all duration-300 ${p===C.id?"bg-yellow-500/10 border-yellow-500 shadow-[0_0_15px_rgba(234,179,8,0.3)]":"bg-gray-800/50 border-gray-700 hover:bg-gray-700"}`,children:[C.featured&&w.jsx("div",{className:"absolute -top-3 bg-yellow-500 text-black text-[10px] font-bold px-2 py-0.5 rounded-full",children:" "}),w.jsx(C.icon,{size:20,className:p===C.id?"text-yellow-400":"text-gray-500"}),w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:`text-sm font-bold ${p===C.id?"text-white":"text-gray-300"}`,children:C.name}),w.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:C.duration})]})]},C.id))}),w.jsxs("div",{className:"space-y-3 mb-8 bg-gray-800/50 p-4 rounded-2xl border border-gray-700",children:[w.jsxs("div",{className:"flex items-center gap-3 text-gray-300 text-sm",children:[w.jsx(ad,{size:16,className:"text-yellow-500"}),w.jsx("span",{children:"    "})]}),w.jsxs("div",{className:"flex items-center gap-3 text-gray-300 text-sm",children:[w.jsx(X3,{size:16,className:"text-yellow-500"}),w.jsx("span",{children:"   (Auto-Sync)"})]}),w.jsxs("div",{className:"flex items-center gap-3 text-gray-300 text-sm",children:[w.jsx(pc,{size:16,className:"text-yellow-500"}),w.jsx("span",{children:"   "})]})]}),w.jsxs("div",{className:"space-y-3",children:[w.jsx("label",{className:"block text-yellow-500 text-xs font-bold text-right px-1",children:"  "}),w.jsx("input",{type:"text",value:a,onChange:C=>l(C.target.value),placeholder:"   ...",className:"w-full h-12 px-4 rounded-xl bg-gray-800 border-2 border-gray-600 focus:border-yellow-500 focus:outline-none text-white text-right placeholder-gray-500 font-mono tracking-widest text-center uppercase"}),w.jsxs("button",{onClick:b,disabled:h||!a,className:"w-full h-14 bg-gradient-to-r from-yellow-600 to-yellow-500 hover:from-yellow-500 hover:to-yellow-400 text-black font-bold text-lg rounded-xl shadow-lg transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[h?" ...":"  ",!h&&w.jsx(Ul,{size:20,fill:"currentColor"})]})]})]})]})]})};function qT(){const[t,e]=X.useState("dashboard"),[n,s]=X.useState(!1),[a,l]=X.useState(!1),[h,g]=X.useState(""),[p,m]=X.useState(!1),[v,b]=X.useState(null);X.useEffect(()=>{const A=localStorage.getItem("app_user");A&&b(JSON.parse(A))},[]);const C=A=>{b(A),localStorage.setItem("app_user",JSON.stringify(A)),l(!1),g("")},T=()=>{b(null),localStorage.removeItem("app_user"),e("dashboard")},R=(A="")=>{g(A),l(!0)},P=A=>{b(A),localStorage.setItem("app_user",JSON.stringify(A))},M=[...C_,...A_],k=A=>{Xi("click"),A===""?e("add-category"):A===""?e("add-product"):A===""?e("treasury"):A===""?e("expenses"):A===""?e("sales"):A===" "?e("inventory-reports"):A===" "?s(!0):A===""?e("settings"):A===" "?e("workers"):console.log(`Clicked ${A}`)},I=A=>{e(A)};return t==="add-category"?w.jsx(oT,{onBack:()=>e("dashboard"),currentUser:v,onOpenRegistration:R}):t==="add-product"?w.jsx(PT,{onBack:()=>e("dashboard"),currentUser:v,onOpenRegistration:R,onOpenPro:()=>m(!0)}):t==="treasury"?w.jsx(jT,{onBack:()=>e("dashboard")}):t==="expenses"?w.jsx(LT,{onBack:()=>e("dashboard")}):t==="sales"?w.jsx(BT,{onBack:()=>e("dashboard")}):t==="inventory-reports"?w.jsx(FT,{onBack:()=>e("dashboard")}):t==="privacy-policy"?w.jsx(zT,{onBack:()=>e("dashboard")}):t==="system-data"?w.jsx(WT,{onBack:()=>e("dashboard")}):t==="settings"?w.jsx(HT,{onBack:()=>e("dashboard")}):t==="edit-profile"?w.jsx(GT,{onBack:()=>e("dashboard"),currentUser:v,onUpdateUser:P}):t==="workers"?w.jsx(XT,{onBack:()=>e("dashboard")}):w.jsxs("div",{className:"min-h-screen bg-[#FFF9C4] flex flex-col font-sans",children:[w.jsx(UT,{isOpen:n,onClose:()=>s(!1)}),w.jsx(VT,{isOpen:a,onClose:()=>l(!1),onLogin:C,triggerMessage:h}),w.jsx(KT,{isOpen:p,onClose:()=>m(!1),currentUser:v,onUpgradeSuccess:()=>{const A={...v,is_pro:!0};P(A)}}),w.jsx(v_,{onOpenRegistration:()=>R(),onNavigate:I,currentUser:v,onLogout:T,onOpenPro:()=>m(!0)}),w.jsx("main",{className:"flex-1 w-full max-w-md mx-auto py-6 px-4 pb-20",children:w.jsx("div",{className:"grid grid-cols-2 gap-5 content-start",children:M.map(A=>w.jsx(E_,{title:A.title,icon:A.icon,color:A.color,onClick:()=>k(A.title)},A.id))})}),w.jsx(b_,{})]})}o2(document.getElementById("root")).render(w.jsx(X.StrictMode,{children:w.jsx(qT,{})}));
